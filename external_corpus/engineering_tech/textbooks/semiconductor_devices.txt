Semiconductor Devices:

Theory and Application. 2E

                                             James M. Fiore
2
         Semiconductor Devices:

           Theory and Application. 2E

                                                                  by
                                                         James M. Fiore
                                            Version 2.0.9, 18 November 2025

3
 This Semiconductor Devices: Theory and Application. 2E, by James M. Fiore is copyright James M. Fiore,
                              and released under the terms of a Creative Commons license:

               This work is freely redistributable for non-commercial use, share-alike with attribution
              Device data sheets and other product information are copyright by their respective owners

                                         Published by James M. Fiore via dissidents
                                                    ISBN13: 978-1796543537

For more information or feedback, contact:
James Fiore, Professor Emeritus
oer@jimfiore.org
jfiore@mvcc.edu
For the latest revisions, related titles, and links to low cost print versions, go to:
www.mvcc.edu/jfiore or my mirror sites www.dissidents.com and www.jimfiore.org
YouTube Channel: Electronics with Professor Fiore
Cover art, Ride, by the author

4
Preface

Welcome to the second edition of Semiconductor Devices, an open educational resource (OER). The goal of this
text, as its name implies, is to allow the reader to become proficient in the analysis and design of circuits
utilizing discrete semiconductor devices. It progresses from basic diodes through bipolar and field effect
transistors. The text is intended for use in a first or second year course on semiconductors at the Associate or
Baccalaureate level. In order to make effective use of this text, students should have already taken coursework
in basic DC and AC circuits, and have a solid background in algebra and trigonometry along with exposure to
phasors. Calculus is used in certain sections of the text but for the most part it is used for equation derivations
and proofs, and is kept to a minimum. For students without a calculus background these sections may be
skipped without a loss of continuity.

An OER companion laboratory manual is also available. It features nearly 30 exercises that parallel the topics
presented in this text. For continued study, a follow-on OER text and lab manual, Operational Amplifiers and
Linear Integrated Circuits, Third Edition is available. Several other electrical OER titles are available as well.

I cannot say enough about the emerging Open Educational Resource movement and I encourage budding
authors to consider this route. While there are (generally) no royalties to be found, having complete control over
your own work (versus the "work for hire" classification of typical contracts) is not to be undervalued. Neither
should contributions to the profession nor the opportunity to work with colleagues be dismissed. Given the
practical aspects of the society in which we live, I am not suggesting that people "work for free". Rather,
because part of the mission of institutes of higher learning is to promote and disseminate formalized instruction
and information, it is incumbent on those institutions to support their faculty in said quest, whether that be in the
form of sabbaticals, release time, stipends or the like. It is also my opinion that no one should be deprived of a
higher education due to lack of funds. A society that truly cares for its citizens would institute free college
tuition.

If you have any questions regarding the text or lab manual, or are interested in contributing to the project, do not
hesitate to contact me. Finally, please be aware that the most recent versions of all of my OER texts and manuals
may be found at my MVCC web site as well as my mirror site: www.dissidents.com

Acknowledgements

For their continued support, my family and friends. For their input on draft versions, my colleagues (esp. Ben
Glallard, Hill Bunt, Deb Bocker, Hal Paulko, Thom Timas) and students. For on-going sanity reassurance,
Bernie Sanders and Mike Lofgren. For unintentional diversionary humor elicitation, Wally and pals.

Finally, a serious thank you, thank you, thank you to all of the people who have created useful software and
other OER tools without which this project would have been impossible. When we each do a little, we all gain a
lot. This text was created using several free and open software applications including Open Office and Dia.
Some graphs and device curves were created using SciDAVis. Screen imagery was often manipulated though the
use of XnView. The free TINA-TI circuit simulator was used in Chapter 17, new for the second edition.

- Jim Fiore, 2017/2022

5
                                                             For Karen

                                           

                                               Does humor belong in academia?

6
Table of Contents

Chapter 1: Semiconductor Fundamentals                 14

1.0 Chapter Objectives .    .          .  .  .  .  .  14
1.1 Introduction      .     .          .  .  .  .  .  14

   First, a Little History

   Variable Naming Convention

1.2 Atomic Structure .      .          .  .  .  .  .  16

1.3 Crystals .        .     .          .  .  .  .  .  20

1.4 Doped Materials .       .          .  .  .  .  .  23

   N-Type Material

   P-Type Material

Summary .             .     .          .  .  .  .  .  27

Review Questions .          .          .  .  .  .  .  27

Chapter 2: PN Junctions and Diodes                    29

2.0 Chapter Objectives .    .          .  .  .  .  .  29
2.1 Introduction      .     .          .  .  .  .  .  29

2.2 The PN Junction .       .          .  .  .  .  .  30

   Forward-Bias

   Reverse-Bias

   Shockley Equation

2.3 Diode Data Sheet Interpretation .     .  .  .  .  35
2.4 Diode Circuit Models    .          .  .  .  .  .  39

2.5 Other Types of Diodes .            .  .  .  .  .  47

   Zener Diode

   Light Emitting Diode and Photodiode

   Schottky and Varactor Diodes

Summary .             .     .          .  .  .  .  .  55
Review Questions .          .          .  .  .  .  .  55

Problem Set .         .     .          .  .  .  .  .  55

Chapter 3: Diode Applications                         63

3.0 Chapter Objectives .    .          .  .  .  .  .  63
3.1 Introduction      .     .          .  .  .  .  .  63

3.2 Rectification     .     .          .  .  .  .  .  63

   Half-wave Rectification

   A Note Regarding Transformers

   Smoothing (Filtering) the Output

   Full-wave Rectification

   Full-wave Bridge With Dual Outputs

   Zener Regulation

7
3.3 Clippers .        .        .        .  .    .  .  .  80

3.4 Clampers .        .        .        .  .    .  .  .  83

Summary .             .        .        .  .    .  .  .  86
Review Questions .             .        .  .    .  .  .  86

Problem Set .         .        .        .  .    .  .  .  87

Chapter 4: Bipolar Junction Transistors (BJTs)           90

4.0 Chapter Objectives .       .        .  .    .  .  .  90
4.1 Introduction      .        .        .  .    .  .  .  90

4.2 The Bipolar Junction Transistor .      .    .  .  .  90

   A Simple Two-Diode Model

   Biasing the BJT

   The PNP Bipolar Junction Transistor

4.3 BJT Collector Curves.      .        .  .    .  .  .  95

   Rise in  and Early Voltage

4.4 BJT Data Sheet Interpretation .        .    .  .  .  98
4.5 Ebers-Moll Model .         .        .  .    .  .  .  101

    Variation Issues

4.6 DC Load Lines .            .        .  .    .  .  .  104

4.7 BJT Switching and Driver Applications .     .  .  .  106

   The Saturating Switch

   The Non-Saturating Driver

   The Zener Follower

Summary .             .        .        .  .    .  .  .  111
Review Questions .             .        .  .    .  .  .  112

Problem Set .         .        .        .  .    .  .  .  112

Chapter 5: BJT Biasing                                   116

5.0 Chapter Objectives .       .        .  .    .  .  .  116
5.1 Introduction      .        .        .  .    .  .  .  116

5.2 The Need For Biasing .              .  .    .  .  .  116
5.3 Two-Supply Emitter Bias .           .  .    .  .  .  117

   Verification of Stability

   PNP Two-Supply Emitter Bias

5.4 Voltage Divider Bias       .        .  .    .  .  .  123

   Verification of Stability

   PNP Voltage Divider Bias    .        .  .    .     .  130
5.5 Feedback Biasing .                             .

   Collector Feedback Bias

   Emitter Feedback Bias

   Combination Feedback Bias

8
Summary .              .  .      .             .  .  .  .  135
Review Questions .        .      .             .  .  .  .  135

Problem Set .          .  .      .             .  .  .  .  136

Chapter 6: Amplifier Concepts                              141

6.0 Chapter Objectives .  .      .             .  .  .  .  141
6.1 Introduction       .  .      .             .  .  .  .  141

6.2 Amplifier Model .     .      .             .  .  .  .  141

   Loading Effects

6.3 Compliance and Distortion .  .             .  .  .  .  144
6.4 Frequency Response and Noise .             .  .  .  .  149

6.5 Miller's Theorem. .   .      .             .  .  .  .  151
Summary .              .  .      .             .  .  .  .  154

Review Questions .        .      .             .  .  .  .  155
Problem Set .          .  .      .             .  .  .  .  155

Chapter 7: BJT Small Signal Amplifiers                     158

7.0 Chapter Objectives .  .      .             .  .  .  .  158

7.1 Introduction       .  .      .             .  .  .  .  158
7.2 Simplified AC Model of the BJT .           .  .  .  .  159

7.3 Common Emitter Amplifier .   .             .  .  .  .  162

   Voltage Gain

   Input Impedance

   Output Impedance

   Power Supply Bypass and Decoupling

7.4 Common Collector Amplifier   .             .  .  .  .  175

   Voltage Gain

   Input Impedance

   Output Impedance

   A High Impedance Source: The Guitar Pickup

   The Darlington Pair

   The Phase Splitter

7.5 Common Base Amplifier .      .             .  .  .  .  186

   Voltage Gain

   Input Impedance

   Output Impedance

7.6 Multi-Stage Amplifiers .     .             .  .  .  .  188
   Direct Coupling

Summary .              .  .      .             .  .  .  .  191
Review Questions .        .      .             .  .  .  .  191

Problem Set .          .  .      .             .  .  .  .  192

9
Chapter 8: BJT Class A Power Amplifiers                      199

8.0 Chapter Objectives .       .         .  .     .    .  .  199
8.1 Introduction        .      .         .  .     .    .  .  199

8.2 Amplifier Classes .        .         .  .     .    .  .  199
8.3 Class A Operation and Load Lines .      .     .    .  .  200

8.4 Loudspeakers .             .         .  .     .    .  .  211

    Loudspeaker Impedance

8.5 Power Transistor Data Sheet Interpretation .  .    .  .  216

    Power Derating

8.6 Heat Sinks .        .      .         .  .     .    .  .  220

    Thermal Resistance

Summary .               .      .         .  .     .    .  .  226
Review Questions .             .         .  .     .    .  .  226

Problem Set .           .      .         .  .     .    .  .  226

Chapter 9: BJT Class B Power Amplifiers                      231

9.0 Chapter Objectives .       .         .  .     .    .  .  231
9.1 Introduction        .      .         .  .     .    .  .  231

9.2 The Class B Configuration .          .  .     .    .  .  232

    Class AB Operation

    The Current Mirror

    Class B Circuit Maximums

    Class B Power Dissipation

    Class B Efficiency

9.3 Extensions and Refinements           .  .     .    .  .  251
    Current Limiting

    High Current Gain Configurations
    Current Sharing

    VBE Multiplier and Miller Capacitor
    Bridging

    Power Supply Bypassing                        .
Summary .               .      .         .  .          .  .  259

Review Questions .             .         .  .     .    .  .  260
Problem Set .           .      .         .  .     .    .  .  260

Chapter 10: Junction Field Effect Transistors (JFETs)        266

10.0 Chapter Objectives        .         .  .     .    .  .  266

10.1 Introduction .            .         .  .     .    .  .  266
10.2 JFET Internals .          .         .  .     .    .  .  267

10.3 JFET Data Sheet Interpretation .       .     .    .  .  272
10.4 JFET Biasing .            .         .  .     .    .  .  275

    DC Model

    Constant Voltage Bias

    Self Bias

    Combination Bias

10
    Constant Current Bias

Summary .            .     .   .         .   .  .     .  291
Review Questions .         .   .         .   .  .     .  292

Problem Set .        .     .   .         .   .  .     .  292

Chapter 11: JFET Small Signal Amplfiers                  296

11.0 Chapter Objectives    .   .         .   .  .     .  296
11.1 Introduction .        .   .         .   .  .     .  296

11.2 Simplified AC Model of the JFET .   .   .  .     .  296
11.3 Common Source Amplifier   .         .   .  .     .  297

    Voltage Gain

    Input Impedance

    Output Impedance

11.4 Common Drain Amplifier .  .         .   .  .     .  306

    Voltage Gain

    Input Impedance

    Output Impedance

11.5 Common Gate Amplifier .   .         .   .  .     .  309

    Voltage Gain

    Input Impedance

    Output Impedance

11.6 Multi-stage and Combination Circuits .  .  .     .  312

11.7 Ohmic Region Operation .  .         .   .  .     .  314
Summary .            .     .   .         .   .  .     .  319

Review Questions .         .   .         .   .  .     .  320
Problem Set .        .     .   .         .   .  .     .  320

Chapter 12: Metal Oxide Semiconductor FETs (MOSFETs)     325

12.0 Chapter Objectives    .   .         .   .  .     .  325

12.1 Introduction .        .   .         .   .  .     .  325
12.2 The DE-MOSFET .       .   .         .   .  .     .  326

12.3 DE-MOSFET Biasing     .   .         .   .  .     .  329

    Zero Bias

    Voltage Divider Bias

12.4 The E-MOSFET .        .   .         .   .  .     .  332
12.5 E-MOSFET Data Sheet Interpretation .    .  .     .  335

12.6 E-MOSFET Biasing .    .   .         .   .  .     .  338

    Voltage Divider Bias

    Drain Feedback Bias

Summary .            .     .   .         .   .  .     .  341
Review Questions .         .   .         .   .  .     .  342

Problem Set .        .     .   .         .   .  .     .  342

11
Chapter 13: MOSFET Small Signal Amplifiers                                348

13.0 Chapter Objectives        .  .    .    .           .              .  348
13.1 Introduction .            .  .    .    .           .              .  348

13.2 MOSFET Common Source Amplifiers .      .           .              .  348

    Voltage Gain

    Input Impedance

    Output Impedance

13.3 MOSFET Common Drain Followers     .    .           .              .  356

    Voltage Gain

    Input Impedance

    Output Impedance

13.4 MOSFET Common Gate Amplifiers     .    .           .              .  360

    Bias Considerations, Voltage Gain, and Input and Output Impedance

Summary .               .      .  .    .    .           .              .  360
Review Questions .             .  .    .    .           .              .  361

Problem Set .           .      .  .    .    .           .              .  361

Chapter 14: Class D Power Amplifiers                                      366

14.0 Chapter Objectives        .  .    .    .           .              .  366
14.1 Introduction .            .  .    .    .           .              .  366

14.2 Class D Basics .          .  .    .    .           .              .  367
14.3 Pulse Width Modulation .     .    .    .           .              .  369

    Reconstituting the Output

14.4 Output Configurations .      .    .    .           .              .  372

    Practical Concerns

Summary .               .      .  .    .    .           .              .  380

Review Questions .             .  .    .    .           .              .  381
Problem Set .           .      .  .    .    .           .              .  381

Chapter 15: Insulated Gate Bipolar Transistors (IGBTs)                    382

15.0 Chapter Objectives        .  .    .    .           .              .  382

15.1 Introduction .            .  .    .    .           .              .  382
15.2 IGBT Internals .          .  .    .    .           .              .  383

15.3 IGBT Data Sheet Interpretation .  .    .           .              .  385
15.4 IGBT Applications .       .  .    .    .           .              .  393

    Induction Heating

    DC-to-AC Inversion

    Motor Control

    DC-to-DC Conversion

Summary .               .      .  .    .    .           .              .  399

Review Questions .             .  .    .    .           .              .  400
Problem Set .           .      .  .    .    .           .              .  400

12
Chapter 16: Decibels and Bode Plots                        402

16.0 Chapter Objectives  .      .     .     .        .  .  402
16.1 Introduction .      .      .     .     .        .  .  402

16.2 The Decibel    .    .      .     .     .        .  .  402
16.3 Bode Plots     .    .      .     .     .        .  .  413

16.4 Combining the Elements - Multi-Stage Effects .  .  .  423
Summary .           .    .      .     .     .        .  .  425

Review Questions .       .      .     .     .        .  .  425
Problem Set .       .    .      .     .     .        .  .  426

Chapter 17: Frequency Limits                               429

17.0 Chapter Objectives  .      .     .     .        .  .  429

17.1 Introduction .      .      .     .     .        .  .  429
17.2 Low Frequency Response. .  .     .     .        .  .  430

    Lead Networks

    BJT Amplifiers

    FET Amplifiers

17.3 High Frequency Response.   .     .     .        .  .  447

    Lag Networks

    BJT Amplifiers

    FET Amplifiers

Summary .           .    .      .     .     .        .  .  465
Review Questions .       .      .     .     .        .  .  466

Problem Set .       .    .      .     .     .        .  .  466

Appendices                                                 474

A: Manufacturer's Data Sheet Links .  .     .        .  .  474
B: Standard Component Sizes .   .     .     .        .  .  475

C: Answers to Selected Numbered Problems .  .        .  .  476
D: Answers to Questions Not Asked .   .     .        .  .  483

13
1 Semiconductor Fundamentals

1.0 Chapter Learning Objectives

After completing this chapter, you should be able to:

               Define the term semiconductor.
               Describe the differences between conductors, semiconductors and insulators in terms of atomic

                   energy levels.
               Describe the atomic structure of mono-crystalline silicon.
               Detail the effect of doping on a silicon crystal.
               Describe the differences between P material and N material.
               Draw the energy level diagrams for P- and N-type materials.

1.1 Introduction

First, a Little History

Just as the late eighteenth through nineteenth centuries are known as the industrial age due to the rise of
mechanization, the twentieth century can be referred to as the beginning of the electronic age. The first half of
the century was dominated by electronic vacuum tubes that made possible devices such as radio, television,
radar and long distance telephone. The technology of the vacuum tube was displaced mid-century by the
introduction of solid-state semiconductors. The first working prototype transistor was invented at Bell Labs in
1947 by John Bardeen, Walter Brattain and William Shockley. This device, properly referred to as a point
contact transistor, was quickly superseded by the bipolar junction transistor, a major topic of this text.

Commercial production of the transistor and related devices improved the performance of existing applications
and made possible a range of new ones. Semiconductors proved to be smaller, lighter, more reliable and less
expensive to build than their vacuum tube counterparts. The last 30 or so years of the century saw the rapid
expansion of the integrated circuit where numerous transistors are combined in a single device. Initially such a
device may have contained the equivalent of a dozen or so individual semiconductor devices, but today that
number has grown to the billions1. This extreme density has given rise to now common-place applications such
as cell phones, GPS devices, laptop computers, tablets and our global communications infrastructure.

1 It is worth noting that the construction of an integrated circuit does not involve the creation and interconnection of
    millions or billions of single discrete transistors. Instead, the manufacturing process builds all of the transistors
    simultaneously, rather like a layer cake.

14
The science writer, Arthur C. Clarke, once observed that "Any sufficiently advanced
technology is indistinguishable from magic". Indeed, although today the typical
citizen living in an industrialized country makes use of numerous electronic devices
each day (sometimes without even being aware of it), they typically have scant
knowledge of how these devices "work their magic". Obviously there is no magic,
only the application of scientific principles mixed with human ingenuity. Further,
just as it is true that many more people can use a cell phone than design one, it is
also true that there is a greater need for people who can design, manufacture and
maintain devices based on semiconductors than for people who design the
semiconductors themselves. The scope of this text, then, focuses on the operation
and application of semiconductor devices rather than the design of the
semiconductors themselves.

Variable Naming Convention

One item that often confuses beginning students of almost any subject is
nomenclature. Before we begin our discussion of semiconductor devices it is
important that we decide upon a consistent naming convention. Throughout this text
we will be examining numerous circuits containing several passive and active
components. We will be interested in a variety of parameters and signals. In order to
keep confusion to a minimum we will use the following conventions in our
equations for naming devices and signals.

    R  Resistor (DC, or actual circuit component)

    r  Resistor (AC equivalent, where phase is 0 or ignored)

    C  Capacitor

    L  Inductor

    Q  Transistor (Bipolar or FET)

    D  Diode

    V  Voltage (DC)

    v  Voltage (AC)

    I  Current (DC)

    i  Current (AC)

Resistors, capacitors and inductors are differentiated via a subscript that usually
refers to the active device to which it is connected. For example, RE is a DC bias
resistor connected to the emitter of a transistor while rC refers to the AC equivalent
resistance seen at a transistor's collector. CE refers to a capacitor connected to a
transistor's emitter lead. Note that the device related subscripts are always shown in
upper case, with one exception: If the resistance or capacitance is part of the device
model, the subscript will be shown in lower case to distinguish it from the external
circuit components. For example, the AC dynamic resistance of a diode would be
called rd. If no active devices are present or if several items exist in the circuit, a
simple numbering scheme is used, such as R1. In very complex circuits a specific
name will be given to particularly important components, as in Rsource.

15
Voltages are normally given a two-letter subscript indicating the nodes at which it is
measured. VXY is the DC potential from node X to node Y while vXY indicates the AC
signal appearing across node X to node Y. A single-letter subscript, as in VX,
indicates a potential relative to ground (in this case from node X to ground). The
exceptions to this rule are power supplies, that are given a double letter subscript
indicating the connection point (VCC is the collector power supply), and particularly
important potentials that are directly named, as in vin (AC input voltage) and VR2 (DC
voltage appearing across R2). If an equation for a specific potential is valid for both
the AC and DC equivalent circuits, the uppercase form is preferred (this makes things
more consistent with circuits that are directly coupled, and thus can amplify both AC
and DC signals). Currents are named in a similar way but generally use a single
subscript referring to the measurement node (IX is the DC current flowing through a
conductor into or out of node X). All other items are directly named. By using this
scheme, you will always be able to determine whether the item expressed in an
equation is a DC or AC equivalent, its approximate circuit location, and other factors
about it.

1.2 Atomic Structure

In our effort to understand the operation of semiconductors, a fundamental question      Figure 1.1
we might ask is "What is the internal structure of an atom?" Please understand that it   Planetary atomic model:
is nonsensical to ask what an atom might "look like" because its components are all      Pretty, well-known and
smaller than the shortest wavelengths of light that humans can see. Instead, we          wrong.
simply need a model to explain its observed behavior.
                                                                                         Image source (modified)
Perhaps the most prolific model in the popular imagination is the planetary model
shown in Figure 1.1. In this model, the core, or nucleus, is drawn at the center and
contains positively charged protons and non-charged neutrons. Revolving around
this core are negatively charged electrons, each following a nice, regular, planar
path much like a planet around the sun. Unfortunately for us, this model is starkly
incorrect, although it has found use as a symbol for nuclear regulatory agencies
and a DEVO album cover from the 1970s.

Before we come up with a more accurate and useful model, let's take a closer look
at the sub-components; namely the proton, neutron and electron. First off, most of
the mass of any given atom is from the protons and neutrons. Protons and neutrons
have similar masses, about 1.67E-24 grams each. The mass of an electron is roughly
2000 times smaller. The radius of a proton is approximately 0.87E-15 meters and
the mean distance to the nearest electron is about 5.3E-11 meters. This means that
this electron is about 60,000 times farther away from the proton than the size of said
proton. To put this into perspective, that's roughly the same as the ratio between a
golf ball and a sphere with a radius of 3/4ths of a mile or 1200 meters. This would
be the case for a hydrogen atom as it consists of a single proton and electron. The
magnitude of this ratio is not much different for other substances, including things

16
like crystalline carbon (diamond) and quartz (a molecule of silicon and oxygen) that
are very hard and solid. If you think about that for a moment, you realize that the
idea of "solidity" is in some ways an illusion because the vast majority of what we
call "something" is really just empty space. For example, chances are that you are
sitting down while reading this. You probably feel your buttocks pressed against the
chair. Both of these things are considered solid yet at the atomic level the vast
majority of both items is nothingness. In reality, the feeling of solidity is just the
result of the interaction of atomic forces between the two. So if someone suggests
that you might have a bit too much to spare in the department of the posterior, you
can inform them that it's really nothing.

One of the major issues with the planetary model is the idea that electrons whirl
around the nucleus in stable, planet-like orbits. That's simply not true. First, the
electron inhabits a region of 3D space, it does not simply move through a plane.
Second, due to the Heisenberg Uncertainty Principle, we can't precisely plot the
position and trajectory of a given electron. The best we can do is make a plot of
where the electron is likely to be. This is called a probability contour. Imagine that
you could record the position of an electron relative to the nucleus. A moment later
you record its new position, a moment after that you record the next position, and on
and on for thousands of measurements. If you attempted to plot them all, you would
wind up with a cloud of dots around the nucleus. This cloud is referred to as an
orbital. You wouldn't know how the electron got from one position to the next but
you would get a general idea of where it was likely to be. Do not confuse orbital
with orbit (like a planetary orbit). They are two different beasties.

There are several potential orbitals. Due to quantum physics, only certain orbitals
are allowed. The permissible electron energy levels are first grouped into shells, then
subshells and finally orbitals. It is important to remember that orbitals indicate the
electron energy level. That is, a higher orbital implies a higher energy level.
Further, orbitals fill in first from lowest energy level to highest energy level. These
are important ideas that we will leverage in future discussions.

Shells are denoted by their principal quantum number, n; 1, 2, 3, etc. The higher the    Figure 1.2
number, the more subshells it can contain. Subshells are organized by their orbital      Electron probability contour
shape and are designated by letters, the first four being s, p, d, and f. Shell 1        for innermost orbital, 1s.
contains only subshell s while shell 2 contains subshell types s and p. Shell 3
contains subshell types s, p and d, and so on.                                           Image source

Thus, we see designations such as 1s, 2s and 2p. These subshells may also have
variations within them. There is one variation on s, three variations on p, five
variations on d, etc. These variations are the orbitals and each orbital can hold a
maximum of two electrons.

Putting this all together, we find that the first shell can contain a maximum of two
electrons: two in the single s subshell orbital (1s). The second shell can contain a
maximum of eight electrons: two in the s subshell (2s) plus two in each of the three

17
p subshell orbitals (2p). In like manner the third shell can contain a maximum of 18       Figure 1.3
electrons: two in 3s, six in 3p and two in each of the the five d subshell orbitals (3d).  Electron probability contour
You can condense this into a simple formula, 2n2, where n is the shell number.             for orbital 2p.

Figure 1.2 shows the electron probability contour of the innermost orbital, namely         Image source
1s (i.e., principle quantum number 1, subshell s). As you can see, it is spherical in
shape. The nucleus is located at the center, obscured here. All s orbitals are similarly   Figure 1.4
spherically shaped although the internals change. 1s is the lowest energy orbital.         Generic Bohr model.

Orbitals are not limited to simple spherical shapes. Higher order orbitals can take on     Image source
a variety of forms. Figure 1.3 shows the electron probability contour for the 2p
orbitals (recall there are three p variations, one each oriented along the X, Y and Z
axes). The nucleus is situated in the small void between the two lobes. Obviously,
this is nothing like the well-behaved elliptical orbits of planets around the sun.
Probability contours can be very complex. For the highest orbitals, especially when
combined with the lower orbitals, the contour combinations can become reminiscent
of the sculptures of a deranged clown forming herds of imaginary balloon animals.

As interesting as these graphics are, they are cumbersome to work with.
Consequently, a more functional graphic is called for. Such a device is the Bohr
model, named after Danish physicist Niels Bohr. An example is shown in Figure 1.4.

It is important to understand that the Bohr model is an energy description of the
atom, not an attempt to mimic its physical appearance or structure. The nucleus is
placed at the center. It is surrounded by concentric rings that represent the electron
shells. The higher the number, the larger the ring and the greater the energy level. If
an electron were to move from a higher level to a lower level, the energy difference
is radiated out. This could be in the form of heat or light. This is a point worth
remembering. For example, this transition is what makes light emitting diodes
(LEDs) function. The inverse is also possible, namely that by absorbing energy, an
electron can move into a higher orbital. This is an equally powerful concept, as we
shall soon see.

Using the Bohr model we can create diagrams to represent individual elements. For
example, copper has an atomic number of 29 meaning that it has 29 protons and 29
electrons. The electron shell configuration is 2-8-18-1. That is, the first three shells
are completely filled and there is a single electron in the fourth shell. This single
outer electron is only loosely bound and thus makes copper a very good conductor.
The Bohr model for copper would simply show four rings, the first three being filled
and with a single electron in the fourth ring.

Figure 1.5 shows the Bohr model of an atom of Silicon, atomic number 14, with an
electron shell configuration of 2-8-4. In this version, the individual electrons are
drawn in each shell and the atomic number is indicated at the nucleus. Again, please
do not imagine this representing individual electrons orbiting the nucleus in lanes.
This is an energy level depiction.

18
                                                                           Figure 1.5
                                                                           Bohr model of Silicon.

            +14

Often, it is useful to simplify this model further by omitting the filled inner shells.
Also, the atomic number is replaced by the number of electrons in the outermost, or
valence, shell. This is shown in Figure 1.6. The valence shell is particularly
important as it gives insight into the general behavior of the material.

                                                                                         Figure 1.6

                                                                                         Simplified Bohr model of

            +4                                                                           Silicon.

As an alternative, sometimes we will "straighten out" the Bohr model so that it
simply shows the energy levels graphically as lines or bands, and without counting
specific electrons. This is depicted in Figure 1.7.

    Energy                                              Figure 1.7
                n=4 Energy level diagram.
                n=3

                n=2

                n=1

19
1.3 Crystals

We used silicon in the preceding example on purpose. The fact that it has a half-
filled valence shell with four electrons puts it in a special place. As is, it's neither a
great conductor nor a superior insulator. With some attention to detail, it will become
a semiconductor. Silicon is not the only material that can be used for
semiconductors. In fact, many of the earliest semiconductors were made from
germanium and currently we make semiconductors from other materials. Silicon,
however, remains the source of most semiconductors today.

It is possible for pure silicon to be arranged in a mono crystaline structure. That is,
all of the silicon atoms align in a very specific, well-ordered manner, without any
voids or breaks in the pattern. As silicon has only four electrons in its valence shell,
four more electrons would be needed to obtain stability (i.e., eight electrons in the
outer shell). In the crystal, any given atom of silicon effectively "shares" an electron
from its four closest neighbors through a covalent bond (meaning "with or among
the valence"). Each atom does this, therefore each atom is tightly bound to its
neighbors. This is illustrated in Figure 1.8 using simplified Bohr models. Note the
color coding that indicates the sharing.

                                                                                            Figure 1.8
                                                                                            Silicon crystal covalent
                                                                                            bonding.

+4  +4  +4

+4  +4  +4

+4  +4  +4

Remember, this is an energy diagram. We are not trying to indicate that individual
valence electrons are zipping between atoms in figure eight patterns. Indeed, this
diagram is drawn flat whereas a real crystal is not a simple sheet, but is three
dimensional with varying thickness.

20
While it would be a practical impossibility to draw a highly realistic representation
of atoms in the crystal, given a few liberties we can draw something that at least
comes a little closer to reality. We start by representing each silicon atom as a ball
and the covalent bond as a connecting tube. Recalling that each atom must be bound
to four others in a regular, equal pattern, we come up with the drawing of Figure 1.9.
Notice that the overall structure is essentially that of a cube. Further, at the center of
each face of the cube there exists an atom of silicon. Therefore, we say that the
crystal structure is face centered cubic.

                                                                                                                     Figure 1.9
                                                                                                                     Representation of silicon
                                                                                                                     crystal structure.

                                                                                                                                                   Image source

An interesting thing happens in the crystal when we examine the energy levels. With
a single atom we would expect to see an energy diagram like that of Figure 1.7. That
is, discrete, permissible steps. Within a crystal, though, each atom is affected by
those around it. This causes slight changes in the energy levels. Taken as a whole, all
of these individual variations cause the discrete levels to blur into broader bands. If
we were to examine the valence and conduction energy levels, instead of discrete,
thin lines we'd see the thicker bands as illustrated in Figure 1.10. These bands still
represent permissible electron energy levels, it's just that now there is a continuum
rather than a discrete level. There will still be non-permissible or forbidden zones
between these regions. A forbidden zone is referred to as a band gap.

21
Associated with this idea is the concept of the Fermi level, named after physicist

Enrico Fermi. Basically, the Fermi level is the energy level in a given material at

which there is a 50% probability that it is filled with electrons. In other words, levels  Figure 1.10
                                                                                           Energy diagram for an
below this value tend to be filled with electrons and levels above tend to be empty. If    intrinsic semiconductor.

the Fermi level lies within a band, the material will be good a conductor. On the

other hand, if the Fermi level lies between two widely separated bands,

the material will be a good insulator. If the Fermi level is between      Energy

bands that are relatively close, the material is a semiconductor.

Figure 1.10 shows the energy bands for an intrinsic semiconductor,                         conduction band   forbidden
such as an ideal silicon crystal. The term intrinsic simply means that                          Fermi level  region
there are no impurities in the crystal. Between the valence band and
conduction band is an impermissible or forbidden region. This is a                           valence band
band gap. In practical terms you can think of the band gap as the
amount of energy that needs to be applied to an electron in order to
move it from the valence band to the conduction band. The value of the
band gap will depend on a variety of factors, the precise material being
used for the semiconductor is of particular importance.

Without any external energy applied (i.e., isolated and at absolute zero), the crystal
lattice is stable and there is no electron movement through the crystal. As we add
thermal energy, it is possible for valence electrons to jump up to the conduction
band. At this point, the electron can "wander" through the crystal in the manner
depicted in Figure 1.11.

                                                                                           Figure 1.11
                                                                                           Electron movement in a crystal.

    +4  +4  +4

    +4  +4  +4

    +4  +4  +4

22
Here is how this happens: Because the thermal energy causes the electron to jump to        Figure 1.12
the higher energy level of the conduction band, it leaves behind a "hole", that is, a      Electron versus hole flow.
place devoid of an electron. Now that the hole exists, it provides a place for another
electron to "fall into". The higher the temperature, the greater the number of freed
electrons and the greater the number of corresponding holes. We now have
thermally-induced electron movement. We can also look at this from the opposing
perspective, namely that we have an equal magnitude but opposite direction "hole
flow". If you find this idea hard to grasp, simply look at Figure 1.12. Each horizontal
bar contains four dots representing electrons. In the topmost bar there is an empty
space (a hole) to the extreme left. When the leftmost electron moves into this hole it
fills it in a process called electron-hole recombination, which of course, sounds
much more impressive than it really is. The result is the second bar. We repeat this
process of moving an electron right to left as we traverse down the diagram.
Eventually we end up with the four electrons packed together toward the left.
Finally, instead of focusing on the dots, focus instead on the negative space (the
empty white bit). Moving from top to bottom, the hole moves left to right, in the
opposing direction.

Just as we think of the movement of electrons as a movement of negative charge,
then the movement of holes can be thought of as a movement of positive charge. We
can say that the electron is the carrier of negative charge while the hole is the carrier
of positive charge.

Before moving on to the next section, it is important to remember that in an intrinsic
(pure) semiconductor, the number of thermally produced electrons and holes will be
equal. Also, even at room temperature the total number will also be quite small
compared to the number of electrons in the crystal.

1.4 Doped Materials

By themselves, intrinsic semiconductors are not of particular use. They are neither
good conductors nor insulators, and their conduction is largely dependent on
temperature. We can alter the properties of the material by introducing foreign
substances or impurities into the crystal. These impurities are also known as
dopants. A crystal with an added dopant is referred to as an extrinsic semiconductor
or doped material. The amount of impurity added is generally small, perhaps in the
neighborhood of one part per million. The dopant may be added through a gaseous
diffusion process where the crystal is heated in an oven and the dopant added in
gaseous form. Over a period of time the impurities will diffuse or "seep into" the
target crystal. An alternate approach is ion implantation. In this method the
impurities are accelerated and quite literally smash into the target, dislodging and
replacing some of the original atoms in the crystal.

23
There are two different types of semiconductors possible. One is called N-type
material, and the other, P-type material. Unsurprisingly, the N stands for Negative
and the P stands for (you guessed it) Positive. N-type material is created by adding
pentavalent impurities, that is, a dopant with five electrons in its outer shell.
Examples include phosphorus, arsenic and antimony. In contrast, P-type material is
created by adding a trivalent impurity, one with three electrons in its outer shell.
Possible trivalent impurities include boron, gallium and indium.

N-Type Material

Figure 1.13 shows a model of a silicon crystal with a pentavalent impurity at its
center. Compared to an ordinary silicon atom that would have four electrons in its
outer shell, the pentavalent impurity creates an extra, or donor, electron. Thus, the
crystal has a net negative charge and is referred to as N-type material. The energy
level of the donor electrons is just below the bottom of the conduction band. In other
words, the difference between the donor level and the bottom of the conduction band
is much, much smaller than the band gap itself. Therefore it is relatively easy for
these donor electrons to jump into the conduction band, becoming free ionized
electrons and leaving behind ionized holes2.

+4  +4  +4                                                                                           Figure 1.13
                                                                                                     Crystal with added pentavalent
                                                                                                     impurity (N-type).

+4  +5  +4

+4  +4  +4

2 An ion is an atom or molecule that does not have a neutral net charge, i.e., the numbers of
    protons and electrons are not equal. If it loses electrons, resulting in a net positive charge,
    it is called a cation. If it gains electrons resulting in a net negative charge it is called an
    anion.

24
Compared to the undoped intrinsic crystal, the doped extrinsic crystal exhibits a
relatively high number of free electrons. As you might surmise, this enhances the
conductivity of the material, and the greater the doping level, the greater the
enhancement. Earlier it was mentioned that both electrons and holes can serve as
charge carriers. Because the number of free electrons is significantly larger than the
number of holes in N-type material, electrons in N-type material are referred to as
the majority charge carrier (or more simply, the majority carrier) while holes are
referred to as the minority charge carrier (or minority carrier).

The extra electrons add to the number of filled energy states and, being of higher
energy than the valence electrons, push the Fermi level to a higher value.
Remember, the Fermi level represents the point where 50% of states would be filled,
so if we add states above this, then the new 50% point must be higher than the
former level. This is illustrated in Figure 1.14. Note how close the donor level is to
the conduction band and that the Fermi level has been pushed up, away from the
valence band and closer to the conduction band. This will be of great significance in
up-coming discussions on semiconductor devices.

Energy  N material                                                                      Figure 1.14
                                                                                        Energy band diagram of N-type
                                                                                        semiconductor.

          conduction band  ionized electrons
        ---------
                           donor level

                           new higher
                           Fermi level

        valence band

P-Type Material

In a similar manner, if we introduce a trivalent impurity, our crystal model now
features a hole; a location where an electron is lacking. For this reason, trivalent
impurities are sometimes called acceptors. The resulting crystal model is illustrated
in Figure 1.15.

25
        +4  +4                 +4                                                          Figure 1.15
                                                                                           Crystal with added trivalent
                                                                                           impurity (P-type).

        +4  +3                 +4

        +4  +4                 +4

The resulting situation is essentially the reverse of that of the N-type material. Figure
1.16 shows the energy band diagram for our new P-type material. In this case, the
Fermi level has been pushed down, closer to the valence band.

Energy          P material                                                                 Figure 1.16
            conduction band                                                                Energy band diagram of P-
                                                                                           type semiconductor.

            +++++++++          new lower
                 valence band  Fermi level

                               acceptor level

                               ionized holes

In P-type material, holes out number free electrons. Consequently, holes are referred
to as the majority carrier in P material while electrons take on the role of minority
charge carrier.

26
As with N-type material, the greater the amount of trivalent impurity added, the
greater the overall effect. By itself, a doped crystal can be used to create a resistor.
The resistivity of the material is a function of the doping level. By setting the cross-
sectional area, length and doping level, we can create well-defined resistor values. If
this was all we could do with semiconductors then we could say two things: first, the
solid state semiconductor revolution would not exist; and second, this text would be
very short. The interesting bits arrive when we combine both N- and P-type materials
into a single device, as we shall begin to see in the next chapter.

Summary

In this chapter we have examined the basic structure of atoms. This includes the
concept of electron shells and permissible energy states. We have used both the Bohr
model of the atom and the corresponding energy band diagrams.

Crystals such as silicon show a very ordered three dimensional structure that relies
on strong covalent bonds. The crystal tends to "fuzz" or broaden the permissible
energy levels into thicker energy bands. Further, the crystal exhibits a modest energy
gap, or band gap, between the valence band and conduction band. This gap is much
smaller than the gap seen in insulators, and therefore the material is referred to as a
semiconductor, being somewhere between a true conductor and a true insulator.

The electrical characteristics of a pure, or intrinsic, semiconductor crystal can be
altered by adding impurities or dopants. A doped crystal is referred to as an extrinsic
crystal. If a pentavalent dopant is added, there will be a surplus of electrons and a
raising of the Fermi level. The new crystal is called N-type material. In contrast, if a
trivalent dopant is added, there will be a surplus of holes and a lowering of the Fermi
level. The new crystal is called P-type material. In N-type material, electrons are the
majority charge carrier and holes are the minority charge carrier. In P-type material,
holes are the majority carrier while electrons serve as the minority carrier.

Review Questions

    1. Describe the differences between a conductor, an insulator and a
         semiconductor.

    2. Define the terms Fermi level, valence band, conduction band and band gap.
    3. What is the fundamental difference between an intrinsic crystal and an

         extrinsic crystal?
    4. What is meant by the term doping?
    5. What is the effect of donor and acceptor impurities on the Fermi level?

27
         The author Kurt Vonnegut once said, "Never index your own book".
                One beauty of an electronic text is that you don't have to.

28
2 PN Junctions and Diodes

2.0 Chapter Learning Objectives

After completing this chapter, you should be able to:

               Describe and diagram the energy hill for a PN junction.
               Discuss the different kinds of diodes available and their uses: rectifier, Zener, LED, photodiode

                   and varactor.
               Detail the device characteristics exhibited by different diode types.
               Graph the forward- and reverse-bias operation regions of diodes.
               Determine the effective resistance of a diode under specific conditions.
               Solve basic DC resistor-diode circuits for various system voltages and currents.

2.1 Introduction

Having investigated the characteristics of extrinsic N-type and P-type materials in the prior chapter, we shall
continue by examining what happens when these two materials are combined into a single device. It is critical to
understand that when we combine P- and N-type materials, we do not do so through simple mechanical means.
That is, we do not in some way solder, weld, bolt, friction-fit, glue or duct tape3 one type of material to another.
Rather, we must maintain a single piece of mono-crystalline silicon, not a poly-crystalline amalgam of
individual pieces. This can be achieved via a diffusion or ion implantation technique that is applied repeatedly to
a single piece of silicon crystal. This will leave regions or zones in the crystal that are N-type or P-type. In fact,
it is quite possible to have a region of one type completely embedded within a region of the opposite type as we
shall see in later chapters.

By creating a single zone of N material adjacent to a zone of P material, we wind up with the PN junction. The
PN junction is arguably the fundamental building block of solid state semiconductor devices. PN junctions can
be found in a variety of devices including bipolar junction transistors (BJTs) and junction field effect transistors
(JFETs). The most basic device built from the PN junction is the diode. Diodes are designed for a wide variety of
uses including rectifying, lighting (LEDs) and photodetection (photodiodes). We shall begin by examining the
basic structure and operation of the PN junction. This will include a look at the many different kinds of diodes
available. To assist with circuit analysis, a series of simplified models will be created and investigated. We shall
use these models to solve a number of example circuits that feature the many diode variations available.

3 They say it has 1001 uses but this ain't one of them.

29
2.2 The PN Junction

If we were to create a region of N material abutting a region of P material in a single
crystal, an interesting situation occurs. Assuming the crystal is not at absolute zero,
the thermal energy in the system will cause some of the free electrons in the N
material to "fall" into the excess holes of the adjoining P material. This will create a
region that is devoid of charge carriers (remember, electrons are the majority charge
carrier in N material while holes are the majority charge carrier in P material). In
other words, the area where the N and P materials abut is depleted of available
electrons and holes, and thus we refer to it as a depletion region. This is depicted in
Figure 2.1. The excess electrons of the N material are denoted by minus signs while
the excess holes of the P material are denoted with plus signs. At the interface, the
free electrons have recombined with holes. When an electron recombines, it leaves
behind a positive ion in the N material (shown here as a circled plus sign) and
produces a negative ion in the P material (shown as a circled minus sign).

                +  + __     + + __ __ _ _ N
                        __  ++ _  __
           +P +
           + + + + + + _ _                                                                 Figure 2.1
    Anode  + + +__          + + _ _ __ _ _       Cathode                                   PN junction.
                            + + _ _ __ _
           + + + __         + + __ _ _ _
           ++ + + _ _
           + + ++ _ _       + + + + _ _ _ _ _ _

We now have a region depleted of charge carriers and this will have an effect on the
ability to establish a flow of current through the device. We have, in essence, created
an energy hill that will need to be overcome.

To understand the concept of the energy hill, recall that in the prior chapter it was
discovered that doping an intrinsic crystal would shift the Fermi level. For N
material, the Fermi level is shifted up, toward the conduction band. In contrast, for P
material the Fermi level is shifted down, nearer to the valence band. When two
dissimilar regions adjoin, as in the case here, the energy bands will adjust so that the
Fermi levels are consistent. Effectively, this causes the bands of the P material to rise
relative to the bands of the N material. The interface between the two appears as a
hill, and this is the aforementioned depletion region. This situation is depicted
graphically in Figure 2.2. Compare this energy diagram to the energy diagrams for N
material and P material presented in the prior chapter. By simply aligning the Fermi
levels, it should be clear how we arrive at the new energy diagram.

30
Energy             P material                N material                                    Figure 2.2
                                        conduction band                                    Energy bands in PN junction.

                                                                  Fermi level

                                             valence band

                               depletion
                               region

Now let's consider what happens if we were to connect this device to an external
voltage source as shown in Figure 2.3. Obviously, there are two ways to orient the
PN junction with respect to the voltage source. This version is termed forward-bias.

                R                    +  + __      + + __ __ _ _ N                        Figure 2.3
        V                                     __  ++ _     __                            PN junction connected to
                               +P +      ++                                              external voltage source.
                               +      + + __
                                   +              + + _ _ __ _ _
                               + + +__
                               ++ +               + + _ _ __ _
                                        __        + + __ _ _ _
                               ++ + + _ _
                               + + ++ _ _         ++ _     __
                                                           _ __
                                                  ++

Forward-Bias

The dotted line of Figure 2.3 shows the direction of electron flow (opposite the
direction of conventional flow). First, electrons flow from the negative terminal of
the battery toward the N material. In N material, the majority carriers are electrons
and it is easy for these electrons to move through the N material. Upon entering the
depletion region, if the supplied potential is high enough, the electrons can diffuse
into the P material where there are a large number of lower energy holes. From here,
the electrons can migrate through to the positive terminal of the source, completing
the circuit (the resistor has been added to limit maximum current flow). The "trick"
here is to assure that the supplied potential is large enough to overcome the effect of

31
the depletion region. That is, a certain voltage will be dropped across the depletion
region in order to achieve current flow. This required potential is called the barrier
potential or forward voltage drop. The precise value depends on the material used.
For silicon devices the barrier potential is usually estimated at around 0.7 volts. For
germanium devices it is closer to 0.3 volts while LEDs may exhibit barrier potentials
in the vicinity of 1.5 to 3 volts, partly depending on the color.

Another way of thinking about this is that the addition of the voltage source
"flattens" the inherent energy hill of the junction. Once the applied forward-bias
voltage is at least as big as the hill, current can flow easily.

Reverse-Bias

If the voltage source polarity is reversed in Figure 2.3, the behavior of the PN
junction is altered radically. In this case, the electrons in the N material will be
drawn toward the positive terminal of the source while the P material holes will be
drawn toward the negative terminal, creating a small, short-lived current. This has
the effect of widening the depletion region and once it reaches the supplied potential,
the flow of current ceases. In essence, we have increased the size of the energy hill.
Further increases in the source voltage only serve to make the situation worse. The
depletion region simply expands to fill the void, so to speak. Ideally, the PN junction
acts like an open circuit with an applied reverse-bias voltage.

This asymmetry in response to a supplied potential turns out to be extraordinarily
useful. Perhaps the simplest of all semiconductor devices is the diode. In its basic
form a diode is just a PN junction. It is a device that will allow current to pass easily
in one direction but prevent current flow in the opposite direction.

Shockley Equation

We can quantify the behavior of the PN junction through the use of an equation
derived by William Shockley.

                      ( ) V D q                           (2.1)

                   I =I S e n k T -1

    Where
    I is the diode current,
    IS is the reverse saturation current,
    VD is the voltage across the diode,
    q is the charge on an electron, 1.6E-19 coulombs,
    n is the quality factor (typically between 1 and 2),
    k is the Boltzmann constant, 1.38E-23 joules/kelvin,
    T is the temperature in kelvin.

32
At 300 kelvin, q/kT is approximately 38.6. Consequently, for even very small
forward (positive) voltages, the "-1" term can be ignored. Also, IS is not a constant.
It increases with temperature, approximately doubling for each 10 C rise (more on
this in a moment).

If we plot the Shockley equation using typical values for a silicon device, we arrive
at the curve shown in Figure 2.4. This plots the junction current as a function of the
forward (positive) device voltage. It is a representative curve only. While all silicon
diodes will exhibit this same general shape, the precise value of current for a specific
voltage will vary depending on the device design.

                   0.010          Diode Characteristic Curve                              Figure 2.4
                   0.009                                                                  Characteristic curve of
                   0.008     0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8                              forward-biased silicon PN
                   0.007                             Diode Voltage                        junction.
                   0.006
    Diode Current  0.005
                   0.004
                   0.003
                   0.002
                   0.001
                   0.000

                          0

For potentials below about 0.5 volts, the current is virtually non-existent. Above this
value, the current rises rapidly, becoming nearly vertical after approximately 0.7
volts. If the plot was recreated using a higher temperature, the effect would be to
shift the curve to the left (i.e., a higher current for a given voltage).

If we were to alter the graph to use a logarithmic current scale rather than a linear
scale, the graph of Figure 2.5 results. The resulting straight line plot shows clearly
the logarithmic relationship between the diode's voltage and current.

33
                                  Diode Characteristic Curve                              Figure 2.5
                                          Log Scale Plot                                  Characteristic curve of
                                                                                          forward-biased silicon PN
               1e-05                                                                      junction using log scale.
               1e-06
Diode Current  1e-07
               1e-08
               1e-09              0.1  0.2  0.3  0.4          0.5  0.6     0.7
               1e-10
               1e-11
               1e-12
               1e-13

                      0

                                            Diode Voltage

For negative voltages (reverse-bias) the Shockley equation predicts negligible diode
current. This is true up to a point. The equation does not model the effects of
breakdown. When the reverse voltage is large enough, the diode will start to
conduct. This is shown in Figure 2.6. In the first quadrant we see the same general
shape we found in Figure 2.4. VF is the forward "knee" voltage (roughly 0.7 volts for
silicon). IR is the reverse saturation current (ideally zero but in reality a very small
amount of current will flow). VR is the reverse breakdown voltage. Note that the
current increases rapidly once this reverse voltage is reached.

                                            +ID                                           Figure 2.6

                                                                                          Simplified forward and reverse

                                                                                          I-V curve for diode.

                              VR                          IR       VF +VD
                      -VD                        -ID

34
In general, diodes should not be operated in the breakdown region (the exception           Figure 2.7
being Zener diodes). There are two mechanisms behind this phenomenon. The Zener            Diode schematic symbol
effect, named after Clarence Zener, predominates when the doping levels are high           (ANSI).
and produces breakdown voltages below roughly five or six volts. It is due to the
production of a very high electric field across the depletion region which then results    Figure 2.8
in the production of a high current through electron tunneling. In devices using           Alternate diode schematic
lower levels of doping, avalanche dominates. In this instance, a high electric field       symbol (IEC).
accelerates the free electrons to the point where they can impact surrounding atoms
and create new electron-hole pairs, thus creating new free electrons that can repeat
the process, resulting in a rapid increase of current.

The schematic symbol for a basic switching or rectifying diode is shown in Figure
2.7. This is the ANSI standard which predominates in North America. The P material
is the anode while the N material is the cathode4. As a general rule for
semiconductor schematic symbols, arrows point toward N material. In this case, the
arrow also points in the direction of easy conventional current flow. Figure 2.8
shows an alternate schematic symbol, the IEC international standard, the difference
being that it is in outline form without the body being filled in.

When it comes to physical device packaging, small and medium current and power             Figure 2.9
devices for through-hole mounting include the DO-35 and DO-204, with the model             DO-204 case.
number stamped on the body. The typical size is comparable to a 1/4 to 1/8 watt
resistor. As seen in Figure 2.9 the cathode end is denoted by a band, reminiscent of
the bar on the schematic symbol. Surface mount packages are also available.
Devices handling higher currents and powers often come in stud or bolt styles such
as the DO-4 shown in Figure 2.10. These packages facilitate mounting to a metal
plate or heat sink to help dissipate the excess heat.

2.3 Diode Data Sheet Interpretation                                                        Figure 2.10
                                                                                           DO-4 case.
A data sheet for the popular 1N4148 switching diode is shown in Figure 2.11. The
1N4148 is designed for high speed operation required in high frequency signal              Courtesy of Vishay Intertechnology,
applications but also finds use in a variety of general purpose applications that do       Inc.
not require very high current or power handling.

Some of the key features include a four nanosecond switching speed, a maximum
reverse voltage of 100 volts and a 450 milliamp maximum forward current (with
short single pulses as high as four amps being possible). Power dissipation is 500
milliwatts.

Referring to Figure 2.11b, the variation in reverse current with regard to temperature
is obvious. This also verifies the "doubles every 10 C" rule-of-thumb.

4 Cathode is often denoted by a k. This is likely due to the word's Greek root, kathodos.

35
                                                                                                                   Figure 2.11a
                                                                                                                   1N4148 data sheet.

                                                                                                                                                Courtesy of NXP Semiconductors.

                                                                                                                   Figure 2.11b
                                                                                                                   1N4148 data sheet (continued).

36
                                                                                                                     Figure 2.11c
                                                                                                                     1N4148 data sheet (continued).

37
                                                                                                                   Figure 2.11d
                                                                                                                   1N4148 data sheet (continued).

Power derating and permissible pulse amplitudes can be seen in Figure 2.11d.
Finally, note the variation in the forward voltage curves due to temperature. As
stated previously, for a given current, an increase in temperature results in a lower
forward voltage. Also, at room temperature, we see a knee voltage of approximately
0.7 volts.
38
2.4 Diode Circuit Models

One thing is very clear from the characteristic curve of the diode: It is not a linear
bilateral5 device, quite unlike a resistor. Consequently, we cannot use the
superposition technique to solve diode circuits unless we have a priori knowledge
about it, that is, whether or not it is forward- or reverse-biased. For example, we can
imagine a circuit comprised of two voltage sources, resistors and a diode. By itself,
one of the voltage sources might forward-bias the diode while the other would
reverse-bias it. Obviously, a diode cannot be both forward and reverse-biased at the
same time.

A second problem we face with circuit analysis is the added complexity of the
Shockley equation. For speed and ease of computation we find it useful to model the
diode with simpler circuit elements. Three diode models are shown in Figure 2.12.

                                                                                                                     Figure 2.12
                                                                                                                     Simplified diode models.
                                                                                                                     Top to bottom: first, second and
                                                                                                                     third approximations,
                                                                                                                     increasing in accuracy.

The first approximation is the simplest of the three. It treats the diode as a simple
dependent switch: the switch is closed if the diode is forward-biased and open if it is
reverse-biased. The second approximation adds the effect of the forward voltage.
Vknee is the "turn-on" potential required to overcome the energy hill. It would be 0.7
volts for a silicon device. The third approximation is the most accurate of the three.
A close look at the characteristic curve of Figure 2.4 shows that once the knee
voltage is reached, the curve does not transition to a perfect vertical line. Instead,
there remains some positive, non-infinite slope. That is, the voltage continues to
increase, although modestly, with further increases in current. We can approximate
this effect as a small resistive value, Rbulk. The three corresponding I-V plots are
shown in Figure 2.13. Compare these to Figure 2.6 and note the increasing accuracy.

5 The I-V plot is not a straight line (linear) and the forward and reverse quadrants are not
    identical (bilateral).

39
                        +ID                                                         Figure 2.13
                                                                                    I-V curves for simplified diode
    -VD -ID +VD                                                                     models.
                                                                                    Top to bottom: first, second and
                      +ID                                                           third approximations.

    -VD       VF  +VD

         +ID

                  1/Rbulk

    -VD       VF  +VD

In many applications the second approximation will yield sufficiently accurate
results and we will tend to make greatest use of it. Just remember that these are
behavioral models; don't think that there are literally 0.7 volt sources or little
resistors in the diodes.

40
It should be noted that Rbulk does not represent the "diode resistance" per se, rather, it
models a minimum value. There really is no such thing as a singular diode
resistance. We can, however, talk about the effective resistance of a diode in a
particular circuit in both DC and AC terms.

The key to understanding this concept is to remember that resistance is a linear            Figure 2.14
function, a straight line on a I-V graph. Therefore, we need to find a straight line        Diode effective resistance for
"fit" for the diode curve. Two possibilities are shown in Figure 2.14.                      DC and AC.

                                   Diode Effective Resistance

Diode Current  0.010                                                       dynamic (AC)
               0.009                                                       resistance
               0.008
               0.007                              operating point
               0.006
               0.005               DC resistance                      
               0.004
               0.003     0.1  0.2  0.3  0.4       0.5            0.6  0.7  0.8        0.9   1
               0.002
               0.001
               0.000

                      0

                                                  Diode Voltage

The red curve is the diode's characteristic curve (arbitrary current values are shown).
For some particular DC circuit, a specific current will flow through the diode which
will produce a particular voltage, denoted on the graph as the operating point. If we
simply compute the ratio of that voltage to the driving current, we wind up with a
resistance. This is the effective DC resistance of the diode under these circuit
conditions and is represented by the blue line. That is, the reciprocal of the slope of
the blue line is the effective DC resistance. Obviously, if we shift the operating point
along the red diode curve, the slope of the intersecting blue line changes and
therefore we arrive at a new DC resistance. The higher the current, the lower the
effective DC resistance.

Instead of just DC, the diode might see a combination of DC and AC signals.
Visualize this as adding a small AC variation on top of the DC. We can imagine the
operating point moving along the red diode curve, back and forth about the
operating point. If we divide the small AC voltage variation by its associated AC

41
current variation, we wind up with the AC equivalent resistance, also known as the
dynamic resistance. Graphically, we can think of this as finding the slope of a line
that is tangent to the operating point (the purple line). This will in fact, be an average
value across the AC variation. It should also be apparent that the effective AC
resistance must be smaller than its DC counterpart because the AC approximation
(purple line) must be steeper than the DC approximation (blue line)6.

It is time for a few illustrative examples.

Example 2.1

    Consider the resistor-diode circuit of Figure 2.15. Assume the voltage source            Figure 2.15
    is 12 volts and the resistor is 2 k. Further, assume the diode is silicon and            Schematic for Example 2.1.
    its bulk resistance is 10 . Using the three diode approximations, compute
    the circulating current.

    First, note that the diode is forward-biased. This must be the case because
    there is a single voltage that is larger than the knee voltage and its positive
    terminal is attached to the diode's anode. No matter which approximation we
    use, Kirchhoff's voltage law (KVL) must be true so it will be a matter of
    summing the available voltage drops versus resistance(s).

    Using the first approximation:

    Here we assume the diode is a closed switch. Consequently all of the source
    voltage must drop across the single resistor.

    I = ER
    I = 12V

       2k
    I =6 mA

    Using the second approximation:

    In this instance we include the knee voltage.

    I = E-V knee
            R

    I =12 V-0.7 V 2 k 
    I =5.65mA

6 The dynamic resistance of a PN junction may be approximated as 26 mV/Ijunction. This will
    be shown in an upcoming chapter.

42
    Using the third approximation:

    The most accurate of the three, we include both the knee voltage and bulk
    resistance.

                          I = E-V knee
                              R +Rbulk

                          I =12 V-0.7 V 2 k +10 
                          I =5.622 mA

    In this particular case the difference between the second and third
    approximations is less than 1%. It is also worth noting that the third
    approximation predicts a diode voltage of slightly more than 0.7 volts
    (approximately 0.756 volts) due to the additional potential across the bulk
    resistance.

Example 2.2

    Determine the circulating current for the circuit in Figure 2.16. Also find the  Figure 2.16
    diode and resistor voltages. Assume the power supply is 20 volts, the diode      Schematic for Example 2.2.
    is silicon and the resistor is 2 k.

    This problem is deceptively easy. Note that the positive terminal of the
    source is connected to the cathode. As there are no other sources in the
    circuit, the diode must be reverse-biased. The model for a reverse-biased
    diode is an open switch and the circulating current in an open circuit is zero.
    Therefore, the resistor voltage must also be zero and values for the knee
    voltage and bulk resistance are not needed. In order to satisfy KVL, the
    diode voltage will equal the source of 20 volts (+ to - from cathode to
    anode).

    The only time this would not be the case is if the reverse breakdown voltage
    of the diode is less than the 20 volt source. In that case the diode voltage
    would equal the breakdown voltage with the remainder of the source voltage
    dropping across the resistor.

43
Example 2.3

    Determine the circulating current for the circuit in Figure 2.17. Also find the       Figure 2.17
    diode and resistor voltages. Assume the power supply is 9 volts, the diodes           Schematic for Example 2.3.
    are silicon and R1 = 1 k, R2 = 2 k.

    According to KVL, the applied source must equal the sum of the voltage
    drops across the resistors and diodes as this is a single loop. Both diodes are
    forward-biased (conventional current entering the anodes).

             I = E-V knee1-V knee2
                       R1+R2

             I =9 V-0.7 V-0.7 V 1 k +2 k 
             I =2.533 mA

    Note that if either diode was reversed, there would be no current flow and all
    of the source potential would drop across the reversed diode.

Example 2.4                                                                               Figure 2.18
                                                                                          Schematic for Example 2.4.
         Determine the source current and resistor voltages for the circuit in Figure
         2.18. Also find the resistor voltages if the diode polarity is reversed. Assume
         the power supply is 10 volts, the diode is silicon and the resistors are 1 k
         each.

         As D and R2 are in parallel they must have the same voltage drop. Also, the
         diode is forward-biased. Therefore, the voltage across R2 must be
         approximately 0.7 volts, leaving 9.3 volts to drop across R1. The current
         through R1 is the source current.

                               I =E-V D
                                       R1

                               I =10 V-0.7 V 1 k 
                               I =9.3 mA

         If the diode is reversed it behaves as an open switch. The circuit reduces to a
         simple 1:1 voltage divider, each resistor dropping half of the supply, or 5
         volts each.

44
Computer Simulation

To verify our results, Example 2.4 is simulated. The circuit is captured as shown in
Figure 2.19a. This particular example is shown in Multisim although any decent
quality simulator will do. The very common 1N4148 switching diode is used here.
Another popular choice would be the 1N914 switching diode or a 1N400X series
rectifier.

                                                                                                                     Figure 2.19a
                                                                                                                     The circuit of Example 2.4 in
                                                                                                                     Multisim.

Next, a DC Operating Point analysis is performed. The results are shown in Figure
2.19b. Note that the diode potential is just under the 0.7 volt approximation. From
this we can deduce that the voltage drop across the first resistor must be slightly
more than 9.3 volts, producing a current slightly more than 9.3 mA.

                                                                                                                     Figure 2.19b
                                                                                                                     DC Operating Point simulation
                                                                                                                     results for the circuit of
                                                                                                                     Example 2.4.

Finally, Figure 2.19c shows the results when the diode is reversed in the circuit. The
second resistor (node 3 to ground) shows 5 volts as expected. Therefore, the first
resistor must also be dropping 5 volts.

45
                                                                                    Figure 2.19c
                                                                                    Simulation of Example 2.4
                                                                                    using reversed diode
                                                                                    orientation.

Before moving on to another topic, let's take a look at a somewhat more involved
example using multiple diodes.

Example 2.5

    Determine the diode and resistor voltages for the circuit in Figure 2.20.
    Assume the diodes are silicon.

    The first thing to notice is that D1 is forward-biased while D2 is reverse-     Figure 2.20
    biased. Therefore, the 20 volt source must equal the drop across D1 and the     Schematic for Example 2.5.
    two resistors. D2 will take on whatever the drop across the 2 k works out
    to as they are in parallel.

    I =E-V D1
        R1 +R 2

    I =20 V-0.7 V 1 k +2 k 
    I =6.433 mA

    Note that virtually no current flows down through D2 as it is reverse-biased.
    Using Ohm's law, the drop across the first resistor is 6.433 volts and for the
    second resistor, 12.867 volts.

46
2.5 Other Types of Diodes                                                                     Figure 2.21
                                                                                              Diode schematic symbols:
Diodes have been designed to exploit different aspects of PN junctions. Besides the           a) switching or rectifying
basic use as a switching or rectifying device, diodes are available for voltage               b) Zener
regulation, variable capacitance, illumination and light sensing. The schematic               c) Schottky
symbols for a number of popular diode types are shown in Figure 2.21. Note the                d) varactor
similarities of the symbols. The "bar" portion represents the cathode for all of them.        e) LED
                                                                                              f) photodiode

(a)  (b)  (c)  (d)  (e)  (f)

Zener Diode                                                                                   Figure 2.22
                                                                                              Zener diode schematic symbol.
The Zener diode behaves like an ordinary signal diode when forward-biased.
Normally, though, Zeners are used in a reverse-bias condition. From our previous
discussion, recall that if the reverse potential is high enough, a diode can go into
breakdown, causing a rapid increase current. This was caused by either of two
effects, Zener conduction or avalanche. The Zener diode takes advantage of this in
order to produce a stable voltage7. Zeners are specified by their reverse potential
(generically referred to as the "Zener voltage") and are designed to handle larger
currents and powers than the average signal diode. Zener voltages are standardized
in much the same manner as resistors so values such as 3.9 volts, 5.1 volts and 6.8
volts are to be expected. The Zener voltage is measured at IZT, the Zener test current.
A lower current may not fully push the diode into conduction resulting in a lower
than expected diode potential.

Instead of modeling the Zener as an open switch when reverse-biased, instead we
model it as an open when its voltage is less than the rated voltage, and as a voltage
source equal to the rated value if its voltage tries to exceed that value. When
analyzing Zener-based circuits, the first thing to do is determine if the diode is
forward-biased. If it is then treat it like an ordinary switching diode. If, on the other
hand, it is reverse-biased then treat it like an open switch. If the resulting diode
voltage is greater than the Zener voltage then recompute the circuit but this time
mentally replace the Zener with a voltage source equal to the Zener voltage. Our
next example will illustrate this method.

7 Although they are called Zener diodes, they rely on either the Zener or avalanche effects,
    depending on the magnitude of the voltage.

47
Example 2.6                                                                               Figure 2.23
                                                                                          Schematic for Example 2.6.
         Determine the circulating current for the circuit in Figure 2.23. Also find the
         diode and resistor voltages. Assume the power supply is 9 volts, the Zener
         voltage is 5.1 volts and the resistor is 3.3 k.

         The diode is reverse-biased. If we treat it as an open then it would drop the
         entire source voltage, or 9 volts. This is greater than the Zener potential so
         the device must be in Zener conduction. This means that conventional
         current will flow relatively easily in a clockwise direction. The voltage
         across the diode will equal the rated value of 5.1 volts, + to - from cathode
         to anode. By KVL the resistor drop must be 9 V - 5.1 V, or 3.9 volts.

                               I = E -V Zener
                                        R

                               I =9 V-5.1 V 3.3 k 
                               I =1.182 mA

         If the diode was flipped in orientation then it would be forward-biased and
         show the expected 0.7 volts with 8.3 volts across the resistor.

Computer Simulation

A Zener diode circuit is simulated as shown in Figure 2.24.

                                                                                          Figure 2.24
                                                                                          Zener diode circuit simulation.

48
Without the Zener, the two resistors would simply split the supply voltage equally,
each receiving 5 volts. If an ordinary diode was used it would be reverse-biased and
act as an open. The resulting voltages would be the same. In this case, however, the
Zener is activated at 3.6 volts (it is typical to include the Zener voltage as part of the
model number with the letter "V" replacing the decimal point when needed).
Therefore we see roughly 3.6 volts across the Zener and the parallel second resistor
(node 3 to ground). The precise value of voltage will depend on the magnitude of the
diode current. If the simulation is rerun with a higher voltage source, the increased
current will produce a slightly higher voltage at node 3. This is because the
breakdown curve is not infinitely steep once it goes past the rated Zener voltage. The
effect is similar to that of Rbulk in a forward-biased diode. On a data sheet this value
is referred to as the differential resistance, or Rdif.

An excellent use of the Zener is to limit or regulate a voltage. When a Zener is
placed in parallel with other components we can ensure that those components will
not see a potential higher than the rated Zener voltage. We will take a much closer
look at this in the next chapter.

Light Emitting Diode (LED) and Photodiode

The light emitting diode (LED) and photodiode are complements. While the LED                  Figure 2.25
produces light with an electrical input, the photodiode produces a current when               Light emitting diode (LED)
exposed to light. Both devices can operate within the human visible spectrum and              schematic symbol.
can also be designed to operate at wavelengths outside this range, in the infrared (IR)
and ultraviolet (UV). In fact, most TV remote controls rely on IR emitter/detector
pairs for communication8.

The LED has displaced traditional incandescent (filament-based) light sources in
many applications due to its high efficiency in turning an electrical energy input into
a light output. They are small, physically robust, operate relatively cool and are
available in a number of different colors. The schematic symbol is shown in Figure
2.25. The basic idea behind its operation is fairly simple. In a forward-biased PN
junction, when free electrons recombine and "fall" into lower energy valence holes
they must give up this energy differential in some manner. In most diodes, this
energy is emitted as heat. In LEDs, the energy transition is designed such that it is
radiated at shorter wavelengths (i.e., visible light). In order to achieve this, LEDs are
not formed just using silicon as in a typical switching diode. Instead, somewhat
more exotic materials are used. From an analysis or design standpoint, the important
thing to remember is that the forward voltage tends to be noticeably higher than
silicon's 0.7 volt drop. The precise value will depend on the material, which in turn
effects the color. A generic red LED will likely exhibit a forward drop of around 1.8
volts or so. Other colors tend to be somewhat higher as we move through the

8 There are advantages to using the infrared over the visible spectrum for this application.
    It tends to be less sensitive to room lighting conditions and there are no potentially
    annoying visible flashes of light coming from the remote.

49
rainbow, ending with blue and UV LEDs (and also high brightness versions) up             Figure 2.26a
around 3 to 4 volts. In a lab it is easy to determine the approximate forward drop of a  LED datasheet.
given diode by connecting it in series with a voltage source and current limiting
resistor. The supply is increased until the desired brightness is achieved and then the  Courtesy of Cree, Inc.
diode drop can be measured with a DMM. When reverse-biased the LED behaves
like a switching diode, that is, it looks like an open switch. Unlike switching and
rectifying diodes, LED maximum reverse potentials tend to be relatively low,
perhaps just a few volts.

A datasheet for the Cree C566D series LED is presented in Figure 2.26. Notice that
the colors are specified in terms of wavelength (in nanometers) and luminous
intensity (brightness) is given in millicandella (mcd).

50
These devices are RoHS compliant which stands for Restriction of Hazardous               Figure 2.26b
Substances. It is an EU directive that limits usage of toxic materials such as lead,     LED datasheet (continued).
cadmium and mercury. Continuing, we find the device maximum ratings:

Note the different values between the various colors. The forward current is
specified as 50 mA for red/amber with 35 mA for green/blue. Nominal operating
currents are between 10 and 30 mA. Reverse voltage is 5 volts, typical for many
LEDs although much lower than the average switching diode. Forward voltage is
typically 2.1 volts for the red end of the spectrum and, as expected, 3.4 volts for the
green/blue end. The expected luminous intensities also vary with color. Further, it

51

                                                                                         Figure 2.26c
                                                                                         LED datasheet (continued).
should be noted that LEDs do not produce "pure color" light in the manner of a laser.
Rather, they produce a range of wavelengths clustered in a specific area. The
wavelength that produces the highest output in this area is referred to as the peak or
dominant wavelength. Human vision covers the range of roughly 400 nanometers
(violet) to 700 nanometers (red)9.

9 It is interesting to observe that the human visual system operates over a frequency range
    of less than 2:1 while the human auditory system operates over a frequency range of
    about 1000:1 (20 hertz to 20,000 hertz). If human hearing had a range equivalent to that
    of our sight, we'd hear less than a full octave of pitches in total. In other words, do-re-mi-
    fa-sol-la-ti-do would end at ti and anything beyond would be inaudible. In such a case
    one thing is certain: piano keyboards would be much shorter.

52
Figure 2.26c presents pertinent graphical data. We observe a roughly linear increase
in luminous intensity with increasing current. Also, note the difference in the reverse
voltage/current plots between blue/green and red/amber. Of particular interest is the
final graph which shows the beam pattern or beam angle. You can think of this in
terms of how narrow or broad the illumination pattern is. When comparing different
model LEDs it is useful to remember that on-axis brightness can be increased by
narrowing the angle. This graph is split in half using two different ways of showing
the data. On the left side we have a linear graph depicting the relative brightness as
we move off of the center axis (zero degrees). On the right side we see a polar plot
version of the same data.

Example 2.7

         Determine the circulating current for the circuit in Figure 2.27. Assume the      Figure 2.27
         power supply is 5 volts, the LED forward voltage is 2.1 volts and the resistor    Schematic for Example 2.7.
         is 330 .
                                                                                           Figure 2.28
         The LED is forward-biased and as the source is greater than the LED               Dual LED application.
         potential, it should light. Using KVL,

                               I = E-V LED
                                        R

                               I =5 V-2.1 V 330 
                               I =8.788 mA

         This should result in a relatively bright LED. The resistor can be used to
         effectively program the brightness by changing the current level (a smaller
         resistance yields a higher current and therefore a brighter LED). Given the
         2.1 volt forward potential, it is likely that this is an amber or yellow LED. If
         a different color had been used, say a 1.6 volt red or 3.2 volt blue, there
         would be a change in current and most likely a change in brightness. The
         change in brightness might not perfectly echo the change in current because
         the conversion efficiency for the two diodes may not be the same (refer to
         Figure 2.27b to compare the luminous intensities at 20 mA for different
         wavelengths).

An interesting circuit using two differently colored LEDs is shown in Figure 2.28.
An AC source is used to drive the LEDs. Only one of the two will be forward-biased
at any given time. For positive source voltages D1 will be on while D2 will be off.
For negative source voltages the opposite will be true. Resistor R serves to limit
current for both of them. Assume D1 is red and D2 is blue. Further, suppose the
source frequency is relative low, say 1 hertz. For the positive half cycle (.5 seconds)

53
the red LED will light and for the negative half cycle the blue LED will light. This
alternating pattern continues for as long as the source is applied but a curious thing
happens as we increase the frequency. At first, the blink rate will increase with the
red and blue flickering back and forth faster and faster. At some point, perhaps
around 30 hertz or so, it will appear as though both LEDs are lit continuously. This is
because the human visual sense will tend to integrate the rapid motion and we
effectively see the "average" intensity. In fact, this "on-off" trick is often used in
digital circuits to control the brightness of LEDs or the speed of motors. Bi-color
LEDs are available in a single package. Using a common lead and two control leads
(one for each color), it is possible to achieve color mixing.

The logical inverse of the LED is the photodiode, the schematic symbol of which is               Figure 2.29
illustrated in Figure 2.29. The photodiode includes some manner of port that allows              Photodiode schematic
light to hit the junction. A sufficiently energetic photon of light can knock lose an            symbol.
electron. This creates an electron-hole pair which results in current flow. As more
light energy is added to the system, an increasing current or voltage will result10.

Photodiodes can operate in one of two modes. The first mode is photovoltaic mode.
It uses zero-bias (that is, no external bias potential). In this mode, the photodiode
operates as a voltage source. This is the mode used by photovoltaic solar cells. They
can be thought of as very large photodiodes. The second mode of operation is
photoconductive mode. This mode requires reverse-biasing the diode with an
external potential. In this mode the diode acts more like a current source. The
advantage is that the response is faster than photovoltaic mode. The downside is that
noise and dark current are worse. Dark current is the current produced even when no
light is shining on the photodiode. Ideally this would be zero. A large dark current
reduces the effective dynamic range of the device.

Schottky and Varactor Diodes

The Schottky diode is a special purpose device. It is named after Walter Schottky, a             Figure 2.30
German physicist. Unlike other diodes that rely on a semiconductor-to-                           Schottky diode schematic
semiconductor junction, the schottky diode is comprised of a semiconductor-to-                   symbol.
metal contact. The Schottky diode exhibits two major advantages over traditional
diodes. First, they have very fast switching times, perhaps orders of magnitude of
improvement. Second, they exhibit relatively low turn on voltages. Instead of the 0.6
to 0.7 volts seen with a silicon junction diode, a Schottky diode may turn on with as
little as 0.2 or 0.3 volts. Consequently, Schottky diodes are used when very fast
switching speed and/or minimizing forward voltage drops are important. Examples
include shunting diodes in switch mode power supplies and RF detector circuits. Its
schematic symbol is shown in Figure 2.30.

10 As a side note, depending on their construction some LEDs can be used as crude
    photodiodes. Although they are not optimized for this use it can be entertaining to shine a
    light on an LED and watch it produce a voltage.

54
The varactor diode is another special purpose device. Its schematic symbol is                   Figure 2.31
illustrated in Figure 2.31. It is used as an electrically controlled capacitance (note          Varactor diode schematic
that the schematic symbol appears as a hybrid of normal diode and capacitor                     symbol.
symbols).

Varactors are used in reverse-bias mode. The key to understanding their operation is
to consider the structure of a diode, comparing it to the construction of a capacitor.
Consider the depletion region to be the dielectric of a capacitor with the anode and
cathode being the capacitor plates. Consequently, all junction diodes exhibit some
capacitance. Normally, designers try to minimize this effect but it is exploited with
varactors. As noted in our earlier discussion, increasing the reverse-bias potential on
a diode causes its depletion region to widen. All else being equal, increasing the
plate separation of a capacitor decreases its capacitance. Thus, by increasing the
reverse-bias potential, we increase the effective plate spacing and decrease the diode
junction capacitance. We now have a capacitance the value of which is determined
by a DC bias voltage. This capacitance can be used as part of electronic tuning
circuits for applications such as oscillators and filters. Compared to fixed capacitors
the values tend to be small, in the tens to hundreds of picofarads, but it is sufficient
for much radio frequency work. The advantages over mechanically adjustable
capacitors are manifold, including small size, high reliability, low cost and the
ability to rapidly change the capacitance11.

Summary

In this chapter we have examined the structure and functioning of the PN junction. A
PN junction produces a depletion region which is an area devoid of free charges.
This leads to an energy hill or barrier voltage, the precise value of which depends on
the material used as well as other factors such as temperature. The PN junction is the
basis for most diodes. Its current-voltage characteristic is described by the Shockley
equation and shows a logarithmic characteristic (i.e., the voltage is proportional to
the log of the current).

The terminals of a diode are identified as the anode (P material) and the cathode (N
material). If a positive potential which is greater than the barrier voltage is applied
from anode to cathode, the diode will conduct current. If the polarity is reversed, the
diode will not conduct. Therefore a simple model of the diode is a polarity sensitive
switch. Improved models include the forward barrier voltage and the bulk resistance
of the diode. Another refinement includes the effect of reverse breakdown, that is,
the tendency of a diode to suddenly begin conducting if the reverse-bias potential is

11 The mechanical version would require a rotary-style adjustable capacitor connected to
    some form of small motor or solenoid to move the capacitor plates. While this can work
    at lower frequencies, if rapid changes are needed the resulting friction-generated heat
    may cause this contraption to burst into flames. Generally speaking, this is not something
    we want our circuits to do.

55
large enough. For ordinary diodes, the reverse potential should not be allowed to
reach breakdown.

Besides the common switching and rectifying diodes, other types are also available.
These include the Zener which is normally used in reverse-bias mode. It is
commonly used to set or limit a specific voltage. In forward-bias, a Zener behaves
like an ordinary diode. LEDs produce light from an electrical input. Their forward
potentials tend to be in the neighborhood of a few volts. The photodiode is the
complement of the LED and produces a current or voltage that scales with incident
light. The Schottky diode is notable for its fast switching speeds and low barrier
potential. Finally, the varactor is used as an electrically controlled capacitance. It is
used in reverse-bias mode.

Review Questions

    1. What is a depletion region?
    2. Draw and explain the energy diagram for a PN junction, including the Fermi

         level.
    3. Describe and compare the three diode models.
    4. Explain the difference between the effective DC resistance and AC resistance

         of a diode.
    5. List some of the practical differences between switching diodes, Zener

         diodes and LEDs.

Problems

(Assume diodes are silicon unless stated otherwise)

Analysis Problems

    1. For the circuit of Figure 2.32 determine the circulating current if the supply
         is 6 volts and the resistor is 10 k.

                                                                        Figure 2.32

    2. Repeat Problem 1 if the diode is inserted in the opposite orientation.

56
    3. Given the circuit of Figure 2.33, determine the voltage drops across the
         resistors. The source is 12 volts, R1 = 4.7 k and R2 = 3.3 k.
                                                                        Figure 2.33

    4. In Figure 2.34 determine the voltage drops across the resistors.
                                                                        Figure 2.34

    5. Determine the LED current in Figure 2.35. Assume the LED barrier is 2.1
         volts, the source is 5 volts and the resistor is 330 .
                                                                        Figure 2.35

    6. Repeat Problem 5 if the LED is inserted in reverse orientation.
    7. Determine the resistor currents in Figure 2.36. The source is 15 volts,

         R1 = 8.2 k and R2 = 3.9 k.
                                                                        Figure 2.36

57
    8. For the circuit of Figure 2.37, determine the resistor voltage. The source is 9
         volts, the Zener potential is 5.1 volts and the resistor is 1 k.
                                                                        Figure 2.37

    9. For the circuit of Figure 2.38, determine the resistor voltage. The source is 8
         volts, the Zener potential is 3.3 volts and the resistor is 10 k.
                                                                        Figure 2.38

    10. Determine the voltage across R2 in Figure 2.39 if the source is 9 volts, the
         Zener is 6.8 volts, R1 = 5.1 k and R2 = 33 k.
                                                                        Figure 2.39

Challenge Problems
    11. Determine the resistor voltage in Figure 2.40 if E1 = 5 volts, E2 = 9 volts and
         R = 1 k.

                                                                        Figure 2.40

58
    12. Determine the voltage across R2 in Figure 2.39 if the source is 9 volts, the
         Zener is 5.6 volts, R1 = 5.1 k and R2 = 3.9 k.

Design Problems
    13. Determine a value for R in Figure 2.32 to set the current to 10 mA if the
         source is 5 volts.
    14. Determine a value for R in Figure 2.35 that will set the LED current to
         approximately 20 mA if the source is 9 volts and the LED is a standard red
         type. Use a standard resistor value.

Computer Simulation Problems
    15. Simulate Problem 9.
    16. Simulate the circuit designed in Problem 14 for verification.

                       And now for something completely different...
One of the great things about the Internet is that you can find almost anything on it.
In contrast, one of the terrifying things about the Internet is that you can find almost
anything on it. The following is presented in keeping with the dictum that "It must
be true because I saw it on the Internet".

59
An Alternate Hypothesis Regarding PN Junctions

In order to learn how to design circuits and systems using transistors and other solid
state devices, students of electronics are told in their courses how semiconductors
function. The atomic structure of crystalline silicon is examined in its intrinsic and
doped states. Discussion of energy levels, conduction band electrons and hole
production quickly follow. Soon, the student encounters the PN junction, a basic
building block of modern electronics, and learns about majority and minority
carriers, depletion regions, barrier potentials, leakage current and other exotica. This
information is intended to explain just how solid state devices really work and it can
end up sounding quite obtuse. It may sound so complicated, in fact, that the student
assumes that only a genius could design such devices and relegates him or herself to
a lower paying engineering or technician job. This should not be the case!

Recent investigations by Farcebook authors have uncovered some startling facts:

     1. Semiconductors don't really work the way we've all been told. In fact, the
         fundamental theory is much simpler.

     2. This lie has been fabricated and perpetuated by the economic and political
         elite, a group of people with cushy, high paying jobs; jobs so easy in the
         light of the real theory that even CEOs, hedge fund managers, televangelists,
         TV psychics and other folk of nil capability could do it in their sleep (well,
         OK, the executives would still need an army of assistants and the
         televangelists would continue to be outraged by your private life, but you get
         the general idea). By making their jobs sound difficult these people get to sit
         around all day eating eclairs and reading Esquire for an eight figure annual
         income.

It is high time that the truth be told and this farcical sham be torn down! As an
example, we shall see how a simple diode really works.

So, you think a diode is composed of semiconducting material? Think again! One of
the chief researchers at Bell labs in the 1940s and 50s was a certain Doctor
Schlocking. After several experiments involving solid state diodes, Dr. Schlocking
wrote in his diary:

         "This stuff don't work at all. Better go back to tubes before they can me.
         Ooops, must let the dog out."

Schlocking was often pestered by his dog Melvin who reminded him of a small self-
propelled dust mop, and who was approximately as clean. The diary continued:

         "If only there was a way in which Melvin could let himself out. Even
         better...if he couldn't get back in!"

60
This ominous tone led to Schlocking's invention of the now infamous one-way
doggie door that can be seen mounted to the bottom of normal doors across the
country. Schlocking knew how to milk an idea and took the form to its extremes by
developing the cat door, the mouse door, the grasshopper door, the flea door (an
early attempt at a flea and tick collar) and even the amoeba door. This last unit when
properly designed could force microscopic parasites and bacteria out of the human
body and not allow them to re-enter. This was instrumental in the development of
the polio vaccine, in spite of the fact that the vaccine was produced some years
earlier. Schlocking's greatest achievement, however, came when he shrunk the
doggie door still further to produce the electron door. This is the fundamental unit of
modern electronics.
In the figure below, we see a cross section of a diode and close-ups.

Even at 10,000X magnification we can still see nothing of the PN junction. If we go
a bit further, something interesting comes into focus (see the second figure).

Yes! A PN junction is nothing more than a huge array of real tiny one-way doggie
doors! Here's how it works: Electrons are a lot like marbles. When one hits a doggie
door from behind, the door flips open allowing the marble through (i.e., allowing
current to flow). If the electron hits the doggie door from the front, the flap closes
and the electron can't get through (i.e., no current flow). Now obviously, if we hang
the diode vertically, gravity should open all the doors and we'll get lots of electrons
(i.e., current flow) in either direction. In truth, a real diode doesn't do this. Its
operation will not matter on how the diode is oriented in space. This feature is
61
accomplished by simply adding a small coil spring to the doggie door's hinge,
forcing it to stay shut in the face of gravity. This has the negative side effect of
requiring somewhat higher energy levels from the electrons to force the door open.
This force happens to be the barrier potential of the diode! It has nothing to do with
so-called depletion regions. If you were an electron, would you want to go through a
place called a depletion region? Of course not! Neither would electrons. They're not
stupid, you know. In any case, the stronger the spring, the greater the barrier
potential. Presently diodes are made of either silicon or germanium with barrier
potentials of approximately 0.7 volts or 0.3 volts, respectively. In fact, silicon and
germanium are really code words meaning strong spring and weak spring! It took a
while to develop small, strong springs and this is why germanium diodes were the
first ones built.

Note that spring strength also plays a role in how tightly the flap can shut thus
indicating the reverse leakage current. Here again we see strong spring "silicon"
units having lower leakage. Theory also indicates that leakage should increase with
temperature. This effect can be seen clearly in the doggie door model. At present it is
impossible to create both the frame and the door out of precisely the same material
and thus two different expansion coefficients exist. Because the flap is smaller than
the frame it will tend to curl away at higher temperatures allowing more electrons to
sneak through the gaps. At very low temperatures the flap tends to stick to the frame
in much the same fashion that your tongue or lips will stick to a metal flag pole in
freezing weather (also known as the Christmas Story phenomenon).

At very high forward energy levels the flaps may be literally torn off their hinges.
This high volume of electrons at high energy will yield the maximum forward
current. Also, note that if the energy level is high enough in the reverse direction,
either the flaps will be bent and pushed through the frames or they will start to
bounce violently at resonance, allowing electrons through. These two modes are
referred to as avalanche and Zener conduction, respectively. The required energy
level indicates the reverse breakdown voltage.

Other fine points can be explained equally by the doggie door model, as well as
bipolar and field effect transistors, IGBTs and just about everything else in the field
of solid state electronics with the exception of the original 7400 series TTL logic
gates which utilized an array of small, edible fungi and miniature harvester ants.

More on that in a future expos.

62
3 Diode Applications

3.0 Chapter Learning Objectives

After completing this chapter, you should be able to:

               Solve basic AC rectifier circuits for resulting waveforms.
               Detail the differences between half-wave, full-wave and full-wave bridge diode rectifier

                   configurations.
               Solve basic regulator circuits employing Zener diodes.
               Outline a complete AC-to-DC power supply with regulation, describing the function of each

                   component, including power transformer.
               Solve AC clipper circuits for output waveforms.
               Solve AC clamper circuits for output waveforms.

3.1 Introduction

The preceding chapter was concerned primarily with introducing the practical considerations of diodes while
presenting them in DC circuits. This chapter will extend the discussion by focusing on AC circuit applications. A
prime example is AC to DC conversion, the concept behind most electronic power supplies. It also includes the
basics behind regulation and limiting/level shifting circuits such as clippers and clampers. The inherent
asymmetry in the conductance of diodes, that is, their sensitivity to the direction of current flow, is what makes
these circuits possible. Non-ideal effects such as a diode's forward voltage drop might be ignored in some
instances but may be quite important in others.

3.2 Rectification

Rectification is the process of turning an alternating current waveform into a direct current waveform, i.e.,
creating a new signal that has only a single polarity. In this respect it's reminiscent of the common definition of
the word, for example where "to rectify the situation" means "to set something straight". Before continuing,
remember that a DC voltage or current does not have to exhibit a constant value (like a battery). All it means is
that the polarity of the signal never changes. To distinguish between a fixed DC value and one that varies in
amplitude in a regular fashion, the latter is sometimes referred to as pulsating DC.

The concept of rectification is crucial to the operation of modern electronic circuits. Most electronic devices
such as a TV or computer require a fixed, unchanging DC voltage to power their internal circuitry. In contrast,

63
residential and commercial power distribution is normally AC. Consequently, some
form of AC to DC conversion is required12. This is where the asymmetry of the diode
comes in.

Half-wave Rectification

To understand the operation of a single diode in an AC circuit, consider the diagram
of Figure 3.1. This is a simple series loop consisting of a sine wave source, a diode
and a resistor that serves as the load. That is, primarily we will be interested in the
voltage developed across the resistor.

                                                                                                                   Figure 3.1
                                                                                                                   Basic AC diode-resistor circuit.

For positive portions of the input wave, the diode will be forward-biased. To a first
approximation it will appear as a closed switch. Consequently, all of the input signal
will drop across the resistor. In contrast, when the input signal switches to a negative
polarity on the other half of the waveform, the diode will be reverse-biased.
Therefore, the diode acts as an open switch. The circulating current drops to zero
thereby producing no voltage across the resistor. All of the applied potential drops
across the diode, as indicated by Kirchhoff's voltage law (KVL). The input and load
resistor's voltage waveforms can be seen in Figure 3.2.

                                                                                                                   Figure 3.2
                                                                                                                   Half-wave rectification
                                                                                                                   waveforms.
                                      VL

                                                                        t

                           Vin

12 If you're wondering why we don't just use DC distribution instead in order to "cut out the
    middle man", the reasons are manifold. First, it is generally more efficient to distribute
    power via AC rather than DC. Second, even if DC is available, it may not be at the
    amplitude the circuitry requires. Therefore some form of DC-to-DC conversion would be
    needed. Depending on the application, this can turn out to be more expensive than AC-to-
    DC conversion.

64
The resulting signal seen across the load resistor is a pulsating DC waveform. We
have effectively removed the negative half of the waveform leaving just the positive
portion. Because only half of the input waveform makes it to the load, this is
referred to as half-wave rectification.

It is worth noting that if the AC peak input voltage is not particularly large, there can
be an obvious discrepancy between the peak levels of the input and load signals. For
example, if the peak input voltage is in the range of three or four volts and a silicon
diode is used, the resulting waveforms would look more like Figure 3.3.

    Vin                                                                                    Figure 3.3
                                .7 volts                                                   Half-wave rectification
                                                                                           waveforms including forward
                                                                                           diode drop.

VL                                        t

In this case the 0.7 volt forward drop cannot be ignored as it represents a sizable
percentage of the input peak. The positive pulses are also slightly narrowed as
current will not begin to flow at reasonable levels until the input voltage reaches 0.6
to 0.7 volts.

If the diode was oriented in reverse, it would block the positive portion of the input
and allow only the negative portion through. In this instance the load waveform
would appear flipped top to bottom compared to Figures 3.2 and 3.3.

Computer Simulation

A simulation schematic for a simple half-wave rectifier is shown in Figure 3.4. A
sine wave source of 10 volts peak is used to feed a popular 1N4000 series rectifier
diode connected to a 100  load. The source frequency is 60 hertz, the North
American standard for power distribution.

A transient analysis is run resulting in the waveforms shown in Figure 3.5. The
source voltage waveform is shown in red while the load voltage waveform is
depicted in blue. While the half-wave rectification is obvious, the loss due to the
forward voltage drop of the diode is clearly evident. Based on the vertical scale, a
value just under one volt would be a reasonable estimate. The simulation agrees

65
nicely with the expected result as drawn in Figure 3.3, although not as extreme due
to the increased source voltage.

                                                                                                                     Figure 3.4
                                                                                                                     Simulation schematic for
                                                                                                                     half-wave rectifier.

                                                                                                                     Figure 3.5
                                                                                                                     Transient analysis for half-
                                                                                                                     wave rectifier.

On a practical note, there are still two items to consider when it comes to converting
AC to DC. The first item is the issue of scaling the 120 VAC RMS outlet voltage to a
more useful level. In many cases this means lowering the voltage although there are
some applications such as high power amplifiers where the voltage will need to be
increased. The second item involves smoothing the pulsating DC to produce a
constant value, much like a battery.
66
A Note Regarding Transformers

The aforementioned voltage scaling issue can be addressed through the use of a
transformer. While a complete exploration of transformers is beyond the scope of
this chapter, we can present the basics. In simple terms, a transformer has an input
side, or primary, and an output side, or secondary. Each side is made up of a coil of
wire and these coils are wound around a common magnetic core. The current in the
primary-side coil creates a magnetic flux in the core. This flux induces a current in
the secondary coil. Ideally, the voltage is decreased and the current is increased by
the ratio of the number of loops between these coils. For example, if the secondary-
side coil has half as many turns as the primary-side coil then the secondary voltage
will be half of the primary voltage and its current will be twice as large as the
primary current. This implies that in the ideal case there is no power lost within the
transformer. It simply transforms the power from high-voltage/low-current to low-
voltage/high-current (or vice versa), hence the name. In reality, transformers do have
voltage and current limits, and they are specified in terms of a volt-amp or VA rating
which is simply the product of the nominal secondary voltage and maximum
allowed secondary current. Transformers that decrease the voltage are referred to as
step-down while those that increase the voltage are referred to as step-up. Finally, it
is possible to create transformers with multiple primaries and secondaries (via either
separate coils or multi-tapped coils). The resulting series and parallel coil
configurations make them much more flexible.

Smoothing (Filtering) the Output

The second issue we have is smoothing and leveling the pulsating DC. The most
straightforward method to achieve this is to add a capacitor in parallel with the load.
The capacitor will charge up during the conduction phase, thus storing energy. When
the diode turns off, the capacitor will begin to discharge, thus transferring its stored
energy into the load. The larger the capacitor, the greater its storage capacity and the
smoother the load voltage will be. It turns out that there is a down side to large
capacitors, as we shall see. Consequently, the goal will not be to use as large of a
capacitor as possible but rather to use an optimal size for a given application. A half-
wave rectifier with transformer and capacitor is shown in Figure 3.6.

                                                                                                                     Figure 3.6
                                                                                                                     Half-wave rectifier with
                                                                                                                     transformer and filter
                                                                                                                     capacitor.

67
One way of looking at the inclusion of the smoothing capacitor is to consider that it,
along with the load resistance, make up an RC discharge network. To achieve a
smooth load voltage the discharge time constant should be much longer than the gap
produced when the diode turns off. For 60 hertz operation, this gap is half of the
period, or roughly 8.3 milliseconds. The time constant equation is

                                = RC

Recalling that in one time constant the capacitor voltage will fall to well below half
of the starting value (roughly 37%), we will need a time constant several times
larger than 8.3 milliseconds. For example, suppose our effective load resistance is
100 . If we use a 1000 F capacitor, the resulting time constant would be 100
milliseconds, or over ten times the gap duration. A much smaller capacitor, say
around 50 F, would not be nearly so effective at keeping the voltage constant.

The variation in output voltage due to capacitor discharge is referred to as ripple. It
can be modeled as an AC voltage riding on a larger DC output. The magnitude of the
ripple worsens as the load current increases. Under light load conditions, the output
will tend to float to the peak voltage of the secondary with very little ripple. As load
current demand goes up, the ripple magnitude increases and the nominal output
voltage begins to drop.

Computer Simulation

Two variations on a filtered half-wave rectifier are simulated below. Both versions
use a 100  load with a 10 volt source, similar to the prior simulation. The first
version uses a 50 F filter capacitor while the second ups this to 1000 F. In both
cases a 1  resistor is added in series with the capacitor to serve as a current sensor.
The first version is shown in Figure 3.7.

                                                                                                                   Figure 3.7
                                                                                                                   Simulation schematic for half-
                                                                                                                   wave rectifier with 50 F filter
                                                                                                                   capacitor.

68
A transient analysis simulation graph is shown in Figure 3.8. The input waveform is
colored blue while the load voltage is red. Comparing this waveform to that depicted
in Figure 3.5 shows the effect of the capacitor stretching out the pulse and partially
filling in the gap. It is obvious that this capacitor is too small given the load
resistance and the resulting current demand. Indeed, by the time the next pulse
arrives the capacitor is nearly depleted and the output voltage has dropped to around
one volt.

                                                                                                                     Figure 3.8
                                                                                                                     Transient analysis simulation
                                                                                                                     for half-wave rectifier using a
                                                                                                                     50 F filter capacitor.

In Figure 3.9 the simulation is rerun, but this time using a 1000 F capacitor in place
of the 50 F. As expected, the increased RC time constant results in a much more
stable load voltage. In this version the output has dropped from a little over nine
volts to about eight volts yielding a peak-to-peak ripple of a volt and a half or so.
The peak voltage of just over nine volts versus the applied ten volts is largely due to
the voltage drop across the rectifying diode.

69
                                                                                                                     Figure 3.9
                                                                                                                     Transient analysis simulation
                                                                                                                     for half-wave rectifier using a
                                                                                                                     1000 F filter capacitor.

One thing that may not be apparent immediately is that the charge time for the larger
capacitor is much shorter than for the smaller unit. This is perhaps counterintuitive.
With a larger capacitor, the diode turns on for a shorter time because its cathode is
held at a high voltage due to the capacitor. That is, it will only turn on when the
input voltage exceeds the capacitor voltage by roughly 0.7 volts. It is only during
this time that the capacitor will be replenished, and this can lead to very large current
spikes.
To investigate this effect, the simulations are rerun, but this time adding the voltage
across the 1  sensing resistor. This relatively small value will have only a modest
effect on the charging and discharging, and conveniently scales to the current value
(i.e., 100 millivolts signifies 100 milliamps). First, examine the transient simulation
of Figure 3.10 using the 50 F capacitor.
The red sweep is the output voltage while the blue sweep represents the capacitor
current. The output voltage plot uses the left vertical axis while the current plot uses
the right vertical axis. As the load voltage begins to rise, we see an abrupt spike in
the capacitor current. This is current charging the capacitor and it peaks at about 180
milliamps. The total time for the charge phase is around 4 milliseconds. Once the
output voltage peaks, the capacitor starts to discharge into the load. During the
discharge phase note that the capacitor current's polarity has reversed. It is negative,
peaking at roughly -80 milliamps, and delivering current to the load.

70
                                                                                  Figure 3.10
                                                                                  Transient analysis current
                                                                                  waveform using a 50 F filter
                                                                                  capacitor.

This simulation is repeated using the 1000 F capacitor. The results are shown in
Figure 3.11.

                                                                                  Figure 3.11
                                                                                  Transient analysis current
                                                                                  waveform using a 1000 F
                                                                                  filter capacitor.

71
The blue current waveform peaks at approximately 800 milliamps, or over four
times the value compared to using the smaller capacitor. Also, the width of the
positive pulse has decreased to about 2.5 milliseconds. The discharge phase is nearly
flat, implying that the output voltage must be more stable as this capacitor is the
only source for load current during this phase.

Full-wave Rectification

An improvement on half-wave rectification is full-wave rectification. Half-wave
rectification is inefficient because it essentially throws away the negative portion of
the input. In contrast, full-wave rectification makes use of the negative portion by
inverting or flipping its polarity. The resulting circuit is modestly larger and more
complicated but results in large performance improvements. For example, filter
capacitor size is greatly reduced.

There are two popular methods to achieve full-wave rectification. The first method
uses a pair of diodes with a center-tapped (i.e., split) secondary. The second method
uses a four diode bridge network. The diode bridge form is also capable of
producing a bipolar output (i.e., a positive output along with a negative output,
typically of the same magnitude).

The two diode center-tapped secondary circuit is shown in Figure 3.12. This
schematic also includes the filter capacitor.

                                                                                                                     Figure 3.12
                                                                                                                     Full-wave center-tapped
                                                                                                                     rectifier with capacitor.

The operation is as follows. During the positive half of the source voltage diode D1
is forward-biased while D2 is reverse-biased. Therefore the upper half of the
secondary behaves like a simple half-wave rectifier allowing current to flow through
D1 and into the load. Due to the reverse-bias on D2, the lower half presents an open
circuit and is effectively removed. In mirror fashion, when the applied potential
switches polarity D1 will be reverse-biased while D2 becomes forward-biased.
Current is now free to flow through D2 into the load. Thus, both halves of the input
waveform are used. The resulting waveforms are illustrated in Figure 3.13. For
clarity, the filtering effect of the capacitor is not shown and Vin represents one half of
the total secondary voltage.

72
     VL                             Figure 3.13
Vin                                 Full-wave rectifier waveforms.

         t

An important point to remember about this configuration is that the load only "sees"
half of the secondary at any given time. Therefore, the load voltage will only be half
of the total secondary voltage (minus one forward diode drop). For example, if the
transformer has a 10:1 turns ratio and is being fed from a standard 120 volt source,
the secondary will produce 12 volts RMS. Ignoring the diode drop, the load would
see half of this, or 6 volts RMS (about 8.5 volts peak). Typically, transformers are
rated by their total secondary voltage so this transformer would be referred to as
having a "12 volt center-tapped secondary".

A four diode bridge rectifier is shown in Figure 3.14. A filter capacitor is included.
Also, note the usage of a standard, non center-tapped secondary. As this is a very
common configuration, the four diode bridge is available as a single four-lead part in
a variety of sizes and current capacities.

                                                                                                                     Figure 3.14
                                                                                                                     Full-wave bridge rectifier with
                                                                                                                     capacitor.

The operation of this circuit is illustrated in Figure 3.15 for the positive portion of
the input. First, current flows from the top of the secondary to the D1/D2 junction.
Only D2 offers a forward-bias path so current flows through D2 to the junction with
D4 and the load. As D4 presents a reverse-bias path, current must flow down through
the load. From ground, current continues to the D1/D3 junction. Although at first
glance it appears that current could flow through either diode, remember that the
cathode of D1 is tied to the high side of the secondary. Therefore, its potential must
be higher than the anode side, making it reverse-biased. Consequently, the current
flows down through D3. A similar situation occurs at D4 and current is directed back
to the low side of the secondary. In short, D2 and D3 are forward-biased while D1 and

73
D4 are reverse-biased. The load sees the entire secondary voltage minus two forward
diode drops.

                                                                                                                     Figure 3.15
                                                                                                                     Full-wave bridge rectifier
                                                                                                                     analysis, positive input.

During the negative polarity portion of the input the situation is reversed as
illustrated in Figure 3.16. Current will flow from the bottom of the secondary
through D4, down through the load, and finally back to the top of the secondary via
D1. Thus, D1 and D4 are forward-biased while D2 and D3 are reverse-biased. The
important thing is that in both cases, the current flows down through the load, top to
bottom, resulting in a positive output voltage.

                                                                                                                     Figure 3.16
                                                                                                                     Full-wave bridge rectifier
                                                                                                                     analysis, negative input.

Example 3.1

         Design a rectifier/filter that will produce an output voltage of approximately
         30 volts with a maximum current draw of 300 milliamps. It is to be fed from
         a 120 VAC RMS source. The ripple voltage should be less than 10% of the
         nominal output voltage at full load.
         For this design we shall focus on using common off-the-shelf parts. As we
         have seen, the full-wave rectifiers are more efficient at converting AC to DC
         so we shall go that route, specifically, a four diode bridge arrangement. We
         will use the circuit of Figure 3.14 as a guide.
         The first item to consider is the size of the transformer. A 30 volt output
         would require a peak secondary voltage of at least 32 volts as we must add
         in two forward diode drops. The equivalent RMS value is 32/2 or 22.6

74
         volts. At full load the filtered output voltage will droop somewhat so a
         somewhat larger value is called for. A standard 24 volt secondary should
         suffice. Given the 300 milliamp load current rating, the transformer must be
         at least 0.3 amps  24 volts or 7.2 VA.

         As far as the capacitor is concerned, it must be rated for the peak voltage.
         The peak equivalent is 24 VAC RMS  2 or 34 volts. Although a 35 volt
         rated capacitor might be tried, a standard 50 volt rating would leave a
         generous safety margin and increase reliability. To find the capacitance value
         we must first find the effective worst case load impedance.

                               R=V out
                                     I max

                               R=30 V 0.3 A
                               R=100 

         It will be useful to compare this back to the simulation depicted in Figure
         3.9. Our ripple specification is somewhat tighter than that achieved in the
         prior simulation. This is apparent by noting how far the output voltage has
         dropped by midway through the off portion of the cycle. Consequently, we
         will need a larger time constant, perhaps by a factor of two. That puts us at
         200 milliseconds.

                                =RC
                               C= R
                               C= 0.2 s

                                    100 
                               C=2000  F

         A 2200 F standard value should be sufficient.

Computer Simulation

To verify our results, the design from Example 3.1 is simulated. The schematic is
shown in Figure 3.17. To simplify the simulation, a 24 volt RMS source is used in
place of the transformer. The worst case load is simulated via a 100  resistor. For
the initial test the filter capacitor is omitted so that we can ensure the proper peak
voltage and waveforms are created. The results of a transient analysis are shown in
Figure 3.18. The secondary voltage is shown in red while the load voltage is shown
in blue. The full-wave waveform is exactly as expected, including a slight reduction
in the peak voltage value due to two forward diode drops. The output peak is just
above 30 volts, as desired.

75
                                                                                                                   Figure 3.17
                                                                                                                   Simulation schematic for the
                                                                                                                   design of Example 3.1 without
                                                                                                                   capacitor.

                                                                                                                   Figure 3.18
                                                                                                                   Transient analysis of the design
                                                                                                                   of Example 3.1 without
                                                                                                                   capacitor.

Now that we have confidence in the voltage level and waveform, the output filter
capacitor is added as shown in Figure 3.19. A transient analysis is run again with the
resulting input and load voltage waveforms depicted in Figure 3.20. The load
voltage is shown in red. The average value is just over 30 volts and the peak-to-peak
ripple is less than two volts, as desired. Note that the full-load peak voltage with the
capacitor is slightly less than what was seen in the capacitor-less version. If the load
current demand were to increase, both droop and ripple would get worse.
76
                                                                                                                     Figure 3.19
                                                                                                                     Simulation schematic for the
                                                                                                                     design of Example 3.1 with
                                                                                                                     capacitor.

                                                                                                                     Figure 3.20
                                                                                                                     Transient analysis of the design
                                                                                                                     of Example 3.1 with capacitor.

Full-wave Bridge With Dual Outputs

As mentioned, the full-wave bridge can be configured to create a dual output bipolar
supply. This is shown in Figure 3.21. Note the inclusion of the center tap on the
secondary of the transformer and the location of the ground connection between the
two loads and their associated capacitors.
77
                                                                                          Figure 3.21
                                                                                          Dual output full-wave bridge
                                                                                          rectifier.

One way of thinking of this is that we have simply created a new reference point,
splitting in half the total output potential of the circuit presented in Figure 3.14.
Alternately, it can be thought of as the upper half of the secondary driving Rload+
while the bottom half drives Rload-, as if the bridge and two-diode versions were
somehow combined in a transporter accident, as in the 1958 movie The Fly,
although it doesn't scream "Help me! Help me!" in a tiny little voice at the end.

Zener Regulation                                                                          Figure 3.22
                                                                                          Simple Zener regulator.
Adding a large capacitor to a rectifier is necessary to store and transfer energy so
that a smooth, ideally non-varying voltage results. As noted previously, under heavy
load the ripple would increase in amplitude and the average voltage would drop.
This issue can be greatly reduced by adding a Zener diode and current limiting
resistor to the output, following the capacitor. This is called a Zener regulator and is
shown in Figure 3.22.

The operation of the Zener regulator is fairly straightforward. Recall that when
reverse-biased with a sufficiently large potential, the normal reverse diode behavior
of an open switch abruptly changes to maintain a fixed voltage; the Zener potential.
The current through the diode begins to increase dramatically once this potential is
reached. If we place a Zener diode across the output of our filtered rectifier, the
Zener will attempt to limit the output voltage to the Zener potential. To prevent
excessive and possibly destructive current draw by the Zener diode, the voltage
difference between the capacitor voltage and the Zener potential is dropped across a
series current limiting resistor. This limiting resistor will set the maximum amount
of output current. This current is then split between the Zener diode and the load.
Under light load conditions, most of this current will flow through the Zener diode.
Under heavy load conditions, most of the current will be drawn by the load with
little flowing through the Zener diode. If the load current demand is too heavy, no
current is available for the Zener diode and it stops conducting. Regulation is lost
and the limiting resistor forms a voltage divider with the load.

78
A complete rectifier/filter/Zener regulator circuit is show in Figure 3.22. Let's
examine how Rlimit interacts with the load.

                                                                                            Figure 3.22
                                                                                            Full-wave bridge rectifier and
                                                                                            filter with Zener regulator.

For proper operation, the Zener potential (D5) is the desired DC output voltage and
the peak secondary voltage is set somewhat higher. We wish to guarantee that under
full load conditions the lowest capacitor voltage due to ripple is still greater than the
desired DC output voltage. The difference between the capacitor voltage and the
Zener potential drops across Rlimit. Therefore

                               I = V cap -V Z
                                       Rlimit

Under no-load conditions all of this current flows down through the Zener diode.
The maximum load current is equal to this value (at which point no current flows
through the Zener diode).

Example 3.2

         Determine the maximum load current for a DC supply such as that found in
         Figure 3.22. The capacitor voltage is 15 volts average with 1 volt of ripple
         (i.e., 16 volts dropping to 14 volts). The Zener potential is 12 volts and Rlimit
         is 4.7 .

         The highest possible continuous load current is the current through Rlimit
         (ignoring IZT). The limiting case for continuous draw will occur when the
         capacitor voltage is at its lowest value, or 14 volts.

                               I =V cap -V Z
                                       Rlimit

                               I =14 V -12 V 4.7 
                               I =426 mA (actually a few mA less due to I ZT )

         The highest peak current through the Zener diode is found at the maximum
         capacitor voltage and assumes no current is drawn by the load.

79
                               I = V cap -V Z
                                       R limit

                               I =16 V -12 V 4.7 
                                I =851 mA

         Note that this worst case current times the Zener potential results in a power
         dissipation of about 10 watts. Of course, during normal operation with a
         load drawing current, the diode dissipation is much reduced. It is interesting
         to note that the Zener dissipates maximal power when the load current is
         zero. Consequently, we can think of this circuit as shifting current from the
         Zener diode to the load as the load demands more current13.

3.3 Clippers

Sometimes it is useful to limit the maximum amplitude of a signal. This might be
done for protection, for example when too large of an input signal might damage the
following circuit. It might also be employed as a means of wave shaping, that is,
morphing a signal into another shape. A good example is the purely aesthetic desire
to emulate the sound of "fuzz" guitar. In the early days of rock music it was
discovered that over-driving a guitar amplifier in an attempt to make it louder
created considerable distortion and this produced a new and interesting sound
quality. Technically, this is largely caused by the power stage of the amplifier
reaching its maximum output level. Any portion of the waveform above this level is
simply cut off or clipped14. The practical problem here is that the only way to
achieve this sound is to crank up the guitar amplifier's volume to ten15 and live with
the attendant high loudness level. Not too popular with the neighbors, that's for sure.
In contrast, if the signal could be limited before the power amplifier stage in an
attempt to mimic the clipping, the effect could be achieved without the resulting
loudness. This proved to be so popular among guitarists that by the 1970s numerous
companies were making "fuzz boxes" and "distortion pedals", each with their own
twist on the concept.

13 As you might guess, this is not particularly efficient because even when the load demand
    is nil, the Zener diode is still drawing current from the transformer. An improved circuit
    may include a bipolar transistor, as examined in Chapter 4. For details on more
    sophisticated techniques to regulate voltage, see Fiore, J, Operational Amplifiers and
    Linear Integrated Circuits: Theory and Application, another free OER text.

14 We will take a closer look at amplifier clipping in the chapters that cover power
    amplifiers.

15 Or eleven, if you have a custom Spinal Tap amplifier.

80
The simplest form of clipper places a diode (or two parallel diodes of opposing             Figure 3.23
polarity) in parallel with the load. The diode will limit the output voltage swing to its   Biased positive clipper.
forward turn-on potential; 0.7 volts for a silicon device. This circuit is somewhat
limiting (pun intended) as you are stuck with a 0.7 volt limit value. What if we need
to limit at some other potential, say 12 volts? While it is possible to stack a bunch of
diodes in series to increase the limit point, a more flexible and practical approach
involves biasing the diode with a DC source. This is called a biased diode clipper.

A biased diode clipper used to limit positive signals is shown in Figure 3.23. The          Figure 3.24
operation is as follows. For any input signal that is less positive than the bias           Biased negative clipper.
potential Vclip, the diode will be in reverse-bias. This means that the diode branch
presents a high resistance and is effectively removed from the circuit. Therefore, Vin
flows through R to the output unimpeded. If the input signal exceeds by Vclip by
approximately 0.7 volts, the diode turns on resulting in a very low internal
resistance. As the internal resistance of the DC source is also very low, this creates a
low impedance path to ground and results in a voltage divider with R. As R is a
much greater resistance value, virtually all of the input signal above the turn-on
voltage will be dropped across R, never reaching the output. Therefore, we can
control or program the clip point by adjusting the bias voltage. Clipping will occur at
approximately Vclip plus 0.7 volts, assuming a silicon diode is used.

A negative biased clipper is shown in Figure 3.24. Both the diode and DC bias
voltages have been flipped to the opposite polarity. The operation of this circuit is
similar to the positive clipper. In this variant, the negative bias potential ensures that
the diode is reverse-biased as long as the input level is more positive than Vclip minus
0.7 volts. Once the input signal goes below this voltage, the diode turns on creating
the shorting path and limiting the output voltage.

A bipolar or dual-polarity clipper can be created by combining the positive and
negative clippers. It is possible to limit the positive and negative swings
independently, as illustrated in the following Example.

Example 3.3

    Determine the output signal for the circuit of Figure 3.25. The input voltage           Figure 3.25
    is a 12 volt peak sine wave at 100 Hz. D1 and D2 are silicon switching                  Dual clipper for Example 3.3.
    diodes. R = 10 k, V1 = 4 volts and V2 = 8 volts.

    First off, note that the precise value of R is unimportant here. It
    simply needs to be significantly larger than the on-resistance of
    the diodes. Based on our prior study of diode resistance in
    Chapter 2 (see the discussion around Figure 2.14) it is likely that
    the dynamic diode resistance will be under 100  once full turn-
    on is reached. This resistance ratio is more than sufficient to
    create an effective voltage divider.

81
The positive clip level will be set by V1. Adding in the forward potential of
D1 we arrive at 4.7 volts. The negative clip level will be set by V2. Including
in the forward potential of D2 we arrive at -8.7 volts.

Thus, we expect to see a sine wave that is clipped at +4.7 volts and -8.7
volts. It should appear as a sort of lopsided cross between a sine wave and a
square wave.

Computer Simulation

To verify and visualize our computations, the circuit of Example 3.3 is simulated
with a transient analysis. The circuit schematic is shown in Figure 3.26. For the
diodes, common 1N914 switching diodes are used.

                                                                                          Figure 3.26
                                                                                          Simulation schematic for dual
                                                                                          clipper of Example 3.3.

The results of the transient analysis are shown in Figure 3.27. The input waveform is
shown in red while the output waveform is shown in blue. The input sine wave
appears as expected with the specified 12 volt peak. The output follows the input
perfectly for all values that are within the clip points. Beyond the clip points, the
output voltage flattens. That is, it is limited to just below +5 volts (the programmed
+4.7) and to just above -9 volts (the programmed -8.7 volts).

Careful inspection of the output waveform plot reveals that it is not perfectly flat at
the voltage limits. In fact, there is a slight rounding that is most noticeable toward
the transitions. This is due to the fact that the diodes do not turn on immediately. The
dynamic resistance of the diodes change with the size of the signal. That is, the
greater the input signal is above the clip point, the more current that will flow, and
thus the dynamic resistance decreases, strengthening the effect of the voltage
divider.

82
                                                                                         Figure 3.26
                                                                                         Transient analysis for dual
                                                                                         clipper of Example 3.3.

3.4 Clampers                                                                             Figure 3.27
                                                                                         Prototype DC offset circuit.
A clamper is circuit that adds a DC offset to an AC signal in such a way that the
resulting voltage is uni-polar. A positive clamper adds a positive offset such that the
former negative peak now sits at zero volts. In like fashion, a negative clamper adds
in a negative offset such that the former positive peak now sits at zero volts.
Clampers are also referred to as DC restorers. Clampers can also be biased so that
the new peak point is something other than zero volts.

The concept of a clamper is fairly simple; we just add a DC voltage to the existing
AC signal. The trick is in getting the circuit to automatically determine what the DC
shift needs to be. This way, if the amplitude of the input signal changes, the offset
can track with it.

First, let's consider the prototype circuit in Figure 3.27. This is a fixed DC offset
circuit. The DC source E adds a positive offset to the input signal. If the
offset is equal to the peak value of the input, the negative peak will rise up to
zero volts and the diode will never turn on (meaning that it will not load the
input and change the wave shape).

In Figure 3.28 the fixed DC source has been replaced with a capacitor. This
capacitor is used to create the DC offset. Unlike the fixed source, the
capacitor voltage will vary with the peak value of the input and therefore
precisely compensate to produce an ideally clamped output signal. As long as the

83
time constant for this capacitor and the surrounding resistance is much longer than       Figure 3.28
the period of the input waveform, it will achieve proper clamping action.                 Positive clamper.

Here is how the circuit operates. For the initial positive cycle, the capacitor is
uncharged and the diode is reverse-biased. As the RC time constant is much
longer than the input period, the output voltage merely follows the input
voltage. Once the input signal swings negative, the diode turns on. This
bypasses the parallel resistor and drastically reduces the charge time
constant. This means that the capacitor voltage will begin to track the
negative portion of the input signal while the output stays near zero volts.
Note that the capacitor voltage will have a polarity of minus-to-plus from left
to right, in keeping with Kirchhoff's voltage law. The capacitor voltage will
track the negative input voltage all the way down to the negative peak. Once the
input begins to reverse slope and rise toward zero, the diode will be turned off due to
the potential now held on the capacitor. At this point, the capacitor has a voltage
across it that is equivalent to the negative peak value of the input signal and it will
behave just like the fixed DC voltage source in the prototype. The input is just now
starting to track in the positive direction from its negative peak while the capacitor
holds this same magnitude of voltage. The result is that the output is at zero volts
and as the input continues to swing positive, the output will track it, thus producing
the desired level shift.

Of course, circuits are never perfect. First, the forward voltage drop of the diode will  Figure 3.29
result in a negative peak that's not precisely at zero volts but is instead about -0.7    Biased positive clamper.
volts. Second, it may take more than one cycle of the input to "grab" the
peak value, all depending on the period and the precise charge and discharge
time constants. As you might guess, flipping the polarity of the diode will
result in a negative clamper instead of a positive clamper. Also, if we add a
DC source in series with the diode, like we did with the biased clipper, we
can create a biased clamper. This is shown in Figure 3.29.

Example 3.4

    Determine the output signal for the circuit of Figure 3.29. The input voltage
    is a 10 volt peak sine wave at 1 kHz. C = 10 F, R = 10 k, Vclamp = 5.7 volts
    and D is a silicon switching diode.

    The configuration is a positive biased clamper. First, we need to ensure that
    the discharge time constant is much longer than the period. The period is 1/f,
    or 1 millisecond. The discharge time constant is

                          =R C
                          =10 k  10 F
                          =100 milliseconds

84
    The DC clamping source will produce a positive offset of 5 volts (5.7 volts
    minus the 0.7 volt forward diode drop). This means that we should see a 20
    volt peak-to-peak sine wave that swings between +5 volts and +25 volts.

Computer Simulation

To verify the analysis of Example 3.4, the circuit is captured as shown in Figure
3.30. A common 1N914 switching diode is used.

                                                                                   Figure 3.30
                                                                                   Simulation schematic for biased
                                                                                   clamper of Example 3.4.

                                                                                   Figure 3.31
                                                                                   Transient analysis for biased
                                                                                   clamper of Example 3.4.

85
The transient analysis is shown in Figure 3.31 and is precisely as predicted. The
input waveform is blue and the clamped output is shown in red. The analysis was
delayed ten milliseconds in order to get past the initial charge phase and observe the
steady state operation.

Summary

Numerous AC diode applications have been examined in this chapter. A single diode
may be used to create half-wave rectification, producing pulsating DC from AC. This
is achieved by simply blocking one of the two polarities with a diode. A more
efficient form of rectification is full-wave rectification. In this scheme, one of the
two polarities is effectively flipped. This may be achieved via a two diode circuit
that employs a split secondary transformer or via a four diode bridge circuit using a
non-tapped secondary. The addition of a split secondary to the bridge circuit enables
a dual polarity output.

In order to smooth the pulsating DC into a relatively constant level, a filter capacitor
is added in parallel with the load. The larger the capacitor, the greater the filtering
and smoothing action, however, this will also increase peak charging current. A
Zener diode may be employed to further stabilize the output voltage.

Clippers are used to limit the range of an input signal. They may be designed to clip
the positive portion, the negative portion or both polarities of the input waveform.
The positive and negative clip levels may be adjusted independently.

Clampers are used to create a DC level shift that is dependent on the peak level of
the input waveform. The shift may be positive or negative, and may also include an
optional bias. The operation of the clamper hinges upon the charge versus discharge
time constants for a series capacitor and associated diode.

Review Questions

    1. List the advantages and disadvantages of half-wave versus full-wave
         rectifiers.

    2. Discuss the advantages and disadvantages of a full-wave bridge rectifier
         versus a two diode center-tapped rectifier.

    3. What is the purpose of the capacitor in a rectifier/power supply circuit?
    4. Under what load conditions will a Zener regulator fail to maintain regulation

         of the output voltage?
    5. What is ripple? How might it be reduced?
    6. What is the function of the DC source(s) in a biased clipper?
    7. What is the function of the capacitor in a clamper circuit?

86
Problems

(Assume diodes are silicon unless stated otherwise)
Analysis Problems

    1. For the circuit of Figure 3.32, determine the peak output voltage.
         Vsec = 12 volts RMS, Rload = 50 , C1 = 1500 F.
                                                                        Figure 3.32

    2. Sketch the output voltage waveform for the circuit of Problem 1, Figure
         3.32, with and without the capacitor.

    3. Determine the peak output voltage for the circuit of Figure 3.33.
         Vsec = 18 volts RMS, Rload = 75 , C1 = 470 F.
                                                                        Figure 3.33

    4. Sketch the output voltage waveform for the circuit of Problem 3, Figure
        3.33, with and without the capacitor.

    5. For the circuit of Figure 3.34, determine the peak output voltage.
        Vsec = 18 volts RMS, Rload = 40 , C1 = 1000 F.

                                                                                     Figure 3.34

87
    6. Sketch the output voltage waveform for the circuit of Problem 5, Figure
         3.34, with and without the capacitor.

    7. Determine the output voltage waveform and its amplitude for the circuit of
         Figure 3.35. Vin = 10 sin 2100t, Vclip = 8 volts, R = 10 k.
                                                                        Figure 3.35

    8. Draw the output waveform with its amplitudes for the circuit of Figure 3.36.
         Vin = 10 sin 2100t, Vclip = 5 volts, R = 10 k.
                                                                        Figure 3.36

    9. Draw the output waveform with its amplitudes for the circuit of Figure 3.37.
         Vin = 12 sin 2200t, V1 = 6 volts, V2 = 4 volts, R = 10 k.
                                                                        Figure 3.37

    10. Draw the output waveform with its amplitudes for the circuit of Figure 3.38.
         Vin = 5 sin 22000t, C = 10 F, R = 4.7 k.
                                                                        Figure 3.38

88
    11. Draw the output waveform with its amplitudes for the circuit of Figure 3.39.
         Vin = 8 sin 2500t, Vclamp = 2 volts, C = 4.7 F, R = 33 k.

                                                                        Figure 3.39

Design Problems
    12. Design a 15 volt AC to DC power supply capable of drawing 200 mA.
    13. Design a circuit that will limit its output voltage to a range of -5 volts to
         +10 volts.
    14. Design a circuit that will shift its output voltage so that it is always positive.
         The input frequency is 2 kHz.

Challenge Problems
    15. Design a circuit that will shift its output voltage so that its negative peak is
         at +3 volts. The input frequency range is from 100 Hz to 1 kHz.

Computer Simulation Problems
    16. Run a transient analysis of the circuit in Figure 3.32, Problem 1.
    17. Run a transient analysis of the circuit in Figure 3.33, Problem 3.
    18. Run a transient analysis of the circuit in Figure 3.34, Problem 5.
    19. Run two transient analyses on the clamper circuit of Example 3.4, first using
         a capacitor 100 times larger than specified, and second using a capacitor 100
         times smaller than specified. Discuss the resulting waveforms.

89
4 Bipolar Junction Transistors (BJTs)

4.0 Chapter Learning Objectives

After completing this chapter, you should be able to:

               Draw and explain the energy diagram for a biased bipolar junction transistor (BJT).
               Describe the differences between NPN and PNP BJTs.
               Explain forward-reverse bias operation.
               Define the transistor parameters alpha and beta, and determine them from device curves and/or

                   circuit currents.
               Draw and explain the various regions of a BJT collector curve, along with Early voltage.
               Describe and utilize the Ebers-Moll BJT model.
               Describe the concept of the DC load line.
               Solve and design basic switching and driver circuits utilizing BJTs.

4.1 Introduction

The bipolar junction transistor, or BJT, is a foundational electronic component. It serves as the basis for a variety
of applications ranging from simple amplifiers to device control to complex digital computing circuitry.
Variations exist for applications spanning very low to very high frequency work; low, medium and high power;
inexpensive general purpose through highly specialized niche items; and so forth. No matter what a BJT has
been optimized for, all BJTs can be considered to be current boosting devices. Of course, if you can boost
current, then you can also boost voltage and power, depending on the associated impedances. Further, all BJTs
share the same basic structure: three alternating layers of N-type and P-type material with one external lead
attached to each layer. In this manner, the BJT can be thought of as an extension of the basic diode: just add
another segment of oppositely doped material to one end of the diode creating a second PN junction. The
configuration could be either PNP or NPN. There are uses for both types and circuits often work best when the
two types are used together.

4.2 The Bipolar Junction Transistor

In prior work we discovered that the PN junction is the foundation of the basic diode. Under normal operating
conditions the interface between the N-type and P-type materials is devoid of free charges and is referred to as a
depletion region. The dissimilar Fermi levels of N-type and P-type materials lead to an "energy hill" between
them, and without an external potential of the proper polarity, the junction will not allow current to flow. The
required magnitude is a function of the material used but it is always the case that the P material (anode) must be
positive with respect to the N material (anode). We extend this idea by adding a second portion of N material to

90
the other side of the P material, creating an N-P-N "sandwich" of sorts. This is shown
in Figure 4.1.

Emitter     N            P                 N                          Collector          Figure 4.1
                                                                                         Basic configuration of NPN
                                                                                         bipolar junction transistor.

                            Base

This diagram is drawn to ease the understanding of the operation of the device,
extending our earlier diode work. In contrast, real BJTs are built in more of a "layer
cake" fashion, N-P-N bottom to top16. Of course, the spatial orientation of the device
has no bearing on its operation so this is not a major issue for our purposes. The
three terminals are named the emitter, base and collector. The collector is the largest
of the three regions while the base is relatively thin and lightly doped.

Above absolute zero there will be recombination and two depletion regions will
form as shown in Figure 4.2. Compare this figure to the basic PN junction drawing
found at the beginning of Chapter 2, Figure 2.1.

         N  __ _ __ + +  _ _ + + _ _ + + _ __ _ _ _                                      Figure 4.2
            _ _+ +       _ _ P+ _ _ + + _     __N                                        Charges in NPN BJT (base
         ___             _ _ + + _ _ + + _ _ __ _ _ _                                    region widened to show detail).
Emitter     _ _ __ + +   _ _ + + _ _ + + _ _ _ _ _ _                  Collector
         __ _ __+ +                                                                      Figure 4.3
         _ _ __ ++       _ _ ++ + _ _ + + __ _ _ _ _ _ _                                 Diode model of NPN BJT.
         _ __ _ _ _ + +  _ _ + _ _ + + _ _ _ _ _ + + _ _ _ _ _ _ _ _
               ++                 ++

                            Base

A Simple Two-Diode Model

Because this device contains two depletion regions, a much simplified model can be
created using two diodes as shown in Figure 4.3. Please keep in mind that this is a
very limited model (as we shall soon see).

If you were to test an NPN BJT with an ohmmeter, two leads at time, this model
would successfully predict the results. If the red (positive) lead of the ohmmeter is
connected to the base and the black (negative) lead is connected to either the emitter
16 Homer says, "Mmm, NPN layer cake sandwich..."

91
or collector, a low resistance will be indicated. This is because the ohmmeter will
modestly forward-bias the base-emitter or base-collector junction. Similarly, if the
leads are reversed, the meter will indicate high resistance because the junction under
consideration will be reverse-biased. If the two leads are connected to the emitter
and collector, a high reading will result regardless of the polarity. This is because
one of the two junctions will be reverse-biased which results in no current flow
through either of them due to the series connection.

Biasing the BJT

Now let's consider adding external sources to bias the transistor. We begin by adding
two DC sources with associated current limiting resistors as shown in Figure 4.4.

                                                                                                                     Figure 4.4
                                                                                                                     Double reverse-bias.

This circuit is comprised of two loops, one between the base-emitter and the second
between the base-collector. In the B-E loop, the emitter supply VEE reverse-biases the
base-emitter diode. A similar situation occurs in B-C loop where the collector supply
reverse-biases the base-collector diode. The result is that virtually no current flows
anywhere in the circuit. If the two supplies are reversed in polarity then both diodes
become forward-biased and we see currents flowing in both loops dependent on the
precise values of the supplies and associated resistors. No surprises so far. Now
consider if we forward-bias the base-emitter diode while simultaneously reverse-
biasing the base-collector diode, as shown in Figure 4.5.

                                                                                                                     Figure 4.5
                                                                                                                     Forward-reverse bias.

With a simple pair of diodes we'd expect the B-E loop to show a high current and the
B-C loop show negligible current. With a BJT, this is not what happens. Instead,
what we see is a high current in both loops, and those currents are very nearly equal
in magnitude. How does this come about?

The key to understanding this situation is that the base of the BJT is thin and lightly
doped. In contrast, the dual diode model splits the base into two separate pieces of
material and that makes all the difference. To get a better handle on what's
happening here, let's take a closer look at this forward-reverse bias circuit but this
time substituting the transistor diagram of Figure 4.2. Refer to Figure 4.6.

92
               N  __ _ __ + +  _ _+ + _ _    + + _ __ _ _ _
           RE     _ _+ +                         _   _N                 RC                Figure 4.6
               __ _ _ _ + +    __ P __       + + + + _ _ _ _ _ _ _ _ _                    Forward-reverse bias, electron
         IE          __                      + + __      __              IC               flow.
    VEE        __ _ _ + +             ++             ___ _                    VCC
                  _ __ + +     __ +__        + + _ ___ _ _
               __ _ _ _ + +    _ _ ++ + _ _
               _ _ _ ++        _ _ ++ _ _    + + _ _ _ _ _ _ __
                               __ + __       ++
                               _ _ ++ _ _

                               IB

Electron flow will facilitate this explanation so we'll draw the current directions
using dashed lines. From the left side of the diagram, electrons exit the emitter
supply and enter the N emitter. Here they are the majority carrier. The base-emitter
depletion creates an energy hill just as it did with a single PN junction. As long as
there is sufficient potential from the emitter supply, the electrons will be pushed into
the base. These electrons will attempt to recombine with the majority base holes,
however, because the base is physically thin and lightly doped, only a small
percentage of the injected electrons will recombine with base holes and exit the base
terminal back to ground. This current is called the base current current or the
recombination current. Meanwhile, the vast majority of the remaining electrons
(95% to over 99%) will find their way to the base-collector depletion region and
then to the collector. Once in the collector, the electrons are again the majority
carrier and flow back to the positive terminal of the collector power supply. The
energy diagram of the transistor is depicted in Figure 4.7. Compare this to the single
PN junction energy diagram found at the beginning of Chapter 2, Figure 2.2.

    Energy     N Emitter           P Base            N Collector                          Figure 4.7
                                                                                          Energy diagram of BJT.

                                             conduction band

                                                    valence band

                  depletion        depletion
                  region           region

At first glance, it might appear as though the emitter and collector leads can be
swapped with no change in operation. With real-world devices this is not possible
generally because the emitter and collector regions are optimized and not physically
identical. Thus, placing transistors into a circuit backwards, with emitter and
collector leads swapped, will usually result in unpredictable behavior.

93
Based on the foregoing discussion and what we already know about PN junctions,
we can summarize transistor performance as follows:

 From KCL, IE = IC + IB .
 IC >> IB, therefore IE  IC .
 The base-emitter junction is forward-biased, therefore VBE  0.7 V (silicon).
 The base-collector junction is reverse-biased, therefore VCB is large.
 Conventional current flows into the collector and base, and out of the

    emitter.

We can also define a couple of transistor performance parameters. The ratio of
collector current to emitter current is called  (alpha).  typically is greater than
0.95. A somewhat more useful parameter is the ratio of collector current to base
current. This is called  (beta) and can also be found on transistor spec sheets as hFE
(hFE is one of four hybrid parameters). It is also referred to generically as current
gain (if IB is in the input signal and IC is the output signal then  represents the
amount of signal boost or gain). For small signal transistors  typically is in the
range of 100 to 200, although it can be larger. For power transistors,  tends to be
smaller, more like 25 to 50. Presented as formulas we have:

 = IC / IE                                (4.1)
 = IC / IB                                (4.2)

And with a little math,                                                                 Figure 4.8
                                                                                        NPN Schematic symbol
                              =  / (+1)
                              =  / (1- )
                             IC =  IB

Finally, we come to the schematic symbol of the NPN BJT, as shown in Figure 4.8. A
common variation places the body of the device within a circle. Following the
standard, the arrow points to N material and in the direction of easy conventional
current flow.

The PNP Bipolar Junction Transistor                                                     Figure 4.9
                                                                                        PNP Schematic symbol
The PNP version of the BJT is created by swapping the material for each layer. The
outcome is the logical inverse of the NPN regarding current directions and voltage
polarities. That is, conventional current flows into the emitter, and out of the
collector and base (echoing the electron flow of the NPN). Further, voltages across
the device have reversed polarity, for example, VBE  -0.7 V. All of the other
characteristics remain unchanged so equations such 4.1 and 4.2 are still applicable.
Just about any NPN-based circuit has its PNP counterpart. The schematic symbol of
the PNP reverses the emitter arrow. As the base is now the N material, the arrow
points toward the base. This is illustrated in Figure 4.9.

94
4.3 BJT Collector Curves

One of the more useful BJT device plots is the family of collector curves. This is a
series of plots of collector current, IC, versus collector-emitter voltage, VCE, at
varying levels of base current, IB. To generate these curves we drive the base
terminal with a fixed current source establishing IB. A DC power supply is attached
from the collector to emitter and then swept from zero volts to some upper value.
This establishes VCE. Simultaneously, we track the resulting collector current and
plot the result. This results in one trace. The base current is then increased and the
DC supply swept again for a second trace. This process is repeated to create a family
of curves. An example is shown in Figure 4.10.

    IC                                                                                     Figure 4.10
                                                                                           A family of collector curves.
               saturation

                                     breakdown

                           constant
                           current

    ICEO VCE(sat)                               BVCEO  VCE

The bottom curve results when IB = 0. Ideally, the corresponding collector current
would be 0 but a small leakage current occurs. This is usually referred to as ICEO,
meaning the Collector-Emitter current with the base terminal Open (i.e., no base
current). The curves above this correspond to increasing levels of base current; each
new base current stepping up a fixed amount for each subsequent trace (e.g., 0 A,
10 A, 20 A, 30 A, etc.).

The most striking thing about this set of curves is that there are three distinct regions
or zones of operation. To the extreme left of the curve the current rises rapidly. This
is known as the saturation region. The break-over point is fairly small at just a few
tenths of a volt. This can be found on a data sheet as VCE(sat). The saturation region is
used in transistor switching applications.

95
At the extreme right is another region where the collector current rises rapidly. This
is called the breakdown region. This is the same effect we saw with individual
diodes. We do not wish to operate devices in this region as damage may result. The
breakdown voltage is denoted on most data sheets as BVCEO (Collector to Emitter
voltage with an Open base). For general purpose devices this will be in the range of
30 to 60 volts or so, but it can be much higher.

In between these two extremes is a region where the collector current is relatively
constant, showing only a modest positive slope. This is the constant current region.
This is where we want the transistor to operate for applications such as linear
amplifiers.

A device called a curve tracer can be used to generate this family of curves in the
lab. A very good approximation for  can be determined using these curves. First, we
determine the approximate circuit values for IC and VCE, and locate this point on the
graph. We then find the nearest plot line to that point. From the intersection of VCE
and and this plot line we track back to the vertical axis to find the precise value of IC
for that trace. We count the number of traces and multiply by the base current step
size to determine the corresponding base current. We then divide the two values and
arrive at .

Example 4.1

Assume we have a BJT operating at VCE = 30 V and IC = 4 mA. If the device                   Figure 4.11
is placed in a curve tracer and the resulting family of curves appears as in                Curve tracer display for
Figure 4.11, determine the value of . Assume the base current is increased                  Example 4.1.
10 A per trace.

        IC

         (mA)

              6

4

2

                                       10 20 30 40 (V) VCE

         First, find a trace close to the operating point of 30 volts and 4 mA. Draw a
         vertical line at 30 volts and stop when that line intersects the trace nearest to

96
         4 mA. In this example that's the second trace from the top. From that
         intersection point, track back to the vertical axis to determine the precise
         collector current. That's roughly 4.2 mA here. To determine the base current
         count up the number of traces to the selected trace. The selected trace is the
         fourth one up (do not include the bottom trace where IB is 0). The base
         current is increased by 10 A per trace so that leaves us with IB = 40 A.

                               = IC
                                     IB

                                = 4.2 mA 40 A
                                = 105

Rise in  and Early Voltage

When looking at the collector curves, a good question we might ask is why the
collector current rises as VCE increases. This is due to the fact that the increased
collector-emitter voltage is responsible for an increase in collector-base voltage (by
definition, VCE = VCB + VBE). VCB is the reverse-bias potential on the collector-base PN
junction. As this reverse potential increases, the collector-base depletion region
widens. As it widens, it penetrates further into the base layer. Because the base is
effectively narrowed, the chances for recombination are reduced, thus reducing base
current and effectively increasing .

If we extend the constant current region traces back into the second quadrant they
intersect at a point called the Early Voltage, named after James Early, and denoted as
VA. This is illustrated in Figure 4.12.

                                                                 IC

                                                                                                                     Figure 4.12
                                                                                                                     Early Voltage.

    VA  VCE

97
4.4 BJT Data Sheet Interpretation                                                       Figure 4.13a
                                                                                        2N3904 data sheet.
The data sheet for a common NPN transistor, the 2N3904, is shown in Figure 4.13.
This model is available from several different manufacturers. First off, note the case  Used with permission from SCILLC
style. This a TO-92 plastic case for through-hole mounting and is commonly used for     dba ON Semiconductor.
small signal transistors. Under the maximums we find the device has a maximum
power dissipation of 625 mW in free air (ambient temperature of 25캜), a maximum
collector current of 200 mA and a maximum collector-emitter voltage of 40 V.
Obviously, the device cannot withstand maximum current and voltage
simultaneously.

98
In Figure 4.13b we find a variety of characteristics including nominal values for        Figure 4.13b
(listed here as hFE) under various conditions. At particularly small or large collector  2N3904 data sheet (cont).
currents  tends to drop off. Also, note the wide 3:1 variance at 10 mA. Perhaps
more illustrative are the graphs from the third page, Figure 4.13c.

99
The upper-most graph depicts the variation of  with both collector current and          Figure 4.13c
temperature. The normalized  is plotted on the vertical axis. That is, this is not the  2N3904 data sheet (cont).
expected value but is a ratio used to compare  under varying conditions.

For example, at room temperature and 10 mA, the normalized value is 1.0. The
second page indicated a range of 100 to 300 for the 2N3904's  under these
conditions. Let's say we measure one particular transistor to have a  of 200. If we
were to operate this transistor at a lower current, say 0.2 mA, the  would drop.
From the graph, the normalized  value at 0.2 mA and 25 C is 0.7. Therefore, the 

100
under these conditions would be 0.7/1.0  200, or 140. The graph also shows that,
generally speaking,  tends to increase with increasing temperature.

The middle graph plots the collector-emitter saturation voltage, or VCE(sat), for various  Figure 4.14
current conditions. This is an important parameter when dealing with transistor            Ebers-Moll model of the NPN
switching circuits. We shall refer back to this graph a little later in this chapter.      BJT.

4.5 Ebers-Moll Model

A good, functional model of the BJT is the simplified Ebers-Moll model shown in
Figure 4.14. This utilizes an ideal diode to model the base-emitter junction and a
current-controlled current source located at the collector-base. This model is
sufficient to achieve good analysis results with a variety of DC and low frequency
circuits. It is important to remember, though, that  varies not only from device to
device, but also varies with changes in temperature, collector current and collector-
emitter voltage.

We can put the Ebers-Moll model to use in basic DC biasing circuits. To properly
bias the BJT we need to make the collector-base reverse-biased and the base-emitter
forward-biased. In other words, VC > VB > VE. There are many ways to achieve this.
One method places the emitter at ground, a modest DC source in the base-emitter
loop, and a somewhat higher DC source at the collector. An example is shown in
Figure 4.15.

                                                                                           Figure 4.15
                                                                                           Simple base bias circuit.

The two resistors serve to limit the transistor's currents and voltages. Because the
emitter is at ground, the common point, this circuit is classified as having a common
emitter configuration. There are many possible common emitter circuits. We shall
refer to this one specifically as base bias.

Now, let's replace the transistor with the Ebers-Moll model. The result, with added
voltage polarities and current directions, is shown in Figure 4.16.

101
                                                                                       Figure 4.16
                                                                                       Base bias circuit with Ebers-
                                                                                       Moll model.

Given values for the resistors, power supplies and , all of the currents and voltages
may be determined using fundamental circuit analysis techniques. The basic idea is
to create KVL equations for the two loops and then expand using Ohm's law. We
begin with the base-emitter loop.

             V BB = V RB+V BE        (4.3)
             V BB = I B RB+V BE

               I B = V BB -V BE
                          RB

And for the collector-emitter loop:

             V CC = V RC +V CE       (4.4)
             V CC = IC RC+V CE
             V CE = V CC - I C RC

To obtain IC, recall that IC =  IB.

Example 4.2

     Determine the circulating currents and device voltages for the circuit of
     Figure 4.15 if VBB = 10 V, VCC = 15 V, RB = 200 k, RC = 1 k and  = 100.
     Assume that the transistor is silicon.

     First, find the base current. KVL dictates that the voltage across RB is 9.3
     volts.

102
                                 I B = V BB -V BE
                                             RB

                                 I B = 10 V -0.7 V 200 k 
                                 I B = 46.5 A

         Now find the collector current and follow with Ohm's law and KVL.

                                IC= IB
                                I C = 10046.5  A
                                I C = 4.65mA

                               V CE = V CC - I C RC
                               V CE = 15 V -4.65 mA1 k 
                               V CE = 10.35 V

         For the sake of completeness, the voltage across RC is 4.65 volts, VCB is 9.65
         volts and IE is 4.6965 mA.

The preceding example illustrates that the place to start the analysis is in the base-
emitter loop instead of the collector-emitter loop. This is because in the base-emitter
loop we have the forward-biased base-emitter junction which has a known potential
(approximately 0.7 volts). In contrast, the collector-emitter voltage is an unknown as
it includes the reverse-biased collector-base junction. That voltage will depend on
other circuit elements, most notably the collector resistor and associated supply.

An improvement on the circuit of Example 4.2 would be to redesign it for a single
power supply rather than two supplies. This is easy to do. All that is needed is to
keep the base current unchanged. If that remains at its original value then the
collector current won't change and consequently nothing in the collector-emitter
loop will change either. Using the 15 volt source for VBB means that the voltage
across RB will increase to 14.3 volts. Ohm's law then indicates that RB must be 14.3
volts divided by 46.5 A, or 307.5 k.

 Variation Issues

There is a major problem with the circuit of Figure 4.15, namely, it lacks stability of
collector current and collector-emitter voltage. As we shall see in upcoming
chapters, it is important to keep these parameters stable in order to ensure consistent
performance for many kinds of circuits. As we noted from our inspection of the
2N3904 data sheet, the variation of  can be quite large at a given operating point. If
we also add in the variance due to temperature and other factors, we may be looking
at a 10:1 range. If we repeat Example 4.2 with a doubled  of 200, the base-emitter
loop is unchanged but the collector current doubles to 9.3 mA. This increases the

103
voltage drop across RC to 9.3 volts which then forces VCE to drop to 5.7 volts. Given
a typical production run of transistors, this circuit might exhibit collector currents
from less than 4 mA to more than 10 mA. In some applications this variation in
current might be tolerable but not in all of them. For example, suppose an LED is
placed in series with RC. Because the brightness of an LED depends on its current
level, the brightness will now depend on the  of the specific BJT used. If this is one
LED in a larger display made up of similar circuits, then the illumination will be
uneven between them causing the entire display to appear off kilter.

In fact, if this circuit was built in the lab, it is quite likely that after turning on the
power, you could watch IC slowly rise on your ammeter. This is because the BJT will
begin to warm up as it dissipates power. As noted from the data sheet,  increases
with increasing temperature. Because IB is a fixed value, any rise in  means that IC
must also rise. This increased current will tend to cause a further rise in power
dissipation and temperature which causes a further increase in , and the process
cycles. We have created an inadvertent thermal positive feedback loop. Left
unchecked, devices could overheat and be destroyed. We will examine biasing
circuits that achieve high stability in the next chapter.

There is another interesting aspect to this circuit. As noted, if we substituted the
original BJT with another unit that had a higher , the collector current would rise.
What if we continued this to higher and higher  values? For example, if we
increased  to 400 (admittedly, rather high) the new collector current would seem to
jump up to 46.5 A 400, or 18.6 mA. There is a "small" problem with this value.
Ohm's law indicates that this current would develop a drop of 18.6 volts across the 1
k RC but that's impossible because VCC is only 15 volts. The only way that "works"
is if somehow the BJT is transformed magically into a 3.6 volt battery. No amount of
prayer or letters to Santa will make that happen17.

4.6 DC Load Lines

So how do we determine the range of possible values of collector current and
collector-emitter voltage in any given DC BJT circuit? One answer is to employ the
concept of the DC load line. In general, a load line is a plot of all possible coordinate
pairs of IC and VCE for a transistor in a given circuit. Referring back to Figure 4.16,
we pick up with Equation 4.4 and solve it for IC :

     V CE = V CC - I C RC
      I C = 1 (V CC -V CE )
             RC

                   I C = - 1 V CE +V CC   (4.5)
                                  RC  RC

17 Both being equally effective.

104
Equation 4.5 is a linear equation of the form y = mx + b. The y intercept (the value
of IC when VCE = 0) is VCC/RC. This is the maximum collector current that can be
achieved. At this point the transistor is saturated and this maximum is referred to as
IC(sat). The x intercept (the value of VCE when IC = 0) is VCC. This represents the largest
possible voltage across the transistor's collector-emitter. At this point the current is
cut off, and therefore this voltage is called VCE(cutoff). Lastly, the slope of the line is
-1/RC. A plot is shown in Figure 4.17.

       IC                                                                                    Figure 4.17
     I C(sat)                                                                                Generic DC load line.

     I CQ      Q point

               VCEQ     VCE(cutoff)  VCE

To complete the graph, we also include the operating point for some specific
transistor. This is called the quiescent point, or Q point, and the associated device
current and voltage are called ICQ and VCEQ. All possible Q points lay on this line.

Referring back to Example 4.2 and using Equation 4.5, we can summarize the circuit
as follows:

         IC(sat) = 15 mA
         VCE(cutoff) = 15 V

         Q Point for  = 100:
         IC = 4.65 mA
         VCE = 10.35 V

         Q Point for  = 200:
         IC = 9.3 mA
         VCE = 5.7 V

This is plotted in Figure 4.18.

105
       IC                                                                                 Figure 4.18
                                                                                          Load line for the variations
  15 mA                                                                                   on Example 4.2.
 9.3 mA
4.65 mA    Q for beta=200
                                Q for beta=100

           5.7 V  10.35 V  15 V                 VCE

If we calculate a collector current that is greater than the saturation current, then we
know that the actual current will be the saturation current maximum. For this circuit,
any calculated value greater than 15 mA indicates that the transistor would produce
only 15 mA (our earlier example using  = 400, for instance). In reality, the true
value will be very slightly less. This is because the collector-emitter voltage does not
go all the way down to zero volts when the device is saturated. Typically, VCE(sat) will
be a tenth of a volt or so for small signal devices. Precise values can be determined
from device graphs such as the middle graph of Figure 4.13c, labeled "Collector
Saturation Region". As an example, if IC = 10 mA and IB = 0.3 mA, then VCE(SAT) is
approximately 0.15 V. It turns out that we can use saturation to our advantage in
switching circuits, as we are about see.

4.7 BJT Switching and Driver Applications

As mentioned, variation in  can cause changes in collector current. This can cause
performance issues. For example, when driving an LED, this can lead to variance in
brightness. But what if we purposely put the transistor into saturation? Saturation is
a fixed value. It is inherently stable and  no longer matters. Effectively, when a BJT
saturates,  is forced to drop to whatever value is needed to produce IC(sat). We just
need to make sure that even the smallest  is large enough to cause saturation.

The Saturating Switch

A good example of this is the saturating LED driver circuit shown in Figure 4.19. To
begin with, the whole point of the driver is to offload the current demand from the
prior circuit. For example, we may wish to light an LED from the output of a logic

106
gate or microcontroller chip. The problem is that those circuits might only be able to
deliver, say, 5 mA when we might need well over 10 mA to achieve the desired
brightness. The LED driver circuit is used to overcome this limitation.

                                                                                                                     Figure 4.19
                                                                                                                     Saturating LED driver circuit
                                                                                                                     (positive logic).
                                                                                                                     Note: The negative terminal of
                                                                                                                     VCC is connected to ground (not
                                                                                                                     shown).

With the driver, the logic circuit will only need to supply base current, not LED
current. Here is how it works: If the logic input voltage is zero, there will be no base
current. This means that there will be no collector current and therefore the LED will
be off. At this point the BJT is in cutoff. In contrast, when the logic level goes high,
all of the logic voltage drops across RB, with the exception of VBE. This creates IB. If
properly designed, this current will be sufficient to put the BJT into saturation. The
BJT acts as a switch, completing the circuit between the DC supply, the LED and the
current limiting resistor, RC. For this to work reliably, we have to make sure that the
ratio of saturation current to base current is much less than . A value of 10 or so
would guarantee hard saturation.
If we would like to invert the logic, that is, have a logic low turn on the LED and a
logic high turn it off, we can achieve that with a PNP version of the circuit as shown
in Figure 4.20.

                                                                                                                     Figure 4.20
                                                                                                                     Saturating LED driver circuit
                                                                                                                     (negative logic).

107
Example 4.3                                                                            Figure 4.21
                                                                                       Circuit for Example 4.3.
         Determine the LED "on" current for the circuit of Figure 4.21. Assume the
         logic "on" voltage is 5 volts, VLED = 1.8 volts and VCE(sat) = 0.

         First, find the base current.

                                 I B = V logic -V BE
                                             RB

                                 I B = 5 V -0.7 V 4.7 k 
                                 I B = 915 A

         Now find IC(sat), making sure the BJT is in saturation. This will be the LED
         current.

                               I C (sat) = V CC-V LED
                                               RC

                               I C(sat) = 5 V-1.8 V 330
                               I C(sat) = 9.7 mA

         The ratio of these two currents is just over 10:1. This will guarantee hard
         saturation.

There are many different applications for saturating switches. Just about anywhere     Figure 4.22
you can imagine a relay being used, you can consider a transistor switch. The          Direct DC motor drive.
transistor switch has the advantages of small size, no moving parts to wear out and
very fast switching speeds. Relays have the advantage for very high currents. Figure
4.22 shows an example of direct motor drive using a saturating BJT switch.

This circuit is used to control the speed of a DC motor through a technique
called pulse width modulation. The speed of the motor will depend on the
average voltage applied to it. The trick here is that instead of applying a
continuously variable voltage to the motor, we instead apply a series of pulses
of varying width. These pulses are sufficient to saturate the BJT, causing it to
behave as a switch. These pulses are so fast that the motor does not start and
stop, but rather inertia keeps it going. Instead, the motor responds to the
averaged value of these pulses. If the pulses are narrow and widely spaced, the
average value will be low and the motor speed will be slow. If the pulses are
wide and closely spaced, the average will high and the motor speed will be
fast.

108
The resistor and capacitor at the base are used to shape the incoming pulse to
improve performance. The diode across the motor winding is particularly important.
It is referred to as a snubbing diode18. Without it, the switching transistor might
experience large and damaging transient spikes. Here's why: Let's assume the BJT is
on and conducting fully. This current is the same current flowing through the motor's
armature, which is little more than a huge coil of wire. That means it exhibits a lot of
inductance. When we turn off the transistor, we are attempting to turn off the
armature current, but the current through an inductor cannot change instantaneously.
The result is that the winding now generates a large flyback voltage (also called an
"inductive kick") directly across the BJT. That is, the winding momentarily appears
as a high voltage source of opposite polarity and, via KVL, this potential appears
from collector to emitter. This could damage the BJT. The snubbing diode effectively
short-circuits the winding when it reverses voltage polarity, preventing the large
spike. The remainder of the time the diode is reverse-biased and effectively out of
the circuit.

The Non-Saturating Driver

It is also possible to create a switch or driver that is non-saturating. An example of a
non-saturating LED driver is shown in Figure 4.23.

                                                                                                                     Figure 4.23
                                                                                                                     Non-saturating LED driver
                                                                                                                     circuit (positive logic).

The advantage of this circuit is that it requires less current from the logic circuit.
Unfortunately, it also exhibits higher transistor power dissipation and requires a DC
source that is higher than the logic level. The operation is as follows: As in the
saturating driver, if the logic level is zero, there is no rise in the base-emitter loop
and the collector current will also be zero. With a high logic voltage, via KVL around
the base-emitter loop, all of the logic input voltage drops across RE, with the
exception of VBE. This creates IE which is virtually the same as IC (which is ILED). This

18 It is also known as a commutating diode, clamp diode, flyback diode and by a host of
    other names. But as Shakespeare said, "A snubbing diode by any other name would
    clamp a flyback voltage as well". Or something like that.

109
circuit "programs" the emitter current via the resistor and logic voltage. Therefore it
is fixed and stable. This process is sometimes referred to as bootstrapping. It might
be said that the emitter voltage is "bootstrapped" to within 0.7 volts of the logic
input level, keeping it stable19. In any case, if  varies, this will cause an inverse
change in IB with no change in IC. A negative logic PNP version is also possible and
left as an exercise.

Example 4.4

Determine the LED "on" current for the circuit of Figure 4.24. Assume the                  Figure 4.24
logic "on" voltage is 5 volts, VLED = 1.8 volts and  = 100.                                Circuit for Example 4.4.

We can find IC directly because IC  IE . This will be the LED current.

             I C = V logic-V BE
                        RE

             I C = 5 V-0.7 V 270
             I C = 15.9 mA

Note that  was not used. All it tells us is that IB = 15.9 mA/100, or 159 A.
A higher  would simply lead to a lower base current.

For the sake of completeness, we might also note that

             V CE = V CC -V LED -V R E

             V CE = 10 V-1.8 V-4.3 V
             V CE = 3.9 V

Clearly, if VCE is 3.9 volts, the transistor is not in saturation.

The Zener Follower

In the prior chapter we examined a method of regulating the output voltage of a
filtered full-wave rectifier through the use of a Zener diode. The downfall of that
specific circuit is that it was not particularly efficient because it drew a fair amount
of current even when the demand for load current was light. Using the concept of
locking one voltage to another, as in the non-saturating switch, we can create a nice
improvement, the Zener Follower.

19 This is in reference to the old phrase "pulling yourself up by your bootstraps". To be
    honest, that saying never made sense to this author and all that ever happened when I
    tried to do it was that my arms got tired.

110
A Zener Follower is shown in Figure 4.25. The input signal is the positive rectified
and filtered output of the AC-to-DC power supply.

                                                                                                                     Figure 4.25
                                                                                                                     Zener Follower.

The primary thing to notice is that the Zener diode is reverse-biased via resistor R.
That is, a current will flow down through R and into the Zener. The Zener presents a
fixed potential, VZ. Consequently, the difference between the input voltage and VZ
must drop across R, and by extension, VCB. Further, the final output voltage is the
voltage at the BJT's emitter which must be VZ - VBE. As these are both fixed, stable
potentials, the output must likewise be a fixed, stable voltage. Lastly, because
VCE = VCB + VBE, it is apparent that any variation between the input voltage and the
desired output (for example, due to ripple) must be dropped across the BJT.

The diode current is kept low in the Zener Follower and thus its power dissipation is
also modest. Further, current draw from the input circuit is a direct reflection of load
current demand. If the load current requirement is low, very little current will flow
through the transistor, and ultimately, from the input circuit. This makes for a more
efficient system.

Summary

A bipolar junction transistor may be thought of as an extension of a simple diode or
PN junction. Another layer of doped material is added, resulting in either an NPN or
PNP configuration, both with two depletion regions. The two depletion regions
create two hills in the energy diagram. The three terminals of the device are called
the emitter, base (middle) and collector. BJTs are not normally constructed
symmetrically and swapping the collector and emitter can result in unpredictable
behavior.

For proper operation, the base-emitter junction is forward-biased while the collector-
base junction is reverse-biased. This results in the emitter and collector currents
being very nearly equal and much, much larger than the base current. The ratio of
collector current to base current is called  (beta) while the ratio of collector current
to emitter current is called  (alpha).  in particular is subject to wide variations and

111
it can have a major impact on circuit parameters. A plot of collector current versus
collector-emitter voltage reveals the three main regions of the BJT circuit: saturation,
constant current and breakdown.

The Ebers-Moll model consists of a diode from the base to emitter and a controlled
current source from the collector to base. This simple model of the BJT can be used
to solve a variety of transistor circuits, particularly when used in conjunction with a
DC load line. The DC load line is a plot of all possible operating points for a given
transistor circuit.

Finally, it is possible to create switching and driver circuits using BJTs that produce
stable output currents. These may utilize saturating or non-saturating configurations
with NPN or PNP devices.

Review Questions

    1. Describe the energy diagram for a forward-reverse biased BJT.
    2. Define .
    3. Define .
    4. Define Early voltage. What is its significance?
    5. What is a family of collector curves? What information can we derive from

         it?
    6. Describe the Ebers-Moll BJT model.
    7. Explain some of the issues involving variation of .
    8. What is a DC load line?
    9. How is a saturating switch different from a non-saturating driver? What are

         the advantages and disadvantages of each?
    10. What is a Zener Follower?

Problems

Analysis Problems

    1. Determine  if  = 0.99.

    2. Determine  if  = 200.

    3. Determine the currents for the circuit of Figure 4.26 if VBB = 5 V,
         VCC = 20 V, RB = 200 k, RC = 2 k,  = 100.

    4. Determine the transistor voltages for the circuit of Figure 4.26 if VBB = 5 V,
         VCC = 20 V, RB = 200 k, RC = 2 k,  = 200.

112
                                                                                                                     Figure 4.26

    5. Determine the LED current in the circuit of Figure 4.27 if Vlogic = 5 V,
         VCC = 5 V, VLED = 2.1 V, RB = 3.6 k, RC = 270 ,  = 100.
                                                                        Figure 4.27

    6. Determine the LED current in the circuit of Figure 4.27 if Vlogic = 0 V,
         VCC = 5 V, VLED = 2.1 V, RB = 3.6 k, RC = 270 ,  = 100.

    7. Determine the LED current in the circuit of Figure 4.28 if Vlogic = 5 V,
         VEE = 5 V, VLED = 2.2 V, RB = 2.7 k, RC = 220 ,  = 100.
                                                                        Figure 4.28

113
    8. Determine the LED current in the circuit of Figure 4.28 if Vlogic = 0 V,
         VEE = 5 V, VLED = 2.2 V, RB = 2.7 k, RC = 220 ,  = 100.

    9. Determine the LED current in the circuit of Figure 4.29 if Vlogic = 3.6 V,
         VCC = 10 V, VLED = 2.3 V, RE = 270 ,  = 200.

                                                                        Figure 4.29

    10. Determine the LED current in the circuit of Figure 4.29. Vlogic = 0 V,
         VCC = 10 V, VLED = 2.3 V, RE = 270 ,  = 200.

    11. Using the 2N3904 data sheet, determine VCE(sat) if IC = 30 mA and
         IB = 1 mA.

    12. Using the 2N3904 data sheet, determine the percent change in  if
         IC = 10 mA and the temperature rises from 25캜 to 125캜.

    13. Using the 2N3904 data sheet, determine the percent change in  if
         IC = 40 mA and the temperature drops from 25캜 to -55캜.

Design Problems
    14. Using Figure 4.26, determine a value for RB to set IC to 5 mA if VBB = 5 V,
         VCC = 25 V, RC = 2 k,  = 100.
    15. Using Figure 4.26, determine a value for RC to set VCE to 6 V if VBB = 10 V,
         VCC = 25 V, RB = 330 k,  = 200.
    16. For the circuit of Figure 4.27, determine a value for RC to set the LED
         current to 15 mA. Vlogic = 5 V, VCC = 5 V, VLED = 1.6 V, RB = 3.3 k.
    17. For the circuit of Figure 4.28, determine a value for RC to set the LED
         current to 20 mA. Vlogic = 0 V, VEE = 5 V, VLED = 2.0 V, RB = 2.7 k.

114
    18. For the circuit of Figure 4.29, determine a value for RE to set the LED
         current to 25 mA. Vlogic = 5 V, VCC = 9 V, VLED = 2.8 V.

Challenge Problems
    19. Determine the maximum and minimum values for IC in the circuit of Figure
         4.26 if all resistors have a 10% tolerance and  = ranges from 100 to 200.
         VBB = 5 V, VCC = 20 V, RB = 200 k, RC = 2 k.
    20. Derive and draw a PNP non-saturating LED driver circuit.

Computer Simulation Problems
    21. Simulate the circuit of Problem 3.
    22. Simulate the circuit of Problem 5.
    23. Simulate the circuit of Problem 7.
    24. Verify the design of Problem 14 using a simulator.

                             "If I have seen farther than others,
                    it was because I stood on the shoulders of giants."

                                        - Sir Isaac Newton

115
5 BJT Biasing

5.0 Chapter Learning Objectives

After completing this chapter, you should be able to:

               Explain the need for DC biasing of BJT amplifiers.
               Solve various BJT biasing circuits for device currents and voltages.
               Plot DC load lines for a variety of BJT biasing circuits.
               Discuss methods to increase circuit stability with regard to transistor parameter variation.

5.1 Introduction

As we saw in the preceding chapter, a bipolar junction transistor requires a forward-bias of the base-emitter
junction and a reverse-bias of the collector-base junction in order to operate properly. One of the prime BJT
parameters is the current gain, . It can have a considerable impact on the operation of the circuit. Unfortunately,
 also varies with changes in temperature, collector-emitter voltage, etc., and this can lead to circuit instability.
In this chapter we shall investigate a variety of circuit topologies to bias the BJT, always with an eye toward
stability.

5.2 The Need For Biasing

Why bias a transistor in the first place? After all, if the device exhibits current gain (i.e., ), why not just apply
an AC signal at the base and obtain an amplified version of it at the collector? The first thing to remember is that
current gain is an outgrowth of forward-reverse bias. Given that fact, and without an additional source of energy,
amplification cannot be produced. Also, remember the magnitude of the energy hill required for forward-biasing
the base-emitter. In order to achieve that, VBE needs to be around 0.7 volts. If we simply applied an AC signal to
the base, we could only hope to forward-bias the base-emitter when that signal exceeded 0.7 volts. The entire
negative half of the AC signal would be ignored along with everything positive that's below 0.7 volts. Seeing
that the voltage generated from many input devices such as microphones and sensors may only be a few hundred
millivolts, the entire signal could be ignored! The solution to these problems is to apply a DC bias to the
transistor and then superimpose the AC signal on top of that. In other words, if the AC voltage is riding on a
much larger DC voltage, then even the negative peak of the AC signal will be a net positive voltage, and we can
maintain proper transistor function.

There are numerous ways to establish a proper polarity DC bias on a transistor. The trick is to find ways to make
a stable bias, that is, to establish a Q point that doesn't move in spite of parameter changes such as changes in .
As we shall see in following chapters, an unstable Q point can have negative effects on the AC performance of

116
an amplifier. For example, it could make the gain unstable, increase distortion or
reduce output power. This lack of stability is a major problem with the base bias
configuration examined in the prior chapter. What we would like is a circuit that will
establish a collector current that does not shift even when  changes.

5.3 Two-Supply Emitter Bias

For proper functioning, the collector-base junction needs to be reverse-biased and        Figure 5.1
the base-emitter junction needs to be forward-biased. For an NPN transistor that          Two-supply emitter bias, NPN
means that the collector must be at the highest potential, the base somewhat lower        version.
and the emitter at the lowest potential of the three. One way of doing this is to apply
the usual positive supply to the collector, but instead of using a second potential at
the base, the base is tied to ground through a resistor. The requisite forward-bias on
the base-emitter is then achieved by connecting the emitter to a negative power
supply. This circuit configuration is shown in Figure 5.1 using an NPN device. We
shall refer to this as two-supply emitter bias.

We can derive an equation for the collector current by applying KVL to the base-
emitter loop:

     V EE = V RB+V BE +V RE
     V EE = I B RB +V BE +I E RE

Recalling that IB = IC/ and IE  IC ,

     V EE = ( I C /) RB+V BE+ I C RE

Solving for IC we arrive at

                             I C = V EE-V BE  (5.1)

                                   RE+ RB /

The absolute value has been added to the emitter supply voltage so there is no
confusion regarding the sign of this potential in the equation.

The thing to notice about equation 5.1 is that  only partly determines the collector
current. In fact, if we can make RE >> RB/, then the equation reduces to

                             I C  V EE-V BE   (5.2)

                                        RE

It is relatively easy to achieve the RE >> RB/ stipulation. Given typical values of ,
this will be the case if RE is approximately equal to or larger than RB. What we find
in this instance is that almost all of the emitter supply drops across RE to establish a

117
stable IC with  playing virtually no role. If  changes, the result will be an inverse
change in IB with IC remaining largely unchanged.

Now that we have the collector current, any other current or voltage in the circuit
may be derived by applying Ohm's law, KVL and the like. For example, to find VC,
the voltage from the collector to ground,

     V C = V CC - V RC
     V C = V CC - IC RC

And to find the transistor's collector-emitter voltage, VCE,

     V CE = V CC +V EE-V RC-V RE                                     ( 5.3 )
     V CE = V CC +V EE- IC RC - IC RE
     V CE = V CC +V EE- IC (RC+RE )

Note that VCE can also be found via VCE = VC - VE. Dropping voltages along the base-
emitter loop yields

     V E = -V RB -V BE
     V E = - I B RB -V BE

Also, it is to our advantage to develop the DC load line for this configuration. The
load line can serve as a "sanity check" for our computations. To find the endpoints,
IC(sat) is the maximum current and will occur when VCE = 0. If we imagine the current
rising as VCE collapses, eventually all of the available supply voltage will have
dropped across RC and RE. Thus

     I C(sat) = V CC +V EE                                    (5.4)

                 RC +RE

Similarly, VCE(cutoff) occurs when IC = 0. That means that there will be no potentials
across RC and RE. Therefore, VCE "absorbs" the entire available source voltage.

     V CE (cutoff ) = V CC +V EE                                     (5.5)

Do not attempt to memorize all of the myriad equations presented. There are simply
too many variations on the theme and it will only get worse when other biasing
configurations are introduced. Instead, remember how to find the collector current
and then get in the habit of applying Ohm's law and KVL to derive whatever else you
may need.

At this point a comprehensive example is called for.

118
Example 5.1                                                                          Figure 5.2
                                                                                     Circuit for Example 5.1.
         Assuming  = 100, plot the Q point (IC and VCE) on the load line for the
         circuit of Figure 5.2.

         Using Equation 5.1:

                           I C = V EE -V BE

                                       RE +RB /
                               I C = 10 -0.7 2.7 k  +5.1 k /100
                               I C = 3.38 mA

         Noting the relative sizes of RE and RB, the approximation should be close.

                           I C = V EE -V BE

                                           RE
                               I C = 10 -0.7 2.7 k 
                               I C = 3.44 mA

         To find VCE we can use the equation derived above (Equation 5.3).

                           V CE = V CC +V EE -I C (RC +RE)

                               V CE = 20 V+10 V -3.38 mA (3.3 k +2.7 k )
                               V CE = 9.72 V

         Now calculate the load line endpoints:

                           I C (sat) = V CC +V EE 

                                            RC +R E
                               I C(sat) = 20 V+ 10 V 3.3 K +2.7 K 
                               I C (sat) = 5 mA

                           V CE (cutoff ) = V CC +V EE 

                               V CE (cutoff ) = 20 V +-10 V
                               V CE (cutoff ) = 30 V

     The load line for the circuit in Example 5.1 is shown in Figure 5.3.

119
       IC                                                                               Figure 5.3
  5 mA                                                                                  DC load line for the circuit of
                                                                                        Figure 5.2.
3.38 mA Q

9.72 V     30 V  VCE

Note the proportions between voltage and current for the Q point. The
voltage is a little less than one-third of the maximum while the current is a
little more than two-thirds of its maximum.

Verification of Stability

The claim was made that two-supply emitter bias circuits like the one Figure 5.1
potentially have a stable Q point. If we were to plot a second Q point for a large
change in , it should hardly move, thus indicating very high stability. For example,
doubling  to 200 results in IC = 3.41 mA and VCE = 9.53 V. The new Q point has
edged just slightly closer to saturation, producing about a 1% change in current for a
100% change in . Clearly, this configuration can produce very small changes in the
Q point in spite of very large changes in .

Computer Simulation

The two-supply emitter bias circuit of Figure 5.4 is simulated using the DC Bias
function. A quick estimation shows that we expect about 2 mA of collector current
(9.3 V/4.7 k) and a collector voltage of about 8 volts (15 V - 2 mA  3.6 k). We
also expect a small negative potential at the base -IBRB). Given typical  values for
the 2N3904 (200-ish at this current, refer back to the data sheet), we expect a base
current of around 10 to 15 A, leaving us with a VB of approximately -0.1 volts. The
emitter voltage would be about 0.7 volts less than that, perhaps -0.8 volts or so.

In short, for a properly designed circuit of this type we expect VB to be pretty close
to 0 V and VE to be about -0.7 volts.

120
                                                                                                                     Figure 5.4
                                                                                                                     Schematic for two-supply
                                                                                                                     emitter bias simulation.

The results are shown in Figure 5.5. The node voltages agree with our estimations.
Node 3 is the collector voltage, very close to the estimation. The results for the base
voltage (node 2) and the emitter voltage (node 1) are also in line with the estimates.

                                                                                                                     Figure 5.5
                                                                                                                     Simulation results for two-
                                                                                                                     supply emitter bias circuit.

121
PNP Two-Supply Emitter Bias                                                              Figure 5.6
                                                                                         PNP two-supply emitter bias
While it is possible to create a PNP version of bias circuits by simply swapping out     circuit.
the device and then changing the signs of the power supplies, it is common to "flip"
the entire circuit from top to bottom so that the emitter winds up on top and the        Figure 5.7
collector on the bottom. One advantage of this is that, in a multi-transistor circuit    Circuit for Example 5.2.
schematic, all of the DC bias currents "run down the page", that is, the collector
currents flow from the top of the page to the bottom of the page. Figure 5.6 shows a
PNP two-supply emitter bias circuit.

All of the device current equations and component voltage equations derived for the
NPN version will hold for the PNP version. The differences to remember are that the
voltage polarities will be reversed (what was positive in the NPN is negative in the
PNP) and the current directions will be reversed (e.g., conventional current flows
into the NPN's collector but out of the PNP's collector. For example, in the NPN we
expect the base current to flow into the base terminal. This creates a small negative
voltage at the base and a somewhat more negative voltage (by 0.7 V) at the emitter.
In the PNP, the base current flows out of the base. This creates a small positive
voltage at the base and results in the emitter being slightly more positive (by 0.7 V).
This is perhaps best illustrated with an example.

Example 5.2

         Assuming  = 100, determine the Q point and load line endpoints of the
         circuit of Figure 5.7.

         First, note that this is a PNP drawn upside down so the emitter is at the top.
         Using Equation 5.1:

                           I C = V EE-V BE

                                       RE +RB /
                               I C = 15 -0.7 10 k  +15k /100
                               I C = 1.409 mA

         As a cross check, noting the relative sizes of RE and RB, the approximation
         should be close.

                           I C = V EE-V BE

                                           RE
                               I C = 15 -0.7 10 k 
                               I C = 1.43 mA

122
     To find VCE we can use Equation 5.3 with a slight modification.

                       V CE = V EE +V CC- IC (RC+RE )

                          V CE = 15V+25 V -1.409 mA(12 k +10k )
                          V CE = 9 V

     We complete the picture by determining the endpoints of the load line.

                        I C (sat) = V EE +V CC

                                       RC +R E
                           I C(sat) = 10 V + 25 V 12 K +10 K 
                           I C(sat) = 1.818 mA

                       V CE (cutoff ) = V EE +V CC

                          V CE (cutoff ) = 15 V+ 25 V
                          V CE (cutoff ) = 40 V

     The Q point is about 3/4ths of the maximum current and 1/4th of the maximum
     voltage.

5.4 Voltage Divider Bias

Another configuration that can provide high bias stability is voltage divider bias.       Figure 5.8
Instead of using a negative supply off of the emitter resistor, like two-supply emitter   Voltage divider bias.
bias, this configuration returns the emitter resistor to ground and raises the base
voltage. So as to avoid issues with a second power supply, this base voltage is
derived from the collector power supply via a voltage divider. The bias template is
shown in Figure 5.8.

Let's derive the equations for the load line. First, let's consider the saturation and
cutoff endpoints. For saturation, assume VCE goes to 0. What resistances are left to
limit the current?

     I C (sat) = V CC       (5.6)
               RC +R E

VCE(cutoff) occurs when IC = 0 and that means that there will be no potentials across RC
and RE. Therefore, VCE takes on the entire available source voltage.

     V CE (cutoff ) = V CC  (5.7)

123
The key to finding the Q point (and pretty much any other current or voltage in the      Figure 5.9
circuit) is to find IC. To simplify the process, Thevenize the voltage divider as shown  Thevenizing the voltage divider.
in Figure 5.9.

By inspection of Figure 5.9b,

     V TH = V CC R2
                   R1+R 2

     RTH = R1 || R2 = R1 R2
                           R1 +R 2

Now we can derive an equation for the collector current by applying KVL to the
base-emitter loop of Figure 5.9c:

     V TH = V RTH +V BE +V RE                                                            (a)

     V TH = I B RTH +V BE+ I E RE

Recalling that IB = IC/ and IE  IC ,

     V TH = ( IC /) RTH+V BE + I C RE

Solving for IC we arrive at

                             I C = V TH -V BE   (5.8)
                                    RE + RTH /                                       (b)

Can we find a quick approximation for IC as well? If we assume that the voltage
divider of R1 and R2 is lightly loaded, in other words, that the base current is
much, much less than the divider current, finding IC is easy. The divider
voltage yields the base voltage. We then subtract the 0.7 volt drop on the base-
emitter and what's left drops across RE. From there it's one short application of
Ohm's law to get IE, which is approximately equal to IC. But how do we know
if the divider is lightly loaded in the first place without going through the
Thevenin equivalent? Looking at Equation 5.8, as long as RE >> RTH/, we can
ignore the second term in the denominator, leaving us with our quick
approximation. Given typical values for , as long as R2 is not much larger
than RE, the approximation will be reasonably accurate.

Once IC is obtained we can find the transistor's collector-emitter voltage, VCE,         (c)

     V CE = V CC -V RC-V RE                     ( 5.9 )
     V CE = V CC - I C RC - IC RE
     V CE = V CC - I C( RC+ RE)

124
Time for yet another thrilling illustrative example.                              Figure 5.10
                                                                                  Circuit for Example 5.3.
Example 5.3

         Assuming  = 200, plot the Q point (IC and VCE) on the load line for the
         circuit of Figure 5.10. Also determine the value of VB.

         Calculate the load line endpoints so we know the maximums.

                               I C (sat) = V CC
                                          R C +R E

                               I C(sat) = 15 V 3.9 K +3.3 K 
                               I C (sat) = 2.08 mA

                               V CE (cutoff ) = V CC
                               V CE (cutoff ) = 15 V

         To obtain the Q point, first find the Thevenin values.

                               V TH = V CC R2
                                             R1+ R2

                               V TH = 15 V 4.7 k  10 k +4.7 k 
                               V TH = 4.8 V

                               RTH = R1R2 = R1 R2
                                                    R1+ R2

                               RTH = 10 k 4.7 k  10 k +4.7 k 
                               RTH = 3.2 k 

         Using Equation 5.8:

                               I C = V TH -V BE
                                       RE +RTH /

                               I C = 4.8 V -0.7 V 3.3 k  +3.2 k /200
                               I C = 1.236 mA

125
     Noting the relative sizes of RE and R2, the approximation should be fairly
     accurate.

               I C = V TH -V BE
                          RE

               I C = 4.8 V -0.7 V 3.3 k 
               I C = 1.242 mA

     To find VCE we can use Equation 5.9.

               V CE = V CC - I C( RC+ RE)

               V CE = 15V -1.236 mA(3.9 k +3.3 k )
               V CE = 6.1 V

     As far as finding VB is concerned, a decent approximation would be the
     value of VTH because we have determined that the divider is lightly loaded.
     In a more general sense, we could also find the drop across RE and then add
     VBE. The approximation yields 4.8 volts and the more accurate method yields

               V B = V BE +IC RE

               V B = 0.7 V +1.236 mA3.3 k 
               V B = 4.78 V

     The load line for the circuit in Example 5.3 is shown in Figure 5.11.

           IC                                                                     Figure 5.11
                                                                                  DC load line for the circuit of
     2.08 mA                                                                      Figure 5.10.

     1.236 mA Q

               6.1 V                         15 V  VCE

     Once again the proportions between voltage and current for the Q point
     appear to be proper when compared against the endpoints.

126
Verification of Stability

How much does the Q point move if  were to get cut half? Recalculating with a  of
100 yields IC = 1.23 mA and VCE = 6.14 V. This represents a shift in both current and
voltage of less than 1%. This will, of course, cause a near doubling of IB but this will
be hardly noticed here as the divider current is so much larger; approximately 15V/
(10 k + 4.7 k) or 1 mA versus about 1.23 mA/100 or 12.3 A.

PNP Voltage Divider Bias

To create the PNP version of the voltage divider bias, we replace the NPN with a PNP
and then change the sign of the power supply. As mentioned with the two-supply
emitter bias, these circuits are usually flipped top to bottom resulting in the flow of
DC current going down the page. All of the currents and component voltages are
unchanged except that their directions and polarities are reversed. The current
equations and so forth remain valid. Something a little odd-looking happens with the
voltage divider bias, though: we end up with ground being the most positive
potential and a negative supply at the bottom of the schematic. It works, but it's an
issue if we're using a traditional positive supply elsewhere in the circuit. After all,
why have two supplies where one will do? It turns out that we can make a positive
supply version fairly easily. All we need to do is add the magnitude of the negative
source voltage to the ground and power connections. This progression is shown in
Figure 5.12.

                                                                                                                     Figure 5.12
                                                                                                                     Progression of PNP voltage
                                                                                                                     divider bias circuit.
                                                                                                                     a. Direct conversion from NPN.
                                                                                                                     b. Top-to-bottom flip.
                                                                                                                     c. DC supply offset added to
                                                                                                                     achieve a positive supply.

     (a)  (b)  (c)

There is nothing magic about this procedure. In essence, all we've really done is
renamed the reference point. All of the individual component voltages remain
unchanged. For example, looking at Figure 5.12c versus 5.12b, it is still the case that
the top connection to RE is more positive than the bottom connection to RC by the
voltage VCC (although we did rename the supply to VEE to be consistent with where
it's connected). What has happened is that all ground-referenced (i.e., single

127
subscript) voltages have changed. For example, VB in Figures 5.12a and 5.12b is the
voltage across R2. In contrast, VB in Figure 5.12c is the voltage across R1. That makes
sense. If we move the reference then any voltage that is measured against the
reference will change.

When analyzing the PNP voltage divider, we could simply parrot the collector
current formula developed for the NPN, but there are other techniques. Two methods
are illustrated in the following example.

Example 5.4

     Assuming  = 200, determine the Q point (IC and VCE) for the circuit of              Figure 5.13
     Figure 5.13. Also determine the values of VC and VB.                                Circuit for Example 5.4.

     First off, R2 (now on top) is around the same size as RE so the approximation
     method should be accurate and we can assume the divider is lightly loaded.

     Method One

     We will focus on the base-emitter loop as usual because VBE is a known
     potential. Our immediate goal is to find the voltage across RE so that we can
     use Ohm's law to find IC. First we note that the voltage drop across R2 is
     equal to the combined drops across RE and VBE. The drop across R2 is found
     via the voltage divider rule.

                          V R2 = V EE R2 R1+ R2
                          V R2 = 15 V 4.7 k  10 k +4.7 k 
                          V R2 = 4.8 V

     And

                          V RE = V R2-V BE
                          V RE = 4.8 V-0.7 V
                          V RE = 4.1 V

     Therefore

                           I C = V RE
                                  RE

                           I C = 4.1 V 3.3 k 
                           I C = 1.24 mA

128
         Method Two

         Here we will determine all voltages with respect to ground.

                               V B = V EE R1
                                            R1+ R2

                               V B = 15 V 10 k  10 k +4.7 k 
                               V B = 10.2 V

         The voltage from base to emitter has a - to + polarity, meaning it is a rise of
         0.7 volts. Therefore

                               V E = V B+V BE
                               V E = 10.2 V +0.7 V
                               V E = 10.9 V

         The voltage across RE is the difference between VEE and VE.

                               V RE = V EE -V E
                               V RE = 15 V-10.9 V
                               V RE = 4.1 V

         This is the same value we arrived at using method one, so the collector
         current must be the same at 1.24 mA.

         To find VCE we also have options. One path is to use a slightly modified
         Equation 5.9.

                               V CE = -(V EE - I C( RC+ RE))
                               V CE = -15V +1.24 mA (3.9 k +3.3 k )
                               V CE = -6.07 V

         The collector is negative relative to the emitter, hence the negative sign. To
         avoid this, we could just swap the leads and refer to VEC instead.

         Alternately, we could find VCE by determining VC and then subtracting VE
         from it.

                               V C = I C RC
                               V C = 1.24 mA3.9 k 
                               V C = 4.84 V

129
                          V CE = V C-V E
                          V CE = 4.84 V -10.9 V
                          V CE = -6.06 V
     We see a very slight difference here due to carried rounding errors.

It is instructive to compare the results of Example 5.4 back to Example 5.3. These
circuits are otherwise identical except for the fact that one is NPN and the other is
PNP. We find the same results for device currents (IC) and component voltage
magnitudes (VCE or the voltage across RE); only the signs and directions are reversed.
On the other hand, we find that ground referenced potentials such as VB, VC and VE
are decidedly different between the two circuits.

5.5 Feedback Biasing

While two-supply emitter bias and voltage divider bias can produce very high
stability, there are other bias configurations available. Their stability tends not to be
quite as good, but they are superior to simple base bias. They also tend to use fewer
components than their high stability cousins. As a group, we refer to these as
feedback biasing configurations. They use the concept of negative feedback. This is
a technique where a change in the output can be reflected back to the input in such a
way that it tends to partially offset the output change.

Collector Feedback Bias                                                                    Figure 5.14
                                                                                           Collector feedback bias.
With a simple move of RB in the basic base bias configuration, we arrive at collector
feedback bias. The NPN template is shown in Figure 5.14. Compared to base bias, all
that has changed is that RB is connected to the lower part of RC rather than to the
power supply. That small change can have a noticeable effect on stability.

To understand how feedback works, assume that a current is flowing from the
supply, through RC, into the collector and finally, out of the emitter to ground. Via
KVL, VCE = VC = VCC - ICRC. Now suppose for some reason, a temperature change
perhaps,  increases. This should cause an increase in IC. An increase in IC, though,
would cause an increase in the drop across RC due to Ohm's law. This, in turn, would
force VC to drop. Here is the key: VC is also equal to the drop across RB plus the
voltage VBE. The base-emitter potential is fixed at approximately 0.7 volts so any
decrease in VC is reflected as a decrease in voltage across RB. By Ohm's law, that
means that IB must decrease by a similar proportion. This decrease tends to offset the
initial tendency of the collector current to increase.

130
To derive an equation for the collector current, we can use KVL.

             V CC = V RC +V RB+V BE                               (5.10)
             V CC = I E RC +I B RB+V BE

                              IC
             V CC = IC RC + RB+V BE

                               

               I C = V CC -V BE
                     RC +RB /

This equation is very similar to the current derivations for the two-supply emitter
bias (Eq 5.1) and voltage divider bias (Eq 5.8). Again, if we can set RC >> RB/ then
IC will be relatively immune from Q point shifts due to . The problem here is that
it's not nearly so easy to meet that stipulation in this circuit. Consequently, collector
feedback tends to have only modest stability.

Concerning the cutoff and saturation endpoints on the DC load line, once again,
cutoff is determined by the DC power supply while saturation is determined by the
amount of resistance in the collector-emitter to limit said power supply's current.

             I C (sat) = V CC                                     (5.11)
                        RC                                        (5.12)

             V CE (cutoff ) = V CC

Example 5.5

     Assuming  = 100, determine the Q point (IC and VCE) for the circuit of                Figure 5.15
     Figure 5.15. How much does the Q point change if  is halved?                          Circuit for Example 5.5.

     Using Equation 5.10

                             I C = V CC -V BE
                                   RC +RB /

                             I C = 15 V-0.7 V 10 k +180 k /100
                             I C = 1.21 mA

     Using KVL

                          V CE = V CC -V RC
                          V CE = V CC - I C RC
                          V CE = 15V-1.21 mA10 k 
                          V CE = 2.9 V

131
     If  is halved to 50

                          I C = V CC -V BE
                                RC +RB /

                          I C = 15V-0.7 V 10 k +180 k /50
                          I C = 1.05 mA

     V CE = V CC - I C RC

     V CE = 15V-1.05 mA10 k 
     V CE = 4.5 V

         For a 2:1 drop in  we see about a 13% reduction in IC with a somewhat            Figure 5.16
         larger change in VCE. This circuit is clearly not as stable as the two-supply    PNP Collector feedback bias.
         emitter bias or the voltage divider bias but it is superior to base bias.

The PNP version of the collector feedback bias configuration should come as no
surprise. The template is shown in Figure 5.16. Here, we use the same technique of
power supply shifting that was used with the PNP voltage divider in order to wind up
with a positive power supply. As with the PNP voltage divider, because we have
changed the reference point, all ground referenced voltages will be different from
their NPN counterparts. All currents and component voltages will have the same
magnitudes but with opposite directions and polarities.

Emitter Feedback Bias

The emitter feedback bias uses the same overall idea as the collector feedback            Figure 5.17
circuit, namely, that changes at the output will be reflected back to the input and thus  Emitter feedback bias.
help mitigate the initial change. While collector feedback focuses on collector
current establishing VC via RC, emitter feedback uses the fact that emitter current
establishes VE via RE. In both cases, these voltages are used to change the voltage
across RB, which results in a change in IB that opposes the original collector current
change.

A basic emitter feedback bias circuit is shown in Figure 5.17. We shall use KVL to
develop an equation for collector current.

     V CC = V RB+V BE +V RE                                (5.13)
     V CC = I B RB+V BE +I E RE
     V CC = IC  RB+I C RE+V BE

       I C = V CC -V BE
             RE +RB /

132
If we can set RE >> RB/ then the Q point will be stable in spite of changes in . The
problem here is the same as was the case in collector feedback, namely that this
stipulation is not easy to achieve. Consequently, the emitter feedback configuration
tends to have only modest stability. In any event, once the collector current is
known, VCE can be found using the techniques illustrated with the voltage divider
configuration. The endpoints for the DC load line are found in the usual manner.

             I C (sat) = V CC       (5.14)
                       RC +R E      (5.15)

             V CE (cutoff ) = V CC

Example 5.6

     Assuming  = 100, determine the Q point (IC and VCE) for the circuit of           Figure 5.18
     Figure 5.18.                                                                     Circuit for Example 5.6.

     Using Equation 5.13

                             I C = V CC -V BE
                                   RE +RB /

                             I C = 20 V-0.7 V 200+270 k /100
                             I C = 6.66 mA

     Using KVL

                          V CE = V CC -V RC-V RE
                          V CE = V CC - I C( RC+RE)
                          V CE = 20 V-6.66mA (1.8 k +200)
                          V CE = 6.68 V

     To complete the load line, we find

                        IC(sat) = 10 mA
                        VCE(cutoff) = 20 V

     Dropping  to 50 will result in

                        IC = 3.45 mA
                        VCE = 13.1 V

     We see less than a 2:1 change in IC and VCE but the stability is not dramatic.

133
Combination Feedback Bias

The final feedback bias configuration combines both collector feedback and emitter      Figure 5.19
feedback to arrive at the circuit depicted in Figure 5.19. We shall bestow upon it the  Combination feedback bias.
highly original name of combination feedback bias.
                                                                                        Figure 5.20
This circuit applies feedback to RB from both ends, so to speak, so it tends to have    Circuit for Example 5.7.
slightly better stability than either collector feedback or emitter feedback bias. Of
course, it is now only one resistor shy from the voltage divider circuit which is
considerably more stable.

The equations for the load line are listed below. The derivations are left as an
exercise.

               I C = V CC -V BE         (5.16)
                      RC+RE +RB /       (5.17)
                                        (5.18)
             V CE = V CC - I C( RC+RE)  (5.19)
             I C (sat) = V CC

                       RC +R E
             V CE (cutoff ) = V CC

Example 5.7

     Assuming  = 125, determine the Q point (IC and VCE) for the circuit of
     Figure 5.20.

     Note that this is the upside down PNP version. Using Equation 5.16

                             I C = V CC -V BE
                                   RC +RE +RB /

                             I C = 18 V-0.7 V 7.5 k +330+100 k / 125
                             I C = 2 mA

     Using KVL

                          V CE = V CC -V RC-V RE
                          V CE = V CC - I C( RC+RE)
                          V CE = 18V-2 mA(7.5 k +330 )
                          V CE = 2.34 V

134
Summary

DC biasing is required in order to maintain the proper junction potentials and
operation of the BJT. Several different circuit configurations are available to
establish a DC bias on both NPN and PNP transistors. These circuits vary in
complexity and their ability to maintain a constant operating point, or Q point, in the
face of variations of .

The two-supply emitter bias topology offers very high Q point stability. It achieves
this through the use of two powers supplies; one connected through a resistor to the
emitter and a second unit connected through a resistor to the collector. It is unique in
that the supplies are bipolar; one being positive and the other being negative.

The voltage divider bias circuit offers similar stability performance to the two-
supply emitter bias circuit. It uses a single supply and a resistive voltage divider to
establish a second, lower potential at the base terminal.

The three feedback bias configurations offer only modest enhancements in stability
but use the least amount of parts. They all rely on a single DC power source.

A DC load line is a plot of all possible collector current and corresponding collector-
emitter voltage operating points. No matter what the  for a circuit happens to be,
the transistor's operating point must lie on this line. It is a valuable DC analysis tool.

Review Questions

    1. Explain the need for DC biasing. Why can't we just apply an AC signal to the
         base of a BJT and expect proper amplification of the signal?

    2. What is a Q point?
    3. What are the four values found on a DC load line?
    4. Rank the bias configurations presented in this chapter in terms of their Q

         point stability relative to .
    5. Rank the bias configurations presented in this chapter in terms of their

         circuit complexity.
    6. Describe the process of making a PNP version of an NPN bias circuit.

135
Problems

Unless otherwise specified, use  = 100.
Analysis Problems

    1. Plot the load line for the circuit of Figure 5.21. VCC = 20 V, VEE = -8 V,
         RB = 7.5 k, RE = 10 k, RC = 12 k.
                                                                        Figure 5.21

    2. Determine the new Q point for Problem 1 if  = 250.
    3. Plot the load line for the circuit of Figure 5.22. VEE = 5 V, VCC = -18 V,

         RB = 22 k, RE = 1.2 k, RC = 1.5 k.
                                                                        Figure 5.22

    4. Determine the new Q point for Problem 3 if  = 50.
    5. Plot the load line for the circuit of Figure 5.23. VCC = 20 V, R1 = 15 k,

         R2 = 5 k, RE = 4.3 k, RC = 9.1 k.
136
                                                                        Figure 5.23

    6. Determine the new Q point for Problem 5 if  = 150.
    7. Plot the load line for the circuit of Figure 5.24. VEE = 16 V, R1 = 12 k,

         R2 = 4.7 k, RE = 6.2 k, RC = 10 k.
                                                                        Figure 5.24

    8. Determine the new Q point for Problem 7 if  = 200.
    9. Plot the load line for the circuit of Figure 5.25. VCC = 12 V, RB = 560 k,

         RC = 3.3 k.
                                                                        Figure 5.25

137
    10. Determine the new Q point for Problem 9 if  = 75.
    11. Plot the load line for the circuit of Figure 5.26.

                                                                        Figure 5.26

    12. Determine the new Q point for Problem 11 if  = 200.
    13. Plot the load line for the circuit of Figure 5.27. VCC = 15 V, RB = 470 k,

         RE = 560 , RC = 3.3 k.
                                                                        Figure 5.27

    14. Determine the new Q point for Problem 13 if  = 170.
    15. Plot the load line for the circuit of Figure 5.28.
    16. Determine the new Q point for Problem 15 if  = 75.
    17. Plot the load line for the circuit of Figure 5.29. VEE = 18 V, RB = 680 k,

         RE = 270 , RC = 3.9 k.
    18. Determine the new Q point for Problem 17 if  = 200.

                                                                        Figure 5.28
138
                                                                        Figure 5.29

Design Problems
    19. Determine a value for RE in the circuit of Figure 5.21 to set IC = 2 mA. Use
         VCC = 20 V, VEE = -8 V, RB = 10 k, RC = 5.6 k.
    20. Determine a value for RC in the circuit of Figure 5.22 to set VCE = 10 V. Use
         VCC = -25 V, VEE = 6 V, RB = 15 k, RE = 6.8 k.
    21. Determine a value for RC in the circuit of Figure 5.23 to set VCE = 8 V. Use
         VCC = 24 V, R1 = 22 k, R2 = 10 k, RE = 5.6 k.
    22. Determine new values for R1 and R2 in the circuit of Figure 5.24 in order to
         set IC = 500 A. VEE = 22 V, RE = 15 k, RC = 6.8 k.

139
Challenge Problems
    23. Determine the maximum and minimum values for IC in Problem 1 if every
         resistor has a 10% tolerance.
    24. Determine the maximum and minimum values for VCE in Problem 3 if every
         resistor has a 5% tolerance.
    25. Determine a value for RE in the circuit of Figure 5.23 to set VCE = 10 V.
         VCC = 30 V, R1 = 12 k, R2 = 3 k, RC = 8.2 k.
    26. Derive Equation 5.16.
    27. Determine the the power drawn from the supply for the circuit of Problem 5.
    28. Using a 15 volt power supply, design a bias circuit to create a very stable Q
         point of 2 mA and 5 volts.

Computer Simulation Problems
    29. Perform a series of DC simulations to test the Q point stability versus  of
         the circuit of Problem 1.
    30. Perform a Monte Carlo simulation to investigate the Q point stability of the
         circuit of Problem 5 if the emitter resistor has a 10% tolerance.

140
6 Amplifier Concepts

6.0 Chapter Learning Objectives

After completing this chapter, you should be able to:

               Explain the differences between voltage gain, current gain and power gain.
               Describe a basic voltage amplifier model using voltage gain, input impedance and output

                   impedance.
               Determine the effects of source and load impedance on system gain and explain how they

                   interact with an amplifier's input and output impedance.
               Describe and distinguish the concepts of noise and waveform distortion.
               Define the concept of output compliance.
               Discuss the frequency limits of an amplifier in general terms.
               Define Miller's Theorem.

6.1 Introduction

The concept of signal amplification finds numerous uses in the field of electronics. This includes applications
such as boosting the signal level from a sensor or driving loads like loudspeakers or antennas. Reduced to its
most simple terms, amplification is just multiplication. The ideal amplifier multiplies the amplitude of the input
signal by a constant. It should not change the frequency of the signal, alter its shape, add noise or in any other
way warp or distort the signal.

Amplifiers can be designed to be voltage sensing or current sensing and can be modeled as either controlled
voltage sources or controlled current sources. As a functional block, we are primarily interested in describing an
amplifier in terms of its amplification factor, input impedance and output impedance. The amplification factor is
also referred to as the gain and may be expressed in terms of voltage gain, current gain or power gain,
depending on the application. Other items of interest include the maximum output level or compliance, useful
frequency range, noise and distortion characteristics.

6.2 Amplifier Model

The ideal amplifier does nothing except increase the amplitude of the input signal. The factor of increase is
defined as the ratio of the output signal to the input signal. It is a unit-less quantity. For example, if the input
signal has a power of 10 milliwatts and the circuit boosts the signal up to 50 milliwatts, we say it has a power
gain of 50 milliwatts /10 milliwatts, or 5. Similarly, if the input signal is 2 volts and the output signal is 16 volts,
we say it has a voltage gain of 16 volts/2 volts, or 8. Historically, power gain is denoted as G. For voltage gain

141
and current gain we use Av and Ai, where A stands for Amplification factor. Some
amplifiers invert the signal from input to output. Basically, they flip the wave shape
upside down. For a simple sine wave this is equivalent to shifting the phase of the
signal by 180, and for a sine wave input the amplifier produces a -sine output. To
reflect this effect, the amplification factor is denoted as negative. For example, an Av
of -10 indicates an amplification factor of 10 with a signal inversion.

The size and complexity of an amplifier circuit can vary considerably, ranging from
a single transistor to dozens of transistors. To ease system design it is helpful to use
simplified functional models. Typically, these models use a resistor to represent the
impedance seen looking into the amplifier along with a controlled source and its
associated internal resistance. An example is shown in Figure 6.1.

                                                                                                                     Figure 6.1
                                                                                                                     A simple voltage amplifier
                                                                                                                     model.

This is a model of a voltage amplifier (note that Vin and Vout are specified along with a
controlled voltage source within the model). The controlled voltage source and its
series Zout is the Thevenin equivalent of the output when viewed from the load (i.e.,
the Vout pin). Likewise, Zin is the equivalent impedance seen by the driving source.
Because a voltage amplifier is designed to maximize voltage transfer, the input
impedance tends to be high to minimize loading (think of a voltmeter). Similarly, the
output impedance would tend to be low (think of an ideal voltage source). In
contrast, a circuit designed for maximum current transfer would tend to have a low
Zin and a high Zout. Precisely how the circuit creates the signal boost is not a concern
of this model, we only care that it does.

Loading Effects

Once the model is established it is relatively easy to recognize and compute loading
effects. Loading effects are signal losses caused by interactions between the
amplifier's impedances and those of the circuits and loads connected to it. A generic
model including loading effects is shown in Figure 6.2.

142
                                                                                         Figure 6.2
                                                                                         Voltage amplifier model with
                                                                                         loading effects.

A cursory examination of Figure 6.2 shows that there is a voltage divider between
Zgen and Zin along with a second divider between Zout and Zload. Each of these dividers
causes signal loss, that is, they reduce the final output voltage. The input voltage to
the amplifier is reduced as follows

             V i n-amp = Z i n V gen
                         Z i n+Z gen

The load voltage is reduced as follows

             V load = Z load  AvV i n-amp
                      Z load +Z out

Therefore the combined gain is

             Asystem = V load = Z i n  Av Z load
                                V gen Z i n+Z gen  Z load +Z out

To minimize these losses we'd like Zin >> Zgen and Zload >> Zout.

Example 6.1

     A voltage amplifier has the following specifications: Av=20, Zin=10 k,
     Zout=200 . It is driven by a 30 millivolt source with a 600  internal
     impedance and drives a 1 k load. Determine the load voltage.

143
         The voltage that appears at the amplifier's input is

                               V i n-amp = Z i n V gen
                                            Zi n+Z gen

                               V i n-amp = 10 k  10 k +600  30 mV
                               V i n-amp = 28.3 mV

         This is multiplied by the voltage gain of 20 and then reduced by the output
         divider.

                               V load = Z load  AvV i n-amp
                                         Zload + Z out

                               V load = 1 k  1 k +200 2028.3 mV
                               V load = 471.7 mV

         Without the loading effects the output signal would be simply 30 millivolts
         times the voltage gain of 20, or 600 millivolts. Further, note that if the
         source is replaced with a typical laboratory grade function generator
         exhibiting an internal impedance of 50  and the load is removed, being
         replaced by an oscilloscope exhibiting a typical 1 M input impedance, the
         loading effects would be minimal and we would measure just a few
         millivolts shy of the ideal 600 millivolts.

6.3 Compliance and Distortion

At some point the idealization that the output signal is merely the input signal times
the gain fails. All amplifiers have a limit on just how large the output signal can be.
This is set by the DC power supply and the amplifier design. The maximum output
signal (typically, the maximum output voltage) is referred to as the compliance. Any
attempt to produce an output signal that swings beyond the compliance will result in
waveform distortion. In the simplest case, the output signal is strictly and abruptly
limited to the compliance level and any portion of the output waveform that would
otherwise lay above that will be removed. It is as if some form of electronic scissors
clipped off the top of the waveform. Hence, this is often referred to as clipping. An
example of clipping is illustrated in Figure 6.3. The ideal output waveform is shown
in brown and the clipped waveform is shown in blue. The clipping is so severe here
that the clipped waveform now looks less like a sine wave and more like a square
wave. This is extreme waveform distortion and has important consequences.

144
              1.0                                                                     Figure 6.3
                                                                                      Clipped waveform.
              0.8

              0.6

              0.4

              0.2

     Voltage  0.0

              -0.2

              -0.4

              -0.6

              -0.8

              -1.0

              0     0.2  0.4        0.6  0.8  1

                              Time

Whenever a signal is altered in the time domain, there will be an alteration of its
frequency content. Depending on what we started with and the manner in which the
wave shape is altered, new frequency components may be added to the signal and
the levels of existing components may be changed or even deleted. The extreme
clipping that created a near-square wave added a large number of new frequency
components to the signal.

To see how the wave shape and frequency content are connected, consider the
waveform depicted in Figure 6.4. We start with a simple sine wave shown in green.
We refer to this as the fundamental or base frequency. We then add a harmonic. A
harmonic is another sine wave that is an integer multiple of the fundamental
frequency. It may be larger or smaller in amplitude and the phase may be shifted. In
this example we have a single sine at three times the fundamental frequency (blue).
When we add this harmonic to the fundamental we arrive at a new waveform shown
in red. This new waveform looks something like a square wave but with a "lumpy"
top and bottom. If we add more harmonics, these variations will begin to smooth
out, as shown in Figure 6.5. This waveform appears to be fairly close to a square
wave and not too distant from our earlier clipped waveform. Based on this, we can
conclude that the clipped sine wave has new frequency components added to it. We
can also conclude that if our amplifier clips a more complicated waveform such as a
snippet of music, that process will add new harmonics as well. Further, it is likely
that these harmonics will be audible and can change our perception of the music,
perhaps subtly but maybe drastically.

145
              1.0                                                           Figure 6.4
                                                                            Sine wave with third harmonic.
              0.8
                                                  Fundamental plus
              0.6                                 third harmonic
                               Fundamental

              0.4

              0.2

     Voltage  0.0

              -0.2

              -0.4       Third harmonic

              -0.6

              -0.8

              -1.0                                      0.6         0.8  1
                      0  0.2                 0.4

                                                  Time

              1.0                                 Fundamental plus                      Figure 6.5
                                Fundamental       seven harmonics                       Sine wave with seven
                                                                                        harmonics, approaching a
              0.5                                                                       square wave.

     Voltage  0.0                                                           1

              -0.5

              -1.0       0.2                 0.4        0.6         0.8
                   0

                                                  Time

146
Along with clipping, amplifiers can exhibit more subtle forms of distortion due to
internal nonlinearity. For example, it is possible for the gain to vary slightly as the
signal swings from low to high or from negative to positive. An example is shown in
Figure 6.6 with the distorted wave shown in red.

              1.2

              1.0 Ideal sine wave                                                                   Figure 6.6
              0.8                                                                                   Sine wave with distortion.

              0.6                                                                                   Figure 6.7
                                                                                                    Sine wave with distortion, level
     Voltage  0.4                                                                                   shifted.
                                                                         Distorted sine wave

              0.2

              0.0

              -0.2

              -0.4

              -0.6

              -0.8

              -1.0

              -1.2     0.2         0.4        0.6  0.8                                        1
                    0

                                        Time

At first glance it may appear as though the wave is merely offset negatively. This is
not the case. If we shift the wave vertically, as in Figure 6.7, it becomes apparent
that the wave is truly distorted and is no longer a pure sine wave.

              1.2

              1.0

              0.8
              0.6 Ideal sine wave

     Voltage  0.4
              0.2 Distorted sine wave

              0.0

              -0.2

              -0.4

              -0.6

              -0.8

              -1.0

              -1.2     0.2         0.4        0.6  0.8
              0                                                                                  1

                                        Time

147
Unlike the clipped wave, the distorted wave in Figure 6.7 exhibits an asymmetry; the
negative portion does not appear to be a mirror image of the positive portion. In
other words, this wave lacks half-wave symmetry. Waves that exhibit half-wave
symmetry contain only odd harmonic distortion (harmonics that are odd integer
multiples of the fundamental). In contrast, waves that lack half-symmetry have at
least one even harmonic. Here is how to test for half-wave symmetry. First,
consider the sawtooth wave shown in Figure 6.8.

                              V Figure 6.8
                                                                                                                     Half-wave symmetry test:
                                                                                                                     Sawtooth wave.

                                                                                                    t

Rotate the negative portion of the wave around the time axis as shown in Figure 6.9.

     V                                                                                               Figure 6.9

                                                                                                     Half-wave symmetry test:

                                                                                                     Sawtooth wave, negative

                                                                                                     portion rotated.

        t

Finally, slide the negative portion over the positive portion and see if they're                     Figure 6.10
identical, as in Figure 6.10.                                                                        Half-wave symmetry test:
                                                                                                     Sawtooth wave, negative
                                      V                                                              portion rotated and slid.

                                                                                                  t

148
If the two halves are identical then the wave has half-wave symmetry. The sawtooth
wave does not exhibit half-wave symmetry, therefore it must contain at least one
even harmonic.

An amplifier's linearity is often quantified through a Total Harmonic Distortion, or
THD, measurement. The measurement is carried out by applying a very pure, low
distortion sine wave to the amplifier. This is the fundamental. At the output of the
amplifier, a very selective filter is used to remove the fundamental. This leaves
behind just the added distortion harmonics.20 These harmonics are then treated as a
lumped value and presented as a percentage of the total signal. On an oscilloscope, it
is relatively easy for a person to discern THD levels in the double digits. On the
other hand, it is very difficult, if not impossible, for an individual to discern THD
levels much below 1% by eye. Of course, what matters is what we can hear, not how
the waveform looks. To put this in perspective, many high fidelity audio amplifiers
exhibit THD levels below 0.1% while an over-driven guitar amplifier might be
running over 20%. THD is not the final word on distortion though. It has its limits.
For example, all of the distortion products are lumped together. It says nothing about
which harmonics are particularly strong or their distribution. It also doesn't say
much about what happens when multiple frequencies interact. One method of trying
to quantify that is to apply two sine waves at different frequencies to the amplifier
simultaneously. The result is called an Intermodulation Distortion rating, or IMD.
This is also expressed as a percentage.

6.4 Frequency Response and Noise

Like compliance and distortion, two other practical limits on amplifier performance
are its frequency response and output noise. First, let's discuss frequency response.

Although we describe an amplifier as having a specific gain or amplification factor,
this is true only for a certain range of frequencies. All amplifiers are limited in terms
of the range of frequencies over which they can operate. If we examine an
amplifier's performance at extreme frequencies, the gain may be much less than the
nominal value. In fact, if we go far enough, the gain may even be fractional,
meaning that the "amplifier" is actually reducing the signal level.

The region where the nominal gain is accurate is referred to as the mid-band. This
range is defined by one or two corner or break frequencies. The lower limit is
referred to as f1 while the upper limit is referred to as f2. At these frequencies, the
output level has dropped to half the power exhibited by a mid-band frequency of the
same input level. A gain versus frequency response plot that encapsulates this
concept is shown in Figure 6.11.

20 To be strictly accurate, the residual consists of the harmonics plus any noise produced by
    the amplifier. Therefore it is more accurate to refer to this as a THD+noise spec.

149
        Av                                                                                Figure 6.11
Amidband                                                                                  A generic gain versus
                                                                                          frequency plot.

            f1  midband  f2  f

In this representative plot it is apparent that only input signals whose frequencies lay
between f1 and f2 will receive full amplification. As the input frequency moves to
either side of the middle band, the gain begins to drop off. The drop-off increases as
the signal frequency moves farther and farther away. Eventually the gain will fall to
practically zero and virtually no trace of the input signal will appear at the output.

Precise values of the corner frequencies will depend on the application. For
example, a high fidelity audio amplifier will most likely have an f1 below 20 Hz and
an f2 above 20 kHz21 while an amplifier used for telephone systems might range from
300 Hz to 4 kHz22. In contrast, a radio frequency amplifier may be operating at
frequencies orders of magnitude higher than these.

Without exception, all amplifiers have an upper limit frequency, f2, but not all of
them have a lower frequency limit, f1. Amplifiers without a lower limit can amplify
signals with frequencies all the way down to DC. They are referred to as direct
coupled or DC amplifiers. The lower frequency limit is usually caused by in-line
coupling capacitors, and in some cases, transformers. Among other uses, these
components are added to purposely block DC. There are good reasons to do this, as
we shall see in upcoming work, however, it is possible to design amplifiers without
them. The resulting amplifier will then have no limit on how low of a frequency it
can amplify.

The upper limit frequency is another story. While components are often added to
tailor the upper frequency response of an amplifier, even if no tailoring was desired
the amplifier would still have an upper limit frequency. This would be due to small
and unavoidable capacitances and inductances that exist in the circuit, for example
stray wiring capacitance. Ultimately, the corresponding reactances will cause a
signal level reduction that worsens as frequency increases. As you might guess,
these reactances also cause varying phase shifts between the input signal and the
output signal. Frequency response is examined in great detail in later chapters.

21 20 Hz - 20 kHz is the range of frequencies heard by a typical healthy young human.
22 Decidedly not hi-fi, but do we really need high fidelity to call-in a take-out order?

150
Amplifier performance is also limited by its internal noise. Noise is an undesired
signal that appears at the output of an amplifier. Unlike distortion, noise is usually
not correlated with the input signal level. Generally, noise is broad-band, meaning
that it contains a very wide range of frequencies. As such, it does not have a
discernible pitch. Examples in nature include the sound of leaves rustling in the
wind or the sound of a waterfall. Noise is best thought of as a truly random signal.
As such, it cannot be accurately predicted and therefore there is no easy way to
remove it once it has been added to a desired signal. There are many potential
sources of noise in an amplifier. They range from process issues in semiconductors
to thermal effects in resistive elements. In general, noise gets worse as temperature,
resistance and frequency range increase. Noise is unavoidable in absolute terms but
ultimately what we care about is whether or not it is low enough for a given
application. In other words, is the noise level significantly lower than the signal
level, to the point where it is no longer a problem? This is quantified by simply
creating a ratio between the nominal output signal level and the output noise level.
This ratio is given the very creative name signal-to-noise ratio, or S/N for short. All
other factors being equal, the higher the S/N, the better.

6.5 Miller's Theorem

Some inverting voltage amplifier designs employ an impedance bridged between the
input and output, as shown in Figure 6.12.

                                                                                                                     Figure 6.12
                                                                                                                     An input/output bridged
                                                                                                                     impedance.

There are different reasons for doing this, a prime example involving shaping the
frequency response of the amplifier. To simplify the analysis of such a configuration,
we may employ Miller's Theorem, named after American engineer John Milton
Miller.

The goal here is to determine equivalent impedances that lie in parallel with the
input and output of the amplifier. These equivalents simply become part of the input
and output networks around the amplifier.

151
First, let's consider the equivalent impedance at the input, Zin-miller. By definition, this
is the impedance in parallel with the input of the amplifier that would draw the same
amount of current as the original bridging Miller impedance. The current through the
Miller impedance is simply the the voltage across it divided by the Miller
impedance, Z. The voltage across it is the difference between the input and output
voltages.

                               iin-miller = V i n -V out Z
                               iin-miller = V i n - Av V i n Z , the gain is negative so

                           iin-miller = V i n(Av +1) Z

Dividing this current into the input voltage yields the equivalent impedance.
                               Zi n-miller = Z

                                      Av +1

A similar derivation yields the output equivalent.

                           Zout-miller = ZAv 
                                       Av +1

The Miller equivalent circuit for a general impedance Z is shown in Figure 6.13.

                                                                                                                     Figure 6.13
                                                                                                                     Miller general equivalent.

The general rule to remember is that the Miller equivalent presents equivalent
impedances that are less than the original bridging impedance. In the case of the
input section, the reduction effect is very large at higher gains.
Two typical cases for the impedance Z are a resistance, R, and a capacitance, C. For
a pure resistance, we can perform a direct substitution for Z. The original and Miller
equivalents are shown in Figure 6.14.

152
                                                                                                                     Figure 6.14
                                                                                                                     Original and Miller equivalent
                                                                                                                     for a resistor.

For a capacitor, the situation is similar, however, we will substitute Xc for Z and
recall that C=1/(2fXc).

                                                                                                                     Figure 6.15
                                                                                                                     Original and Miller equivalent
                                                                                                                     for a capacitor.

Note that for the capacitor, there is a multiplicative effect. That is, the effect of the
original bridging capacitor on a high gain amplifier is equivalent to a much larger
input shunt capacitor.
153
Summary

Complex amplifier circuits can be modeled with a functional block. The ideal model
includes the input and output impedances along with a controlled source. This
source would exhibit a signal gain or amplification factor. Usually, G stands for
power gain while Av and Ai represent voltage and current amplification, respectively.
This amplification factor may be negative which indicates that the amplifier inverts
the phase of the input, that is, the waveform is flipped upside down. The impedances
allow calculation of loading effects while the gain determines the the size of the
output signal.

If the input signal is too large, the output signal may be limited in amplitude or
clipped. The maximum output amplitude is referred to as the compliance. Clipping
is a gross form of distortion but more subtle forms exist as well. In general,
distortion creates new frequency components. If these new components are integer
multiples of the original input frequency, which they are typically, they are referred
to as harmonics. One method of quantifying distortion performance is to sum all of
the harmonics and compare that to the original signal. This is called THD or total
harmonic distortion. Along with distortion, the amplifier might also add undesirable
noise to the output signal. Noise is a random signal that contains many different
frequencies. Typically, this is measured via a signal-to-noise ratio, or S/N, at the
output.

An amplifier also operates over a given range of frequencies, from a lower limit, f1,
to a high limit, f2. Some amplifiers are able to amplify down to 0 Hz (DC) and
effectively do not have an f1 but all amplifiers do have an upper limit.

Finally, Miller's Theorem is an analysis technique that allows an impedance that
bridges from the input of an inverting voltage amplifier to its output to be split into
equivalent input and output parallel impedances. These impedances will be smaller
than the original bridging impedance and are a function of the gain of the amplifier.

154
Review Questions

    1. Explain how an amplifier's input impedance might react with a source to
         produce a signal loss.

    2. Explain how an amplifier's output impedance might react with a load to
         produce a signal loss.

    3. What is compliance?
    4. Describe clipping.
    5. Describe half-wave symmetry. What does it have to do with amplifier

         distortion?
    6. What is noise? How does it differ from distortion?
    7. Draw a generic frequency response plot for an amplifier.
    8. Detail the purpose and use of Miller's Theorem.

Problems

Analysis Problems
    1. Determine the load voltage for the model of Figure 6.16 if Vgen = 10 mV, Zgen
         = 50 , Zin = 1 M, Zout = 75 , Zload = 1 k  and Av = 50.

                                                                                                                     Figure 6.16

    2. Determine the load voltage for the model of Figure 6.16 given Vgen = 8 mV,
         Zgen = 1 k , Zin = 6 k, Zout = 500 , Zload = 2 k  and Av = 100.

    3. If the circuit of Problem 1 has a compliance of 2 volts, will the output clip?
         What if the input is increased to 100 mV?

    4. If the circuit of Problem 2 has a compliance of 5 volts, will the output clip?
         What if the input is increased to 200 mV?

155
    5. If an amplifier has Av = 25, Vin = 20 mV and there is no appreciable loading,
         determine the output signal-to-noise ratio if the amplifier generates an
         output noise voltage of 10 V.

    6. Determine which waveforms from Figures 6.17 through 6.21 exhibit half-
         wave symmetry.
                                                                        Figure 6.17
                                      t

                                                                        Figure 6.18
                                      t

                                                                        Figure 6.19
                                           t

                                                                        Figure 6.20
                                     t

                                                                        Figure 6.21
                                     t

156
    7. Determine the Miller equivalent resistances for the circuit of Figure 6.22 if
         Av = -20 and R = 60 k.
                                                                        Figure 6.22

    8. Determine the Miller equivalent capacitances for the circuit of Figure 6.23
         assuming Av = -30 and C = 200 pF.
                                                                        Figure 6.23

Challenge Problems
    9. If the circuit of Problem 1 has a compliance of 20 volts, how large can the
         input signal be before the load voltage is clipped?
    10. If the circuit of Problem 2 has a compliance of 10 volts, how large can the
         input signal be before the load voltage is clipped?
    11. Using Figure 6.22 as a guide and assuming that R = 100 k, how large
         would the gain have to be such that the input equivalent resistance is 4 k?
    12. Using Figure 6.23 as a guide and assuming that Av = -35, determine a value
         for C such that the input equivalent capacitance is 1.2 nF.

Computer Simulation Problems
    13. Simulate the circuit of Problem 1 and verify the load voltage.
    14. Simulate the circuit of Problem 2 and verify the load voltage.

157
7 BJT Small Signal Amplifiers

7.0 Chapter Learning Objectives

After completing this chapter, you should be able to:

               Determine the voltage gain, input impedance and output impedance of simple BJT amplifiers.
               Detail the functional differences between voltage amplifiers and voltage followers.
               Explain the advantages and disadvantages of using localized feedback (swamping).
               Determine the combined characteristics of multistage BJT amplifiers.
               Detail the advantages and disadvantages of using direct coupling versus capacitor coupling in

                   multistage amplifiers.
               Explain the operation of the Darlington pair.

7.1 Introduction

In the prior chapter we discussed the general operational characteristics of amplifiers including voltage gain,
input and output impedance, compliance, distortion and so forth. In this chapter we shall focus on the analysis of
small signal amplifiers, specifically, their voltage gain and input/output impedances. As we will be performing a
small signal analysis, we will not be concerned with compliance, maximum load power, device dissipation or
the like. There is no specific definition of small signal versus large signal but for our purposes we shall define
small signal as output signals that are well below the clipping limit and with power dissipation of no more than a
few hundred milliwatts for either the load or transistor.

There are two popular techniques used to analyze BJT amplifier circuits. One is through the use of hybrid
parameters. There are four different hybrid parameters. We have already seen one of them, the forward current
gain, hfe. We simply call it . The other three are hie, the input impedance; hoe, the output admittance; and hre, the
reverse voltage gain. The second letter of the subscript (the "e" in hfe) indicates it is for the common emitter
configuration (that is, input applied to the base, output taken at the collector and the emitter at the common
ground).

The second approach uses r' parameters (pronounced "r prime"). The r' approach is sufficient for all of our
analyses and, given an understanding of Ohm's law, KVL and KCL, produces straightforward equations for
circuit gain, input impedance and the like. As a consequence, we shall focus on the r' system.

158
7.2 Simplified AC Model of the BJT

Just as we created a DC model to ease the analysis of DC bias circuits, we shall make
use of an AC BJT model for our AC analyses. In fact, our AC model is based on the
DC model. The collector-base region is still represented with a current-controlled
current source although it's AC instead of DC: iC =  iB. The base-emitter junction is a
bit trickier. Although a simple 0.7 volt junction worked fine for DC, we now have to
consider the AC resistance of the diode.

To find the dynamic resistance of the junction, first recall that the AC signal is riding
on the DC bias current, as plotted in Figure 7.1.23 We can imagine that the AC signal
is causing this point to trace back and forth along the curve. Of course, as this is a
small signal analysis, this sweep will be very small, perhaps only a few percent of
the quiescent current and can be approximated as a straight line segment. The slope
of this line segment represents its conductance.24 The reciprocal of conductance is
resistance; therefore, the reciprocal of the slope represents the resistance of the
device. Consequently, we can approximate the dynamic resistance of the device as
the reciprocal of the slope of the line tangent to the operating point (that is, the
reciprocal of the slope of the line tangent to the quiescent bias current IC).

In reality, this slope is changing slightly as the signal swings back and forth along
the base-emitter I-V curve. As the signal swings positive and goes above the
quiescent point the slope is a little steeper producing a slight reduction in dynamic
resistance. In contrast, as it swings negative, going below the quiescent point, the
slope becomes a bit more shallow and produces a slightly higher resistance. As a
result, we are effectively computing an average value for the dynamic resistance by
assuming this is a straight line segment. The variance in this resistance will be a
source of asymmetrical distortion in the amplifier of the type shown in Chapter 6,
Figure 6.6. We shall see more on this later.

23 The values plotted along the current axis are typical of a generic device and do not
    represent the current values for all BJTs.

24 Technically, this value is called the device's transconductance and is denoted as gm. We
    shall be seeing this again in upcoming work.

159
                                Junction Dynamic Resistance (r'e)                  Figure 7.1
                                                                                   Base-emitter junction plot
                        0.010                                                      and dynamic resistance.

                        0.009       base-emitter curve
                        0.008

     Collector Current  0.007       dynamic (AC)
                        0.006       resistance
                        0.005

                        0.004

                        0.003       operating point

                        0.002

                        0.001                           

                        0.000  0.4  0.5  0.6                       0.9
                        0.3                             0.7  0.8

                                    Base-Emitter Voltage

In order to derive an equation for the dynamic resistance, we begin with the
Shockley equation from Chapter 2, Equation 2.1, slightly modified to reflect the
terminal names of a BJT.

                 ( ) V BE q

                           IC=I S en k T -1

         Where
         IC is the junction (collector) current,
         IS is the reverse saturation current,
         VBE is the voltage across the junction (base-emitter),
         q is the charge on an electron, 1.6E-19 coulombs,
         n is the quality factor (typically between 1 and 2),
         k is the Boltzmann constant, 1.38E-23 joules/kelvin,
         T is the temperature in kelvin.

At 300 kelvin (about 80 F), q/kT is approximately 38.6, thus for any reasonable
value of VBE the "-1" term is small enough to ignore. Also, we shall take n as 1.

160
The equation then reduces to

     I C = I S e38.6 VBE                            (7.1)

To find the slope we take the first derivative of Equation 7.1 with respect to VBE.

     dI C dV =38.6 I BE S e38.6 V BE                (7.2)

Substituting Equation 7.1 into Equation 7.2 yields

     dI C dV =38.6 I BE C

By definition, the dynamic junction resistance is the reciprocal of the slope.

     dV BE = 25.9 mV
     dI C                     IC

We call this r'e. This value is slightly low as it doesn't include bulk resistance so a
good approximation is

     r ' e = 26 mV (7.3)
               IC

It is important to note that IS in Equation 7.2 varies with temperature. Therefore r'e   Figure 7.2
varies with temperature as well, decreasing with increasing temperature. This carries    Simplified AC model of BJT.
important ramifications with the thermal stability of higher power amplifiers as we
shall see in subsequent work.

One of the most important things to remember here is that the DC collector current
sets up the resistance of the AC model. In other words, the stability of the AC circuit
will depend in part on the stability of the DC bias (hence our emphasis on stable bias
circuits in Chapter 5).

We now have our AC model, as shown in Figure 7.2. This is a simplified model in
that it does not include junction capacitance effects, lead inductance and the like. It
is appropriate, therefore, as a low to mid-band frequency model. To summarize, the
AC collector current, iC, is determined by the AC input current, iB; which is in turn a
function of the the size of the applied input signal. In contrast, r'e is set by the DC
bias current, IC. The AC input can produce small variations in r'e which are
manifested as waveform distortion.

161
Given the model, there are three ways to configure the transistor as an amplifier:

     Common Emitter. The input is applied to the base and the output is taken at
         the collector. The emitter terminal is at the common or ground point. This
         configuration exhibits both voltage gain and current gain. It also inverts the
         phase of the signal.

     Common Collector. The input is applied to the base and the output is taken
         at the emitter. The collector terminal is at the common or ground point. This
         configuration offers a voltage gain of about unity but does exhibit current
         gain. It maintains the phase of the input signal. It is also referred to as an
         emitter follower or voltage follower.

     Common Base. The input is applied to the emitter and the output is taken at
         the collector. The base terminal is at the common or ground point. This
         configuration exhibits voltage gain but the current gain is unity at best. It
         also maintains the phase of the input signal.

We shall examine each of these topologies in turn. Each of these can be made using
a variety of DC bias techniques. For example, a two-supply emitter bias or voltage
divider bias could be used for any of the three AC topologies, and further, they could
utilize either an NPN or PNP transistor.

7.3 The Common Emitter Amplifier

The common emitter configuration finds wide use as a general purpose voltage
amplifier. We begin with a basic DC biasing circuit and then add a few other
components. For example, refer to Figure 7.3.

                                                                                         Figure 7.3
                                                                                         Common emitter amplifier
                                                                                         using two-supply emitter bias.

162
This amplifier is based on a two-supply emitter bias circuit. The notable changes are
the inclusion of an input signal voltage, Vin, and a load, RL. So that these components
do not alter the bias, we isolate the input and load through the use of coupling
capacitors Cin and Cout. These capacitors will act as opens to DC creating the desired
isolation. As for the AC signal, the capacitances will be chosen such that their
reactances will be much smaller than the surrounding resistors at the frequency of
the input. Consequently, the capacitors will appear as shorts and allow the AC signal
to pass through the amplifier.

The final alteration involves the emitter resistor. The single resistor of the bias
network is replaced by a pair of resistors, RE and RSW, along with a bypass capacitor,
CE. For DC, the capacitor is open and the effective emitter bias resistance is RE + RSW.
For AC, the capacitor will behave ideally as a short so the AC emitter resistance will
fall to just RSW. This resistor is called a swamping or emitter degeneration resistor. It
is used primarily to help control the voltage gain of the amplifier.

We can use our AC transistor model along with the Superposition Theorem to arrive
at an equivalent AC circuit of the amplifier, as shown in Figure 7.4.

                                                                                                                     Figure 7.4
                                                                                                                     AC equivalent of common
                                                                                                                     emitter amplifier.

First, we have shorted all of the capacitors. Second, we have replaced the DC
sources with their ideal internal resistance (a short) which places those points at AC
ground. Third, we swapped out the transistor for the model. Lastly, we have
combined and/or renamed resistances where needed. Because this is an AC circuit,
we use the convention of lower case r for resistance to avoid confusion with the DC
resistance (which are upper case). Thus, rE is the AC resistance from the emitter to
AC ground. This corresponds to RSW in the original schematic. Similarly, rC
represents the total resistance seen from the collector to AC ground. In the original
schematic this corresponds to RC in parallel with RL. If this circuit was unloaded,

163
then rC would just be equal to RC. Finally, rB corresponds to RB but in a voltage
divider bias it would be equal to R1 in parallel with R2.

Voltage Gain

Voltage gain, Av, is defined as the ratio of vout to vin. Using Ohm's law we find

                 Av = vout = v C             (7.4)
                       vi n vB

                 Av = -iC rC
                       iC (r ' e+r E )

                 Av = - rC
                         r ' e+r E

First, the negative sign indicates that this amplifier inverts the waveform, top to
bottom. For a sine wave, this is equivalent to shifting the phase 180. In some
applications this can be a major issue, in others, not so much. If it is an issue, it can
be resolved by using a second inverting gain amplifier in sequence with the first
(inverting the inversion).

The second thing we see is that the gain is little more than a ratio of collector to
emitter resistances. This is where splitting the emitter resistor into two parts comes
in. In the equation, rE is the swamping resistor RSW. The larger the swamping resistor,
the lower the gain. The maximum gain will be achieved when RSW = 0. That is, when
the emitter is completely bypassed. The down side of this is that the gain will now
depend entirely on r'e. This will increase the distortion. The reason is because RSW,
being so much larger, effectively "swamps out" the variation in r'e and reduces
distortion. The larger RSW is relative to r'e, the greater the reduction in distortion, but
with the cost of reduced gain. This is why a swamping resistor is also called an
emitter degeneration resistor: it degrades the voltage gain.

Input Impedance

Input impedance, Zin, is defined as the ratio of vin to iin. In Figure 7.2 this is equal to
rB in parallel with the impedance looking into the base terminal, Zin(base). Using Ohm's
law we find

                 Zi n(base) = v B            (7.5)
                             iB

                 Zi n(base) = iC(r ' e+r E)
                                   iB

                 Zi n(base) = iC(r ' e+r E)
                                 iC /

                 Zi n(base) = ( r 'e+r E )

164
Therefore

                  Zin = rB || Zin(base)                           (7.6)

We see that both the swamping resistor and  play a role in setting the input
impedance. Larger values of RSW and  produce larger input impedances.

In sum, we find that while swamping decreases voltage gain, it reduces distortion
and increases input impedance, the latter two generally desirable for a voltage
amplifier. A non-swamped amplifier will have the largest gain but will suffer from
the worst distortion and a low input impedance. This is a classic "quality versus
quantity" trade-off: a large low quality gain versus a modest high quality gain25.

Output Impedance

Output impedance, Zout, is defined as the internal impedance of the equivalent source
that drives the load. If we position ourselves at the load and look back into the
amplifier shown in Figure 7.1, Cout is shorted ideally and VCC is at AC ground. This
leaves us with RC in parallel with the transistor. The transistor is modeled as a
current source and its ideal internal resistance would approach infinity. In reality, the
effective value, r'C, is likely in the region of 100 k or so, depending on bias
current. This parallel combination comprises the output impedance of the current
source. We model this circuit as a voltage amplifier so to be proper, we'd convert the
current source with parallel internal resistance to a voltage source with series
internal resistance. Those resistance values are identical, though, and we arrive at

                  Zout = r'C || RC

In many circuits, RC is considerably smaller than r'C, therefore

                  Zout  RC                                        (7.7)

Example 7.1

Determine the input and output impedances of the amplifier shown in Figure
7.5. Also compute the voltage gain. Assume  = 150.

First, the easy bit. We can determine the output impedance by inspection. It
is approximately equal to RC, or 22 k.

25 The obvious question is, "How do we get both high gain and low distortion?" One answer
    is to use multiple low gain stages in cascade.

165
In order to find Zin and Av, we will need to determine r'e. To obtain r'e we                    Figure 7.5
need to find IC. Using KVL around the base-emitter loop, if we approximate                      Schematic for Example 7.1.
the DC base voltage to be near zero, then all of the emitter supply drops
across the DC emitter resistance, with the exception of VBE.

                   I C = V EE -V BE

                               R E+RSW
                      I C = 5 V-0.7 V 8.2 k +1.8 k 
                      I C = 0.43 mA

                               r ' e = 26mV
                                         IC

                               r ' e = 26 mV 0.43 mA
                               r ' e = 60.5

                                Zi n-base = ( r ' e+ r E)
                                Zi n-base = 150(60.5 +1.8 k )
                                Zi n-base = 279 k 

         This value in parallel with the base biasing resistor creates the input
         impedance.

                               Zi n = RB || Zi n(base)
                               Zi n = 15k  || 279 k 
                               Zi n = 14.2k 

         Now for the voltage gain. We have two options. The first option is to find
         the loaded gain directly, meaning we include the load resistor as part of rC.
         This would be the fastest method for this particular problem. The second
         option is to find the unloaded gain (i.e., with the load resistor removed) and
         then include the voltage divider effect caused by the load interacting with
         the output impedance. This would be the preferred method if we were
         swapping out different load values. We'll do both just for funsies.26

         First, method one.

                               r C = RC || RL
                               rC = 22 k  || 33 k 
                               rC = 13.2 k 

26 Is "funsies" a real word? It is if we all agree that it is. Besides, if it was an imaginary
    word, we'd spell it "j funsies".

166
                      Av =- rC
                              r ' e+r E

                      Av =- 13.2 k  60.5+1.8 k 
                      Av =- 7.1

And now method two; first the unloaded gain, then the divider effect and
finally, the composite gain.

                      Av (unloaded ) = - r C
                                       r 'e+rE

                      Av(unloaded ) = - 22 k  60.5 +1.8 k 
                      Av (unloaded ) = -11.82

                      Adivider = RL
                                 R L+RC

                      Adivider = 33 k  33 k +22 k 
                      Adivider = 0.6

                      Av = Av (unloaded ) Adivider
                      Av =-11.820.6
                      Av = -7.1

We shall repeat the prior example using the same circuit but with one change: the  Figure 7.6
emitter resistor will be completely bypassed. This will show the effect that       Schematic for Example 7.2.
swamping has on voltage gain and input impedance.

Example 7.2

         Determine the voltage gain and input impedance of the
         amplifier shown in Figure 7.6. Assume  = 150.

         The DC equivalent of this circuit is identical to that of the
         circuit shown in Figure 7.5. In both cases, the DC emitter
         resistance is 10 k. Therefore, IC and r'e are unchanged. The
         bypass capacitor shorts this entire value for the AC equivalent
         because there is no swamping resistor. Consequently, rE = 0.
         We can simply use 0 for rE in the equations previously
         derived.

167
         We begin with the input impedance.

                               Zi n(base) = ( r 'e+r E )
                               Zi n(base) = 150(60.5 +0)
                               Zi n(base) = 9075 

         This value is considerably smaller than the value obtained from the
         swamped circuit. Continuing,

                               Zi n = RB || Zi n(base)
                               Zi n = 15k  9075 
                               Zi n = 5654

                               Av = - rC
                                        r ' e+r E

                               Av =- 13.2 k  60.5+0
                               Av = -218.2

         The end result is an input impedance less than half of the swamped case and
         a voltage gain over 30 times greater. What these calculations do not show is
         the increase in distortion that will be created by this change. More on that in
         a moment.

Let's consider something slightly different: a voltage divider bias PNP amplifier.

Example 7.3

         Determine the input impedance and voltage gain for the circuit shown in
         Figure 7.7. Also determine vload if vin = 20 mV peak. Assume  = 100.

         We need to first determine r'e which means that we need to find the collector
         current. If we assume a lightly loaded divider, the base voltage will be
         approximately 15 volts and the emitter will be 0.7 volts higher, or 15.7 volts.
         This leaves 20 volts - 15.7 volts, or 4.3 volts, across the DC equivalent
         emitter resistance. That's 4.1 k  + 200 , or 4.3 k , yielding 1 mA for IC.
         This will produce r'e = 26 .

                               Zi n(base) = ( r 'e+r E )
                               Zi n(base) = 100(26 +200)
                               Zi n(base) = 22.6 k 

168
This value is in parallel with the voltage divider biasing resistors, creating        Figure 7.7
the input impedance.                                                                  Schematic for Example 7.3.

                      Zi n = R1 || R2 || Z i n(base)
                      Zi n = 15k  || 5 k  || 22.6 k 
                      Zi n = 3.22 k 

                      Av = - rC
                              r ' e+r E

                      Av =-7.5 k  || 10 k  26+200
                      Av = -19

We also need to include the effect of the 600  source
impedance. This will create a voltage divider with the input
impedance.

                      Adivider = Z in
                                 Z i n+Z source

                      Adivider = 3.22 k  3.22 k +600 
                      Adivider = 0.843

                      Av ( system) = Av  Adivider
                      Av(system) = -190.843
                      Av(system) = -16

Finally, we get to the load voltage.

                     V load = Av (system)V i n
                     V load =-1620 mV
                     V load = 320 mV peak, inverted

If we were to inspect the circuit of Figure 7.7 using a direct coupled oscilloscope,
we would see the superposition of the AC and DC components. In other words, we'd
see the AC signal riding on a DC offset. In some cases, the AC signal would be too
small to notice compared to the DC portion. In proper scale it might be no thicker
than the trace itself. In order to measure it accurately, we'd have to AC couple the
oscilloscope.

The voltages at the source and load would be just AC as the coupling capacitors
serve to block DC. At the base we'd have 15 volts DC with an AC signal riding on top

169
of it. The AC would be the 20 mV input times the input impedance/source
impedance divider of 0.843, or 16.86 mV. Recalling that IC is 1 mA, the DC drop
across RC must be 7.5 volts. This is, of course, VC. Therefore, at the the collector
we'd see an inverted 320 mV signal riding on 7.5 volts DC.

Computer Simulation

In order to get some insight into the swamping-versus-distortion issue, we shall take
a look at a more involved circuit simulation. This will echo Examples 7.1 and 7.2 in
that we will simulate two circuits with the same DC equivalents. The only circuit
change will be that one version will have a fully bypassed emitter while the other
version will utilize a swamping resistor. In order to keep the comparison fair, we will
increase the input signal voltage of the lower gain swamped amplifier so that both
versions have a similar load voltage. In this way we guarantee that they are both
using a similar percentage of the junction curve.
The unswamped circuit is shown in Figure 7.8. This utilizes a straightforward two-
supply emitter bias.

                                                                                                                     Figure 7.8
                                                                                                                     Unswamped CE amplifier in
                                                                                                                     simulator.

A quick "back-of-an-envelope" estimate gives IC  2 mA, yielding r'e  13 . The
load will be around 3 k which gives a gain in the low 200s. Thus, we expect the
load voltage to be around 2 volts.
The transient analysis graph is depicted in Figure 7.9. Several traces are shown.
170
                                                                                                                     Figure 7.9
                                                                                                                     Unswamped CE amplifier,
                                                                                                                     Transient Analysis.

At this scale, the AC signal at the input (node 4, purple) and the base (node 2, aqua)
cannot be seen. As expected, we see a small negative DC value at the base and at the
emitter, around -0.7 VDC. The DC offset at the collector is around 8 volts, as
expected. Finally, the load voltage (node 5, blue) is sitting right around 2 volts.
What might not be visible immediately in the load voltage plot is some waveform
asymmetry distortion. This can be quantified through a THD simulation, the output
of which is shown in Figure 7.10. THD is nearly 8%. Not so good.

                                                                                                                     Figure 7.10
                                                                                                                     Non-swamped CE amplifier,
                                                                                                                     THD Analysis.

171
For the second pass, the circuit is modified to include a swamping resistor, as
illustrated in Figure 7.11. The original 4.7 k emitter resistor has been split into a
4.5 k and a 200  swamping resistor. The bias in this circuit is identical to the first,
therefore r'e is unchanged. This will lower our expected gain to around 13,
decreasing by a factor of 15. The input signal is raised by a factor of 15 to
compensate so that our load voltage will still be around 2 volts.

                                                                                                                     Figure 7.11
                                                                                                                     Swamped CE amplifier in
                                                                                                                     simulator.

Once again, we run a transient analysis. The results are shown in Figure 7.12. In this
case we have done something a little different. By zooming in, we can now confirm
the signal inversion. The input signal is the purple trace at node 4. We can also see
this signal at the base, riding on the small negative DC bias voltage (aqua trace, node
2). The DC offset is about -0.1 volts. Looking at the emitter we see the expected 0.7
volt DC base-emitter drop below this, or about -0.8 volts DC. Notice that there is no
AC signal at the emitter whatsoever. This is expected as the emitter bypass capacitor
forces this point to an AC ground.
The load voltage is the blue trace, node 5. While much of it is not visible at this
zoom level, clearly it is an inverted waveform when compared to the input signal.

172
                                                                                                                     Figure 7.12
                                                                                                                     Swamped CE amplifier,
                                                                                                                     Transient Analysis.

But what about the load voltage distortion? A THD simulation is performed on the
swamped amplifier with the results shown in Figure 7.13. The THD is now under
0.6 %, a considerable improvement, even if not audiophile quality. Interestingly, as a
ratio, the reduction in distortion is roughly equal to the reduction in gain. The more
you give up, the more you get.

                                                                                                                     Figure 7.13
                                                                                                                     Swamped CE amplifier, THD
                                                                                                                     Analysis.

Finally, the change in signal quality can be seen readily by plotting both load
voltages concurrently, as shown in Figure 7.14. The non-swamped output (in blue)
173
exhibits telltale asymmetry. Notice that the positive peak does not quite reach 2 volts
but the negative peak exceeds -2 volts. The positive peak is also broadened and
flattened, while the negative peak is sharper. In contrast, the swamped output (in
red) has virtually identical positive and negative peak values with no apparent shape
changes on them. Compare this simulation to the waveform distortion discussion
from Chapter 6. In particular, compare Figure 7.14 to Figure 6.6.

                                                                                                                   Figure 7.14
                                                                                                                   Swamped versus non-swamped
                                                                                                                   CE amplifiers, Transient
                                                                                                                   Analysis.

Power Supply Bypass and Decoupling

In the prior analyses we have assumed ideal behavior from the DC power sources.
First, we assumed that they present a perfect AC ground and second, that they
exhibit no ripple or noise. In reality, this may not be the case and non-ideal behavior
may lead to a number of problems that diminish the quality of the amplified output
signal, including hum and oscillations.
To battle the first issue, power supply bypass capacitors may be used. These
capacitors are usually modest in size, perhaps 1 F or so, although they can be much
larger, particularly with high output power amplifiers. Power supply bypass
capacitors are located physically close to the active devices. This location minimizes
the resistive and inductive effects of power supply circuit board traces and wiring
that could result in the power supply not being a good AC ground.

174
The second issue involves the noise and ripple from the power supply finding its
way into the input signal and becoming part of the output signal. A classic example
of this is amplifiers that use voltage divider biasing such as the one shown in Figure
7.7. Not only does the divider create the needed DC potential at the base terminal,
but it also couples in any noise or ripple that might be riding on the DC voltage. This
is particularly nasty because this undesirable signal is being applied to the base
where it will get amplified.

The obvious solution to this problem is to create a very high quality, regulated DC
supply, but this is not always practical given cost constraints. A relatively simple
solution is to decouple the undesirable AC components through an RC network as
shown in Figure 7.15.

                                                                                                                     Figure 7.15
                                                                                                                     Decoupled voltage divider.

The capacitor CD is used to create a low impedance at the divider junction, thus
shunting any noise or ripple to ground. Unfortunately, this would also short out the
input signal so R3 is added to prevent this. R3 is in parallel with Zin(base) to create the
input impedance.

7.4 The Common Collector Amplifier

The common collector amplifier is often referred to as an emitter follower, or more
generically, as a voltage follower. The key characteristics of a voltage follower are a
high input impedance, a low output impedance and a non-inverting voltage gain of
approximately one. The name comes from the fact that output voltage follows the
input, that is, it's at the same voltage level and is in phase with the input. While this
configuration does not produce voltage gain, it does produce current gain, and
therefore, power gain. It's primary purpose is to reduce impedance loading effects,
for example, to match a high impedance source to a low impedance load.
Consequently, they are used as high-Z input buffer stages or as drivers for low

175
impedance loads such as loudspeakers.
A common collector amplifier using two-supply emitter bias is shown in Figure
7.16. The input is coupled into the base like the common emitter amplifier, however,
the output signal is taken at the emitter instead of at the collector. Because the
collector is at the AC common, there is no need for a collector resistor.

                                                                                                                     Figure 7.16
                                                                                                                     Common collector amplifier.

Perhaps the best way to think about the follower is not that it gives a voltage gain of
one, but that it will prevent signal loss. The analysis follows, using Figure 7.17.

                                                                                                                     Figure 7.17
                                                                                                                     AC equivalent of common
                                                                                                                     collector amplifier.

First, the AC emitter resistance, rE, is either the emitter bias resistor, RE, or the
parallel combination of RE and the load resistance, RL. We'll use the former in order
to determine the unloaded gain and the latter to determine the loaded gain, similar to
what we did with the common emitter amplifier concerning RC and RL. The AC base
resistance, rB, typically boils down to the base biasing resistor just as we saw with
176
the common emitter amplifier (RB in a two-supply emitter bias or R1 || R2 for a
voltage divider bias).

Voltage Gain

The derivation for the emitter follower's voltage gain equation is similar to that
shown for the common emitter amplifier. We begin with the basic definition of
voltage gain and then expand using Ohm's law.

                  Av = vout = v E             (7.8)
                        vi n vB

                  Av = iC r E
                        iC (r ' e+r E )

                  Av = r E
                        r ' e+r E

This equation is very similar to that of Equation 7.4. Here we see that the output
signal is in phase with the input and that if rE >> r'e, the gain approaches unity.
Signal distortion tends to be low in followers because a gain of one is a desired goal.

Input Impedance

The derivation for Zin and Zin(base) are unchanged compared to the common emitter
configuration. The formulas are repeated below for convenience.

                             Zin(base) = (r'e + rE)

                             Zin = rB || Zin(base)

Output Impedance

The derivation for common collector output impedance varies considerably from
that of the common emitter. We shall use Figure 7.18 for the analysis.

First, note that this diagram splits the AC emitter resistance into its two components,
RL and the biasing resistor RE. This is because we want to find the effective
resistance of the source that drives the load, so logically we can't include the load in
that value. We begin by looking back into the emitter from the perspective of the
load. We see the emitter bias resistor in parallel with whatever the impedance is
looking back into the emitter terminal.

                  Zout = RE || Zout(emitter)  (7.9)

177
Zout(emitter) is equal to r'e in series with the equivalent resistance of the network above it
and to the left. The internal resistance of the current source is high enough to ignore
so we're left with the equivalent resistance looking back off the base. We'll call this
ZB(equivalent). At first glance this might appear to be the parallel combination of rgen and
rB, but this ignores the effect of the collector current source. What we really want is
the effective resistance as seen from the perspective of r'e, not as seen from the base
terminal.

                                                                                                                     Figure 7.18
                                                                                                                     Common collector output
                                                                                                                     impedance analysis.

                               Zout (emitter ) = r ' e +Z B( equivalent)  (7.10)
                                                                          (7.11)
                               Z B(equivalent ) = v B                     (7.12)
                                                iC

                               Z B(equivalent ) = i B( r B || r gen)
                                                       iB

                               Z B(equivalent ) = r B || r gen
                                                    

Combining Equations 7.9, 7.10 and 7.11 yields

           ( ) Zout = RE || r ' e +rB || rgen 

In many instances the emitter bias resistor is large enough to ignore.

Example 7.4

         For the follower shown in Figure 7.19, determine the input impedance,
         output impedance and load voltage. Assume  = 100 and Vin = 100 mV.

178
     First, find IC in order to find r'e. Assuming an unloaded divider, VB will equal  Figure 7.19
     half of the DC supply, or 10 volts. We lose 0.7 volts across the base-emitter     Schematic for Example 7.4.
     junction leaving 9.3 volts across the 10 k. This results in a collector current
     of 930 A and an r'e of 28 .

     To find Zin

     Zi n(base) = ( r 'e+r E )
     Zi n(base) = 100(28  +10 k  || 500 )
     Zi n(base) = 50.4 k 

     Zi n = R1 || R2 || Z i n(base)
     Zi n = 22 k  || 22k  || 50.4 k 
     Zi n = 9.03k 

     This value is not particularly high when compared with the
     rather large source resistance of 1 k. There will be some
     signal loss here due to the voltage divider effect between
     the two impedances. And now for Zout

     ( ) Zout = RE || r ' e +rB || rgen 

     ( ) Zout = 10 k  || 28 +22k  || 22 k  || 1 k  100

     Zout = 37 

     This value is much, much lower than anything we saw with the common
     emitter amplifiers. Therefore this circuit can drive much lower impedance
     loads with minimal signal loss. The loaded gain from base to emitter is

     Av = rE
           r ' e+r E

     Av = 500  || 10 k  28 +500  || 10 k 
     Av = 0.9444

     As mentioned, we need to include the effect of the 1 k source impedance.
     This will create a voltage divider with the input impedance.

     Adivider = Z in
               Z i n+Z source

     Adivider = 9.03 k  9.03 k +1 k 
     Adivider = 0.9

179
                               Av ( system) = Av  Adivider
                               Av(system) = 0.94440.9
                               Av (system) = 0.85

         Finally, we get to the load voltage.

                               V load = Av (system)V i n
                               V load = 0.85100 mV
                               V load = 85mV

         At this point the question might be, "Why did we go to the trouble of
         building this circuit when we lost 15% of the input signal?" Well, consider
         what would have happened without the circuit. If we had connected the
         source directly to the load, the resulting 1 k/500  voltage divider would
         have dropped the load voltage to 33 mV. This circuit prevented that loss.

A High Impedance Source: The Guitar Pickup

In Example 7.4, the source had an internal impedance of 1 k, much higher than we
would see with, say, a laboratory function generator (probably 50 ). Things could
be much worse. Consider the electric guitar pickup. The job of a pickup is to
transform the vibrations of the guitar strings into an electrical signal so that it can be
amplified. It is commonly thought that a pickup is some form of microphone but this
is not true27.

A guitar pickup is little more than a magnet surrounded by numerous turns of fine
wire, as shown in Figure 7.20. This particular pickup is for a bass guitar but the
construction is similar for all types of guitars and basses.

                                                                                                                     Figure 7.20
                                                                                                                     Electric bass pickup (cover
                                                                                                                     removed).

27 Don't believe it? Just try screaming into one and listen to what comes out of the guitar
    amp.

180
Here is it how works: The magnet creates a field around the guitar strings. Because
the strings are steel, their reluctance is much less than the surrounding air, therefore,
they distort or bend the magnetic field. When a string is plucked, the field moves
back and forth along with it. As the field moves, the flux lines cut across the coil's
wire and this action induces a current in the conductor in accordance with Faraday's
Law of Induction. This current is then fed to the amplifier.

A typical guitar pickup consists of perhaps 5000 turns of very fine wire, 42 AWG
being typical. 42 gauge copper wire has a resistance of around 1.6  per foot so the
DC resistance of the coil can be over 5 k. Further, that many turns of wire around a
magnet can produce a very large inductance, perhaps several henries, that is in series
with this resistance. There is also distributed capacitance and cable capacitance in
parallel that could be upwards of 1 nF. The result is a complex impedance with
resonance effects, regions of which can be tens of k in magnitude. What makes
this more challenging is that because the impedance is a function of frequency, the
voltage divider effect with the amplifier's input impedance also becomes a function
of frequency. For example, the increasing impedance due to XL will result in
increasing attenuation with frequency. This is akin to turning down the treble on the
amplifier. Generally, not a good result. How do we limit this effect? Simple. We
make a circuit with a very, very high input impedance. How do we do that? Well,
there are several ways, including the use of field effect transistors and operational
amplifiers, but we can also obtain high input impedances through the use of a dual
BJT configuration called the Darlington pair.

The Darlington Pair

The Darlington pair was invented by Sidney Darlington, an American engineer. The
configuration leads to a compound device with a very high . Used properly, this can
lead to amplifier circuits with very high input impedance. A Darlington pair is
shown in Figure 7.21.

                                                                                                                     Figure 7.21
                                                                                                                     Darlington pair.

181
The operation is as follows. The base current of the first transistor, Q1, is multiplied
by the  of Q1 resulting in Q1's emitter current. This current is fed into the base of the
second transistor, Q2, where it is multiplied by the  of Q2 resulting in Q2's emitter
current. If we treat the pair as a single device, then the effective  of the pair is 12.
Given typical values for , the compound value can be in the vicinity of 5000 to
10,000. The functional downside to this arrangement is that VBE is now doubled to
1.4 volts (for silicon) and the effective r'e of the pair is doubled as well. These issues
are minor when compared to the advantage of the huge current gain that can be
obtained.

The bottom line when using a Darlington pair is to treat it like an ordinary transistor
except that it has a very large  and both VBE and r'e are doubled compared to the
ordinary values.

Example 7.5

     Determine the output voltage for the follower shown in Figure 7.22. Assume             Figure 7.22
     the input is 100 mV peak and the  for the Darlington pair is 10,000.                   Schematic for Example 7.5.

     The first thing that might look a little odd, at least compared
     to previous bias circuits, is that the base biasing resistor is
     so much larger than the emitter biasing resistor. Normally,
     this would lead to an unstable Q point but that's not a
     problem here. Because  is so large, RB can be much larger
     than normal and we'll still achieve good stability. In fact, we
     can still use the approximation that the base is at DC
     ground. This being true, the analysis proceeds as follows

                        I C = V EE -V BE

                                       RE
                           I C = 10 V-1.4 V 3.3 k 
                           I C = 2.61mA

                          r ' e = 2 26mV
                                         IC

                          r ' e = 52 mV 2.61 mA
                          r ' e = 20 

                           Zi n(base) = ( r 'e+r E )
                           Zi n(base) = 10,000(20  + 3.3 k  || 150 )
                           Zi n(base) = 1.63 M 

182
         This value is in parallel with the base biasing resistor, creating the input
         impedance.

                               Zi n = RB || Zi n(base)
                               Zi n = 220 k  || 1.63M 
                               Zi n = 194 k 

         This is much higher than we have seen in previous circuits. The loaded gain
         from base to emitter is

                               Av = rE
                                      r ' e+r E

                               Av = 150  || 3.3 k  20 +150  || 3.3 k 
                               Av = 0.88

         Now to include the effect of the 4.7 k source impedance. This will create a
         voltage divider with the input impedance, minimal as it turns out.

                               Adivider = Z in
                                          Z i n+Z source

                               Adivider = 194 k  194 k +4.7 k 
                               Adivider = 0.976

                               Av ( system) = Av  Adivider
                               Av(system) = 0.880.976
                               Av(system) = 0.86

         The load voltage is

                               V load = Av (system)V i n
                               V load = 0.86100 mV
                               V load = 86 mV

         If we had connected the source directly to the load, the 4.7 k/150  divider
         would have squashed the applied signal into a shadow of its former size,
         leaving us with just 3 mV.

Computer Simulation

To verify the results of Example 7.5, we'll run a transient analysis. The input
schematic is shown in Figure 7.23.

183
                                                                                    Figure 7.23
                                                                                    Simulation schematic for
                                                                                    Darlington pair follower.

Of interest here will be the voltages at the source, base and load. As the input    Figure 7.24
impedance/source impedance divider was 0.976, we expect 97.6 mV at node 4. At       Transient analysis for
the output, node 6, we expect to see our final computed value of 86 mV. The output  Darlington pair follower.
plot of the simulation is shown in Figure 7.24. The simulation concurs.

184
The Phase Splitter

A phase splitter is a combination of a common emitter amplifier and a common
collector follower using a single transistor. The purpose of the circuit is to produce
two versions of the input signal: a buffered version identical to the input and an
inverted version, both waves having the same amplitude. The circuit is used for
differential line driver systems. This scheme helps to minimize outside noise and
interference picked up by communications cables. There are other ways to create
phase splitters, including using differential amplifiers or op amps, but this BJT-based
version is a minimalist solution28. The basic circuit is shown in Figure 7.25.

                                                                                         Figure 7.25
                                                                                         A simple phase splitter.

For proper operation, the circuit is largely symmetrical. That is, RL1 = RL2, RE = RC,
and CC = CE. That being the case, the AC collector and emitter resistances will be
equal (rC = rE). If we then look at the basic gain equations, we find that both loads
will receive the same gain magnitude (just under unity), although RL1 will see the
signal inverted.

Av = - rC          Common emitter amplifier
        r ' e+r E  Common collector follower

Av = rE
      r ' e+r E

28 For details on alternate methods, see Fiore, J, Operational Amplifiers and Linear
    Integrated Circuits: Theory and Application, another free OER text.

185
7.5 The Common Base Amplifier

The third and final prototype is the common base amplifier. In this configuration the
input signal is applied to the emitter and the output is taken from the collector. The
base terminal is at the common ground point. An example, using two-supply emitter
bias, is shown in Figure 7.26. Note that because neither the input nor output is
connected to the base, there is no need for a base resistor. Consequently, the base
terminal is connected directly to ground.

                                                                                        Figure 7.26
                                                                                        Common base amplifier.

Some people find that redrawing the schematic horizontally helps to visualize the
signal flow. This version is shown in Figure 7.27.

                                                                                                                     Figure 7.27
                                                                                                                     Common base amplifier
                                                                                                                     redrawn.

One nice thing about the horizontal version is that when we make the AC equivalent,
it becomes obvious that RE is in parallel with the input and RC is in parallel with the
load. For the AC analysis we shall modify Figure 7.27 by substituting the BJT model
for transistor, shorting the capacitors and taking the DC sources to AC ground. The
result is shown in Figure 7.28.

186
                                                                                            Figure 7.28
                                                                                            Common base amplifier with
                                                                                            BJT model.

Voltage Gain

We begin with the basic definition of voltage gain and then expand using Ohm's law.

                 Av = vout = v C                                            (7.13)
                       vi n vE

                 Av = iC rC
                       iE r 'e

                 Av = rC
                        r'e

This equation is very similar to that of a non-swamped common emitter amplifier
except that it does not invert the input signal. Therefore, gain potential is fairly high.

Input Impedance

The derivation for Zin is obtained via direct inspection of the schematic.

                 Zin = RE || r'e                                            (7.14)

r'e normally dominates and thus we see that the common base configuration tends to
have a low input impedance. For audio frequencies this can be an issue but it is less
of a problem at higher frequencies as, generally speaking, system impedances need
to be lower to avoid complications with capacitive effects.

Output Impedance

The derivation for Zout unchanged compared to the common emitter configuration.
The formula is repeated below for convenience.

                             Zout  RC

187
Example 7.6

For the amplifier shown in Figure 7.29, determine the voltage gain and input              Figure 7.29
impedance.                                                                                Schematic for Example 7.6.

                   I C = V EE -V BE

                                  RE
                      I C = 5 V-0.7 V 20 k 
                      I C = 0.215 mA

                     r ' e = 26mV
                                IC

                     r ' e = 26 mV 0.215 mA
                     r ' e = 121

                      Zi n = r ' e || r E
                      Zi n = 121 || 20 k 
                      Zi n = 120

                      Av = rC
                            r'e

                      Av = 33k  || 10 k  120
                      Av = 64

7.6 Multi-Stage Amplifiers

In order to achieve a higher gain than we can obtain from a single stage, it is
possible to cascade two or more stages. Different biasing types might be used along
with a mix of AC configurations such as a common collector follower for the first
stage that drives a common emitter voltage amplifier. A mix of NPN and PNP devices
may also be present.

In general terms, each stage serves as the load for the preceding stage. That is, the
Zin of one stage is the RL of the previous stage. The gains of the individual stages are
then multiplied together to arrive at the system gain. The system input impedance is
the input impedance of the first stage only. The source drives the first stage alone.
The first stage, in turn, drives the second stage, and so on. Therefore the source only
"sees" the first stage because it is the only stage to which it delivers current. In a

188
similar fashion, the output impedance of the system is the Zout of the last stage. An
example is shown in Figure 7.30.

                                                                                                                     Figure 7.30
                                                                                                                     Two stage amplifier.

In this circuit, stage one is a non-swamped common emitter amplifier utilizing two-
supply emitter bias. Stage two is a swamped common emitter amplifier using
voltage divider bias. As far as the DC analysis is concerned, these are two separate
circuits. The inter-stage coupling capacitor, Cinter, prevents the DC potential at the
collector of the first transistor from interfering with the bias established by R1 and R2
for transistor number two. For the AC computation, the first stage is analyzed in
normal fashion except that its load resistance is comprised of R1 || R2 || Zin-base2
(i.e., Zin of stage 2). The second stage is analyzed without changes and its gain is
multiplied by the first stage's gain to arrive at the final gain for the pair. The input
impedance of the system is RB || Zin-base1 (i.e., Zin of stage 1).
It should be obvious that by cascading several stages it is possible to achieve very
high system gains, even if each stage is heavily swamped in order to reduce
distortion. For example, three swamped common emitter stages with voltage gains
of just 10 each would produce a system voltage gain of 1000.

Direct Coupling

With a little creativity, it is possible to create multi-stage designs that use fewer
components but which achieve higher performance. One technique is to employ
direct coupling of the stages. Direct coupling allows DC to flow from stage to stage.
As such, it is possible to design an amplifier that has no lower frequency limit. An
example is shown in Figure 7.31.

189
                                                                                                                     Figure 7.31
                                                                                                                     Direct coupled amplifier.

This two-stage amplifier uses no coupling capacitors nor does it rely on voltage
divider resistors for the second stage29. Here is how it works: The first stage is a
fairly ordinary swamped common emitter amplifier using two-supply emitter bias. It
also uses a Darlington pair to maximize the input impedance. Because the base
current is so low, the DC drop on RB could be small enough to ignore so we may
dispense with the input coupling capacitor. The DC potential at the collector of the
Darlington is applied directly to the base of the second stage. This is used to set up
the bias of the second stage via the stage two emitter resistors. This is precisely what
we did with the circuit of Figure 7.7. The only difference is that here the base
voltage is derived from the preceding stage instead of from a voltage divider. The
computations for IC, r'e and the like would proceed unchanged. In any event, this
eliminates two biasing resistors and another coupling capacitor.
Note the use of the PNP device for the second stage. By using a PNP, its collector
voltage must be less than its emitter voltage. As we're also using a bipolar power
supply, we can eliminate the need for the final output coupling capacitor. All we
need to do is set up the resistor values such that the drop across RC2 is the same as
VEE. This will place the stage two DC collector voltage at 0 volts. If there's no DC
voltage then there's nothing to block, and therefore no need for the coupling
capacitor.

29 This circuit does use emitter bypass capacitors so the DC gain will be less than the AC
    gain. In that sense we might say that this amplifier is not fully DC coupled.

190
Summary

A simplified AC model of the bipolar junction transistor consists of a controlled
current source in the collector and a dynamic resistance in the emitter called r'e. This
resistance is a function of the DC bias current, IC; the higher the biasing current, the
lower the resistance. Fluctuations in this resistance can lead to waveform distortion.
Swamping, also known as emitter degeneration, is a technique used to reduce
distortion and stabilize gain. The basic idea is to add a fixed resistor in series with
the emitter so as to buffer or "swamp out" the changes of r'e.

There are three basic AC amplifier configurations: common emitter, common
collector and common base. The common emitter configuration produces a voltage
amplifier with high gain and intermediate input impedance. It also inverts the signal.
Because it exhibits both voltage gain and current gain, it has a potential for high
power gain. The common collector configuration is known as a follower because its
output follows the input. It produces a non-inverting voltage gain of one and exhibits
high input impedance and low output impedance. Therefore, it is useful as either an
input buffer or as a final drive stage to a low impedance load. The common base
configuration exhibits high non-inverting voltage gain. It has a low input impedance
and a high output impedance.

The Darlington pair is a two-transistor configuration that may be treated as a single
device. As such, it exhibits a doubling of both VBE and r'e, and a very large .

In order to achieve higher gains, multiple stages may be cascaded. Their gains
multiply together to produce the combined system gain. The stages may be coupled
through capacitors or via a capacitor-less direct coupling technique that can improve
performance while reducing component count.

Review Questions

    1. How does the AC BJT model compare with the DC model? What are the
         differences and similarities?

    2. Explain how swamping reduces waveform distortion.
    3. Compare and contrast common emitter, common collector and common

         base amplifiers in terms of voltage gain, power gain, input impedance and
         output impedance.
    4. Why might biasing circuits that produce stable Q points be preferred for
         non-swamped amplifiers?
    5. What is a phase splitter?
    6. What are the advantages of direct coupling?
    7. Give at least one example of a high internal impedance source.

191
Problems

Unless otherwise specified, use  = 100.
Analysis Problems

    1. Determine the input and output impedances of the circuit of Figure 7.32.
                                                                        Figure 7.32

    2. Determine the load voltage for the circuit of Figure 7.32 if Vin is 10 mV.
    3. Determine Zin, Zout, and the load voltage for the circuit of Figure 7.33 if Vin is

         70 mV.
                                                                        Figure 7.33

192
    4. Determine Zin, Zout, and the load voltage for the circuit of Figure 7.34 if Vin is
         50 mV.
                                                                        Figure 7.34

    5. Determine Zin, Zout, and the load voltage for the circuit of Figure 7.35 if Vin is
         25 mV.
                                                                        Figure 7.35

193
    6. Determine Zin, Zout, and the load voltage for the circuit of Figure 7.36 if Vin is
         30 mV.
                                                                        Figure 7.36

    7. Determine Zin, Zout, and the load voltage for the circuit of Figure 7.37 if Vin is
         60 mV.
                                                                        Figure 7.37

194
    8. Determine Zin, Zout, and the load voltage for the circuit of Figure 7.38 if Vin is
         150 mV.
                                                                        Figure 7.38

    9. Determine Zin, Zout, and the load voltage for the circuit of Figure 7.39 if Vin is
         200 mV.
                                                                        Figure 7.39

    10. Determine Zin, Zout, and the load voltage for the circuit of Figure 7.40 if Vin is
         250 mV.
                                                                        Figure 7.40

195
    11. Determine Zin, Zout, and the load voltage for the circuit of Figure 7.41 if Vin is
         300 mV.
                                                                        Figure 7.41

    12. Determine Zin, Zout, and the load voltage for the circuit of Figure 7.42 if Vin is
         50 mV.
                                                                        Figure 7.42

    13. Determine Zin, Zout, and the load voltage for the circuit of Figure 7.43 if Vin is
         2 mV.
                                                                        Figure 7.43

196
Design Problems
    14. Redesign the circuit of Figure 7.33 to halve the existing gain while keeping
         the Q point where it is currently.
    15. By using a Darlington pair, redesign the circuit of Figure 7.34 to double Zin.
    16. Redesign the circuit of Figure 7.34 so that it exhibits the same performance
         parameters but uses a PNP device.
    17. Redesign the circuit of Figure 7.36 to double the existing gain while keeping
         the Q point where it is currently.
    18. Redesign the circuit of Figure 7.38 so that it exhibits the same performance
         parameters but uses an NPN device.

Challenge Problems
    19. Determine the gain and input impedance for the circuit of Figure 7.44.
         VCC = 20 V, VEE = -10 V, RB = 18 k, RE1= 10 k, RC1 = 12 k, R1 = 33 k,
         R2 = 15 k, RE2 = 5.6 k, RSW = 400 k, RC2 = 6.8 k, RL = 24 k.

                                                                                                                     Figure 7.44

    20. For the circuit of Figure 7.41, replace its load resistor with the circuit of
         Figure 7.37 and determine the combined gain and input impedance of the
         system.

197
Computer Simulation Problems
    21. Use a transient analysis to verify the load voltage of problem 3.
    22. Use a transient analysis to verify the load voltage of problem 4.
    23. Use a transient analysis to verify the load voltage of problem 8.
    24. Consider the amplifier of Figure 7.32. Replace the 4.3 k emitter resistor
         with a potentiometer of the same value. Connect the wiper arm to the
         emitter bypass capacitor. Run several transient analyses at different pot
         settings (0%, 25%, 50%, etc.). What can you conclude from the results?

198
8 BJT Class A Power Amplifiers

8.0 Chapter Learning Objectives

After completing this chapter, you should be able to:

               Define class A operation.
               Determine AC load lines for class A amplifier stages.
               Determine the compliance and maximum load power for class A amplifier circuits.
               Determine the efficiency and required device ratings for class A amplifier circuits.
               Describe the operation of a dynamic loudspeaker.
               Understand the need for heat sinks and other thermal management techniques.

8.1 Introduction

Now that we have examined BJT voltage amplifiers in terms of their gain, input impedance and output
impedance, it is time that we extend the small signal analysis to larger signals. Of primary importance will be
determination of the maximum output voltage swing, or compliance, along with maximum load power, device
dissipation requirements and amplifier efficiency. To assist with this, we introduce the concept of the AC load
line. In general, we will not concern ourselves with input impedance, voltage gain or even r'e. Indeed, we shall
simply consider r'e as a source of distortion. Most power amplifiers are configured as voltage followers so we
will focus largely on those.

8.2 Amplifier Classes

There are several classes of amplifier operation. The class of an amplifier has nothing to do with the fidelity or
quality of the amplifier. Rather, the class indicates the fundamental operational principle of the circuit. In
general, as the class letter increases, the designs become more complicated but also more efficient. For audio
and other linear applications, classes A, B and D are relatively common these days. Class C is largely relegated
to high power telecommunications while classes G and H are essentially variations of class B.

The definition of class A is that signal current in the collector flows 360 out of the cycle. In other words, it
flows for the entire cycle without interruption. All of the amplifiers that were presented in the prior chapter are
class A designs. In class B, iC flows for just 180, and for class D, iC is discontinuous; the transistor is used as a
switch. Class B and D designs are examined in later chapters.

199
8.3 Class A Operation and Load Line

The signal current in the class A amplifier flows continuously throughout the entire
cycle of the waveform. Ultimately, we would like to known just how large this
signal can be before it is limited and grossly distorted. To do so, we need to examine
the AC equivalent of the amplifier. A generic AC equivalent is shown in Figure 8.1.
This includes both AC collector and emitter resistances so it can be used for either
swamped or unswamped common emitter amplifiers or for emitter followers. If one
of the resistances is not used (for example, rC in a follower), we can just substitute a
value of zero for it.

                                                                                                                     Figure 8.1
                                                                                                                     AC equivalent circuit.

The voltage polarities and current direction are shown for a positive input voltage.
To determine the maximum load voltage swing (compliance), we will need to
construct an AC load line as shown in Figure 8.2.

        ic                                                                            Figure 8.2
     ic(sat)                                                                          AC and DC load lines.
     IC(sat)
              AC load line

     ICQ Q point

                                                                 DC load line

                            VCEQ  vce(cutoff) VCE(cutoff) vce

200
The AC load line is similar to the DC load line that was used for analyzing biasing
circuits. As in the DC version, there will be a cutoff voltage, vCE(cutoff), and a saturation
current, iC(sat). The AC and DC load lines normally are not the same, however, they
must share one point in common, and that's the Q point. Usually, the slope of the AC
load line is steeper than that of the DC load line. This is because the AC resistance
tends to be less than the DC resistance due to loading and capacitor bypassing.
Consequently, vCE(cutoff) tends to be smaller than VCE(cutoff) and iC(sat) tends to be larger
than IC(sat).

To determine expressions for the AC load line endpoints, let's examine the AC
equivalent circuit. Because both load lines share the Q point, we can consider the
circuit of Figure 8.1 as having a no-signal current of ICQ and a no-signal transistor
voltage of VCEQ. As the input signal grows, iC increases. The effect of this is to
increase the voltage drops across rE and rC due to Ohm's law. This, in turn, forces vCE
to decrease due to KVL. The collector current can only increase to the point where
vCE drops to 0 V. This is a maximum increase of VCEQ/(rC+rE). Therefore

     iC (sat ) = I CQ +V CEQ                   (8.1)
                      r E +r C

In terms of cutoff voltage, the transistor starts with VCEQ and ICQ. The largest vCE
increase that can occur is if the current falls to zero. Then, all of the potential
originally developed across rE and rC by ICQ must be absorbed by the transistor.
Therefore

     vCE (cutoff ) = V CEQ + I CQ (r E +r C )  (8.2)

There are three possible ways this can be configured: Q point closer to saturation, Q
point closer to cutoff, or Q point centered on the AC load line. Let's first consider the
Q point closer to saturation. This is shown in Figure 8.3.

Here we have plotted the input voltage in red and drawn the corresponding collector
current and collector-emitter voltage in blue. It is apparent that as the input signal
increases, eventually, the output signal is limited at zero for vCE and at iC(sat) for iC.
The two blue waveforms are severely clipped and distorted. The largest unclipped
peak voltage swing is VCEQ and the largest peak current swing is iC(sat) - ICQ, or more
conveniently, VCEQ/(rE+rC).

201
                        ic                t                                                                         Figure 8.3
                                        input voltage                                                               AC load line, Q point closer to
                                                                                                                    saturation.

                            t  Q point
     collector current

                                                                                                               vce

                                                                              collector-emitter
                                                                              voltage

                                                             t

If we shift the Q point toward cutoff, we solve the saturation clipping problem but
now we have a new problem, as illustrated in Figure 8.4. It should come as no
surprise that we now have cutoff clipping.

                                        ic

                                                                                                                    Figure 8.4
                                                                                                                    AC load line, Q point closer to
                                                                                                                    cutoff.

                                        input voltage
                                                                            t

     collector current

                                                                                 Q point
                        t

                                                                                    vce

                                           collector-emitter
                                           voltage

                                                                     t

202
In this version the largest unclipped peak voltage swing is vCE(cutoff) - VCEQ (or       Figure 8.5
alternately, ICQ(rE+rC)) and the largest peak current swing is ICQ. What's important     AC load line, centered Q point.
here is that the waveform has been clipped. It doesn't really matter which side has
been clipped, either way it's gross distortion. Eventually, every amplifier will have a
limit but we will be able to produce the largest unclipped voltage swing if the Q
point is centered on the AC load line. This is shown in Figure 8.5.

                                           ic

                                                           input voltage t

     collector current

                        t Q point

                                                      vce

                                   collector-emitter
                                   voltage

                        t

With a centered Q point, the largest unclipped peak voltage swing is VCEQ and the
largest unclipped peak current swing is ICQ. By examining equations 8.1 and 8.2 it is
apparent that in order to achieve a centered Q point on the AC load line, the
following must be true:

     V CEQ = r E+r C                                       (8.3)
      I CQ

Of course, while it is useful to determine the maximum voltage across the transistor,
it is more important to determine the maximum voltage across the load. Looking
back at the circuit of Figure 8.1, most times the maximum load voltage (i.e., the
compliance) will equal the maximum transistor voltage. This will be the case in
voltage followers and unswamped amplifiers. The only time there will be a
noticeable reduction is with very heavily swamped amplifiers. In this case the
compliance will be reduced by the voltage divider between the load and swamping
resistors. For example, a swamped amplifier with a voltage gain of 4 would lose
about 20% of the maximum swing. Swamping has to be very heavy resulting in very
low gains before appreciable signal is lost.

203
Thus we arrive at the following general rule:

     Peak compliance is the smaller of VCEQ or ICQ(rE+rC)  (8.4)

Knowing the compliance, the maximum load power may be determined using power
law. Power is determined using RMS values, so the peak compliance will need to be
divided by 2 (or multiplied by 0.707) before continuing.

                  ComplianceRMS 2                          ( 8.5)
     P load ( max) =

                          RL

There is something important to note about this equation. It uses the load resistance
value, not the total AC effective value (i.e., not rL which is RL in parallel with a
biasing resistor). If rL was used, we'd be calculating the power in the load plus the
power in the biasing resistor.

We would also like to determine the maximum power dissipated by the transistor.
Because the transistor's current and voltage are fluctuating with the input signal, we
need to determine the magnitude of the load voltage that produces maximum power
in the transistor. Intuitively, we might guess that this occurs at maximum load power
but it turns out that this guess is incorrect. Under no-signal conditions the transistor
is operating statically at the Q point. Therefore, quiescent power dissipation is

     PDQ = VCEQ ICQ                                        (8.6)

In contrast, at full load for a centered Q point, we have

     vCE = V CEQ (1-sin 2  ft )
      iC = I CQ (1+sin 2  ft )

     PD = vCE iC                                           (8.7)
     PD = V CEQ (1-sin 2  ft )ICQ (1+sin 2  ft )
     PD = V CEQ ICQ (1-sin2 2  ft )

     PD = V CEQ ICQ (.5+.5 cos 4  ft )

            PDQ P DQ
     PD = + cos 4  ft

              22

The first term of Equation 8.7 is a fixed offset while the second term is a sinusoid at
twice the signal frequency. Because the peak amplitude of this sinusoid is the same
as the fixed offset, the average over time is simply the offset value. These
waveforms are illustrated in Figure 8.6.

204
                                 Class A Power Dissipation

Amplitude (v, i, p)  2.0    collector current             collector-emitter              Figure 8.6
                     1.8                                     voltage                     Transistor power dissipation at
                     1.6    transistor power                                             full load power.
                     1.4       dissipation                    averaged power
                     1.2                                           dissipation  1
                     1.0
                     0.8    0.2                0.4        0.6  0.8
                     0.6
                     0.4
                     0.2
                     0.0

                         0

                                                    Time

The result is that the transistor only dissipates half the power at full load that it
dissipates under idle conditions. This makes perfect sense if you stop to consider
that the class A amplifier always draws the same power from the DC supplies,
regardless of the size of the load signal. Without clipping, the average current will be
ICQ. That current times the supply voltage yields the supplied power. What's
happening is that as the signal increases in amplitude, more and more of the power
dissipated by the transistor is shifted to the load. At maximum load swing, both the
transistor and the load will be dissipating PDQ/2. As strange as it might seem, if you
want to keep the output transistor of a class A amplifier cool, don't turn the volume
down, turn it up.

The foregoing implies that class A designs are not power efficient. This is indeed the
situation. As we have just seen, the best case maximum load power will be one half
of PDQ, assuming a centered Q point (non-centered will be worse). To achieve this
swing, the power supply will have to be at least twice as large as VCEQ because it has
to cover the peak-to-peak swing, while VCEQ represents the peak swing for a centered
Q point.30 In any event, the best case efficiency turns out to be dismal, as follows.

30 This is the case if the AC and DC load lines are identical. This is atypical. Consequently,
    the power supply will tend to be larger than twice VCEQ which makes the situation even
    worse.

205
                                = Pout = P load
                                     Pi n P DC

                                = PDQ / 2
                                     2 V CEQ I CQ

                                = PDQ / 2
                                     2 PDQ

                                = 25%

This represents the maximum or best case efficiency for an RC coupled class A
amplifier. It may be considerably less depending on precisely how it is biased. This,
truly, is the Achilles heel of the class A topology: it is wasteful. It draws full power
from the supply regardless if signal is present and, at best, will translate only one
quarter of that power into useful load power. At the same time, the power dissipation
of the transistor will need to be at least twice that of the delivered load power, and
might need to be much greater. Why use it then? To its advantage, it is a relatively
simple design so if large output powers are not needed, it can prove useful. This is
most definitely the case for the early stages of a multi-stage amplifier where the
amount of load power is very small (basically the power delivered to the following
stage). In that instance, the increased complexity of more power efficient designs is
not warranted or cost effective.

Example 8.1

     For the amplifier shown in Figure 8.7, determine the compliance, maximum             Figure 8.7
     load power, worst case transistor dissipation and efficiency.                        Schematic for Example 8.1.

                        I CQ = V EE-V BE

                                         RE
                           I CQ = 15 V-0.7 V 120
                           I CQ = 119 mA

     By inspection, VCEQ = 5.7 V. The AC cutoff voltage is

                 vCE (cutoff ) = V CEQ+I CQ (r C+r E)
                 vCE (cutoff ) = 5.7 V+119 mA(0+120 || 32 )
                 vCE (cutoff ) = 5.7 V+119 mA(25.3 )
                 vCE (cutoff ) = 5.7 V+3 V
                 vCE (cutoff ) = 8.7 V

     The smaller of VCEQ and ICQ(rC+rE) is the peak compliance, so

                        compliance = 3 V peak

206
         Given the compliance, we can use power law to find the load power
                                             Compliance RMS2

                               P load ( max) =
                                                     RL

                                             (.7073 V)2
                               P load ( max) =

                                                  32 
                               Pload (max) = 141 mW

         This is not a lot of power for something like a loudspeaker but is a fair
         amount to drive something like a pair of headphones.

         The transistor's worst case power dissipation is
                                P D (max) = P DQ = ICQ V CEQ
                                PD (max) = 119 mA 5.7 V
                                P D (max) = 678 mW

         The supplied circuit power is the average current draw times the total
         supplied voltage differential

                               PDC = I CQ (V CC -V EE )
                               PDC = 119 mA20 V
                               PDC = 2.38 W
         The efficiency is the ratio of maximum load power to supplied DC power
                                = Pload (max )

                                        P DC
                                = 141 mW 2.38 W
                                = 5.9 %

         This is much worse than the theoretical best case. This is due, at least in
         part, to the fact that the Q point is not centered on the AC load line.

         To complete the analysis, note that the transistor's breakdown rating (BVCEO)
         should be at least as large as vCE(cutoff) (8.7 volts), and the maximum current
         rating should be at least as large as iC(sat) (119 mA+5.7 V/25.3  = 344 mA).

207
Computer Simulation

A computer simulation of a class A emitter follower using a Darlington pair is
examined next. Of primary interest here is the verification of the output compliance
so a transient analysis will be used. The simulator schematic is shown in Figure 8.8.

                                                                                                                     Figure 8.8
                                                                                                                     Class A follower in simulator.

We can make a few quick computations to determine the compliance. First, we find
the collector Q point current.

                           I CQ = V EE-V BE

                                             RE
                               I CQ = 10 V-1.4 V 330 
                               I CQ = 26mA
By inspection, the emitter is two base-emitter junction potentials below ground, or
-1.4 V. As the collectors are tied to VCC, this means that VCEQ = 6.4 V. The other half
of the swing, from VCEQ to vCE(cutoff) is
                               vCE (cutoff ) -V CEQ = I CQ(r C +r E )
                               vCE (cutoff ) -V CEQ = 26 mA(0+330 || 50 )
                               vCE (cutoff ) -V CEQ = 26 mA( 43.4 )
                               vCE (cutoff ) -V CEQ = 1.13 V
The Q point is not centered and is closer to cutoff. This means that the amplifier will
produce cutoff clipping around 1.1 volts and saturation clipping around 6 volts. In
208
other words, there is more room for the current to swing up to saturation than to
swing down to zero. As this is the current flowing through the load and we have a
non-inverting follower, we expect to see the load voltage echo this. That is, the
negative portion of the load voltage should clip before the positive portion.
The transient analysis results are shown in Figure 8.9. A two volt peak input signal is
applied (blue trace). The negative portion of the load voltage clips at approximately
1.1 volts as expected (red trace). The input signal is not large enough to cause
saturation clipping. This was done on purpose to verify the voltage gain of the
follower. It should be very close to unity. In fact, the trace shows that the gain is
around 0.95 or so.

                                                                                                                     Figure 8.9
                                                                                                                     Class A follower transient
                                                                                                                     analysis.

If this had been a voltage amplifier instead of a follower, these waveforms would
appear flipped vertically. To verify this, the circuit is modified to produce a voltage
amplifier with a gain of approximately one. This is achieved by moving the load to
the collector and adding a 330  biasing resistor. This will result in the same AC
load impedance. To maintain a similar VCEQ, VCC is raised by 10 volts. Finally, the
original 330  emitter biasing resistor is split in two: 287  and 43 . This will
yield the same ICQ and achieve a voltage gain of unity. As a result, we expect to see
clipping at approximately 1.1 volts on the positive portion. The modified circuit is
shown in Figure 8.10 and the resulting transient simulation in Figure 8.11.

209
                                                                                                                     Figure 8.10
                                                                                                                     Class A amplifier in simulator.

                                                                                                                     Figure 8.11
                                                                                                                     Class A amplifier transient
                                                                                                                     analysis.

210
One final item of interest regarding the simulations: If the input level is increased in
an attempt to see clipping on the other half of the waveform, something strange
happens. At first it will appear as though it never clips. A careful examination
reveals something different, though. Given the values in these circuits, they will
exhibit a certain amount of clamping action (clamping was presented in Chapter 3).
This will cause the waveform to shift. If you inspect the peak-to-peak value, it will
be close to the value of vCE(cutoff). It will be a little less due to the fact that, particularly
for a Darlington pair, VCE(sat) is not 0 V.

8.4 Loudspeakers

One of the more common loads for amplifiers is a loudspeaker. It makes sense then
to look at how they are constructed and note anything interesting or peculiar as far as
their electrical characteristics are concerned. The most common form of loudspeaker
is the dynamic loudspeaker31. All dynamic loudspeakers share certain common
elements regardless of size or acoustic output capability. A cutaway view of a low
frequency driver is shown in Figure 8.12.

                                                                                                                     Figure 8.12
                                                                                                                     Dynamic loudspeaker.
                                                                                                                     A. Frame
                                                                                                                     B. Suspension
                                                                                                                     C. Lead wire
                                                                                                                     D. Spider
                                                                                                                     E. Magnet
                                                                                                                     F. Diaphragm
                                                                                                                     G. Voice coil former
                                                                                                                     H. Voice coil
                                                                                                                     I. Dust cap

                                                                                                                                                   Image courtesy of Audio Technology.

The idea behind its operation is magnetic repulsion and attraction. The heart of the
unit is the voice coil (H). This is a coil of magnet wire wound around a former (G)
that typically is made of aluminum or some other high temperature material. The
31 It's a rather odd name given that all loudspeakers are dynamic in some respect. If they

    weren't they wouldn't produce sound.

211
voice coil might be a single layer of edge-wound ribbon wire or perhaps several
layers of ordinary round wire. Depending on the design, the voice coil might be
anywhere from a fraction of an inch to several inches in diameter. The coil ends are
connected to flexible lead wires (C) that terminate on the loudspeaker frame (A).
Ultimately, that's what the amplifier will connect to.

The voice coil is fixed to a diaphragm (F) and is freely suspended by an outer edge
suspension (B) and an inner element known as a spider (D). The voice coil sits in a
strong magnetic field that is created by a powerful permanent magnet (E) that
commonly uses ceramic, alnico or rare earth construction. When current from the
amplifier flows through the coil, it will create it's own magnetic field that will either
aid or oppose the fixed field created by the permanent magnet, depending on the
direction of the current. This results in a force that causes the coil to move within the
fixed field. As the coil moves, the diaphragm moves with it, pushing on the
surrounding air and creating sound. The larger the current, the stronger the newly
created field and the greater the resulting aid or opposition, which results in greater
movement of the diaphragm and a larger sound pressure. This fundamental design
has changed little since its invention in the 1920s. Modern magnets, suspension and
diaphragm materials have improved considerably in the intervening years but the
operational principle is pretty much the same.

It is very difficult to create a driver that can cover the full audio spectrum of 20 Hz
to 20 kHz while achieving sufficient listening volume at low distortion.
Consequently, drivers are often designed to cover a limited portion of the audio
spectrum. Low frequency drivers are commonly referred to as woofers while high
frequency drivers are called tweeters. Drivers that cover the middle range of
frequencies are given the highly inventive name midranges (although once upon a
time they were called squawkers). A combination of these devices will be wired
together with other components to create a complete home or auto loudspeaker
system. Although very high quality systems can be produced, virtually all direct
radiating dynamic loudspeaker systems suffer from low conversion efficiency. For a
typical consumer system, only about 1% to 2% of the applied electrical power is
turned into useful acoustic output power. The vast majority of the applied power
simply makes the voice coil hot.

Loudspeaker Impedance

Loudspeakers are given a nominal impedance value. The most common impedance
for home use is 8  while 4  is common in automotive systems. It is important to
remember that this is a nominal value and the true value varies with frequency.
While it is common to test power amplifiers with large power resistors, they are only
a coarse approximation of a real loudspeaker.

The electrical and mechanical characteristics of a loudspeaker combine to create an
equivalent circuit with resistive, inductive and capacitive elements. A typical

212
electrical circuit model32 of a single loudspeaker driver is shown in Figure 8.13. RVC
and LVC are the resistance and inductance of the voice coil, respectively. The other
components are electrical equivalents of mechanical properties such as suspension
losses.

                                                                                        Figure 8.13
                                                                                        Dynamic loudspeaker electrical
                                                                                        model.

Clearly, this is not a simple 8  resistor. In fact, we see a very complex impedance:
The three parallel elements will create a resonant peak and the series inductance will
cause the impedance to rise with frequency. Typically, the resonant peak occurs at
the lower end of the spectrum and the associated resonant frequency is denoted on a
spec sheet as fS, the free-air resonance. For a nominal 8  woofer, the peak
impedance can be over 30 . An example of a loudspeaker impedance plot is shown
in Figure 8.14.

                                                                                                                     Figure 8.14
                                                                                                                     Dynamic loudspeaker
                                                                                                                     impedance plot.

                                                                                                                                                   Courtesy of Dayton Audio.

This loudspeaker is a nominal 8  unit yet the impedance can be many times this
value, and at some frequencies, less than 7 . This plot also includes the phase angle
of the loudspeaker and we can see that it can be upwards of 40 capacitive or

32 Adapted from R. H. Small, "Direct Radiator Loudspeaker System Analysis", Journal of
    the Audio Engineering Society, June, 1972.

213
inductive, depending on the frequency. What makes this more interesting is that a
consumer loudspeaker system is a combination of multiple drivers plus other
electrical components, and this can result in an even more complex impedance plot.

The obvious question is, "Does this have any effect on the analysis of the power
amplifier?" The simple answer is, "Yes". Areas of the spectrum where the
impedance magnitude drops below the nominal value will require more current for
any given load voltage. Further, the phase shift caused by a partly reactive load will
impact the power dissipation of the transistor.

Consider the power graph shown in Figure 8.6 for a purely resistive load. If we
repeat the plot but add a noticeable phase shift to simulate a partly reactive load,
something interesting happens, as shown in Figure 8.15.

                                            Class A Power Dissipation                                                                       Figure 8.15
                                                    with phase shift                                                                        Power dissipation with reactive
                                                                                                                                            load.
                     2.0

                     1.8
                                                                                                                      collector-emitter

                     1.6 voltage

                     1.4 collector current

Amplitude (v, i, p)  1.2

                     1.0 transistor power
                     0.8 dissipation

                     0.6

                     0.4

                     0.2

                     0.0
                     0    0.2               0.4        0.6             0.8                                                               1

                                                 Time

The purple trace represents the power dissipation of the transistor. The peak current-
voltage product is twice the value seen with a purely resistive load. This
combination might lay outside the safe operating area of the transistor. Ultimately,
reactive loads are somewhat more "challenging" than simple resistive loads.
Therefore, the transistors may need to be rated higher than the values computed for
an idealized resistive load.

214
Another way of looking at the issue of phase shift induced by loudspeakers and
other complex loads is to examine the AC load line. Our previous work with load
lines always assumed that the load was purely resistive. What happens in the
complex impedance case?

If we examine a generic complex load at a single frequency, our former straight line
load line turns into an ellipse, as shown in Figure 8.16.

                     ic

                                                                                         Figure 8.16
                                                                                         AC load line with complex load.

                                                 Q point

                                                                                  vce

This plot assumes that the circuit has a centered Q point. The normal resistive load
line is shown in green. We can visualize the signal starting at zero amplitude,
meaning all we see is the Q point. As the signal gets larger and larger, it swings
along the green line until, eventually, it maxes out at the two axes. In the complex
impedance case, we also start at the Q point. As the signal increases, it traces out an
ellipse around the Q point. Further increases would create a larger ellipse, and then a
larger ellipse, and so on. Eventually, we would see the maximum swing just
touching the axes. This is what is plotted above in red, the maximum case (i.e., at
full compliance).

If the impedance angle changes, the aspect ratio of the ellipse changes in reaction to
it. The larger the angle, the more open the ellipse becomes. The extremes are 0, the
purely resistive case that yields a collapsed ellipse or straight line; and 90, the
purely reactive case that yields a fully open ellipse, or circle. We have already seen
that the phase angle of a loudspeaker changes with frequency, therefore, the load line
also changes with frequency. As we sweep the input frequency from low to high, we
can imagine the load line wavering back and forth between straight lines and various
elliptical shapes. The important thing, though, is that some of these new operating
regions (the areas where the red curve is above and to the right of the green line)
may go outside the safe operating area of the transistor.

215
8.5 Power Transistor Data Sheet Interpretation

The data sheet for a popular NPN power transistor, the 2N3055, is shown in Figure
8.17. This model is available from several different manufacturers. Due to the high
power dissipation, the TO-92 plastic case that is used for small signal devices is not
appropriate. Instead, this device uses the all-metal TO-3 case. Under the maximum
ratings we find the device has a maximum power dissipation of 115 W at a case
temperature of 25 C, a maximum collector current of 15 A and a maximum
collector-emitter voltage of 60 V. Obviously, the device cannot withstand maximum
current and voltage simultaneously.

                                                                                                                     Figure 8.17a
                                                                                                                     2N3055 data sheet.

                                                                                                                                                   Used with permission from SCILLC
                                                                                                                                                   dba ON Semiconductor.

216
In the drawing of the TO-3 case, only two leads are shown. These are for the emitter
and base. The entire body of the device is the collector. This is because the device
will most likely be attached to a metal heat sink (see next section) to help dissipate
the heat generated. The greater the contact area, the more effective the heat flow will
be. The curves presented in Figure 8.17b indicate that  is considerably lower than
what we saw for small signal devices. Further, IC(sat) tends to be larger for higher
power transistors. For very high currents,  might fall to less than 20 while IC(sat) can
be upwards of half of a volt.

                                                                                                                     Figure 8.17b
                                                                                                                     2N3055 data sheet (cont).

217
                                                                                                                     Figure 8.17c
                                                                                                                     2N3055 data sheet (cont).

One item of note in Figure 8.17c is the small graphic at the bottom of the sheet. This
is a plot of safe operating area. Basically, the combination of VCE and IC must fall
within the lower-left zone. What is of particular interest is that the safe zone extends
out further if the current/voltage combination is the result of a short pulse rather than
a continuous condition.
218
Power Derating

One final item of concern is the graph found in Figure 8.17a, and magnified in
Figure 8.18. This is a power derating curve.

                                                                                       Figure 8.18
                                                                                       Power derating curve for
                                                                                       2N3055.

                                                                                       Used with permission from SCILLC dba
                                                                                       ON Semiconductor.

Although the device is rated for 115 watts, that is only true at case temperatures of
25캜 or lower. At higher temperatures, the power dissipation capability decreases.
For example, at 100캜 this device can only dissipate about 65 watts. A precise value
can be computed via the following formula:

             PD = P25 - D(Tcase - 25캜)                        (8.8)

     Where
     PD is the power dissipation at the new case temperature,
     P25 is the power dissipation at 25캜,
     D is the derating factor (units of W/C),
     Tcase is the new case temperature.

Example 8.2

     Determine the power dissipation of a 2N3055 at 75캜.

     Using the graph, this is a little over 80 watts.

     For a more accurate result, we'll use Equation 8.8. From the data sheet the
     dissipation at 25캜, P25 , is 115 watts. The derating factor, D, is 0.657 W/C
     (the derating factor is found directly above the graph of power derating in
     Figure 8.17a).

219
                               PD = P25 - D (T ambient-25 C )
                               PD = 115 W -0.657 W/C(75 C-25 C)
                               PD = 82.1W

8.6 Heat Sinks

The issue with power transistors is always heat. As noted in Example 8.2, as the
transistor heats up due to internal power dissipation, its ability to dissipate heat is
compromised. The trick, then, is to efficiently move the heat from the transistor to
someplace else. This is normally achieved through the use of a heat sink.

A heat sink is a metal device that is attached to the power transistor. Typically, they
are made of aluminum and feature an array of fins. By increasing the surface area,
heat can be moved away from the transistor more efficiently than by the transistor
alone.

Heat sinks are designed to mount specific device case styles. The most common case
styles include the TO-3 "can" along with the various "power tab" styles such as the
TO-220 and TO-202. Special mounting hardware and insulation spacers are also
required in order to maintain electrical isolation between the transistor and the heat
sink as we do not want the heat sink to be electrically live. This usually takes the
form of a mica sheet, and plastic washers and bushings for the mounting machine
screws (for small heat sinks, sometimes nylon machine screws are used).

There are a few general rules that should be followed when using heat sinks:

     Always use some form of heat sink grease or thermally conductive pad
         between the heat sink and the device. This will increase the thermal transfer
         between the two parts, however, excessive quantities of heat sink grease will
         decrease performance.

     Mount fins in the vertical plane for optimum natural convective cooling.
     Do not overcrowd or obstruct devices that use heat sinks.
     Do not block air flow around heat sinks - particularly directly above and

         below items that rely on natural convection.
     If thermal demands are particularly high, consider using forced convection

         (i.e., a small fan directed at the heat sink).

220
Some typical heat sinks are shown below. Figure 8.19 shows a heat sink and
thermal data plot for use with a single TO-3 case device.

                                                                                       Figure 8.19
                                                                                       Heat sink for TO-3.

                                                                                       Reprinted courtesy of Aavid
                                                                                       Thermalloy, Inc.

Figure 8.20 shows a heat sink designed for a pair of transistors using TO-220 cases.
In this photo, the white insulating pads can be seen between the transistors and heat
sink.

                                                                                       Figure 8.20
                                                                                       Heat sink for dual TO-220.

                                                                                       Reprinted courtesy of Aavid
                                                                                       Thermalloy, Inc.

Thermal Resistance

In order to specify a particular heat sink for a given application, a more technical
explanation is in order. What we are going to do is create a thermal circuit
equivalent. In this model, the concept of thermal resistance is used. Thermal
resistance denotes how easy it is to transfer heat energy from one mechanical part to
another. The symbol for thermal resistance is , and the units are Celsius degrees per

221
watt. In this model, temperature is analogous to voltage, and thermal power
dissipation is analogous to current. A useful equation is,

           PD= T total                             (8.9)

Where PD is the power dissipated by the semiconductor device in watts, T is the
temperature differential, and total is the sum of the thermal resistances. Basically, this
is a thermal version of Ohm's law.

In order to construct our model, let's take a closer look at the power-device/heat-sink
combination. This is shown in Figure 8.21. The subscript j stands for junction, c is
for case (of the transistor), s is for heat sink and a is for the ambient air. Tj is the
semiconductor junction temperature and is created by the product of the transistor's
current and voltage. This thermal source heats the device case to Tc. The thermal
resistance between the two entities is jc. The case, in turn, heats the heat sink via the
interconnection. This thermal resistance is cs, and the resulting temperature is Ts.
Finally, the heat sink passes the thermal energy to the surrounding air which is
sitting at Ta. The thermal resistance of the heat sink to the air is sa. The equivalent
thermal model is shown in Figure 8.22. Although this "thermal circuit" does not
have perfect correspondence with normal circuit analysis, it does illustrate the main
points.

                 mounting           heat sink                                               Figure 8.21
                 interface                                                                  Device and heat sink.

     junction

     case

           jc

                            cs

                                sa

               Tj Tc Ts                        Ta

222
                                                                                         Figure 8.22
                                                                                         Equivalent thermal model of
                                                                                         Figure 8.21.

In this model, ground represents a temperature of absolute zero. The circuit is sitting
at an ambient temperature Ta, thus a voltage source of Ta is connected to ground and
the heat sink. The three thermal resistances are in series and are driven by a current
source that is set by the present power dissipation of the device. Note that if the
power dissipation is high, the resulting "voltage drops" across the thermal
resistances are high. Voltage is analogous to temperature in this model, so this
indicates that a high temperature is created. Because there is a maximum limit to Tj,
a higher power dissipation requires lower thermal resistances. As jc is set by the
device manufacturer, we have no control over that element. However, cs is a
function of the case style and the insulation material used, so we do have some
control (but not a lot) over that. On the other hand, as the person who specifies the
heat sink, we have a great deal of control over sa. Values for sa are given by heat
sink manufacturers. A useful variation of Equation 8.9 is

     PD= T j-T a  jc+cs+sa  (8.10)

Normally, power dissipation, junction and ambient temperatures, jc and cs are
known. The idea is to determine an appropriate heat sink. Both Tj and jc are given
by the semiconductor device manufacturer. The ambient temperature, Ta, may be
determined experimentally. Due to localized warming, it tends to be higher than the
actual "room temperature". Standard graphs, such as those found in Figure 8.23,
may be used to determine cs. Note the generally lower values of cs for the TO-3
case relative to the TO-220. This is one reason why TO-3 cases are used for higher
power devices. This case also makes it easier for the manufacturer to reduce jc.

223
                                                                                                                   Figure 8.23
                                                                                                                   CS for TO-3 and TO-220

                                                                                                                                                Reprinted courtesy of Thermalloy, Inc.

224
Example 8.3

         Determine the appropriate heat sink rating for a power device rated as
         follows: Tj(max) = 175캜, TO-3 case style, jc = 1.5 C/W. The device will be
         dissipating a maximum of 15 W in an ambient temperature of 40캜. Assume
         that the heat sink will be mounted with heat sink grease and a 0.002 mica
         insulator.

         First, find cs from the TO-3 "With Thermal Grease" graph in Figure 8.23.
         Curve 3 is used. The approximate value is 0.35 C/W.

                               PD= T j -T a  jc+cs+sa
                               sa=T j -T a - jc-cs

                                        PD
                               sa= 175캜 -40캜 15 W -1.5 C/ W -0.35C /W
                               sa= 7.15C/ W

         This is the maximum acceptable value for the heat sink's thermal resistance.
         Note that the use of heat sink grease gives us an extra 0.8 C/W or so. For
         this application, the heat sink pictured in Figure 8.19 will most likely be
         sufficient without added forced air cooling (the graph stops at less than
         4 C/W with an air flow of under 200 feet/minute).

         If we repeat this problem with a much higher PD, things work out a little
         differently. Let's use 40 W this time.

                               PD= T j -T a  jc+cs+sa
                               sa=T j -T a - jc-cs

                                        PD
                               sa= 175캜 -40캜 40 W -1.5 C/ W -0.35C /W
                               sa=1.53 C/ W

         If we hope to use that same heat sink, we will have to add forced air cooling
         of at least 700 feet/minute. The other option would be to find a more
         thermally efficient (and probably much larger) heat sink if we hope to use
         natural convection alone.

225
Summary

Class A operation is defined as having collector current flow for 360 of the cycle.
This means that a single output device can be used to amplify the entire input
waveform. To determine the maximum signal swing, or compliance, an AC load line
is used. This is similar to a DC load line and plots all possible transistor voltage and
current coordinate pairs. The efficiency of the class A amplifier tends to be low. The
maximum theoretical efficiency is only 25%. Further, the amplifier draws full
current from the power supply regardless of whether or not a signal is present. As a
consequence, the transistor runs hottest when there is no signal. With an applied
signal, some of the power formerly dissipated within the transistor is shifted to the
load.

Loudspeakers offer a complex impedance as a load. As such, they are more
challenging than simple resistive loads and may require the output transistor to be
rated for a higher-than-normal power dissipation.

Heat sinks are used to efficiently move heat from the transistor's internal structure to
the surrounding air. The thermal effectiveness of a heat sink is measured by thermal
resistance, . The lower the value of , the more effective the heat sink is at
transferring heat from the transistor to the surrounding air. For high power
applications where a good deal of heat is generated, heat sinks are augmented with
forced air cooling.

Review Questions

    1. Define class A operation.
    2. Why are voltage followers generally preferred over voltage amplifiers for

         power output applications?
    3. How does an AC load line differ from a DC load line?
    4. What is the advantage of having a centered Q point on the AC load line?
    5. What effect does a reactive load have on an AC load line?
    6. Describe the operation of a dynamic loudspeaker.
    7. What are heat sinks? What are they used?
    8. What is thermal resistance?

Problems

Analysis Problems

    1. Draw the AC load line for the circuit of Figure 8.24. Also determine the
         compliance, maximum load power, maximum transistor dissipation and
         efficiency. VCC = 6 V, VEE = -12 V, Rgen = 50 , RB = 2.2 k, RE = 470  ,
         RL = 75 .

226
                                                                        Figure 8.24

    2. Recalculate Problem 1 if the load is halved.
    3. Determine if the circuit of Figure 8.25 has a centered Q point on its AC load

         line. VCC = -10 V, VEE = 15 V, RB = 1 k, RE = 330 , RL = 50 .
                                                                        Figure 8.25

    4. Draw the AC load line for the circuit of Figure 8.25. Also determine the
         compliance, maximum load power, maximum transistor dissipation and
         efficiency. VCC = -8 V, VEE = 12 V, RB = 1 k, RE = 330 , RL = 32 .

    5. Draw the AC load line for the circuit of Figure 8.26. Also determine the
         compliance, maximum load power, maximum transistor dissipation and
         efficiency. VCC = 15 V, VEE = -20 V, RB = 10 k, RE = 100 , RL = 16 .

227
                                                                        Figure 8.26

    6. Determine if the circuit of Figure 8.27 has a centered Q point on its AC load
         line. VCC = 30 V, R1 = 3.9 k, R2 = 3.3 k, RE = 560 , RL = 50 .
                                                                        Figure 8.27

    7. Draw the AC load line for the circuit of Figure 8.27. Also determine the
         compliance, maximum load power, maximum transistor dissipation and
         efficiency. VCC = 30 V, R1 = 2.2 k, R2 = 2.2 k, RE = 470 , RL = 32 .

    8. Determine if the circuit of Figure 8.28 has a centered Q point on its AC load
         line. VCC = 15 V, VEE = -15 V, RB = 1 k, RE = 510 , RSW = 10 ,
         RC = 270 , RL = 50 .

228
                                                                        Figure 8.28

    9. Draw the AC load line for the circuit of Figure 8.28. Also determine the
         compliance, maximum load power, maximum transistor dissipation and
         efficiency. VCC = 25 V, VEE = -15 V, RB = 1 k, RE = 270 , RSW = 6.8 ,
         RC = 330 , RL = 16 .

    10. A power transistor has a PD(max) of 50 watts at 25캜. It has a derating factor
         of 0.4 W/C. Will this transistor be sufficient for a circuit that needs to
         dissipate 40 watts at 85캜?

    11. A power transistor has a PD(max) of 100 watts at 25캜. It has a derating factor
         of 0.6 W/C. Will this transistor be sufficient for a circuit that needs to
         dissipate 65 watts at 75캜?

    12. Determine the appropriate heat sink rating for a power device rated as
         follows: Tj(max) = 175캜, TO-3 case style, jc = 1.5 C/W. The device will be
         dissipating a maximum of 25 W in an ambient temperature of 35캜. Assume
         that the heat sink will be mounted with heat sink grease and a 0.003 mica
         insulator.

    13. Determine the appropriate heat sink rating for a power device rated as
         follows: Tj(max) = 165캜, TO-220 case style, jc = 3 C/W. The device will be
         dissipating a maximum of 15 W in an ambient temperature of 35캜. Assume
         that the heat sink will be mounted with heat sink grease and a 0.002 mica
         insulator.

229
Design Problems
    14. Alter the emitter power supply in the circuit described in Problem 1 to
         achieve a centered Q point.
    15. Alter the emitter power supply in the circuit described in Problem 4 to
         achieve a centered Q point.

Challenge Problems
    16. Find a heat sink (make and model number) that will meet the thermal
         resistance requirement for Problem 12 with no more than 400 feet/minute of
         forced air.
    17. Alter the voltage divider in the circuit described in Problem 6 to achieve a
         centered Q point.

Computer Simulation Problems
    18. Perform a transient analysis for the circuit described in Problem 1 to verify
         the compliance.
    19. Perform a transient analysis for the circuit described in Problem 4 to verify
         the compliance.
    20. Perform a transient analysis for the circuit described in Problem 9 to verify
         the compliance.

230
9 BJT Class B Power Amplifiers

9.0 Chapter Learning Objectives

After completing this chapter, you should be able to:

               Define class B operation.
               Determine AC load lines for class B amplifier stages.
               Determine the compliance, maximum load power, efficiency and required device ratings for

                   class B circuits.
               Discuss the advantages and disadvantages of class B operation versus class A operation.
               Discuss the origin of notch distortion and methods used to mitigate it.
               Explain the operation of a current mirror.
               Explain the operation of a Sziklai pair.
               Explain the operation and use of a VBE multiplier.
               Outline the operation of fully complimentary and quasi complimentary output stages utilizing

                   direct coupled driver stages.
               Discuss methods to protect the output devices from overload.

9.1 Introduction

Class B amplifiers have long been a mainstay of linear amplifier design. Compared to class A operation, class B
amplifiers offer much greater power efficiency. That is, a much larger percentage of the applied DC power can
be turned into useful AC output to the load. This also means that the power dissipation requirements for the
transistors are lowered. Further, unlike class A operation, class B designs do not continuously draw full power
from their DC supplies. Instead, they draw current as it is needed, and therefore run relatively cool at idle and at
low output power.

The downside for this improved efficiency is added complexity. For starters, two transistors are required for
linear class B operation. Also, the biasing can be a little trickier which requires modifications to the relatively
straightforward class A biasing circuits we have already examined. Also, class B amplifiers suffer from a unique
form of distortion that class A amplifiers do not.

In this chapter we shall also examine the use auxiliary device configurations and sub-circuits to improve
performance. These include the current mirror, Sziklai pair, VBE multiplier, and overload protection and
prevention circuitry. As with the class A amplifier, the common collector or voltage follower configuration tends
to be the most widely used configuration for class B circuits, hence, we shall focus on followers and not on
voltage amplifiers.

231
9.2 The Class B Configuration

Class B operation is defined as having AC collector current flow 180 out of the
cycle. Consequently, in order to amplify the entire signal, two devices will be
needed. Further, we will need to pay attention to how the two waveform halves are
"stitched together" as this could be a problem area. The obvious question at this
point is, why do we bother separating the positive and negative half-waves if it leads
to circuit complexity and possible waveform issues? The answer is improved
efficiency.

In the previous chapter we discovered that class A amplifiers are not efficient. In
fact, at best they only transform 25% of the DC input power into useful load power.
Why does this occur and how does the class B topology address this situation?

With a class A design, we determined that the optimal location for the Q point was
midway along the AC load line. In this way, the signal could swing up toward
saturation and down toward cutoff equally. Unfortunately, this also means that if no
signal is present, then the transistor is still pulling half of the maximum current. It
would make more sense if the transistor idled at zero current (or some small nominal
value) than idling at half of the maximum.33

The basic idea of class B is to push the Q point down so that it is sitting right at
cutoff on the AC load line. This means that ICQ is 0 A and virtually no power is drawn
from the supply at idle. Locating the Q point at cutoff also means that the transistor
will immediately clip the negative portion of the wave. Consequently, we will need a
mirror image circuit to produce that portion (and which will clip the positive
portion).

                                                                                                                   Figure 9.1
                                                                                                                   Voltage follower simplified AC
                                                                                                                   circuit.

To gain a better understanding of how class B operation works, consider the
simplified AC circuit of a voltage follower shown in Figure 9.1. If we situate the Q
point directly at vCE(cutoff) then the associated ICQ is 0 A. As the input signal swings
positive, the collector current increases. As it does so, the voltage across the load (rE)
begins to increase and the voltage across the transistor's collector-emitter begins to

33 Think of a car engine: How much sense would it make to have an engine with a 6000
    RPM maximum run at 3000 RPM when you're sitting motionless at a red light?

232
decrease (due to KVL). When the input signal swings negative, the transistor is
turned off. As a result, no collector current is created, no voltage is developed across
the load and vCE stays at cutoff. It is as if the input waveform has been half-wave
rectified. This action is shown in Figure 9.2. As the input signal swings positive, the
operating point slides up the load line, moving toward saturation, and this increased
current creates a load voltage that follows the input signal. In contrast, when the
input tries to swing negative, there is no place else to go on the load line and the
negative portion of the wave is simply clipped.

                               ic

                                                                                                           Figure 9.2
                                                                                                           AC load line for class B
                                                                                                           operation.

     collector current  input voltage
                                                         t

                                                                                                  Q point
                               t vce

                                                       collector-emitter
                                                       voltage

                                                                                        t

If we made a PNP version of the circuit depicted in Figure 9.1, the exact opposite
would happen: the amplifier would reproduce the negative portion of the wave and
clip the positive portion. The next question is, how do we bias the transistor at cutoff
and splice together the NPN and PNP versions into a workable whole?

Let's begin by making two bare-bones emitter followers, one NPN and the other PNP.
We'll connect their emitters together and tie that to the load. We'll connect the NPN's
collector directly to a DC supply and the PNP's collector to ground. Remember,
collector resistors will not be needed because these are followers. We will include no
biasing components on the base because we want to set ICQ to 0 A. We will also have
to add input and output capacitors to prevent the source and load from inadvertently
shorting out or shunting portions of the DC circuit. The result is seen in Figure 9.3.

233
                                                                                                                     Figure 9.3
                                                                                                                     Prototype Class B circuit.

With no signal supplied, both transistors must be off. This is because their bases are
tied together, and without some other applied potential, both base-emitter voltages
must be zero. Assuming Q1 and Q2 are matched, the power supply voltage should
split evenly between them, leaving half of VCC at the emitters. This potential also
appears across Cout, preventing the DC voltage from reaching RL.
When the input signal goes positive, it raises VB1 and VB2 above 0.5VCC. This keeps
Q2 off but turns on Q1. Current is now free to flow down through Q1 and into the
load. When the input signal swings negative, the inverse happens: Q1 is turned off
and Q2 is turned on. This allows current to flow up from the load and down through
Q2 (if this is confusing, remember that a DC voltage had already been established
across Cout that is equal to 0.5VCC and this is what allows the current to flow from
ground up through RL and then down through Q2 as Q2 begins to conduct). You can
think of Q1 pushing current into the load (sourcing) and Q2 pulling current from the
load (sinking). Consequently, class B amplifiers are sometimes called a push-pull
amplifiers.

                                                                                                                     Figure 9.4
                                                                                                                     Prototype Class B circuit in
                                                                                                                     simulator.

234
To see how well this prototype works, we'll enter a version into a simulator, as
shown in Figure 9.4. A transient analysis is performed with the results shown in
Figure 9.5.

                                                                                            Figure 9.5
                                                                                            Transient analysis of prototype
                                                                                            Class B circuit.

Clearly, there are issues with the output waveform (node 2, in blue). First off, the
signal amplitude is noticeably smaller than the 2 volt peak input signal. The second
issue is the bizarre "flat spotting" of the output waveform near the zero-crossing
points. It turns out that these two problems are manifestations of the same root
cause. If we look carefully at the peaks, we can get a clue as to what is going on. The
peak output voltage is about 0.75 volts below the input, or just about one PN
junction forward potential. The problem is that the input signal will not truly turn on
the NPN transistor until the signal exceeds approximately 0.7 volts or drops below
-0.7 volts for the PNP side. That region between -0.7 volts and +0.7 volts is a dead
zone that the amplifier will not respond to. Essentially, the amplifier "rips out"
anything between 0.7 volts. This is a gross form of distortion and goes by many
names including notch distortion and cross-over distortion. The particularly nasty
part about this form of distortion is that it hits small signals worse than large signals.
Most other forms of nonlinearities tend to get worse as the signal level increases.

235
Class AB Operation

The basic solution to this problem is to provide a small idle current so that the
transistors are almost on. In this way, only a very small input signal will be needed
to turn on the devices. As this would slightly increase the conduction angle, this
form of operation is referred to as class AB operation. One potential solution is to
add a voltage divider as depicted in Figure 9.6.

                                                                                                                     Figure 9.6
                                                                                                                     Prototype Class AB circuit.

This circuit uses a symmetrical layout: everything above a horizontal line drawn
through the middle is echoed by a component below the line. In other words,
R1 = R2, R3 = R4, C1 = C2, and Q1 and Q2 are a complimentary pair. The divider is
configured so that the voltage drops across R3 and R4 are about 0.7 volts each.

Properly designed, the circuit of Figure 9.6 will reduce notch distortion.
Unfortunately, it has other problems. The first issue involves the three capacitors.
COUT in particular might be quite large. These can be removed if we went to a
symmetrical bipolar power supply. Instead of running the PNP's collector to ground,
we'll tie it to a negative DC supply. To keep the same total voltage, we'll set Q1's
collector to half of the original VCC and Q2's collector to half of the original VCC but
negative. On the input side, we could run the input signal to the junction of R3 and
R4.

The second issue plaguing the circuit of Figure 9.6 is the stability of the bias. The
voltage divider resistors have to be very accurate in order to set the transistors right
where we want them and stability is a concern. The problem is that we are trying to
use a device with a linear current-voltage characteristic (a resistor) to match the
exponential current-voltage characteristic of a PN junction. This problem is
exacerbated by the fact that these devices will drift with temperature, and drift in
different ways. The solution to this problem is to use a device with better matching
characteristics. What better device to match a PN junction than another PN junction?

236
The Current Mirror                                                                        Figure 9.7
                                                                                          A simple current mirror.
Consider the circuit shown in Figure 9.7. This is called a current mirror. Here is how
it works: First, look at the divider between R and D. The voltage across R must equal
the supply voltage minus the diode drop, or approximately V - 0.7. This sets up a
current, IR. If the base current is small enough to ignore, this same current flows
down through the diode as ID. This diode current sets up a specific voltage across the
diode (somewhere in the vicinity of 0.7 volts although the exact voltage is not
important). Because the diode is in parallel with the base-emitter junction, then
VBE = VD. If the transconductance curve (I-V curve) of the transistor is identical to
that of the diode, then the emitter current must be the same as the diode current. Any
change in the diode current would cause a slight change in diode voltage, and since
diode voltage and base-emitter voltage are the same, then the emitter current must
change in response. In other words, the emitter current mirrors the diode current. We
can program the diode current (and hence, the emitter current) by setting an
appropriate value for R. Whatever the current through R is, that's also the collector
current.

The idea of the current mirror is used with great effect in integrated circuits where it
is easy to match device characteristics. When it comes to discrete components, it is
not nearly so easy to match a diode to a transistor. Fortunately, we don't have to have
a perfect match. Simply using any signal diode will provide a much better match for
VBE than using a resistor. Although the diode current won't match the collector
current precisely, the bias will be more stable and the components will track much
better than when using a resistor.

Combining these ideas leads us to the circuit of Figure 9.8. This is our first practical
class B amplifier with the potential for decent values of distortion and stability.

                                                                                          Figure 9.8
                                                                                          Class B amplifier with diode
                                                                                          bias and bipolar supplies.

237
One thing that sometimes bothers people when they first see a diode biased
amplifier is how the AC signal will pass through the diodes to the bases. At first
glance, it appears that the positive portion of the input signal would be "going the
wrong way" against diode D1. What we need to remember is that D1 is already
forward-biased due to the DC supply and surrounding resistors. The signal won't see
an open, it will see the dynamic resistance of the diode.34

Class B Circuit Maximums

Now that we have a workable circuit, we need to derive formulas for the endpoints
of the AC load line, meaning vCE(cutoff) and iC(sat), and determine the compliance. The
first item of note is cutoff. Because the two transistors will split the available supply,
VCEQ will always equal half of the total supply. Further, we have biased these devices
at cutoff, and therefore

     vCE(cutoff) = VCEQ = 0.5  Total DC Supply            (9.1)

In the case of a bipolar supply, that's the same as one of the two sides. Because the
class B uses two transistors, peak compliance will be the same as cutoff.

     Compliancepeak = VCEQ = 0.5  Total DC Supply (9.2)

The maximum voltage rating of the transistors will occur when they are off. In that
instance, if the opposite transistor is fully conducting it will have a negligible
voltage across its collector-emitter. Consequently, the off-state transistor can see the
entire power supply.

     BVCEO = Total DC Supply                              (9.3)

The saturation current is dictated by the compliance and the load. The only thing that
limits AC current is the load. Therefore

                           iC(sat ) = Compliance peak     (9.4)
                                            rL

Based on that, we can say

                                        Compliance RMS 2  (9.5)
                           P load ( max) =

                                                 rL

34 Of course, the dynamic resistance is a function of the current flowing through the diode
    so it will fluctuate as the signal changes. This is best thought of as a distortion generating
    mechanism because it will slightly alter the signal that reaches the base. This distortion is
    most likely orders of magnitude smaller than the notch distortion the diode mitigates, so
    it's a good trade.

238
Before we go any further, there is an important item to note about the circuit of
Figure 9.8 (and the variants we shall discuss). If you take another look at the circuit
you will see that there is nothing in the collector-emitter line to limit DC current. In
fact, if we were to plot the DC load alongside the AC load, we'd get something like
Figure 9.9.

                           ic

                                                                                                     Figure 9.9
                                                                                                     Comparison of AC and DC load
                                                                                                     lines for class B operation.

AC Load Line  DC Load Line

                                                                                            Q point
                                                                                        vce

The DC load line goes straight up. There is no saturation current value short of
infinity. What this really means is that if we're not careful with the bias, it is possible
to destroy the transistors. The same is true if we accidentally short the load. A quick
examination of Equations 9.4 and 9.5 shows that a shorted load condition would lead
to huge currents and powers, and destroy the transistors in the process. With an
audio amplifier, this could happen if one of the strands of loudspeaker wire
unraveled and touched the adjacent lead. Obviously, not a happy situation unless you
prefer the smell of burnt silicon over the sound of music. We will examine means of
protecting the transistors from accidental overloads later in the chapter.

Class B Power Dissipation

Transistor power dissipation for the class B configuration is a bit trickier than it was
for the class A. The idle (Q point) power dissipation is very low. It is found by
multiplying ICQ by VCEQ. ICQ is generally set at a few percent of iC(sat) so it's obviously
way below the maximum load power. Unlike the class A design, PDQ does not
represent the worst case for class B.

To determine the worst case transistor power dissipation, we begin by describing the
current and voltage waveforms during the conduction phase of the NPN. The
collector current will appear as the positive half of a sine wave. The maximum case
has the current starting at zero and peaking at iC(sat) (or alternately, VCEQ/rL). For vCE, it
starts at VCEQ and then swings down to zero as a negative half sine.

239
Nothing says that the maximum load power case must cause the maximum transistor
dissipation. In fact, we saw this wasn't the case for class A. Consequently, we will
introduce a coefficient, k, that represents the percentage of the maximum current. We
now arrive at our general equations for transistor current and voltage for the first
half cycle.

                          iC = k V CEQ sin 2  ft                         (9.6)
                                    rL

                          vCE = V CEQ (1-k sin 2  ft )                   (9.7)

                          Where 0  k  1

For convenience, we'll set 2f to 1. To get the power dissipation, we find the product
of the transistor's current and voltage.

                          PD = iC vCE

                          PD = k V CEQ sin tV CEQ (1-k sin t )
                                     rL

                          PD =  V CEQ2  k sin t-  V CEQ 2 2 2
                                                         k sin t
                                rL                rL

                                V CEQ2  (k sin t -k sin t)
                          PD =                    22

                                rL

Remove ugly sin2 term...

                                ( ) V CEQ2
                          PD =                    k2 k2
                                        k sin t + cos 2 t -
                                rL                2               2

..and integrate to get:

                                V CEQ2  ( )|
                          PD =                       k2 k2t
                                        -k cos t - sin 2 t -
                                rL                    4              20

Note that  V CEQ2
                   = 2 Pload (max) This is a constant, so replace it to simplify and then

             rL

evaluate the expression. Finally, divide by 2 to find the average over one full cycle.

240
       ( ) 2 Pload (max)

     PD =
                           2k -k 2 
                                   2

                            2

            ( ) k k2                          (9.8)

     PD = 2 Pload (max)  -
                                4

Equation 9.8 is the general case. For the worst case, we need the min/max k value.
We will take the derivative of Equation 9.8 and then set it to zero to find the worst
case value of k.

             ( ) k k2

       P D = 2 P load (max )  -
                                   4

     ( ) d PD d k = 2 Pload(max) 1 - k2

Worst case occurs at k = 2/. This means that only 2/, or 63.7%, of the load line is
used at maximal heating of the transistor. 63.7% of the load line corresponds to a
load power of about 40% of Pload(max) (i.e., 0.6372). We now substitute this value back
into Equation 9.8 to find the worst case PD.

     P D = 2 P load (max)( ) 2/  (2/ )2-4

     P D = 2 2 P load (max )  P load (max) 5  (9.9)

The end result is that when the load is receiving about 40% of its maximum power,
the transistors will be at their hottest and will be dissipating approximately 20% of
the maximum load power (or about half of the power delivered to the load at that
point). Thus, if a class B amplifier is rated to produce a maximum load power of 100
watts, the transistors will get their hottest when the load is receiving 40 watts, and
each transistor will be dissipating 20 watts. The transistors will be dissipating less
power when the load is at maximum. This is easily verified by substituting k = 1 into
Equation 9.8. The result is a power dissipation of 13.7% of maximum load power, or
13.7 watts for the preceding example.

To help gain a deeper understanding of precisely what's happening here, the
transistor waveforms are plotted in Figures 9.10 and 9.11. The maximum load power
case is presented in Figure 9.10. Here, we see the full iC and vCE swings. Note that
when iC is maximum, vCE is 0, hence the power is 0. In contrast, Figure 9.11 shows
the worst case. Collector current peaks at just under 64% of maximum but vCE drops
to only about 36% rather than 0% of its maximum. This results in a power
dissipation curve with considerably greater area underneath it, indicating a higher
average power.

241
                                            Class B Power Dissipation                                           Figure 9.10
                                             at Maximum Load Power                                              Class B transistor power
                                                                                                                dissipation at PLoad(max).
            1.0                                                collector-emitter
            0.9                                                   voltage                           1
            0.8
            0.7   Amplitude (v, i, p)  collector current                                                        Figure 9.11
            0.6                                                                                                 Class B transistor power
            0.5                                                transistor power                                 dissipation, worst case.
            0.4                                                   dissipation
            0.3                                                                                     1
            0.2                                                      averaged power
            0.1                                                          dissipation
            0.0
                                       0.2                0.4        0.6          0.8
                 0
                                                               Time
            1.0
            0.9                             Class B Power Dissipation
            0.8                                      Worst Case
            0.7
            0.6                                                collector-emitter
            0.5                                                   voltage
            0.4
            0.3   Amplitude (v, i, p)  collector current
            0.2
            0.1                                                transistor power
            0.0                                                   dissipation

                 0                                                                averaged power
                                                                                       dissipation
242
                                       0.2                0.4        0.6          0.8

                                                               Time
Finally, it is worth remembering that the reactive load issues discussed for class A
amplifiers still apply to class B amplifiers. Loads with a complex impedance may be
harder to drive than the ideal purely resistive loads examined here. Therefore, we
may have to over-rate the transistors above Pload(max) /5. As a side note, the AC load line
for a class B amplifier with a reactive load will appear as an ellipse that has been cut
in half (refer back to Figure 8.16 and imagine a horizontal cut line running through
the Q point).

Class B Efficiency

Efficiency is defined as useful output or load power versus supplied DC power.

                      = P out = P load (max )
                     Pin                  P DC

This is dynamic for class B amplifiers. At Pload(max) the DC supply is delivering the
full voltage of 2 VCEQ and the corresponding peak value of the current is iC(sat).

                     iC (sat ) = V CEQ
                                rL

The average of this over a half-cycle is

                               1 V CEQ
                     iC (avg ) =  

                                      rL

Therefore, the supplied power must be

                     PDC = 2V CEQ iC (sat)
                                       1 V CEQ

                     PDC = 2V CEQ
                                            rL

                             2 V CEQ 2
                     PDC =  

                                    rL

As noted previously  V CEQ2                    therefore
                             = 2 P load (max)

                       rL

                             4
                     PDC =   Pload (max)

Finally, substitute this expression back into the original definition for efficiency.

243
                      max = P load ( max)
                                 P DC

                      max =   P load ( max)
                             4 Pload (max )

                      max = 4
                      max  78.5 %

We find that the maximum theoretical efficiency of a class B amplifier is over three
times that of a class A amplifier.

Time for an example.

Example 9.1

     The amplifier shown in Figure 9.12 is driving a nominal 8  loudspeaker.          Figure 9.12
     Determine the compliance, maximum load power and worst case transistor           Schematic for Example 9.1.
     dissipation. Also estimate Zin assuming  = 50 and determine the transistor
     ratings for maximum current and BVCEO.

     By inspection, VCEQ = 15 V. This is the peak compliance.

                        compliance = 15 V peak = 10.6 V RMS

     Given the compliance, we can use power law to find the load power

                                        Compliance RMS2
                           P load ( max) =

                                                RL
                                        ( 0.70715 V )2
                           P load ( max) =

                                               8
                           Pload (max) = 14 W

     That's not huge but it might be enough to irritate the neighbors.

     The transistors' worst case power dissipation is

                           P D = Pload (max) 5
                           PD = 14 W 5
                           PD = 2.8 W

244
     The breakdown voltage is the entire supply so BVCEO > 30 V. The maximum
     current through the transistors is the same as the maximum load current or
     iC(sat).

                          iC (sat ) = V CEQ
                                      rL

                          iC(sat ) = 15 V 8
                          iC(sat ) = 1.88 A

     The input impedance is found in the usual manner but with a minor twist.
     Zin(base) is approximately equal to  rL, or about 400 . Only one transistor is
     on at any given time, though, so this is in parallel with the two 200 
     biasing resistors but not the other Zin(base) (the "off" transistor has a very high
     input impedance because it is not conducting). This leaves a Zin(base) of about
     80 , or ten times the load impedance.

Computer Simulation

To verify the basic operation of a class B amplifier, the circuit of Figure 9.13 is
entered into a simulator. The amplifier should clip just below the 10 volt power
rails so a 10 volt peak source is used to verify this. Also, Av should be about 1.

                                                                                          Figure 9.13
                                                                                          Class B amplifier in simulator.

245
The results of a transient analysis are shown in Figure 9.14. First, it is apparent that
the voltage gain is approximately unity as the input and output waves are nearly
coincident (with the exception of the clipped portion). Clipping occurs at about 8.5
volts. This is largely due to limiting from the biasing diodes. Once the input gets
close in value to the power supply, the diodes become reverse-biased and the signal
does not make it to the base. Thus, the output clips prematurely.

                                                                                                                     Figure 9.14
                                                                                                                     Class B amplifier transient
                                                                                                                     analysis.

To verify earlier commentary regarding the biasing diodes, the circuit is modified so
that the diodes are shorted out and the transient analysis is run again. The results are
shown in Figure 9.15.
Two things should be apparent in the new simulation. First, the output waveform is
suffering from obvious notch distortion. Therefore, we can be pleased that the
biasing diodes have done their job to reduce this effect. The second item involves
the compliance. The new output is not clipped. Granted, the lack of biasing diodes
has reduced the signal by about 0.7 volts, but a careful examination of the output
waveform shows that it has reached over 9 volts peak without clipping. In fact, if we
increase the input to 12 volts peak, as in Figure 9.16, we can see that clipping occurs
just under the power rails. Thus, the premature clipping is due to the diodes and their
interaction with the power supplies and surrounding resistors. In short, we lose a
little bit of compliance due to the diodes but that's much better than getting notch
distortion.
246
                                                                                                                     Figure 9.15
                                                                                                                     Class B amplifier transient
                                                                                                                     analysis, without biasing
                                                                                                                     diodes.

                                                                                                                     Figure 9.16
                                                                                                                     Class B amplifier transient
                                                                                                                     analysis, without biasing diodes
                                                                                                                     and showing clipping.

247
Direct Coupled Driver

The circuits we have examined offer both current gain and power gain but not
voltage gain. In order to increase the signal voltage, some preceding voltage gain
stages will most likely be needed. These stages can be connected to the previous
class B follower circuits with coupling capacitors but this is not the most effective
method. A more common technique is the use of a direct coupled driver.

                                                                                                                     Figure 9.17
                                                                                                                     Class B amplifier with direct
                                                                                                                     coupled driver.

A class B follower with a direct coupled driver stage is shown in Figure 9.17. What
we've done here is combined an ordinary class A common emitter amplifier (in this
case, using voltage divider bias) with a class B follower. The follower is positioned
where the common emitter stage's collector resistor would be normally. This
eliminates three components: the collector resistor, the interstage coupling capacitor,
and the lower base biasing resistor of the class B output stage. The removal of the
resistors raises the effective load resistance for the first stage, thus producing a
higher voltage gain from the driver stage.
Biasing the direct coupled driver is not difficult if we remember one thing: the DC
voltage across R3 must be equal to approximately VCC - 0.7 V. If this is not the case,
the class B stage will not be symmetrical, or in other words, VCEQ2  VCEQ3, and the
final output will not be sitting at 0 VDC as it needs to. Knowing the value of R3 and
its voltage, we can determine its current. This current flows down into Q1 as ICQ1.
Knowing ICQ1, we can determine the voltage across R4 and eventually determine the
appropriate divider ratio for R1 and R2 to achieve this value.

248
Example 9.2

     Using the two-stage amplifier of Figure 9.17, first determine values for R1
     and R2 to obtain proper system bias. Determine the output compliance,
     maximum load power and worst case transistor dissipation. Also estimate Av.
     Assume  = 50 for the output devices and 100 for the first stage. VCC = 20 V,
     VEE = -20 V, RL = 16 , R3 = 560 , R4 = 75 .

     For the output section (assuming it will be biased properly), by inspection,
     VCEQ = 20 V. This is the peak compliance.

             compliance = 20 V peak = 14.1 V RMS

     Given the compliance, we can use power law to find the load power

                          Compliance RMS2
             P load ( max) =

                                  RL

             (14.1                V   2
             Pload (max) = 16 
                                     )

             Pload (max) = 12.5 W

     The transistors' worst case power dissipation is

             P D = Pload (max) 5
             PD = 12.5 W 5
             PD = 2.5 W

     To determine the biasing resistors, we start with R3. To achieve bias
     symmetry, all of VCC drops across R3 with the exception of 0.7 volts for D1.
     This is the same as ICQ1.

             I CQ1 = V CC -0.7 V R3
             I CQ1 = 19.3V 560
             I CQ1 = 34.5 mA

     The drop across R4 is found via Ohm's law

             V R4 = I CQ1 R4
             V R4 = 34.5 mA75 
             V R4 = 2.6 V

249
         This implies that the voltage across R2 must be 0.7 volts more, or 3.3 volts.
         If we ignore the base current of Q1, then the ratio of R1 to R2 must be the
         same as the ratio of their voltages, 36.7 to 3.3, or 11.1 to 1. In other words,
         R1 must be 11.1 times larger than R2. For good bias stability we don't wish to
         set R2 too much larger than R4. If we set it to 200 , for example, then R1
         would need to be about 2.2 k . Due to component tolerances, one of these
         resistors would need to be a potentiometer (connected as a rheostat) in order
         to "tweak" the final output to 0 VDC. A resistor/pot combo might be even
         better as it won't be so "touchy". For example, the 2.2 k  could be replaced
         with a series combination of a 1.8 k  and a 1 k  pot. This would be much
         easier to adjust than if the resistor was replaced with a standard 5 k  pot.

         Now for the system voltage gain. The gain of the follower is approximately
         one so we need only concern ourselves with the first stage common emitter
         amplifier. This amplifier is swamped by R4 and given that the collector
         current is over 34 mA, r'e will be less than an ohm and can be ignored. All
         we need to do is find the effective load at the collector of Q1. This is R3 in
         parallel with a single Zin(base) (remember that only one transistor is on at any
         given time and the off transistor will appear as a high impedance).

                               Zi n(base) =  r E
                               Zi n(base) = 5016 
                               Zi n(base) = 800 

                               Av = -rL
                                        rE

                               Av =-800  || 560  75
                               Av = -4.4

Before leaving this section, there are a few items to note. First, the load power
calculations have assumed that the entire power supply can be used by the output
devices. As we saw with the diode bias version, this is not always the case. There is
another situation that can limit the output swing. The class B stage is a follower and
thus has a voltage gain of one. It the driver stage can't produce the full swing then
the output stage can't either. Consequently, a class A analysis (i.e., AC load line)
needs to be performed on the driver in order to determine just how large the signal
can be before clipping. Indeed, it's quite likely that the driver stage will clip before
the output stage.

Also, the direct coupled driver does not have to be an NPN as depicted in Figure
9.17. A PNP can be used instead, it simply needs to be shifted to the upper section
rather than the lower section, as shown in Figure 9.18.

250
                                                                                                                     Figure 9.18
                                                                                                                     Class B amplifier with direct
                                                                                                                     coupled driver, PNP version.

9.3 Extensions and Refinements

The foregoing discussion has covered the basics of class B amplifier design and
operation but there are a variety of things we might add.

Current Limiting

One of the more useful additions to an amplifier is some form of protection circuit.
As noted earlier, there is nothing in the basic class B amplifier to limit current, so if
the load is accidentally shorted, the transistor current will spike to very high levels
and possibly damage the output transistors. How might we prevent this from
happening?
Perhaps the most basic protection technique is to place a fuse in-line with the load.
This is a somewhat tricky proposition because voice and music waveforms are very
dynamic. Fuses are not fast response devices and selection of the proper current
rating is a trade-off. If we want to catch large, fast transients, the fuse will have to be
rated on the low side. Unfortunately, the fuse might then blow on moderately loud
sustained low frequency content. Relays suffer from similar problems. Also, there is
the issue that if the fuses are replaceable by the consumer, they may use the wrong
value or some other item35 that will allow too much current, resulting in blown
35 Such as bits of wire, aluminum foil, small bolts or screws, etc. Just ask any seasoned

    repair technician.

251
output transistors. This can be avoided by having a second set of fuses mounted on       Figure 9.19
the PC board, connected to the power rails, but this is also an imperfect solution.      Active current limiter.

One means of dealing with this situation is to employ an active current limiter, such
as the circuit shown in Figure 9.19. In this circuit, Q1 is the main NPN output
transistor, the PNP side not shown. At the top is the power supply connection and the
load is connected off to the right. A small resistor, RE, is inserted into the emitter
current path. The resistance is small enough that the voltage across it is normally
less than 0.5 volts or so. Across the resistor is another transistor, Q2. Under normal
operation Q2 is not on and does not affect the circuit. If the load current gets large
enough (beyond the safe limit), the voltage drop across RE will reach 0.7 V. At this
point Q2 turns on and begins to conduct current away from the base of Q1, limiting
the amount of load current to approximately 0.7 V/RE. Unlike a fuse, once the fault
is removed and the load current falls to safe levels, Q2 disengages and normal
amplifier function resumes.

Two of these circuits are required for the amplifier; one for the positive half and one
for the negative half. Figure 9.20 shows a class B amplifier with the added current
protection circuits (within the dashed red box).

                                                                                         Figure 9.20
                                                                                         Class B amplifier with current
                                                                                         limiters.

252
High Current Gain Configurations

For some applications the  of typical power transistors may prove to be insufficient.
In such cases we can use high current gain configurations. There are several ways to
configure the output devices. A Darlington scheme is shown in Figure 9.21. Q3 and
Q5 are the main output devices. Q2 and Q4 can be thought of as drive transistors.
Although their BVCEO rating will need to be as high as that of Q3/Q5, they will be
handling less current and therefore will dissipate less power. Sometimes Q2/Q4 are
configured as seen here and sometimes emitter resistors may be added so that the
output appears to be a cascade of emitter followers. Either way, there are now four
base-emitter junctions to be compensated for, thus the addition of D3 and D4.

                                                                                                                     Figure 9.21
                                                                                                                     Darlington output devices for
                                                                                                                     high current gain.

Some years ago, high power PNP transistors exhibiting decent audio quality were not       Figure 9.22
available. Instead of using a PNP Darlington configuration, a Sziklai pair was used.      Sziklai pair, AKA composite
This dual transistor configuration is named after Hungarian, and later, American,         PNP.
engineer George Sziklai. The Sziklai pair is also known as a composite pair. A
composite PNP is shown in Figure 9.22. The operation is similar to that of a
Darlington pair. The input transistor, Q1, drives its collector current into the base of
Q2, the output transistor. Q2's base current is multiplied by its , thus its collector
current is the product of IB1, 1 and 2, just like a Darlington. The differences are that
the main power device for the composite PNP is an NPN, and that there is only a
single VBE to compensate for. An example amplifier based on the earlier direct
coupled driver circuit is shown in Figure 9.23. This configuration is known as a

253
quasi-complementary output36. Note the use of three compensating diodes; two for
the Darlington NPN and one for the composite PNP/Sziklai pair. One advantage here
is that the power devices, Q3 and Q5, can be identical models.

                                                                                                                     Figure 9.23
                                                                                                                     Quasi-complementary output.

The current limiting circuit of Figure 9.19 can be added to both the Darlington and
quasi-complementary output stages. Current limiting can also be added to the
circuits presented in the next section, but have been left off for clarity.

Current Sharing

For higher output powers, and especially for amplifiers driving very low load
impedances such 1 or 2 ohms, it may not be possible to use a single NPN and PNP
for the output stage. Instead, the duties of each device will be shared among two or
three transistors operating in parallel. Generally, current-sharing schemes will also
require a Darlington-based approach due to the very high total load current.
Initially, it may be tempting to just place two or three transistors in parallel, each
base terminal being fed by a common drive transistor. There is a fatal flaw with this
approach. The issue is referred to as either thermal runaway or current hogging. The
basic problem is that the temperature coefficient of transconductance for a bipolar
transistor is positive. In other words, r'e gets smaller as temperature rises. This
means that, as the device heats up, it tends to more easily conduct current. Of course,
if the device draws more current, it will dissipate more power, which means that it
36 Not to be confused with the quasi-complimentary output of which we have only partially-

    nice things to say.

254
will get hotter, which means that it will conduct more current, which means that it
will dissipate more power, and so on. This process spirals out of control and is
particularly evil when we have multiple devices in parallel. Devices are never
perfectly matched so the load current will never be perfectly shared among the
devices. This means that one device will tend to get hotter than the other(s) which
leads to it getting even hotter and grabbing a larger and larger share of the total
current. Eventually, this device "hogs" all of the available current and winds up
destroying itself. What we have is a positive thermal feedback loop. Transistor hara-
kiri is a decidedly sub-optimal performance characteristic. To circumvent this
problem we can add small resistors to the emitters of the devices. As all of the
paralleled devices are being driven from a common drive transistor, they all see the
same base voltage. If one output transistor starts to grab a larger share of the load
current, the voltage drop across the emitter resistor will increase, thus forcing a
reduction in that transistor's base-emitter voltage. This reduction compensates for the
initial tendency of the current to increase. This technique is referred to as local
negative feedback. We have seen this concept before, for example, a swamping
resistor falls into this category as does the collector feedback bias scheme.
An example of a current-sharing output section is shown in Figure 9.24. This version
uses a Darlington scheme. The newly added transistors are shown in red while the
thermal/current feedback resistors are shown in blue.

                                                                                                                     Figure 9.24
                                                                                                                     Current-sharing output section.

255
VBE Multiplier and Miller Capacitor                                                        Figure 9.25
                                                                                           VBE multiplier.
With the ever increasing complexity of the output section, the simple diode biasing
scheme lacks the ability to set the optimal idle bias to achieve minimum crossover
distortion. A more flexible approach is to use a VBE multiplier, as illustrated in Figure
9.25.

If we ignore base current, the currents through the two resistors are identical.
Therefore, their voltages have the same ratio as their resistances. R2 is in parallel
with VBE so its voltage must be equal to VBE. Consequently, the voltage across R1
must be a multiple of VBE. For example, if we want to generate the equivalent of four
base-emitter drops from point A to point B, we make R1 three times as large as R2.
What makes this particularly useful is that we can set any ratio we want, and by
replacing either resistor with a potentiometer, we can make that voltage adjustable.
An example is shown in Figure 9.26, using the current-sharing amplifier of Figure
9.24. The VBE multiplier is shown in the dashed red box and replaces the four biasing
diodes. A capacitor, CB, shunts the multiplier, making sure it behaves as a short for
AC signals.

                                                                                           Figure 9.26
                                                                                           Amplifier with VBE multiplier
                                                                                           and Miller compensation
                                                                                           capacitor.

256
The circuit of Figure 9.26 also includes another capacitor, CM. This is a Miller
compensation capacitor. It uses the Miller Effect (see Chapter 6, Miller's Theorem)
to create a much larger equivalent input capacitance. This capacitance appears in
parallel with the input of Q1 and creates a lag network. The inclusion of CM allows
the designer to tailor the high frequency response of the amplifier.

Bridging

Some amplifiers employ a bridged output scheme. This is particularly true where
power supply voltages are limited, for example, in automobiles (nominally 12 VDC
but closer to 13.8 VDC from the alternator). Without resorting to an expensive DC-
to-DC converter, an amplifier designed for automotive use is in a bit of a bind. If we
assume a +12 volt DC source, then a basic class B amplifier would use a capacitor
coupled configuration like Figure 9.6. This would yield a VCEQ of 6 volts and a
compliance of about 4.2 volts RMS. If we were to use a standard home loudspeaker
of 8 , the maximum load power would be a mere 2.25 watts (this is one reason
why car audio systems typically use 4  loudspeakers, because it doubles the output
power, in this case to 4.5 watts). A bridged output can double this again.

A block diagram of a bridged drive is shown in Figure 9.27. The left half is what we
would see normally. On the right half we have a second identical amplifier but we
drive it with an inverted copy of the original signal. What ends up happening is that,
as the left output goes positive, the right output goes negative by the same amount.
The end result is that the load sees twice the voltage it would have from the left
amplifier alone. Power varies as the square of voltage so doubling the voltage
quadruples the power. The 2.25 watt output of that car amplifier jumps up to 9
watts37. If we want to go higher than this our only options are to further decrease the
loudspeaker impedance (there are practical limits that will not let us go much
further) or increase the DC power supply. In the home, increasing the supply is
relatively easy as we have an AC power source. In an automotive system this is a
much more expensive proposition because only DC is generally available.

                                                                                             Figure 9.27
                                                                                             Block diagram of bridged
                                                                                             amplifier.

37 OK, not huge, but probably still loud enough to obscure the sirens of emergency vehicles
    until they're right behind you.

257
An illustration of a bridged system at the transistor level is shown in Figure 9.28.
For simplicity, this schematic uses basic class B stages. Input and right-side
inversion circuitry are not shown.

                                                                                          Figure 9.28
                                                                                          Bridged amplifier, transistor
                                                                                          level.

The four transistors create a classic H bridge with the load in the center. For a
positive Vin, Q1 turns on. At the same time, because it is being fed by an inverted
version of Vin, Q4 turns on. Thus, current flows down from VCC, through Q1, across RL
from left-to-right, down Q4, and finally to VEE (blue trace). At full swing, the voltage
across the load will be VCC - VEE from left to right. For a negative Vin the opposite
happens: Q3 and Q2 turn on, allowing current to flow through RL from right left. The
maximum voltage will be the same but with inverted polarity, hence an effective
doubling of load voltage and a quadrupling of load power.

This increased output does not come without downsides. The most obvious problem
is a doubling of the output circuitry. The second issue may not be immediately
apparent: the load is not grounded. In simple automobile audio systems, the chassis
of the vehicle is used as the system common or "ground". Therefore, it is possible to
just run a single wire to a loudspeaker from an amplifier's output. The other
loudspeaker terminal is then connected to the chassis at a convenient location. With
a bridged output, two wires must be run to the loudspeaker. If a single-lead
loudspeaker system is upgraded with a bridged output amplifier, new loudspeaker
wires must be installed. Otherwise, the chassis return lead winds up shorting out one
side of the bridge38.

38 Oopsy!

258
Power Supply Bypassing

A final comment regarding high power amplifiers, particularly audio amplifiers, is in
order. All through this chapter we have assumed that the DC power supplies will act
ideally, mainly that they will present themselves as good AC grounds. This is not
always easy to achieve given the practical limitations of PC board layouts, wiring
constraints and so forth. Consequently, power supply bypass capacitors are often
used to ensure a good AC ground. While this was mentioned in Chapter 7 regarding
small signal amplifiers, it is perhaps more important for power amplifiers. The
power supply bypass capacitors used for power amplifiers tend to be larger and the
quality more stringent. A simple 1 F bypass capacitor would hardly be the norm for
a high power audio amplifier. The practical problem is that large, high quality
capacitors are not inexpensive. For example, a 10 F polypropylene capacitor will
be at least an order of magnitude more expensive than a similar size aluminum
electrolytic (dollars versus cents). Unfortunately, the electrolytic will have higher
leakage and ESR, and will not behave nearly as well at high frequencies (indeed, the
impedance will actually start to increase due to inductive effects once the frequency
gets high enough). To both improve performance and save money, bypass capacitors
are sometimes doubled or tripled. For example, a large aluminum electrolytic might
be placed in parallel with a much smaller polyester or polypropylene capacitor. The
aluminum electrolytic will give the small XC needed at lower frequencies, and when
it starts to behave less ideally at higher frequencies, the higher quality poly capacitor
effectively shunts it and extends the operating range. The result is nearly as effective
as the single large, high quality capacitor but much less expensive.

Summary

Class B operation is defined as having transistor collector current active for 180 out
of the waveform cycle. In order to amplify the entire 360 in linear fashion, two
devices are required. Each transistor of a complementary pair is biased at cutoff to
achieve a 180 conduction angle. This means that no-signal collector current is zero,
leading to very low power consumption at idle and, unlike class A amplifiers,
dynamic power consumption. Unfortunately, pure class B operation also results in
notch or crossover distortion as the switch over from one transistor to the other is not
seamless. This can be mitigated by biasing the devices slightly "on", which is known
as class AB operation. While simple resistor voltage dividers may be used for this
purpose, a generally superior method uses diodes as they mimic the base-emitter
current-voltage characteristic.

The compliance of a class B amplifier is based on its power supplies. Ideally, the
peak-to-peak compliance of the amplifier will equal the total power supply
differential. Worst case power dissipation and efficiency are far superior when
compared to class A topology: Device power dissipation is only one-fifth of
maximum load power and the theoretical efficiency at maximum load power is

259
78.5%. Maximum heating of the transistors occurs at approximately 40% of
maximum load power.

A direct coupled drive stage is often used as it reduces parts count and improves
performance. Amplifiers can also be extended through the use of Darlington pairs
and current sharing schemes. Other refinements include the use of active current
limiting for device protection, and VBE multipliers in place of simple biasing diodes
for greater flexibility.

Bridging is a technique used to increase output power. It relies on driving a floating
load from both sides. Two amplifiers are needed for this configuration but it can
offer a quadrupling of load power for the same power supplies.

Review Questions

    1. Define class B operation and compare it to class A.
    2. How do the AC and DC load lines differ between class A and class B

         operation?
    3. What is the purpose of the biasing diodes in a class B amplifier?
    4. Explain the source of notch distortion and discuss how it can be reduced.
    5. What is thermal runaway? How might it be controlled?
    6. What is a Sziklai pair?
    7. What is a VBE multiplier?
    8. Explain the operation of an active current limiter.
    9. What is a bridged output configuration? What are its benefits?
    10. What's the difference between a complement and a compliment?

Problems

Analysis Problems

    1. For the circuit of Figure 9.29, determine compliance, Pload(max), PD(max),
         BVCEO and IC(max). VCC = 15 V, VEE = -15 V,  = 75, RL = 16 , R1 = 680 ,
         R2 = 680 .

    2. For the circuit of Figure 9.29, determine Zin. VCC = 15 V, VEE = -15 V,
          = 75, RL = 16 , R1 = 680 , R2 = 680 .

    3. For the circuit of Figure 9.29, determine Zin. VCC = 25 V, VEE = -25 V,
          = 70, RL = 8 , R1 = 560 , R2 = 560 .

260
                                                                        Figure 9.29

    4. For the circuit of Figure 9.29, determine compliance Pload(max), PD(max),
         BVCEO and IC(max). VCC = 25 V, VEE = -25 V,  = 70, RL = 8 , R1 = 560 ,
         R2 = 560 .

    5. For the circuit of Figure 9.30, determine Pload(max), PD(max), BVCEO and IC(max).
         VCC = 15 V,  = 75, RL = 16 , R1 = 630 , R2 = 630 .
                                                                        Figure 9.30

    6. For the circuit of Figure 9.30, determine Zin. VCC = 15 V,  = 75, RL = 16 ,
         R1 = 630 , R2 = 630 .

    7. For the circuit of Figure 9.30, determine Zin. VCC = 25 V,  = 70, RL = 8 ,
         R1 = 560 , R2 = 560 .

261
    8. For the circuit of Figure 9.30, determine Pload(max), PD(max), BVCEO and IC(max).
         VCC = 25 V,  = 70, RL = 8 , R1 = 510 , R2 = 510 .

    9. For the circuit of Figure 9.31, determine Pload(max), PD(max), BVCEO and IC(max) for
         the output transistors. VCC = 24 V, VEE = -24 V,  = 75, RL = 8 ,
         R1 = 2.5 k, R2 = 300 , R3 = 330 , R4 = 63 .
                                                                        Figure 9.31

    10. For the circuit of Figure 9.31, determine Av and Zin. VCC = 24 V, VEE = -24 V,
          = 75, RL = 8 , R1 = 2.5 k, R2 = 300 , R3 = 330 , R4 = 63 .
                                                                        Figure 9.32

262
    11. For the circuit of Figure 9.32, determine Pload(max), PD(max), BVCEO and IC(max) for
         the output transistors. VCC = 24 V, VEE = -24 V,  = 75, RL = 16 ,
         R1 = 600 , R2 = 5 k, R3 = 63 , R4 = 330 .

    12. For the circuit of Figure 9.32, determine Av and Zin. VCC = 24 V, VEE = -24 V,
          = 75, RL = 16 , R1 = 600 , R2 = 5 k, R3 = 63 , R4 = 330 .

    13. Determine the limit current for the circuit of Figure 9.33 if RE = 0.2 .

                                                                        Figure 9.33

    14. Determine Pload(max), and PD(max), BVCEO and IC(max) for the output and driver
         transistors of Figure 9.34. VCC = 50 V, VEE = -50 V,  = 75, RL = 8 , R5
         through R8 = 0.05 . Assume all other components produce proper bias.

Design Problems
    15. For the circuit of Figure 9.31, determine values for R1 and R2 for proper bias.
         VCC = 32 V, VEE = -32 V,  = 75, RL = 8 , R3 = 330 , R4 = 63 .
    16. Determine a value for RE to set the limit current for the circuit of Figure 9.33
         to 2 A.

Challenge Problems
    17. For the circuit of Figure 9.34, determine values for R1 and R2 for proper bias.
         VCC = 50 V, VEE = -50 V,  = 85, RL = 8 , R5 through R8 = 0.05 ,
         R3 = 2.2 k, R4 = 330 .
    18. For the circuit of Figure 9.35, determine a value for R5 for proper bias.
         VCC = 30 V, VEE = -30 V,  = 100, RL = 16 , R1 = 2.2 k, R2 = 8.2 k,
         R3 = 1.2 k, R4 = 47 , R5 = 330 , R6 = 470 , R7 = 68 .

263
                                                                                                                     Figure 9.34

Computer Simulation Problems
    19. Perform a transient analysis on the circuit of Problem 1 to verify the
         compliance.
    20. Perform a transient analysis on the circuit of Problem 4 to verify the
         compliance.
    21. Perform a DC analysis on the design from Problem 15 to verify the results.
    22. Perform a DC analysis on the design from Problem 17 to verify the results.

264
                                                                                                                     Figure 9.35
        The person who invented sliced bread invented neither bread nor knife.
265
10 Junction Field Effect Transistors (JFETs)

10.0 Chapter Learning Objectives

After completing this chapter, you should be able to:

               Explain the basic operation of the JFET, detailing the different operating regions.
               Draw and explain a basic DC bias model for a JFET.
               Explain the terms transconductance and pinch-off voltage.
               Draw a JFET characteristic curve, detailing pertinent elements and points.
               Discuss the advantages and disadvantages of various JFET biasing topologies.
               Analyze basic DC biasing circuits for JFETs.
               Compare and contrast JFET operation to that of BJTs.

10.1 Introduction

The field effect transistor, or FET, is a semiconductor device that serves as an alternative to the bipolar junction
transistor. FETs are available in two broad types: the junction FET, or JFET, and the metal oxide semiconductor
FET, or MOSFET.

It is best not to think of FETs as either better or worse than the BJT. They have different characteristics and lend
themselves to applications where BJT performance might be wanting. The inverse is also true and for some
applications the judicious use of a combination of BJTs and FETs can produce superior performance when
compared to either device used alone. Like the BJT's NPN and PNP variants, FETs comes in two "flavors": the N-
channel type and the P-channel type. We shall cover JFETs first and then discuss MOSFETs in subsequent
chapters. In this chapter we will cover the internal structure of the JFET, its theory of operation and biasing
techniques. In the next chapter we shall discuss small signal JFET amplifiers; both voltage amplifiers and
voltage followers.

The JFET is fundamentally different from a bipolar junction transistor. While the JFET, like the BJT, relies on the
PN junction for operation, the JFET is modeled as a voltage-controlled current source while the BJT is modeled
as a current-controlled current source. Further, the BJT relies on a forward-biased base-emitter junction for
proper operation while the JFET achieves current control via a reverse-biased junction. Consequently, JFET
biasing circuits tend to be incompatible with BJT biasing schemes and one device cannot be swapped out for the
other.

266
10.2 JFET Internals

A simplified internal model of a JFET is shown in Figure 10.1. The main portion of
the device is called the channel. The diagram illustrates an N-channel device. The
channel is built upon a substrate (i.e., base layer) of oppositely doped material.
Attached to the opposing ends of the channel are two terminals; the source and the
drain. Embedded within the channel is a region using the opposite material type. A
lead is attached to this as well and is called the gate. Although there is not perfect
correspondence between them, the drain, source and gate are roughly analogous to
the BJT's collector, emitter and base, respectively.

                       Gate                                                                Figure 10.1
                       P                                                                   Simplified internal structure of
             N channel                                                                     an N-channel JFET.

     Source              P substrate  Drain

This diagram is drawn symmetrically. Some devices are designed in this fashion and
their drain and source terminals can be swapped with no change in operation. This is
not true for all devices, though. For small values of drain-source voltage, the channel
exhibits a certain amount of resistance that is dependent on the doping level and
physical layout of the device. Further, under normal operation, ID will equal IS.

To understand how the device behaves, refer to Figure 10.2. Here we shall consider
electron flow (shown as a dashed line). First, a positive voltage,VDD, is attached to
the drain terminal along with a current limiting resistor, RD. A negative supply, VGG,
is applied to the gate terminal via resistor RG. Let's start with the gate supply set to
zero. If we start VDD at zero, here is what happens as we increase its value. Initially,
an increase in drain-source voltage will elicit a proportional increase in the current
flowing through the channel. In other words, the channel acts like a resistor. As the
voltage across the drain-source increases further, at some point the current will
saturate, and no further increases in current will occur in spite of further increases in
VDD and VDS. At this point the device is behaving as a constant current source. The
drain-source voltage where this transition occurs is called the pinch-off voltage, Vp.
If the drain-source voltage increases too much, breakdown will occur and current
will begin to increase rapidly.

What's particularly interesting is what happens when the gate supply is increased in
the negative direction. This reverse-biases the gate-source PN junction and results in
a larger depletion region being formed. The depletion region widens into the
channel, thus restricting current flow sooner and at a lower level. The more negative
we make VGG, the lower ID becomes. Eventually, when VGG goes negative enough, the

267
drain current will turn off. This voltage is called VGS(off) and it has the same
magnitude as VP (i.e., VP = |VGS(off)|). The action can be thought of as operating like a
water valve: turning the gate source voltage more negative is like turning off the
spigot and decreasing the flow.

               RG                        Gate             depletion region                 Figure 10.2
         VGG                                                                               Electron flow in an N-channel
                                                _ ___                        RD            JFET.

                      Source             P_ _ _ _ _              Drain

                      IS                 + ++ + + +                            ID
                                               +++                                   VDD
                              N channel

                                         P substrate

The operation of the JFET can visualized nicely by plotting a set of drain curves, as
shown in Figure 10.3.

     ID                                                                                    Figure 10.3
                                                                                           JFET drain curves.
                   ohmic region                breakdown

                                 constant                        for VGS = 0 V
                                 current                         for VGS = -.5 V
                                                                 for VGS = -1 V
     I DSS

     I D(off)                                                    for VGS = VGS(off)
                  VP
                                                          BVDGS  VDS

The drain curve family plots drain current, ID, versus drain-source voltage, VDS. We
begin with the top-most curve. This is generated by setting the gate-source voltage,
VGS, to zero. We then cycle VDS from zero to some higher value. Initially, we see a
proportional rise in ID as VDS increases. This is called the ohmic or triode region.
Eventually, the channel saturates and the current levels out. This is the constant
current or saturation region and it occurs for VDS > VP. The breakdown voltage is
called BVDGS, or alternately, V(BR)DS. Above this voltage the current increases rapidly.
As usual, we do not wish to operate the device in this breakdown region.

268
If we now repeat the process but this time use a small negative value for VGS, we will
trace out a curve of very similar shape. The transition to constant current mode will
happen at a slightly lower voltage and the current value will be somewhat lower as
well. This process continues in like fashion as we make VGS more and more negative.
Eventually, when VGS = VGS(off), the drain current drops to virtually zero (in fact, a
small leakage current flows called ID(off)). In contrast, if VGS was allowed to go
positive, operation would be lost because the PN junction would become forward-
biased and we would lose control of the current via the depletion region. This means
that the JFET's current control is entirely in the second quadrant and the largest drain
current flows when VGS = 0 V. This current is called IDSS, which stands for the drain
current with a shorted gate-source (i.e, if it's shorted, then VGS = 0 V). The JFET
cannot produce a continuous current larger than IDSS safely.

The characteristic equation relating drain current and gate-source voltage is shown
below. This is valid for the constant current region (i.e., VDS > VP).

    ( ) V GS 2                                           (10.1)

I D = I DSS 1 -
                  V GS (off )

Where
VGS is the gate-source voltage (VGS(off)  VGS  0),
ID is the drain current,
IDSS is the maximum current,
VGS(off) is the turn-off voltage.

From this we see that the JFET is a square-law device rather than like the BJT which
has a logarithmic characteristic.39 In essence, this curve is a portion of a parabola.
This means that the JFET's characteristic curve is much more gradual in slope than
that of a BJT. This will have important implications when it comes to voltage gain
potential and distortion, as we shall see in the following chapter.

It is useful to remember that VGS(off) and IDSS are unique to a given device, rather like 
is for a BJT. There can also be a fairly large variation in these parameters. For
example, a particular model of JFET might show an IDSS variation between 2 mA and
20 mA, and a VGS(off) variation between -2 V and -8 V. Generally, the most negative
VGS(off) values will be associated with the largest IDSS values.

Equation 10.1 is plotted in Figure 10.4. Compare this curve to the curve generated
by the Shockley equation for BJTs, Figure 7.1. The graph is shown in normalized
form. Instead of plotting for specific values of VGS(off) and IDSS, the axes are presented
as fractional portions of the maximums (i.e., the horizontal axis is -VGS/VGS(off) and
the vertical axis is ID/IDSS).

39 As evidenced in the Shockley equation, Equation 2.1.
269
              JFET Characteristic Curve             1 Figure 10.4

                                                                                          JFET normalized characteristic

                                                                                          curve (note: this uses

                                                    0.8                                   -VGS/VGS(off) for the normalized

                                                                                          voltage so that the curve does

                                                         Normalized Drain Current         not appear reversed compared

                                                    0.6                                   to a typical device curve).

                                                    0.4

                                                    0.2

-1  -0.8      -0.6  -0.4                      -0.2  0

              Normalized Gate-Source Voltage

Example 10.1

    Using both Equation 10.1 and the graph of Figure 10.4, determine the drain
    current if the gate-source voltage is -1 V and the JFET specs are IDSS = 8 mA
    and VGS(off) = -2 V.

    First, using Equation 10.1

               ( ) V GS 2

                          I D = I DSS 1 -
                                            V GS (off )

            ( ) I - D = 8mA 1 - 1V 2
                                             -2 V
                          I D = 2 mA

    Using the graph, VGS/VGS(off) is 1 V/-2 V, or -0.5. Find this value on the
    horizontal axis, follow up to the curve and then across to the right vertical
    axis. The normalized drain current is 0.25, thus ID is 0.25 IDSS, or 2 mA.

As the characteristic curve plots output current versus input voltage, the slope of this
represents the transconductance, an important characteristic for biasing and signal
analysis. Device transconductance is denoted as gm, or alternately as gfs, and given

270
units of siemens. We can derive an equation for transconductance by taking the
derivative of Equation 10.1.

               ( )V GS 2

           I D = I DSS 1 -
                             V GS (off )

           ( ) d I D =- 2 I DSS 1 - V GS
           d V GS  V GS (off )             V GS (off )

The coefficient -2 IDSS/VGS(off) is defined as gm0, the transconductance when VGS = 0 V.
This is the maximum transconductance of the device. Substituting, we arrive at

           g m0 = - 2 I DSS                                             (10.2)
                     V GS ( off )                                       (10.3)

           ( ) g m = g m0 1 - V GS
                             V GS ( off )

A normalized plot of transconductance versus VGS is shown in Figure 10.5. The
horizontal axis is -VGS/VGS(off) and the vertical axis is gm/gm0.

           JFET Transconductance vs. Vgs                                1

                                                                                                             Figure 10.5

                                                                                                             Curve of transconductance.

                                                                        0.8

                                                                        0.6     Normalized Transconductance

                                                                        0.4

                                                                        0.2

-1   -0.8  -0.6                 -0.4                    -0.2            0

           Normalized Gate-Source Voltage

From this graph we see that the transconductance is a linear function.

271
Another item of interest regarding these device equations: If we combine Equations
10.1 and 10.3, we generate two equations that will prove useful in upcoming work.

     g m0gm = I DI DSS(10.4)                                                        Figure 10.6
                   (10.5)                                                           JFET schematic symbols:
                                                                                    N-Channel (left)
                                                                                    P-Channel (right)

     ( ) ID =gm 2
             gm0
     I DSS

Before moving on, the schematic symbols for JFETs are shown in Figure 10.6. The
middle vertical line represents the channel, and as is usually the case, the arrow
points to N material. Sometimes the gate arrow is draw in the middle rather than
toward the source. Also, as is the case the BJT, sometimes these symbols are drawn
within a circle.

10.3 JFET Data Sheet Interpretation

A data sheet for the J111 series N-channel JFET is shown in Figure 10.7. This is a
small signal device designed for audio frequency circuits. It is available in the
common TO-92 through-hole package as well as in the surface mount SOT-23
package. Note that the source and drain are interchangeable for this device.

                                                                                    Figure 10.7a
                                                                                    J111 series N-channel JFET
                                                                                    data sheet.

                                                                                    Used with permission from SCILLC
                                                                                    dba ON Semiconductor.

272
Examining the absolute maximum ratings and thermal characteristics, we find values
typical of small signal devices. Maximum drain-gate and gate-source voltages are 35
volts and the maximum power dissipation is 625 milliwatts.

                                                                                                                     Figure 10.7b
                                                                                                                     J111 series N-channel JFET
                                                                                                                     data sheet (cont).

                                                                                                                     Figure 10.7c
                                                                                                                     J111 series N-channel JFET
                                                                                                                     data sheet (cont).

273
From the electrical characteristics, note the large variation in VGS(off). For the J111,
this runs from a minimum of -3 V to a maximum of -10 V. The J112 and J113
exhibit even wider min/max ratios. Also, note how the larger VGS(off) ranges are
associated with larger maximums for IDSS.
Finally, let's take a look at a series of performance curves shown in Figure 10.7d.

                                                                                                                     Figure 10.7d
                                                                                                                     J111 series N-channel JFET
                                                                                                                     data sheet (cont).

The upper-left graph is a family of drain curves and corresponds to Figure 10.3,
presented earlier. Note that the horizontal scale for VDS only shows the first 2 volts.
The point here is to examine the ohmic region. The two middle graphs plot the
274
characteristic curve of the device and correspond to Figure 10.4, although these
graphs are drawn rotated around the vertical axis (note that VGS is still shown as a
negative value). Two important things may be noted here. First, as already
mentioned, large values of IDSS tend to be associated with large values of VGS(off). This
graph shows that individual plots tend to scale both horizontally and vertically away
from the origin. Second, thermal variations are very much apparent: As the
temperature increases, the characteristic curve tends to become less steep.

Finally, the two bottom-most graphs plot the variation of gm with VGS. These
correspond to Figure 10.5, although again, the horizontal axis has been rotated
around the vertical. Once again we see considerable variation due to temperature.
Also, none of the plots exhibit perfect linearity. Further, at lower temperatures, the
linearity of the plots decreases even more, warping a relatively straight line into a
complex curve.

10.4 JFET Biasing                                                                          Figure 10.8
                                                                                           Measuring IDSS and VGS(off).
There are several different ways of biasing a JFET. For many configurations, IDSS and
VGS(off) will be needed. A simple way to measure these parameters in the lab is shown
in Figure 10.8. To measure IDSS we simply ground the gate and source terminals as
this forces VGS to be 0 V. We insert an ammeter between VDD and the drain, and then
set VDD to a value higher than VP (+15 VDC generally being sufficient). The resulting
ammeter reading is IDSS. Obtaining VGS(off) is only slightly more work. Leaving the
ammeter in the drain, unhook the gate from ground and instead connect it to an
adjustable negative power supply. Turn the supply more negative until the ammeter
reads zero (practically speaking, < 1% of IDSS). At that point the voltage source will
be equal to VGS(off).

DC Model

Before we begin examining the bias circuits themselves, we need a basic DC model
of the JFET. A model sufficient for our analyses is shown in Figure 10.9.

                                                                                           Figure 10.9
                                                                                           DC model of JFET.

275
The model consists of a voltage-controlled current source, ID, that is equal to the
product of the gate-source voltage, VGS, and the transconductance, gm. The resistance
between the gate and source, RGS, is that of the reverse-biased PN junction, in other
words, ideally infinity for DC. As a consequence, in most practical circuits we can
assume that gate current, IG, is zero. Therefore, ID = IS.

Constant Voltage Bias

The simplest form of bias is the constant voltage bias. The prototype is shown in
Figure 10.10 with current directions and voltage polarities shown.

                                                                                                                     Figure 10.10
                                                                                                                     Constant voltage bias
                                                                                                                     prototype.

This is a fairly straightforward design using only a couple of resistors and power
sources. Figure 10.11 shows the same circuit but with the JFET model inserted, ready
for analysis.

                                                                                                                     Figure 10.11
                                                                                                                     Constant voltage bias with
                                                                                                                     model.

Ultimately, the goal here is to determine a means for finding the transistor's drain
current and drain-source voltage, along with the potentials across any other
components.
276
To begin, consider the gate-source loop. By KVL, the VGG source must drop across
RG and the gate-source junction, VGS.

                               V G G = V RG+V GS
                               V G G = I G RG+V GS

IG is approximately zero so this simplifies to

                               V GS = V G G

Given the transconductance, gm, we can find ID. Alternately, ID may be found using
Equation 10.1 along with the device parameters IDSS and VGS(off). For this circuit, the
latter technique tends to be more practical. Once ID is found, the voltage drop across
RD may be found, and then VDS is determined from KVL.

Example 10.2

For the circuit of Figure 10.12, determine ID and VDS. Assume IDSS = 10 mA               Figure 10.12
and VGS(off) = -5 V.                                                                     Schematic for Example 10.2.

First, because IG  0, the drop across RG is  0 and VGS = VGG. Using
Equation 10.1

           ( )V GS 2

                      I D = I DSS 1 -
                                        V GS (off )

        ( ) I - D = 10 mA 1 - 2 V 2
                                          -5 V
                      I D = 3.6 mA

Looking at the drain-source loop, KVL shows

                     V DD = I D RD + V DS
                     V DS = V DD - I D RD
                     V DS = 25V -3.6 mA3.3 k 
                     V DS = 13.1 V

While the computation for the constant voltage bias is relatively simple, it does not
exhibit a stable Q point. For example, if Example 10.2 is repeated with another JFET,
this one with IDSS = 12 mA and VGS(off) = -6 V, the results are starkly different: ID
grows to 5.33 mA and VDS shrinks to 7.4 V. These are considerable changes given the
relatively modest shifts in the device parameters. In this regard, the constant voltage
bias is reminiscent of the simple base bias configuration used with BJTs.

277
To get a better understanding of the Q point stability issue, refer to Figure 10.13.        Figure 10.13
                                                            ID                              Variation for constant voltage
                                                                                            bias.

           I D1

           I D2

     -VGS  VGS(bias)

Characteristic curves are plotted here for two different devices, one in green and one
in blue. These represent the sort of device parameter variations we might expect to
see across a product model. The fixed value of gate bias voltage is shown in red.
From this graph it should be obvious that this form of bias will produce a wide
variation in drain current, and thus, is not a good choice for applications that require
a stable Q point. If the application does not have this requirement, constant voltage
bias offers the advantage of requiring a minimum of components.

Self Bias

Self bias uses a small number of components and only a single power supply, yet it
offers better stability than constant voltage bias. The name comes from the fact that
the drain current will be used to create a voltage drop that sets up the gate-source,
hence the circuit "biases itself". It is also referred to as automatic bias. The self bias
prototype is shown in Figure 10.14.

                                                                                            Figure 10.14
                                                                                            Self bias prototype.

278
Once again, we may assume that IG is 0. As RG is connected directly to ground, this
means that VG  0 V. This being true, inspection of the schematic reveals that the
magnitude of VGS must be the same as the voltage across RS. Because ID = IS then

                    VGS = -ID RS                                        (10.6)

This value of VGS is what generates the drain current. The definition is self-
referential. This being the case, how do we analyze the circuit? A proper derivation
of the equation for drain current is not trivial. We start with the characteristic
equation (Equation 10.1) and expand it.

                        ( ) VGS 2

                    I D = I DSS 1 -
                                     V GS (off )

                    ( ) I D = I DSS  1-  2 V GS   +    V GS 2

                                         V GS (off ) V GS (off )2

                    I D = I DSS -    2 I DSS V GS I DSS V GS 2
                                                  +
                                     V GS (off )       V GS (off )  2

Substitute using Equation 10.2

                                g m0 = - 2 I DSS
                                          V GS (off )

                    I D = I DSS +g m0 V GS +      I DSS V GS 2

                                                  V GS (off )2

Using Equation 10.6 this can be expanded to

                    I D = I DSS - gm0 I D RS +         I DSS I D2 RS 2

                                                       V GS (off )  2

Rearranging yields

                    0=  I DSS RS 2 2
                                   2 I D -(1 +gm0 RS) I D + I DSS
                        V GS (off )

This is a quadratic equation in the form ax2+bx+c and can be solved using the
quadratic formula:

                    y =-b켦2-4 ac

                                2a

279
The positive option in the numerator may be ignored as this occurs for VGS beyond
VGS(off). The result is

               ( ) I D =2 I DSS 2 1+gm0 RS -1+2 gm0 RS  (10.7)
                                       ( gm0 RS )

Although this is an accurate analytical solution, it's certainly not the sort of equation
most people want to memorize or derive as needed. As the gm0 RS term is repeated in
this equation multiple times, it is useful to plot this equation in terms of normalized
ID versus gm0 RS. This curve is plotted in Figure 10.15.

To use this curve, the first step is to find gm0 RS. The value of RS is determined by
inspection and gm0 may be determined by Equation 10.2, repeated below for
convenience.

                               g m0 = - 2 I DSS
                                          V GS ( off )

The value of gm0 RS is found on the horizontal axis, traced up to the curve and then
over to the normalized ID ratio. This number is multiplied by IDSS to determine the
value of ID.

                    Self Bias Curve

         1.00                                                                              Figure 10.15
                                                                                           Self bias curve.

         0.90

         0.80

         0.70

         0.60

Id/Idss  0.50

         0.40

         0.30

         0.20

         0.10

         0.00  0.1
         0.01       1                10                         100

                    gm0*Rs

280
Example 10.3                                                                                 Figure 10.16
                                                                                             Schematic for Example 10.3.
         Determine ID and VDS for the circuit shown in Figure 10.16. Assume
         IDSS = 10 mA and VGS(off) = -4 V.

         Using the graphical method, first determine gm0 RS.

                               g m0 = - 2 I DSS
                                          V GS ( off )

                               g m0 = - 210 mA -4 V
                               g m0 = 5 mS

         Therefore gm0 RS = 5 mS  2.2 k  = 11. The self bias graph yields
         approximately 0.12 for the normalized current ratio. Therefore

                               I D = 0.12 I DSS
                               I D = 0.1210 mA
                               I D = 1.2 mA

         Using Ohm's law and KVL

                               V D = V DD - I D RD
                               V D = 20 V-1.2 mA3.9 k 
                               V D = 15.32 V

                               VS = ID RS
                               V S = 1.2 mA2.2 k 
                               V S = 2.64 V

                               V DS = V D -V S
                               V DS = 15.32 V -2.64 V
                               V DS = 12.68 V

An alternate technique is to make an initial guess for VGS, typically one half of VGS(off).
The value of ID is then computed from the characteristic equation (Equation 10.1)
and compared with the Ohm's law relation, Equation 10.6, rewritten as
ID = -VGS/RS. Chances are, the two results will not agree so adjust the VGS estimate
and repeat the process. If done properly, the currents should be closer. Iterate this
process until you converge on the answer.

281
To use this technique for the preceding problem we'd start by assuming VGS = -2 V
(half of VGS(off)). Using this in Equation 10.1 yields ID = 2.5 mA, while using Equation
10.6 produces ID = 910 A. Obviously the initial estimate was not correct. The
second estimate for VGS needs to increase negatively as this will decrease the result
from Equation 10.1 and increase the result from Equation 10.6, hopefully meeting in
the middle. We might try -2.5 volts. This will yield 1.4 mA from Equation 10.1 and
1.14 mA from Equation 10.6. As the gap has narrowed, the adjustment for the third
estimate will be smaller, so we could try -2.6 volts. This would be relatively close to
the value as computed in Example 10.3 (VGS = -VS).

This approximation technique also offers a clue as to how self bias gains stability       Figure 10.17
over constant voltage bias. If for some reason ID was to increase, this would create a    Variation for self bias.
larger voltage drop across RS. Because this voltage is the same magnitude as VGS, this
means that VGS grows negatively. A more negative VGS reduces ID, thus opposing the
initial change in drain current. This feedback mechanism is similar in function to the
BJT collector feedback bias. The stability issue is visualized in Figure 10.17.

                                                           ID

                   1
                   RS

                                   I D1
                                   I D2

     -VGS          VGS1 VGS2

Two device curves are plotted to represent parameter variation (green and blue).
Equation 10.6 shows the relationship between ID and VGS. If we put this in the form
y = mx + b, we find that the line goes through the origin and has a slope of 1/RS.
This line is plotted in red. Where the line intersects the device curve yields the drain
current and gate-source voltage for that particular device. Unlike constant voltage
bias, self bias shifts some variation over to VGS, making ID more stable. In fact, if
there is a particular design target for ID or VGS, a rearrangement of Equation 10.6 can
be used to find the needed value of RS along with the characteristic curve or
equation.

     RS = - V GS
               ID

For example, if a certain ID is desired, this value could be used with Equation 10.1 to
determine the corresponding VGS. These values are then used to find the required RS.
Alternately, the normalized values could be obtained via Figure 10.4.

282
Example 10.4                                                                         Figure 10.18
                                                                                     Schematic for Example 10.4.
         Determine a value for RS to set VGS = -2 V for the circuit shown in Figure
         10.18. Assume IDSS = 20 mA and VGS(off) = -4 V.

         We can determine the drain current using Equation 10.1.

               ( ) V GS 2

                                I D = I DSS 1 -
                                                  V GS ( off )

            ( ) I - D = 20 mA 1 - 2V 2
                                                    -4 V
                               I D = 5 mA

                               RS = - V GS
                                         ID

                               RS = --2 V 5 mA
                               RS = 400 

In sum, self bias is a minimal parts count circuit that offers modest stability. The
stability can be improved with the addition of other components, as we shall see
with the next bias configuration.

Combination Bias

The combination bias configuration (AKA source bias) is based on self bias but adds
a negative power supply connected to RS, hence its name. This will enhance the
stability of ID, VDS and gm. The combination bias prototype is shown in Figure 10.19.

                                                                                                                     Figure 10.19
                                                                                                                     Combination bias prototype.

283
The analysis is similar to that of self bias but with one major twist: the source power
supply increases the voltage drop across RS. This stabilizes the voltage (and hence,
the current) because it is no longer equal to -VGS, but rather

                     V RS = I D RS = V GS+V SS                               (10.8)

If VSS >> VGS, then we can approximate ID as VSS/RS. As with self bias, an analytical
solution for ID is possible. In order to do so, we would begin with the characteristic
equation and Equation 10.8. The derivation is left as an exercise.

                     ( ) I D =2 I DSS 2 1+gm0 RS (1+k ) -1+2 g m0 RS (1+k )  (10.9)
                                                     ( gm0 RS )

The formula is very similar to the self bias formula but with the addition of a factor,
k. k is a "swamping factor" and is defined as the ratio of VSS to VGS(off). If k = 0, there
is no source power supply and the formula reverts back to the simpler self bias
formula. On the other hand, if k is very large, ID  VSS/RS.

As was the case with self bias, we can plot Equation 10.9 using the gm0RS factor. A
series of three plots for k = 2, 3 and 4 are rendered in Figure 10.20.40

                     Combination Bias Curve                                                Figure 10.20a
                           Vss=2Vgs(off)                                                   Combination bias curve, k = 2.

Id/Idss  1.0                                                                 25
         0.9
         0.8         10  15                     20
         0.7
         0.6
         0.5
         0.4
         0.3
         0.2
         0.1
         0.0

                  5

                         gm0*Rs

40 We could add a third axis for k and plot a surface, and while it might be pretty, a 3D plot
    like this rendered onto a 2D surface, such as a page in a textbook, is of marginal utility.

284
                              Combination Bias Curve                  Figure 10.20b
                                    Vss=3Vgs(off)                     Combination bias curve, k = 3.

Id/Idss  1.0                                              50
         0.9
         0.8                  20      30              40              Figure 10.20c
         0.7                                                          Combination bias curve, k = 4.
         0.6
         0.5                                              60
         0.4
         0.3
         0.2
         0.1
         0.0

                      10

                                      gm0*Rs

                              Combination Bias Curve
                                    Vss=4Vgs(off)

Id/Idss     1.0
            0.9
            0.8           20      30          40      50
            0.7
            0.6                       gm0*Rs
            0.5
            0.4
            0.3
            0.2
            0.1
            0.0

                   10

285
Example 10.5

     Determine ID and VDS for the circuit shown in Figure 10.21. Assume              Figure 10.21
     IDSS = 12 mA and VGS(off) = -4 V.                                               Schematic for Example 10.5.

     Using the graphical method, first determine gm0 RS.

                           g m0 = - 2 I DSS
                                     V GS ( off )

                           g m0 = - 212 mA -4 V
                           g m0 = 6 mS

     Therefore gm0 RS = 6 mS  3.3 k  = 19.8. The swamping ratio, k, is
     VSS/VGS(off) = -8/-4 = 2. This requires the graph in Figure 10.20a. This graph
     yields approximately 0.25 for the normalized current ratio. Therefore

                           I D = 0.25 I DSS
                           I D = 0.2512 mA
                           I D = 3 mA

     Using Ohm's law and KVL

                          V D = V DD - I D RD
                          V D = 24 V-3 mA4.7 k 
                          V D = 9.9 V

                          V S = V SS +I D RS
                          V S =-8 V+3 mA3.3 k 
                          V S = 1.9 V

                          V DS = V D -V S
                          V DS = 9.9 V -1.9 V
                          V DS = 8 V

     As a crosscheck, using Equation 10.9 yields 3.028 mA for ID. The deviation
     is no doubt due to inaccuracy in reading the graph. In any case, using this
     value of drain current we find VS to be 1.992 volts, a little higher than
     calculated above. This indicates that VGS is -1.992 volts (because VG  0 V).
     If we plug this value of VGS into Equation 10.1, ID = 3.024 mA; an excellent
     match with the deviation being due to accumulated rounding errors.

286
In order to show the increased Q point stability of the combination bias, we'll repeat
the preceding problem using a JFET with a significantly lower IDSS.

Example 10.6

         Determine ID for the circuit shown in Figure 10.21. Assume
         IDSS = 8 mA and VGS(off) = -4 V.

         For this version we'll use Equation 10.9. First determine gm0 RS.

                               g m0 = - 2 I DSS
                                          V GS (off )

                               g m0 =- 28 mA -4 V
                               g m0 = 4 mS

         Therefore gm0 RS = 4 mS  3.3 k  = 13.2. The swamping ratio, k, is
         VSS/VGS(off) = -8/-4 = 2.

          ( ) I D =2 I DSS 2 1+gm0 RS (1+k ) -1+2 gm0 RS (1+k )
                                                               ( g m0 RS)

           ( ) I D =28 mA 2 1+13.2(1+2) -1+213.2(1+2)
                                                                   (13.2 )
                               I D =2.906 mA

         For the graphical method, a reasonable estimate for the normalized ID would
         be around 0.36, yielding a drain current of 2.88 mA. Stability is apparent
         because the drain current has dropped only a few percent in spite of the fact
         that IDSS decreased by 33%.

The graph of Figure 10.22 illustrates nicely the increased stability of the Q point.
Once again, we plot two representative device curves in green and blue. As was the
case with self bias, a plot line can be drawn, the slope of which is equal to the
reciprocal of RS. This plot line does not go though the origin, though. Instead, the x
axis intercept is the voltage |VSS|. Thus, the red plot line is shifted along the VGS axis.

As can be seen in the graph, the variation in ID is reduced (although at the expense of
variation in VGS). For large values of VSS with correspondingly large values of RS, the
bias plot line becomes nearly horizontal, indicating a very stable Q point. With two
variables in play, this bias proves to be very flexible. It can also be realized by using
a positive voltage divider at the gate and removing VSS (returning RS to ground).

287
           ID                                                                           Figure 10.22
                                                                                        Variation for combination bias.

           1
           RS

                               I D1
                               I D2

     -VGS  VGS1 VGS2                 VGS

Constant Current Bias                                                                   Figure 10.23
                                                                                        Constant current bias
The most stable bias for JFETs relies, oddly enough, on a current source made with a    prototype.
BJT. It is called constant current bias, yet another imaginative tag. Interestingly,
although this will keep the Q point very stable, a fixed ID does not guarantee the
most stable value of voltage gain. In fact, it might be easier to achieve that goal
using combination bias. The prototype constant current bias circuit is shown in
Figure 10.23. An NPN BJT is used for an N-channel JFET and a PNP would be used
with a P-channel JFET, typically driven from above (i.e., circuit flipped top to
bottom).

Ignoring the JFET for a moment, the BJT is configured as in two-supply emitter bias.
In this case the base is tied directly to ground, leaving the emitter at about
-0.7 VDC. The remainder of the VEE supply drops across RE, establishing the emitter
current. As the collector is connected directly to the JFET's source terminal, this
means that IS  IE. The source current winds up being just as stable as the emitter
current, which we have already seen is very stable. The only requirement is that IE
should not be programmed to be larger than IDSS. This being true, ID will set up a
corresponding VGS. This also establishes VS because VG  0 V. Therefore, the source
terminal will be a small positive voltage and this is precisely what the BJT needs in
order to guarantee that its collector-base junction is reverse-biased.

Computation of circuit currents and voltages is straightforward and does not involve
the use of graphical aides. The first step is to examine the BJT's emitter loop and
determine IE. Once this is found, IS and ID are known, and all remaining component
potentials may be found using Ohm's law and KVL.

This technique does not involve the calculation of VGS. In fact, because ID is very
stable, VGS will show the widest variation of all biasing circuits when the JFET is
changed. If VGS is needed, it can be determined via a little algebraic manipulation on
Equation 10.1.

288
Example 10.7

     Detemine ID, VDS and VGS in the circuit of Figure 10.24. IDSS = 15 mA and
     VGS(off) = -3 V.

     We begin by finding IE.                                                    Figure 10.24
                                                                                Schematic for Example 10.7.

              I E = V EE-0.7 V

                          RE
              I E = 10V -0.7 V 3.6 k 
              I E = 2.58mA

     IE is the same as IS and ID, therefore

              V D = V DD - I D RD
              V D = 20 V -2.58 mA4.7 k 
              V D = 7.87V

     To find VS we note that VS = -VGS and rearrange Equation 10.1.

                  ( )V GS 2

              I D = I DSS 1 -
                                V GS (off )

              (  ) V GS = V GS(off ) 1 -      ID
                                             I DSS

              (  ) V GS = -3 V 1 -           2.58 mA
                                              15 mA
              V GS = -1.24 V

     Therefore VS = 1.24 V and

              V DS = V D -V S
              V DS = 7.87 V -1.24 V
              V DS = 6.63 V

We turn next to a computer simulation of a similar circuit to validate our
methodology.

289
Computer Simulation

A constant current bias circuit is entered into a simulator as shown in Figure 10.25.

                                                                                       Figure 10.25
                                                                                       Constant current bias
                                                                                       circuit in simulator.

A cursory estimate shows that IE and ID should be around 4.3 mA. Also, VD should be
approximately 20 V - 4.3 mA  2.2 k, or about 10.54 volts. The results of a DC
operating point analysis are shown in Figure 10.26.

                                                                                                                     Figure 10.26
                                                                                                                     Constant current bias DC
                                                                                                                     operating point simulation
                                                                                                                     results.

290
The drain voltage (node 3) is just over 10.6 volts, agreeing with our estimate. Also,      Figure 10.27
note the minuscule gate voltage (node 1) of 12 V which verifies our continuing             Variation for constant current
assumption in these circuits that VG  0 VDC. Finally, we see a modest potential of         bias.
about 1.5 volts at the source terminal (node 12). This shows the proper reverse-
biasing of both the gate-source and collector-base junctions.

Finally, we can examine the Q point variation using Figure 10.27. Here, the plot line
is perfectly horizontal and all device variation is manifest in VGS.

                                                             ID

                      I DQ

     -VGS  VGS1 VGS2

Summary

The junction field effect transistor is an altogether different device from the bipolar
junction transistor. Instead of relying on a forward-biased PN junction to control
current, the JFET utilizes a reverse-biased PN junction. Furthermore, the JFET uses
voltage control rather than the BJT's current control. In spite of this, a family of JFET
drain curves offers similarity to the BJT's collector curves, exhibiting three regions:
ohmic, constant current and breakdown.

The DC model of a JFET includes a voltage-controlled current source in the drain
and a very, very large resistance, RGS, from gate to source. This resistance models
that of a reverse-biased PN junction. The characteristic equation of the JFET is
square-law and is consequently much more gentle in slope than the corresponding
equation for a BJT. The maximum current produced by a JFET is IDSS and occurs
when VGS = 0 V. VGS must always be negative to ensure proper operation and all
negative values will lead to a drain current less than IDSS. Once the gate-source
becomes negative enough (at VGS(off)), drain current goes to zero.

There are several methods to bias JFETs. Perhaps the most simple method is to apply
a fixed potential to the gate while grounding the source. This is called constant
voltage bias and is the least stable bias in terms of Q point. Self bias uses a minimum
of components and offers modest stability. It is a decent general-purpose bias. The
addition of a negative power supply to the source resistor leads to the combination

291
bias topology. This circuit offers improvements in stability over self bias. The most
stable bias is the constant current bias. This form relies on a BJT to establish a very
stable current.

Review Questions

    1. Compare the operation of the JFET to the BJT.
    2. Compare the regions of JFET drain curves to those of BJT collector curves.
    3. Why is the JFET referred to as a square-law device?
    4. Rank the biasing schemes presented in this chapter in terms of Q point

         stability.
    5. What is pinch-off voltage?
    6. How does the JFET DC biasing model differ from the BJT DC model?

Problems

Analysis Problems
    1. For the circuit of Figure 10.28, determine ID and VDS. IDSS = 40 mA,
         VGS(off) = -4 V, VDD = 26 V, VGG = -2 V, RG = 220 k, RD = 1.2 k.
    2. For the circuit of Figure 10.28, determine ID and VDS. IDSS = 20 mA,
         VGS(off) = -3 V, VDD = 22 V, VGG = -1 V, RG = 390 k, RD = 1 k.

                                                                        Figure 10.28

    3. For the circuit of Figure 10.29, determine ID, VG and VD. IDSS = 24 mA,
         VGS(off) = -6 V, VDD = 36 V, RG = 220 k, RS = 2 k, RD = 1.8 k.

    4. For the circuit of Figure 10.29, determine ID, VS and VDS. IDSS = 18 mA, VGS(off)
         = -3 V, VDD = 30 V, RG = 270 k, RS = 2.7 k, RD = 3.3 k.

292
                                                                        Figure 10.29

    5. For Figure 10.30, determine ID, VG and VD. IDSS = 16 mA, VDD = 25 V,
         VGS(off) = -3 V, VSS = -6 V, RG = 560 k, RS = 2 k, RD = 3.6 k.

    6. For Figure 10.30, determine ID, and VDS. IDSS = 16 mA, VDD = 25 V,
         VGS(off) = -3 V, VSS = -9 V, RG = 680 k, RS = 2 k, RD = 2.7 k.
                                                                        Figure 10.30

    7. For Figure 10.31, determine ID, VG and VD. IDSS = 16 mA, VDD = 25 V,
         VGS(off) = -3 V, VEE = -9 V, RG = 810 k, RE = 2 k, RD = 2.7 k.

    8. For the circuit of Figure 10.31, determine ID and VDS. IDSS = 40 mA,
         VGS(off) = -4 V, VDD = 30 V, VEE = -6 V, RG = 750 k, RE = 500 ,
         RD = 1.8 k.

Design Problems
    9. Using the circuit of Figure 10.29, determine a value for RS to set ID to
         4 mA. IDSS = 10 mA, VGS(off) = -2 V, VDD = 20 V, RG = 430 k, RD = 1.8 k.
    10. Using the circuit of Figure 10.28, determine a value for VGG to set ID to
         2 mA. IDSS = 10 mA, VGS(off) = -4 V, VDD = 28 V, RG = 470 k, RD = 4.7 k.

293
    11. Using the circuit of Figure 10.31, determine a value for RE to set ID to 4 mA.
         IDSS = 18 mA, VGS(off) = -3 V, VDD = 25 V, VEE = -12 V, RG = 330 k,
         RD = 2.2 k.
                                                                        Figure 10.31

    12. Using the circuit of Figure 10.31, determine values for RE and RD to set ID to
         5 mA and VD to 6 V. IDSS = 20 mA, VGS(off) = -4 V, VDD = 32 V, VEE = -10 V,
         RG = 390 k.

Challenge Problems
    13. Following the derivation of Equation 10.7, derive Equation 10.9.
    14. Using the circuit of Figure 10.30, determine values for RS and VSS to set ID to
         4 mA. IDSS = 16 mA, VGS(off) = -4 V, VDD = 30 V, RG = 680 k, RD = 2 k.

Computer Simulation Problems
    15. Perform a DC operating point simulation on the circuit of Problem 7 to
         verify the results. The J111 will be sufficient.
    16. Perform a DC operating point simulation on the circuit of Problem 10 to
         verify the results. The J111 will be sufficient.

294
Department of Marginal Utility

                                Combination Bias Surface Plot

          The graphs of Figure 10.20 represent three slices from this surface.
                                        Looks cool, but...

295
11 JFET Small Signal Amplifiers

11.0 Chapter Learning Objectives

After completing this chapter, you should be able to:

               Determine the voltage gain, input impedance and output impedance of basic JFET amplifiers.
               Draw and explain a basic AC model of a JFET.
               Compare and analyze JFET voltage amplifiers and voltage followers.
               Discuss the advantages and disadvantages of JFET circuits with those of comparable BJT

                   circuits.
               Analyze small signal combination BJT/JFET amplifier circuits.
               Discuss applications that make use of the JFET's ohmic region.

11.1 Introduction

The JFET can be used to create both voltage amplifiers and voltage followers. In comparison with the BJT, the
JFET tends to have less voltage gain potential. On the other hand, JFET circuits offer the possibility of a much
higher input impedance, lower noise and better high frequency performance. There are many other similarities
with BJT amplifiers. For example, the possibility of swamping still exists as a means of lowering distortion at
the expense of voltage gain. Also, the JFET voltage amplifier inverts the signal, just like the BJT version. When
it comes to AC analysis, a key element for the BJT is r'e. For the JFET, the comparable parameter is
transconductance, gm.

JFET amplifiers and followers can be used with their BJT cousins. Indeed, the combination of the two, each
playing to their strengths, has the potential to outperform a design using only one type of device.

Alongside their use in amplifiers and followers, JFETs can also be used in their ohmic region. This includes
applications as voltage-controlled resistors and analog switches. In this mode, the device no longer behaves as a
constant current source. Instead, the channel resistance becomes a function of the gate-source voltage and can be
used as a control element within a voltage divider. As such, it has the capability of changing resistance value
much faster than a mechanical potentiometer.

11.2 Simplified AC Model of the JFET

An AC model of the JFET is shown in Figure 11.1. This is essentially the same model as was used for DC
analysis. Once again, we have a voltage-controlled current source situated in the drain. The reverse-biased
junction shows up as a very large resistance, rGS.

296
                                                                                        Figure 11.1
                                                                                        AC model of JFET.

It is worth mentioning that this model is suitable only for low frequencies. At higher
frequencies, device capacitances can play a major role in the response of the
amplifier. There are three device capacitances not shown in the Figure that shunt
each pair of terminals: CGS, CDG and CDS. On a data sheet, the "lumped" capacitances
are often given. These are Ciss, the capacitance looking into the gate with the source
and drain shorted to ground: Ciss = CGS + CDG; and Crss, the capacitance seen from the
drain with the gate and source shorted to ground: Crss = CDS + CDG. As we shall see,
these capacitances can have a sizable impact on amplifier characteristics such as Zin.

The value of transconductance, gm, will prove to be of particular interest. It is
roughly of equal importance to r'e in a BJT.41

11.3 Common Source Amplifier

The common source amplifier is analogous to the common emitter amplifier. The
prototype amplifier circuit with device model is shown in Figure 11.2.

                                                                                        Figure 11.2
                                                                                        Common source amplifier with
                                                                                        model.

41 In fact, we can say that 1/r'e is gm for a BJT.
297
This circuit includes a swamping resistor, rS. The input signal is presented to the gate
terminal while the output is taken from the drain.

Voltage Gain

An equation for the voltage gain, Av, is developed as follows. First, we start with the
fundamental definition, namely that voltage gain is the ratio of vout to vin, and proceed
by expressing these voltages in terms of their Ohm's law equivalents.

                 Av = vout = v D        (11.1)
                       vi n vG

                 Av = -iD rL
                       iD r S +vGS

                 Av = - gm vGS r L
                       gm vGS r S +vGS

                 Av = - g m r L
                         gm rS+1

If there is no swamping resistor, the first portion of the denominator drops out and
the gain simplifies to -gm  rL. The swamping resistor in the source, rS, plays the
same role here as it did in the BJT: it helps to stabilize the gain and reduce distortion.
It does so at the expense of voltage gain.

Input Impedance

Referring back to Figure 11.2, the input impedance of the amplifier will be rG in
parallel with the impedance looking into the gate terminal, Zin(gate). For the non-
swamped case, this will be rGS. At low frequencies rGS is very large, well into the
megohms. In most practical circuits, rG will be much lower, hence

                 Zin = rG || rGS  rG    (11.2)

Theoretically, for swamped amplifiers Zin(gate) will be higher than rGS but this is a
moot point. In either case, it is relatively easy to obtain a high input impedance,
certainly much easier than it is for typical single-device BJT amplifiers.

It might be easy to become complacent and simply assume that rG sets the input
impedance and that's the end of it. This would be a mistake. As mentioned earlier,
with impedances this high, we cannot ignore items such as junction capacitance. For
example, for a general purpose device a typical value for Ciss, the total input
capacitance, may be in the vicinity of 5 to 10 pF. This capacitance appears in parallel
with rG. If this amplifier is used for ultrasonic signals, the capacitive reactance, XC,
would be as low as 160 k at 100 kHz. Although this is high compared to typical
BJT circuits, it's less than the RG values commonly used for biasing. At higher

298
frequencies, the situation is even worse as XC decreases with frequency. Also, we are
ignoring the Miller effect here which makes the situation even worse than even
worse, so perhaps we can say that it's even worser, which is a claim we could also
make regarding the grammar of this sentence.

Output Impedance

To investigate the output impedance, we'll refer to Figure 11.3. This circuit is very
similar to that of Figure 11.2. The major difference is that the AC load equivalent has
been split into its two components, the load itself, RL, and the drain biasing resistor,
RD.

                                                                                                                     Figure 11.3
                                                                                                                     Output impedance of common
                                                                                                                     source amplifier.

From the vantage point of RL, peering back into the amplifier we see RD in parallel
with the impedance at the drain. At the drain we find the current source, iD. The
internal impedance of this equivalent current source is very high compared to
typical values for RD (hundreds of k), therefore we can approximate the output
impedance as

     Zout  RD  (11.3)

It should be noted that all forms of DC bias discussed in the previous chapter are
game here. There are a few limitations to be aware of, though. For example, when
using constant voltage bias, swamping is not possible as that bias form does not use
a source resistor. In contrast, self bias and combination bias include a source resistor
so swamping is a possibility, however, RS may need to be split and partially bypassed
to achieve the desired results. Finally, constant current bias is not well-positioned to
use swamping as that would require some additional work to fit in a new RS along
with the current source. More typically, the current source will just be bypassed with
a capacitor to produce a non-swamped amplifier.

299
Example 11.1

     Determine the voltage gain and input impedance for the circuit shown in
     Figure 11.4. Assume IDSS = 15 mA and VGS(off) = -3 V.

     This is an unswamped common source amplifier with constant current bias.  Figure 11.4
     We can determine Zin via inspection.                                      Circuit for Example 11.1.

              Zi n = Z i n(gate) || RG
              Zi n  10 M 

     To find the voltage gain, we'll first need to find ID and gm0 in
     order to find gm.

              I D = V EE-0.7 V

                           RE
              I D = 5 V-0.7 V 1 k 
              I D = 4.3 mA

              g m0 = - 2 I DSS
                        V GS ( off )

              g m0 =- 30 mA -3 V
              g m0 = 10 mS

     Knowing the current and maximum transconductance, we can find gm
     through the use of Equation 10.4.

              g m0gm = I D
                    I DSS

              g m = g m0 I D

                  I DSS
               g m = 10 mS 4.3 mA 15 mA

              g m = 5.35mS

              Av =- gm rL
                       g m rS +1

              Av =-5.35 mS(2.2 k  || 4.7 k ) 5.35 mS0 +1
              Av =-8.02

300
Example 11.2

     Determine the voltage gain and input impedance for the circuit shown in        Figure 11.5
     Figure 11.5. Assume IDSS = 24 mA and VGS(off) = -4 V.                          Circuit for Example 11.2

     This is an unswamped common source amplifier with self bias. Once again,
     we can determine Zin via inspection.

                           Zi n = Z i n(gate) || RG
                           Zin  1 M

     To find the voltage gain, we'll first need to find gm0. Also, we
     can take a shortcut and find the normalized drain current
     from the self bias graph instead of finding ID itself.

                           g m0 = - 2 I DSS
                                     V GS ( off )

                           g m0 =- 48 mA -4 V
                           g m0 = 12 mS

     RS is 1.5 k, therefore gm0RS = 18. From the self bias graph this produces a
     normalized drain current of 0.08.

             gm = g m0 I D
                                          I DSS

                       g m = 12 mS0.08

                           g m = 3.4 mS

     Again, there is no swamping so rS = 0. The gain formula reduces to

                           Av =- gm rL
                           Av =-3.4 mS (22k  || 5 k )
                           Av =-13.9

We will now turn our attention to the effect of swamping. As in the BJT case, we
expect to sacrifice gain and in return, see an improvement in distortion. We shall
examine this through the use of a simulation.

301
Computer Simulation

A common source amplifier using self bias is entered into the simulator as shown in
Figure 11.6.

                                                                                                                     Figure 11.6
                                                                                                                     Common source amplifier in
                                                                                                                     simulator.

Reasonable device values for this model are IDSS = 40 mA and VGS(off) = -2.3 V. Based
on these we find

                                g m0 = - 2 I DSS
                                          V GS (off )

                               g m0 = - 80 mA -2.3 V
                               g m0 = 34.8 mS
Given RS = 1 k, the self-bias equation yields

          ( ) I D = 2 I DSS 2 1+gm0 RS -1+2 gm0 RS
                                                        ( gm0 RS )

           ( ) I D = 2 I DSS 2 1+34.8 -1+234.8
                                                        ( 34.8)
                               I D = 1.81mA

302
g m = g m0 I D

    I DSS
g m = 34.8mS    1.81 mA
                 40 mA
 gm = 7.4 mS

Av = - gm rL

Av = -7.4 mS (2 k  || 10k )
Av = -12.3

The results of a transient analysis are shown in Figure 11.7 for a 100 mV peak input
signal.

                                                                                        Figure 11.7
                                                                                        Transient analysis of the
                                                                                        common source amplifier.

First, the inversion between the input (blue trace) and output (red trace) is obvious.
Also, some distortion is evident in the output waveform. Inspecting the positive and
negative peaks shows that the positive peaks are are a little more broad than the
negative ones and don't quite reach the same magnitude. The averaged gain is about
-11.75, around 5% low from the estimate and not too bad considering the distortion.

The simulation is run a second time, but this time around the 1 k source resistor is
split into a 200 /800  pair with only the 800  being bypassed. The DC bias does

303
not change leaving gm untouched, but the new 200  swamping resistor drops the
gain to

                                Av =- g m r L
                                         gm rS +1

                               Av =-7.4 mS(2 k  || 10 k ) 7.4 mS200  +1
                               Av = -4.96
The output signal from the simulator is shown in Figure 11.7.

                                                                                                                     Figure 11.8
                                                                                                                     Transient analysis of the
                                                                                                                     swamped common source
                                                                                                                     amplifier.

The input signal was raised to 240 mV peak in order to keep the output signals of the
two versions at the same amplitude. The symmetry appears to be better here and the
gain works out to -4.85, just a few percent low.
Total harmonic distortion (THD) analysis is performed next. The results are shown in
Figures 11.9 and 11.10. To keep the comparison fair, the input levels are adjusted to
maintain similar output voltages. The non-swamped results are seen in Figure 11.9,
and as expected based on the waveform asymmetry, the THD is relatively high at
roughly 4%. The swamped version scores better at just over 1.6%, although this is
still not stellar performance.
304
                                                                                                                     Figure 11.9
                                                                                                                     THD of common source
                                                                                                                     amplifier.

                                                                                                                     Figure 11.10
                                                                                                                     THD of swamped common
                                                                                                                     source amplifier.

It is interesting to note that while the voltage gain of the swamped amplifier has
dropped to 41% of the non-swamped gain, the THD has dropped to 41% of the non-
swamped THD. In fact, given the square-law nature of the characteristic curve, we
would expect the distortion to be lower if we used smaller signals. To verify this, the
THD simulation is run again for the swamped amplifier, but now using an input
signal ten times smaller at only 24 mV peak. The result is shown in Figure 11.11.

                                                                                                                     Figure 11.11
                                                                                                                     THD of swamped common
                                                                                                                     source amplifier with reduced
                                                                                                                     signal level.

The resulting THD is markedly lower for an order of magnitude improvement. We're
now at least approaching "hi-fi" territory.
305
11.4 Common Drain Amplifier

The common drain amplifier is analogous to the common collector emitter follower.
The JFET version is also known as a source follower. The prototype amplifier circuit
with device model is shown in Figure 11.12. As with all voltage followers, we
expect a non-inverting voltage gain close to unity, a high Zin and low Zout.

                                                                                                                     Figure 11.12
                                                                                                                     Common drain (source
                                                                                                                     follower) prototype.

The input signal is presented to the gate terminal while the output is taken from the
source. Many bias circuits may be used here as long as they do not have a grounded
source terminal such as constant voltage bias.

Voltage Gain

In order to develop an equation for the voltage gain, Av, we follow the same path we
took with the common source amplifier earlier in this chapter. First, we start with the
fundamental definition, namely that voltage gain is the ratio of vout to vin, and proceed
by expressing these voltages in terms of their Ohm's law equivalents.

              Av = vout = v S       (11.4)
                    vin vG

              Av = iD r L
                    iD r L+v GS

              Av = gm v GS r L
                    gm vGS r L+vGS

              Av = g m r L
                    gm rL+1

Equation 11.4 is very similar to the gain equation derived for the swamped common
source amplifier; the notable changes being the lack of the minus sign indicating that

306
this circuit does not invert the signal, and rL replacing rS in the denominator. It is
worth remembering that rL here is the AC source resistance while in the common
source amplifier rL is the AC drain resistance. To avoid potential confusion, this
equation could also be written as

                 Av = gm r S          (11.4b)
                       g m r S +1

In any event, the goal is to make sure that gmrS >> 1. By doing so, the voltage gain
will be very close to unity.

Input Impedance

The analysis for common drain input impedance is virtually identical to that for the
swamped common source amplifier. The result is replicated here for convenience.

                 Zin = rG || rGS  rG  (11.5)

Output Impedance

In order to investigate the output impedance, we'll separate the load resistance from
the source bias resistor, as shown in Figure 11.13.

                                                                                        Figure 11.13
                                                                                        Common drain output
                                                                                        impedance analysis.

From the position of RL, looking back toward the source we find RS in parallel with
the impedance looking back into the source terminal. The voltage at this node is vGS
and the current entering this node is iD. The ratio of the two must yield the
impedance looking into the source.

307
              Z source = vGS                                    (11.6)
                         iD

              Z source = vGS
                        g m v GS

              Z source = 1
                        gm

Therefore, the output impedance is

              Zout = RS || 1                                    (11.7)
                             gm

We can expect this value to be much smaller than the output impedance of typical
common source amplifiers.

Example 11.3

     For the follower shown in Figure 11.14, determine the input impedance and
     output voltage. Assume Vin = 100 mV, IDSS = 30 mA, VGS(off) = -2 V.

     This is a follower using self bias. We'll find gm via the self bias graph.

              g m0 = - 2 I DSS                                                    Figure 11.14
                        V GS ( off )                                              Circuit for Example 11.3.

              g m0 =- 60 mA -2 V
              g m0 = 30 mS

     RS is 1 k, yielding 30 for gm0 RS. The normalized drain
     current from the self bias graph is approximately 0.05.

               g m = g m0            ID
                                    I DSS

              g m = 30 mS 0.05

              g m = 6.71 mS

              Av = g m r S
                    gm rS+1

              Av = 6.71mS(1 k  || 600) 6.71 mS(1 k  || 600 )+1
              Av = 0.716

     Thus Vout is 71.6 mV. By inspection, Zin may be approximated as 2.2 M.

308
Example 11.4

     For the circuit shown in Figure 11.15, determine the input impedance and
     output voltage. Assume Vin = 100 mV, IDSS = 36 mA, VGS(off) = 3 V.

     This follower uses combination bias with a P-channel JFET. Note that the        Figure 11.15
     source is at the top. We'll find gm via the combination bias graph for k = 3    Circuit for Example 11.4.
     (k = VSS / VGS(off)).

              g m0 = 2 I DSS
                      V GS ( off )

              g m0 = 72 mA 3 V
              g m0 = 24 mS

     RS is 1.8 k, yielding 43.2 for gm0 RS. The normalized drain
     current from the k = 3 combination bias graph is
     approximately 0.17.

               gm = gm0   ID
                         I DSS

              g m = 24 mS 0.17

              g m = 9.9 mS

              Av = g m r S
                    gm rS +1

              Av = 9.9 mS(1 k  || 1.8 k ) 9.9 mS(1 k  || 1.8 k )+1
              Av = 0.864

     Thus Vout is 86.4 mV. By inspection, Zin may be approximated as 390 k.

11.5 Common Gate Amplifier

The common gate amplifier is analogous to the common base BJT amplifier. It
displays similar performance characteristics. An example of this amplifier is shown
in Figure 11.16. As with BJT version, we expect a non-inverting voltage gain, a low
Zin and a high Zout. In some respects, it can be considered as the opposite of the
common drain amplifier.

309
                                                                                                                     Figure 11.16
                                                                                                                     A common gate amplifier.

The input signal is presented to the source terminal while the output is taken from
the drain. This version uses self bias, but other biasing schemes are available and
may be used here as long as they do not have a grounded source terminal, such as
constant voltage bias.

Voltage Gain

In order to develop an equation for the voltage gain, Av, consider the simplified AC
prototype shown in Figure 11.17. There is a minor change of nomenclature in this
figure, namely that the voltage used for the controlled current source is defined as vsg
rather than as vgs. This is done to simplify the analysis because the input is applied
from source to gate. The practical effect of this change is that the direction of the
current source is now reversed, with current flowing out of the drain.

                                                                                                                     Figure 11.17
                                                                                                                     Common gate prototype.

We shall begin the analysis with the fundamental definition, namely that voltage
gain is the ratio of vout to vin, and proceed by expressing these voltages in terms of
their Ohm's law equivalents. Note that rgs may be approximated as infinite, while rs
and rd represent the simplified AC impedances at the source and drain, respectively.

310
                  Av = vout = v D     (11.8)
                        vi n vS

                  Av = iD r L
                         v SG

                  Av = gm vSG r L
                           vSG

                  Av = gm r L

Equation 11.8 is essentially the same as the gain equation derived for the non-
swamped common source amplifier; the notable change being the lack of the minus
sign indicating that this circuit does not invert the signal.

Input Impedance

Conveniently, the input impedance of the common gate amplifier is found in the
same manner as the output impedance of the common drain follower, as both
involve determining the impedance "looking into" the source terminal.

Referring to Figure 11.17, from the perspective of the signal generator, we find rS in
parallel with the impedance looking into the source terminal. The voltage at this
node is vSG and the current entering this node is iD. The ratio of the two must yield
the impedance looking into the source.

                  Z source = vSG      (11.9)
                             iD

                  Z source = vSG
                            g m v SG

                  Z source = 1
                            gm

Therefore, the input impedance is

                  Zi n = r S || 1     (11.10)
                               gm

Typically, this value will be far smaller than the input impedance of typical common
source amplifiers and common drain followers.

Output Impedance

The analysis of common gate input impedance is virtually identical to that of the
common drain amplifier. The result is replicated here for convenience.

                  Zout  RD            (11.11)

311
Example 11.5

For the amplifier shown in Figure 11.18, determine the input impedance and              Figure 11.18
output voltage. Assume Vin is 50 mV and gm = 5 mS.                                      Circuit for Example 11.5.

Note that this circuit uses self bias. Fortunately, we
already have the transconductance value stated in the
problem, and need not go through a complete bias
analysis. We'll begin with the voltage gain and
proceed to the output voltage.

              Av = gm rd
              Av = 5 mS(4.7 k  || 22 k )
              Av = 19.4

Thus Vout is 19.4 times 50 mV, or roughly 968 mV.
Now for the input impedance.

              Zi n = rS || 1      1
                           gm   5 mS

              Zi n = 1.5 k  ||
              Zi n = 176

11.6 Multi-stage and Combination Circuits

The rules for multi-stage circuits utilizing JFETs are the same as those discussed for
BJTs: Steps must be taken to ensure that the bias of one stage does not adversely
affect the bias of surrounding stages (typically by using coupling capacitors or going
to a DC coupled system), the load for a given stage will be the input impedance of
the following stage, the input impedance of the system will be the input impedance
of the first stage, and the system gain will be the product of the individual stage
gains.

Keeping those items in mind, there are no limits concerning mixing BJTs with JFETs,
or mixing N-channel with P-channel devices. There are certain practical issues,
however, that might dictate where certain devices are used. JFETs, due to their high
input impedance and modest gain potential, tend to be used at the front end of
amplifying systems. Their comparatively low self-noise is also a bonus at this
location. BJTs, on the other hand, have high gain potential and tend to be used in the
remaining stages. Their high distortion can be tamed through swamping.

312
To examine the possibilities, let's walk through the mixed, multi-stage amplifier
presented in Figure 11.19.

                                                                                        Figure 11.19
                                                                                        Two-stage JFET/BJT amplifier.

This amplifier uses a bipolar power supply which gives the designer a lot of
flexibility. The first stage consists of a JFET common source amplifier. It utilizes
combination bias (notice that RS is connected to the shared negative supply, VEE, that
also serves as VSS). CS bypasses the source resistor so this stage does not use
swamping. Distortion should not be an issue unless the input signal is fairly large.
The load for this stage is RD in parallel with the input impedance to the second stage
(coupling capacitor CC will appear ideally as a short for signal frequencies).

The second stage utilizes an NPN BJT configured as a swamped common emitter
amplifier. It utilizes two-supply emitter bias. Its input impedance is the parallel
combination of RB and Zin(base). The base input impedance, in turn, is a function of 
and RSW (r'e will have minimal impact due to the swamping resistor). The load for
this stage will be RL in parallel with RC. That value divided by RSW will yield the
approximate stage gain (once again, ignoring r'e). Although the second stage will be
dealing with a larger signal, distortion will be mitigated by the swamping resistor.

The system gain will be the product of the two stage gains. As they both invert the
signal, the inversion of the inversion will lead to an output signal that is in phase
with the input signal. The system input impedance will depend on the JFET first
stage and can be approximated to be equal to RG, at least at low frequencies.

313
11.7 Ohmic Region Operation                                                                 Figure 11.20
                                                                                            FET ohmic region.
As noted in the previous chapter, the JFET's operational curves span three regions.
Two have been discussed: the constant current region is where the normal amplifiers
and followers are biased, and breakdown is a region to be avoided due to potential
damage. The third region is known as the ohmic region, or triode region. It occurs in
the area where VDS is less than the pinch-off voltage, VP. In this area, the device
behaves more like a resistor than like a current source. If we were to examine a
family of drain curves, like those of Figure 10.3, and magnify the area near the
origin, we would see something like the plot in Figure 11.20.

                                           ID for VGS = 0 V
                                                                 for VGS = -.5 V

                                                                    for VGS = -1 V

for VGS = VGS(off)
  VDS

If VDS is a small value, typically less than 100 mV or so, each of the curves appears
as a straight line. Further, the slope of that line is a function of the gate-source
voltage, VGS. The closer VGS is to 0 V, the steeper the slope (violet line, labeled "for
VGS = 0 V") and the closer VGS is to VGS(off), the more shallow the slope (shorter dark
red line toward bottom). Finally, if VGS = VGS(off), the slope is nearly zero (aqua line,
nearly horizontal and straddling the VDS axis). Because this is a plot of drain current
versus drain-source voltage, the slope indicates the conductance of the channel. In
somewhat more useful terms, we can say that the reciprocal of the slope indicates
the resistance of the channel. Therefore, if VGS = 0 V, the channel resistance will be
at its minimum, and when VGS = VGS(off), the channel resistance will be at its
maximum. The maximum channel resistance can be quite high, well into the
hundreds of kilo-ohms. The minimum channel resistance varies considerably from
device to device. It is found on a data sheet as rDS(on). rDS(on) can be as small as a few
ohms for specialized JFETs and as large as hundreds of ohms for general purpose

314
devices.42 For example, the data sheet for the J111 series JFETs found in Figure 10.7
shows maximum values of 30 , 50  and 100  for the J111, J112 and J113,
respectively. The channel resistance does not follow a linear relation with VGS.

To be more specific, in this region the drain current no longer follows the
characteristic equation we used for biasing (Equation 10.1). The drain current
equation in the ohmic region is:

(( ) ) I D = V DS 2 I DSS- V DS
       VP                VP
1 - V GS                                                     (11.12)
     VP

Where VP = | VGS(off) | and VGS is to be taken as an absolute value and lies
between 0 and VP.

Recalling that, in general, rDS = VDS / ID, we can substitute Equation 11.12 for ID and,
after including the definition of gm0, arrive at an expression for rDS:

( ) r DS = V P
        gm0 V P -V GS - V DS 2

For small values of VDS, this reduces to a simple equation:

r DS = V P                                                   (11.13)

      gm0(V P -V GS)

What we have created here is voltage-controlled resistor. Equation 11.13 shows that
the resistance of the channel is a function of the gate-source voltage: the channel
resistance will be at its minimum (rDS(on)) when VGS = 0 V, and it approaches infinity
when VGS equals VGS(off). Generally, there are two applications that make use of the
ohmic region: an electronic rheostat/potentiometer and an analog switch. A simple
circuit that can be used for either application is shown in Figure 11.21.

                                                                                             Figure 11.21
                                                                                             Using the JFET as a voltage-
                                                                                             controlled resistor or switch.

42 rDS(on) can be as little as a few milliohms for specialized high power MOSFETs (Chapters
    12 and 13).

315
Note that no external bias is applied to the circuit. Instead, a control voltage, VC, is
applied to the gate and the input signal is applied to a resistor attached to the drain
terminal. The output is taken across the JFET's drain-source.

The idea behind this circuit is the basic resistive voltage divider. The JFET's channel
resistance, rDS, forms a voltage divider along with RD.

                               v out = V i n r DS
                                            r DS +RD

If rDS >> RD, vout approaches vin. Conversely, if rDS << RD, vout approaches zero.
Normally, RD is set somewhere between the maximum and minimum channel
resistances in order to obtain the widest range of operation.

As the control voltage VC is VGS, then VC controls the size of vout. If we set VC to 0 V,
rDS is very small and thus vout  0. On the other hand, if VC is set to a large negative
potential (beyond VGS(off)), then vout  Vin. If VC is set between these extremes then vout
will be somewhere in the middle range. If VC is continuously variable, then the
circuit behaves like a solid-state potentiometer. If, in contrast, VC is only set at the
limits, then the circuit behaves like a switch, either allowing or preventing the signal
from transferring through. This is known as an analog switch.

A single JFET/resistor combination as shown in Figure 11.21 will have limited
isolation as an analog switch and only a modest range of adjustment when used as a
voltage-controlled potentiometer. To improve performance, multiple circuits can be
cascaded or other JFETs can be added to create a "pi" attenuator network.

This voltage-controlled resistor has a huge advantage over traditional electro-
mechanical potentiometers and switches: speed. In this circuit, the resistance can be
changed at very high rates, essentially, as fast as VC can change. Consequently, it
would be no big deal to switch the input signal on and off at rates well over 100,000
times per second. No mechanical switch or potentiometer can hope to perform
anywhere near that speed, and any attempt to do so would lead to the devices
burning up from the friction. In general, flaming potentiometers are frowned upon
during the design and development process, although it would make a decent name
for an indie rock band. Another advantage is that a switch can be thrown "remotely",
that is, we only need to route the control voltage to the switch operator, not the
signal itself. This can reduce system noise. It's also easier to implement if the switch
is being "thrown" programmatically, such as via a microcontroller.

316
Example 11.6

     For the circuit shown in Figure 11.22, if the input signal is 50 mV, determine      Figure 11.22
     the output voltage for VC = 0 VDC and -6 VDC. Assume                                Circuit for Example 11.6.
     VGS(off) = -5 V, rDS(on) = 30  and rDS(off) = 800 k.

     For VC = 0 VDC, the channel resistance will be at its minimum of
     rDS(on).

              V out = V i n r DS (on)
                           R D+r DS (on )

              V out = 50 mV 30 10 k +30
              V out = 0.15 mV

     The signal has been reduced by a factor of over 330. That's not as
     good as a mechanical switch but if we cascaded two of these the overall
     reduction would be more than 100,000:1.

     For VC = -6 VDC, the channel resistance will be at its maximum of
     rDS(off).

              V out = V i n r DS (off )
                           R D+r DS (off )

              V out = 50 mV 800 k  10 k +800 k 
              V out = 49.4 mV

     This represents nearly 99% of the input signal, so the signal is passed
     through cleanly.

Computer Simulation

To verify the results of the preceding example, the circuit is entered into a simulator
as shown in Figure 11.23. A J111 JFET model is used which has parameters similar
to those used in the example.

317
                                                                                                                     Figure 11.23
                                                                                                                     Analog switch in simulator.

A transient analysis is run twice; the first time is with a control voltage of 0 V and
the second with a control voltage of -6 V. In the first case, the output should be just
a small residual and in the second, we should see the full input signal. The results of
the first trial are shown in Figure 11.24 while the second is shown in Figure 11.25.

                                                                                                                     Figure 11.24
                                                                                                                     Transient analysis using
                                                                                                                     VC = 0 V.

318
With VC at 0 V, the output trace (red, at node 2) is nearly flat. The precise value of its
peak is 0.167 mV, not far from the value calculated in Example 11.5.

                                                                                                                     Figure 11.25
                                                                                                                     Transient analysis using
                                                                                                                     VC = -6 V.

In contrast, when VC = -6 V the JFET is off, offering a high impedance and no loss
of signal. At first glance, it may appears as though the output trace is missing but
what has happened is that it is hidden behind the input trace (blue, node 1). The
amplitudes are virtually identical so the blue trace completely obscures the red trace.

Summary

JFETs can be used to create both voltage amplifiers and voltage followers. The
common source configuration is similar to the BJT's common emitter configuration.
It offers voltage gain with signal inversion. The amplifier can be built upon any of
the bias schemes presented in the preceding chapter. Biasing circuits that made use
of a source resistor, such as self bias and combination bias, may also use swamping.
Swamping will decrease available voltage gain but reduce distortion.
The JFET voltage follower, or source follower, is similar to the BJT's emitter
follower. It offers a voltage of gain of nearly unity without inversion, a high input
impedance and a low output impedance.

319
In general, JFETs do not offer as high of a gain as BJTs. The parameter comparable to
the BJT's r'e is the transconductance, gm. Further, they tend to offer very high input
impedance values compared to BJTs. This is due to using a reverse biased junction
instead of a forward biased junction.

JFETs can also be used in their ohmic region to create voltage-controlled resistances
and analog switches. A key parameter in these applications is the minimum channel
resistance, rDS(on).

Review Questions

    1. What are the functional differences between common source and common
         drain amplifiers?

    2. Compare and contrast common source amplifiers to common emitter
         amplifiers.

    3. Compare and contrast common drain followers to common collector
         followers.

    4. Compare and contrast common gate amplifiers to common base amplifiers.
    5. What is the ohmic region?
    6. What is an analog switch and how does it function?

Problems

Analysis Problems

    1. For the amplifier of Figure 11.26, determine Zin and Av. IDSS = 12 mA,
         VGS(off) = -2 V, VDD = 15 V, RG = 220 k, RD = 2 k, RL = 3.3 k,
         RS = 330 .

    2. For the amplifier of Figure 11.26, determine Zin and Vout. Vin = 50 mV,
         IDSS = 15 mA, VGS(off) = -3 V, VDD = 20 V, RG = 270 k, RD = 2 k,
         RL = 6.8 k, RS = 270 .

                                                                        Figure 11.26

320
    3. For the amplifier of Figure 11.27, determine Zin and Vout. Vin = 60 mV,
         IDSS = 10 mA, VGS(off) = -3 V, VDD = 20 V, VSS = -6 V, RG = 270 k,
         RD = 2 k, RL = 4 k, RS = 1.8 k, RSW = 200 .
                                                                        Figure 11.27

    4. For the amplifier of Figure 11.27, determine Zin and Av. IDSS = 12 mA,
         VGS(off) = -2 V, VDD = 18 V, VSS = -4 V, RG = 330 k, RD = 2.2 k,
         RL = 10 k, RS = 3 k, RSW = 100 .

    5. For the amplifier of Figure 11.28, determine Zin and Av. IDSS = 12 mA,
         VGS(off) = -2 V, VDD = 18 V, VEE = -4 V, RG = 390 k, RD = 2.2 k,
         RE = 1 k, RL = 20 k.
                                                                        Figure 11.28

321
    6. For the amplifier of Figure 11.28, determine Zin and Vout. Vin = 70 mV,
         IDSS = 12 mA, VGS(off) = -2 V, VDD = 18 V, VEE = -4 V, RG = 390 k,
         RD = 2.2 k, RL = 20 k.

    7. For the circuit of Figure 11.29, determine Zin and Av. IDSS = 12 mA,
         VGS(off) = -2 V, VDD = 10 V, RG = 220 k, RL = 3.3 k, RS = 330 .
                                                                        Figure 11.29

    8. For the circuit of Figure 11.29, determine Zin and Vout. Vin = 200 mV,
         IDSS = 15 mA, VGS(off) = -3 V, VDD = 12 V, RG = 270 k, RL = 1.8 k,
         RS = 270 .

    9. For the circuit of Figure 11.30, determine Zin and Vout. Vin = 100 mV,
         IDSS = 10 mA, VGS(off) = -3 V, VDD = 15 V, VSS = -6 V, RG = 470 k,
         RL = 4 k, RS = 1.8 k.
                                                                        Figure 11.30

    10. For the circuit of Figure 11.30, determine Zin and Av. IDSS = 18 mA,
         VGS(off) = -2 V, VDD = 14 V, VSS = -6 V, RG = 360 k, RL = 10 k, RS = 1 k.

    11. For the circuit of Figure 11.31, determine Vout. Vin = 100 mV, rDS(on) = 50 ,
         rDS(off) = 1 M, VGS(off) = -3 V, VC = -6 V, RG = 270 k, RD = 6.8 k.

322
    12. For the circuit of Figure 11.31, determine Vout. Vin = 100 mV, rDS(on) = 75 ,
         rDS(off) = 750 k, VGS(off) = -3 V, VC = 0 V, RG = 180 k, RD = 5.1 k.
                                                                        Figure 11.31

    13. For the circuit of Figure 11.32, determine the voltage gain and Vout. Assume
         Vin = 10 mV and gm = 2 mS.
                                                                        Figure 11.32

    14. For the circuit of Figure 11.32, determine the input and output impedances.
         Assume gm = 2 mS.

    15. For the circuit of Figure 11.33, determine the input and output impedances.
         Assume gm = 4 mS.

    16. For the circuit of Figure 11.33, determine the voltage gain and Vout. Assume
         Vin = 100 mV and gm = 4 mS.

323
                                                                        Figure 11.33

Design Challenge Problems
    17. Following the circuit of Figure 11.27, design an amplifier with a gain of at
         least 4 and an input impedance of at least 300 k. RL = 10 k. The JFET has
         the following parameters: VGS(off) = -2 V, IDSS = 15 mA. Try to use standard
         resistor values.
    18. Using the circuit of Figure 11.29, design a follower with a gain of at least
         0.7 and an input impedance of at least 500 k. RL = 1 k. The JFET has the
         following parameters: VGS(off) = -3 V, IDSS = 20 mA. Try to use standard
         resistor values.

Computer Simulation Problems
    19. Utilizing manufacturer's data sheets, find devices with the following
         specifications (typical) and verify them using the measurement techniques
         presented in the prior chapter. Device 1: VGS(off) = -2 V, IDSS = 15 mA.
         Device 2: VGS(off) = -3 V, IDSS = 20 mA.
    20. Using the device model from the preceding problem, verify the design of
         Problem 17.
    21. Using the device model from Problem 19, verify the design of Problem 18 .

324
12 Metal Oxide Semiconductor FETs

(MOSFETs)

12.0 Chapter Learning Objectives

After completing this chapter, you should be able to:

               Discuss the functional differences between MOSFETs and JFETs.
               Draw and explain a basic DC bias model for a MOSFET.
               Graph the transconductance curves for both DE-MOS and E-MOS transistors, and describe their

                   functional differences.
               Perform DC bias analysis on various MOSFET circuits.
               Explain necessary ESD precautions for MOS devices.

12.1 Introduction

The MOSFET shares many similarities with the JFET including very low gate current and being modeled as a
voltage-controlled current source. It is also available in N- and P-channel varieties. Unlike the JFET, it has two
variations: the depletion-enhancement mode variant, or DE-MOSFET; and the enhancement-only mode variant,
or E-MOSFET. All of the bias types discussed for JFETs will work for DE-MOSFETs, plus a few others. E-
MOSFETs, on the other hand, require new biasing prototypes.

For AC analysis, both common source and common drain amplifier topologies may be realized with DE- and E-
MOSFETs. The equations for input impedance, voltage gain and the like are generally unchanged from the JFET.
E-MOSFETs are also available as power devices. They have certain advantages over power BJTs, including
higher speed and a negative temperature coefficient of transconductance which means they are less likely to
suffer from thermal instabilities such as current hogging.

One item of practical importance is that MOSFETs are very susceptible to ESD (electrostatic discharge) and
special precautions must be taken to prevent accidental damage to the device. Unlike both the JFET and the BJT,
the MOSFET does not rely on a PN junction for its operation. Instead, it uses a charge-based system not unlike a
capacitor. The gate is, in fact, insulated from the channel. For this reason it is sometimes referred to as an IGFET,
which stands for Insulated Gate FET. This insulation layer will lead to very, very high input resistance due to
extremely low gate current but also leads to the issue of ESD susceptibility.

325
12.2 The DE-MOSFET

Like the JFET, the DE-MOSFET is based around the idea of modulating current flow
through the drain-source channel by generating a depletion layer from a gate-source
voltage. It achieves this through an entirely different process, though. To understand
how the device is constructed, a simplified functional drawing of an N-channel DE-
MOSFET is shown in Figure 12.1.

             metalization  Gate           insulating layer
             Source                                  Drain
                                                                                         Figure 12.1
                                                                                         DE-MOSFET internal structure.

                           N channel

                           P substrate

Here we see the N-type channel sitting on a P substrate. Drain and source leads are
attached to either end. Above the channel is a very thin insulating layer (silicon
dioxide is one possibility). Above this we have a metalization to which the gate
terminal is attached. Note that there is no PN junction involved with the gate. To this
we shall add external bias sources and limiting resistors, as shown in Figure 12.2.

     RG                    Gate                  depletion region  RD                    Figure 12.2
                                                                                         DE-MOSFET bias with electron
             Source        __ _ _  _   _  __  _  Drain                                   flow.
                           _ __     _  _

VGG      IS                + +++ ++                                          ID
                           ++                                          VDD
                                   + ++
                               +++

             N channel

                           P substrate

The dashed lines represent electron current flow as in our previous device analyses.
A positive supply, VDD, is attached to the drain via a limiting resistor. A second
supply, VGG, is attached to the gate. Gate current can be approximated as zero, so
VGS = VGG. If VGS is zero, a certain amount of current will flow through the channel
based on the channel's physical parameters and the applied drain-source potential.
For relatively low values of VDS, the channel will behave somewhat like a resistance.
This is the same ohmic region as seen with the JFET. As VDS increases, the channel
will saturate and begin to behave like a constant current source. If VDS is brought too
high, the drain current increases sharply as the device enters the breakdown region.
The general behavior mimics that of a JFET. Note that the current moves laterally,
across the device, so this type of construction is referred to as a lateral MOSFET.

326
If VGS is set to a modest negative voltage, a depletion region will develop inside the
channel. Basically, the gate is acting like one plate of a capacitor, the channel like
the other plate, and the insulating layer is the dielectric. Just like a capacitor, the
negative charge on the gate "plate" leads to an equivalent positive charge on the
channel "plate". As the channel is made of N-type material, this action creates a
region devoid of free charges, hence a depletion region. This depletion region will
lead to pinch-off sooner, and thus a lower current in the saturation region. The more
negative VGS is made, the greater the depletion region and the lower the
corresponding drain current. Eventually, if VGS is brought negative enough, the
channel will be blocked and no drain current will flow. This voltage is referred to as
VGS(off) (again). The current produced when VGS = 0 V is likewise referred to as IDSS.
This mode of operation is referred to as depletion mode because of the depletion
region that is created.

What makes the DE-MOSFET distinct from the JFET is what happens when VGS > 0
volts. In a JFET, this would forward bias the junction and control would be lost.
Here, however, a positive VGS simply reverses the polarities associated with the gate
and channel "plates". Thus, a positive VGS enhances channel conductivity and drain
current increases as VGS is brought more positive. This mode of operation is called
enhancement mode. This also means that IDSS is no longer the maximum drain
current of which the device is capable. A characteristic curve is shown in Figure
12.3, below.

           DE-MOSFET Characteristic Curve          4                                     Figure 12.3

                                                                                         Characteristic curve for DE-

                                                   3.5                                   MOSFET (note: this uses

                                                                                         -VGS/VGS(off) for the normalized

                                                   3                                     voltage so that the quadrants

                                                        Normalized Drain Current         do not appear reversed

                                                   2.5                                   compared to a typical device

                                                                                         curve).

                                                   2

                                                   1.5

                                                   1

                                                   0.5

-1   -0.5  0                               0.5  1  0

           Normalized Gate-Source Voltage

This curve is essentially the same curve as presented for the JFET with the exception
that it extends into the first quadrant. This makes the DE-MOSFET a unique device in
that it can operate in two different quadrants.

327
The device equation for operation when VDS > VP is also the same, but with an
extended range for VGS:

    ( ) V GS 2                                             (12.1)

I D = I DSS 1 -
                  V GS (off )

Where
VGS is the gate-source voltage (VGS(off)  VGS  VGS(max)),
ID is the drain current,
IDSS is the maximum current,
VGS(off) is the turn-off voltage.

VGS(max) may be found on a data sheet. Above this voltage the insulating layer will be
damaged and the device will cease to function properly. A typical value for this
might be in the range of 20 to 30 volts. The trick is that given the very small gate
current, even a simple electrostatic discharge can damage the device. It is very easy
to develop hundreds of volts static on the human body. In fact, it is generally not
noticeable until the potential reaches a few thousand volts (as in body hair standing
up). The consequence of this is that simply picking up the device could destroy it.43

There are a couple different ways of dealing with this issue. The first way is to add
back-to-back Zener diodes across the device during its manufacture. The problem
with this is that the diode leakage current will be greater than the gate current and
this degrades performance. The other technique is to prevent the charge from getting
to the device in the first place. For example, the MOSFET can be shipped in
conductive plastic (not to be confused with ordinary plastic or polystyrene foam).
Some devices are shipped with a metal shorting that encompasses all of the leads.
Also, during manufacture or prototyping, environmental controls are established to
minimize the creation of static charges, optimal humidity being important as one
example. Workers who handle devices may work on special conductive mats or wear
wrist straps that are attached to ground. These items are only mildly conductive, that
is, of high resistance, as it would not be safe to electrically ground a human working
in an electrical lab. The devices are conductive enough to bleed off static charge but
not so conductive as to present a shock hazard. Once installed on the circuit board,
normal ESD precautions apply.

As the device's characteristic equation has not changed, many of the items derived
for the JFET still apply to the DE-MOSFET. This includes the transconductance
equation plot found in Chapter 10.

43 Which brings to mind the old question of what to store a universal solvent in.
328
As the transconductance equation is unchanged with the exception of an extended
range for VGS, the definition for gm0 is also unchanged.

     g m0 = - 2 I DSS                (12.2)
               V GS ( off )          (12.3)

     ( ) g m = g m0 1 - V GS
                       V GS ( off )

It is worth noting that gm0 no longer represents the maximum device
transconductance because IDSS no longer represents the maximum drain current as
seen in Figure 12.3. To illustrate it another way,

      g m = g m0 I D                 (12.4)
                   I DSS

It is very important to watch the sign of VGS in Equation 12.3. In enhancement mode,      Figure 12.4
a positive VGS will lead to a gm greater than gm0 due to the double negative.             DE-MOSFET schematic
                                                                                          symbols. N-channel (left) and
The schematic symbols for the DE-MOSFET are shown in Figure 12.4. As is the               P-channel (right).
norm, the arrow points in the direction of N material, with the central vertical bar
representing the channel. The arrow is attached to the substrate. In some devices this
is brought out of the packaging as a fourth lead although in many it is simply tied
back to the source terminal as shown here. Finally, note how the gate terminal is not
drawn connected to the body of the device, emphasizing its isolated nature.

12.3 DE-MOSFET Biasing

As the characteristic equations of the JFET and DE-MOSFET are the same, the DC
biasing model is the same. Consequently, the DE-MOSFET can be biased using any
of the techniques used with the JFET including self bias, combination bias and
current source bias as these are all second quadrant biasing schemes (i.e., have a
negative VGS). The self bias and combination bias equations and plots from Chapter
10 may be used without modification. The DE-MOSFET also allows first quadrant
operation so a couple of new biasing forms become available: zero bias and voltage
divider bias. In reality, both are variations on constant voltage bias but which utilize
the first quadrant.

Zero Bias

Zero bias is unique. In some ways it can be thought of as a cross between self bias
and constant voltage bias. Like self bias, it does not require a second DC source for
the gate or source terminal. Like constant voltage bias, there is no need for a source

329
resistor, RS. A prototype of zero bias is shown in Figure 12.5. There is no question
that it is a minimal parts-count circuit.

Zero bias is so named because it operates at VGS = 0 V. Recall that the gate current is   Figure 12.5
ideally zero, thus there is no drop across RG and VG = 0 V as a consequence. The          Zero bias prototype.
source is tied directly to ground, therefore VGS must equal 0 V. As VGS doesn't change,
this can be thought of as a form of constant voltage bias. The interesting bit is that
when an AC signal is applied to the gate, its negative portion will pull the MOSFET
down into depletion mode and the positive portion will push the operation into
enhancement mode. Because the device can operate in this fashion, conducting
current while straddling zero, so to speak, DE-MOSFETs are sometimes referred to as
normally on devices.

Determining the operating point for zero bias is startlingly easy. Because VGS = 0 V,
ID must equal IDSS and gm must equal gm0. Like all constant voltage biasing schemes,
though, Q point stability is not very good. Another point to notice is that, as there is
no source resistor, this bias is only applicable to non-swamped common source
amplifiers. It cannot be used with a source follower or swamped amplifier (if a small
swamping resistor is inserted into the source, technically the circuit can be classified
as self bias, although the AC signal may still push operation into enhancement
mode).

Example 12.1

     Determine ID, VD and gm0 for the circuit shown in Figure 12.6. Assume                Figure 12.6
     IDSS = 12 mA and VGS(off) = -3 V.                                                    Circuit for Example 12.1.

     By inspection, as this is zero bias ID = IDSS, and therefore ID = 12 mA. Using
     KVL and Ohm's law we can find VD.

                           V D = V DD - I D R D
                           V D = 20 V-12 mA1 k 
                           V D =8V

                           g m0 = - 2 I DSS
                                     V GS ( off )

                           g m0 = - 212 mA -3 V
                           g m0 = 8 mS

330
Voltage Divider Bias                                                                   Figure 12.7
                                                                                       Voltage divider bias prototype.
Voltage divider bias is a form of constant voltage bias that operates in enhancement
mode. A prototype circuit is shown in Figure 12.7. Note that the source terminal is
connected directly to ground. This is important. If this was not the case, this would
be a form of combination bias (basically shifting the VSS supply up to ground and
then shifting the gate voltage from ground up to a positive VSS to maintain the same
differential voltage). As such, it would be operating in depletion mode.

The voltage divider comprised of R1 and R2 will establish a DC bias potential on the
gate. As the source is at ground, VGS = VG = VR2. Given that VDD must be positive,
then VGS must be positive, and enhancement mode operation is a given.

The most direct way to handle this is to determine the voltage divider potential and
use either the characteristic equation (Equation 10.1) or associated graph to
determine the drain current. Once ID is found, the drain-source voltage may be found
via the standard Ohm's law/KVL route.

Before continuing, note that the values of the divider resistors can be very high
without creating biasing problems (unlike the BJT version of voltage divider bias).
This is because the gate current is so small that even when using megohm values for
the divider, the loading caused by the gate will not be noticeable.

Example 12.2

     For the circuit of Figure 12.8, determine ID and VD. Assume IDSS = 2 mA and
     VGS(off) = -6 V.

     The voltage divider will yield VGS.                                               Figure 12.8
                                                                                       Circuit for Example 12.2.

     ( ) V GS = V DD                  R2
                                    R1 +R 2

     ( ) V GS = 20 V 2.5 M  10 M  +2.5 M 

     V GS = 4 V

     Use Equation 10.1 to find ID.

         ( ) V GS 2

     I D = I DSS 1 -
                       V GS (off )

     ( ) I D = 2 mA 1 - 4 V 2
                         -6 V
     I D = 5.56 mA

331
Use KVL and Ohm's law to find VD.

                     V D = V DD - I D RD
                     V D = 20 V-5.56 mA1.8 k 
                     V D = 9.99 V

Alternately, using the curve of Figure 12.3, we would first find the
normalized gate-source voltage which is 4 V/6 V or 0.667 (note that the
curve plots -VGS/VGS(off) so that the quadrants do not appear reversed). From
this the normalized drain current, ID/IDSS, may be determined to be
approximately 2.8, yielding a drain current of 5.6 mA.

12.4 The E-MOSFET

The E-MOSFET is available in both low power and high power versions. It operates
in enhancement mode (first quadrant) only. The construction of the low power
version is similar to that of the DE-MOSFET but with one important distinction. A
simplified cross-section of an N-channel E-MOSFET is shown in Figure 12.9.

  metalization        Gate         insulating layer                                      Figure 12.9
Source                                        Drain                                      E-MOSFET internal
                                                                                         structure.
                   N
                                   N

                      P substrate

In the E-MOSFET, the P material extends up through the channel and to the gate
insulating layer. This has the effect of preventing current flow with negative gate-
source voltages applied. Consequently, E-MOSFETs are sometimes referred to as
normally off devices. In fact, the E-MOSFET will not conduct if VGS is zero, or even
for small positive values of VGS. The P and N materials functionally create energy
hills or barriers that prevent current flow through the channel. This can be compared
to an NPN BJT that has an open base terminal: no collector current would flow
(unless the collector-emitter voltage exceeded the breakdown limit).

To understand how the E-MOSFET functions, refer to Figure 12.10. This diagram
shows the device with positive drain and gate supplies attached to it through limiting
resistors. The dashed lines indicate electron current flow. As with the DE-MOSFET,
the gate can be seen as one plate of a capacitor while the P material serves as the
other plate. A positive voltage on the gate will lead to a negative charge on the P
material side. If the charge is large enough, all of the holes in the P material can be
filled leaving the portion of the material situated near the isolation layer neutral

332
(neither P nor N). Any further increase in gate voltage injects more negative charge
into this region, this making it behave like N material. This is called an N-type
inversion layer and it allows a path for current to flow. The more positive we make
the gate voltage, the greater the effect, and the greater the current.

     RG               Gate  N type inversion layer RD                                      Figure 12.10
                                                                                           E-MOSFET bias with electron
              Source  + + + +++ + + + + +++ +  Drain                                       flow.

     VGG  IS          _ _ _ __ _ _ _                          ID
                      N _ _ __ _ _ N

                      P substrate VDD

The voltage where the current begins to flow is called the threshold voltage and is
usually denoted as VGS(th), although it is sometimes shortened to Vth or just Vt. Like
both the JFET and DE-MOSFET, the E-MOSFET drain curve family exhibits three
characteristic regions: the ohmic or triode region, the constant current or saturation
region, and the breakdown region.

The characteristic equation for the E-MOSFET operating in its constant current
region is given below. Like the other FETs examined, this is a square-law device.

              I D = k (V GS -V GS (th))2                      (12.5)

     Where
     ID is the drain current,
     VGS is the gate-source voltage (VGS(th)  VGS  BVGS),
     VGS(th) is the the threshold voltage,
     k is a device parameter (a constant, units of amps/volt2 or siemens/volt).

The derivative of Equation 12.5 yields the transconductance.

              g m = d I D = 2 k (V GS -V GS (th))             (12.6)
                     d V GS

Equation 12.5 is plotted in Figure 12.11. The normalized gate-source voltage is
VGS /VGS(th) and the normalized drain current is the ratio of ID to the current generated
when VGS is twice VGS(th). This curve is reminiscent of the characteristic curve of a
BJT. First, they are both in the first quadrant. Second, both curves exhibit an
increasing positive slope. Finally, the curves don't begin to "take off" until some
specific turn-on voltage is reached. In the case of the BJT, that voltage is
approximately 0.7 V for a silicon device. For the E-MOSFET, that voltage is VGS(th).
Obviously though, the MOSFET curve does not increase as rapidly as the BJT curve.

333
                          10 E-MOSFET Characteristic Curve                                Figure 12.11
                                                                                          Characteristic curve for
                           9                                                              E-MOSFET.
                           8

Normalized Drain Current  7

                          6

                          5

                          4

                          3

                          2

                          1

                          00  1                  2                      3  4

                                    Normalized Gate-Source Voltage

The power E-MOSFET utilizes a different construction from low power MOSFETs
and offers certain advantages over power BJTs including very fast switching speed
and lower drive current demands. Consequently, they tend to be favored over BJTs in
high power, high speed switching applications such as switching power supply
regulators, DC-to-DC converters and class D amplifiers (Chapter 14). These devices
also exhibit extremely low rDS(on) values, in some cases just a few milliohms. There
are different methods of construction, the most recent being the trench style. A
cutaway view is shown in Figure 12.12.

                                metalization          insulating layer                    Figure 12.12
                              Source          Gate                                        Construction of power
                                                                                          Trench E-MOSFET.

                                 P  N               N  P

                                              N

                                                           Drain

A power E-MOSFET is made of a large number of cells, each featuring the
U-shaped gate "trench" (an earlier style used a V-shaped trench). Note the location
of the drain, now opposite of the gate and source. The advantage here is that the
current flows vertically rather than laterally. This results in a much lower rDS(on) and
considerably greater current capacity. The characteristic curve still echoes that of
Figure 12.11 although it tends to be steeper when compared to low power devices.

334
12.5 E-MOSFET Data Sheet Interpretation

A data sheet for an E-MOSFET, the FDMS86180, is shown in Figure 12.13. This is
an N-channel, high power device using trench construction.

                                                                                                                     Figure 12.13a
                                                                                                                     FDMS86180 data sheet.

                                                                                                                                                   Used with permission from SCILLC dba
                                                                                                                                                   ON Semiconductor.

One of the first things that might jump out is the "100% RoHS Compliant" green
leaf logo in the upper center, meaning that the device meets the Restriction of
Hazardous Substances directive. The device comes in the flat, multi-pin Power 56
package and features an rDS(on) of just a few milliohms. Continuous current
335
capability at room temperature is 151 amps with a pulsed current maximum of 775        Figure 12.13b
amps. In Figure 12.13b we find a breakdown voltage of 100 volts and an IDSS of only    FDMS86180 data sheet
1 A. Recall that this is a normally off device, and thus IDSS represents a leakage     (cont).
current. Continuing, VGS(th) varies between 2.0 and 4.0 volts, with 3.2 volts being
typical. The forward transconductance, gm (here referred to as gFS) is 144 siemens at
a drain current of 67 amps. This is orders of magnitude greater than what we might
see with small signal devices. Turn-on and turn-off times are measured in the tens of
nanoseconds, verifying the high speed switching ability of the device.

336
A series of performance graphs are found in Figure 12.13c. In the upper left is a         Figure 12.13c
section of drain curves showing the ohmic region through VDS = 5 V. The plot              FDMS86180 data sheet (cont).
directly below this shows the increase in rDS(on) as temperature rises. There is about a
three-fold variation across the temperature range. At lower left is the characteristic
curve variation. Note that the curves are less steep as temperature increases, showing
a decrease in gm and thus, verifying a negative temperature coefficient of
transconductance.

337
12.6 E-MOSFET Biasing                                                                      Figure 12.14
                                                                                           Voltage divider bias for
As the E-MOSFET operates only in the first quadrant, none of the biasing schemes           E-MOSFET.
used with JFETs will work with it. First, it should be noted that for large signal
switching applications biasing is not much of an issue as we simply need to confirm
that there is sufficient drive signal to turn the device on. For linear amplifiers we can
use variations on constant voltage bias such as voltage divider bias, or on drain
feedback bias.

Voltage Divider Bias

Voltage divider bias is reminiscent of the divider circuit used with BJTs. Indeed, the
N-channel E-MOSFET requires that its gate be higher than its source, just as the NPN
BJT requires a base voltage higher than its emitter. The major differences between
the two are that the E-MOSFET's input gate current is negligible compared to base
current and that the gate-source voltage will be most likely higher than the 0.7 volt
drop seen across the base-emitter junction. Also, the gate-source voltage will not be
locked to a specific voltage but will vary depending on the remainder of the circuit.

The prototype for the voltage divider bias is shown in Figure 12.14. In general, the
layout it is the same as the voltage divider bias used with the DE-MOSFET. The
resistors R1 and R2 set up the divider to establish the gate voltage. As the source
terminal is tied directly to ground, this means that VGS = VG. The potential across R2
needs to be set above VGS(th) for proper operation in accordance with Equation 12.5.
Knowing the value of VG, either the characteristic equation or the corresponding
normalized drain current plot can be used to determine the drain current. The only
factor missing is the device constant, k. This can be computed for any particular
device based on the ID(on), VGS(on) coordinate pair specified in the data sheet (or
measured in lab). An example is shown in Figure 12.15.

     ID Figure 12.15
                                                                                        Coordinate pair on E-MOSFET
                                                                                        curve.

     ID(on)

             VGS(th) VGS(on) VGS

338
The constant k is found via a rearrangement of Equation 12.5:

k=                          I D(on )

                                                 2
    (V GS (on ) -V GS (th ))

This value can then be used for other biasing points.

Example 12.3                                                                            Figure 12.16a
         For the circuit and matching device curve of Figure 12.16, find ID and VDS.    Circuit for Example 12.3.

First find the value of k:

k=                          I D(on )

                                                 2
    (V GS (on ) -V GS (th ))

k = (3 V -2 V)2 6 mA

k = 6 mA/V2

Now determine the gate voltage:

V G = V DD R2                                                                            Figure 12.16b
             R1 +R 2                                                                     Device curve for Example
                                                                                         12.3.
V G = 25 V 1.5 M  10 M+1.5 M 
V G = 3.26 V                                                                            ID

The source is grounded so VGS = VG.

I D = k (V GS -V GS (th))2

I D = 6 mA/V (3.26 V -2 V)  2                          2

I D = 9.54 mA

V DS = V DD - I D RD                                                                    6 mA
V DS = 25 V-9.54 mA1.8 k 
V DS = 7.83 V

                                                                                              2 V  3 V VGS

In closing, note that it is possible to decouple the voltage divider using the same
method employed with BJTs in Figure 7.13. Very large value resistors are available
in only a limited variety of sizes so this technique has an added benefit. The divider
resistors can use more convenient sizes because R1 and R2 will not set the input
impedance; it will be set by the decoupling resistor.

339
Drain Feedback Bias

Drain feedback bias utilizes the aforementioned "on" operating point from the
characteristic curve. The idea is to establish a drain current via an appropriate
selection of the drain resistor and power supply. The prototype of the drain feedback
circuit is shown in Figure 12.17.

This is relatively simple layout using few components. The key to understanding its    Figure 12.17
operation is the KVL summation:                                                        Drain feedback bias
                                                                                       prototype.
                     V DD = V RD+V RG+V GS
                     V DD = I D RD +I G RG +V GS

Gate current is negligible which means that

                     V DD = I D RD +V GS
                     and also
                     V DS = V GS

Therefore,

                     V GS = V DS = V DD -I D RD                             (12.7)

Equation 12.7 can be used as the basis for the design of the bias circuit.

Example 12.4

     Utilizing the prototype of Figure 12.17, determine values for RD and RG such
     that the drain current is 8 mA. Assume VDD = 20 V, ID(on) = 5 mA at VGS(on) = 4
     V, and VGS(th) = 2.5 V.

     First find the value of k:

                     k=          I D( on)

                                                      2
                         (V GS (on) -V GS (th))

                     k = (4 V -2.5 V)2 5 mA

                     k = 2.22mA/V 2

     Now determine the required VGS to obtain 8 mA of drain current by
     rearranging Equation 12.5.

340
And finally,   I D = k (V GS -V GS (th))2

               V GS = V GS(th)+ I D k
               V GS = 2.5 V+ 2.22 mA/V2 8 mA

              V GS = 4.4 V

              V GS = V DS = V DD -I D RD
              RD = V DD -V GS

                          ID
              RD = 20 V -4.4 V 8 mA
              RD = 1.95 k 

Summary

There are two types of MOSFETs: the depletion-enhancement or DE-MOSFET and
the enhancement-only or E-MOSFET. Both devices are constructed using an
insulated gate instead of a PN junction and both devices exhibit a square-law
characteristic curve. Like the JFET, MOSFETs are modeled as voltage-controlled
current sources. Both devices show very, very small gate currents due to the
insulated gate. They are static sensitive and precautions must be taken when
handling them to avoid damage from ESD.

The DE-MOSFET exhibits the same characteristic curve as the JFET, however, the
curve extends into the first quadrant (enhancement mode). Consequently, IDSS is no
longer the largest drain current possible, but rather, represents a middle ground. The
DE-MOSFET can utilize all of the bias prototypes that are used with JFETs, including
self bias, constant current bias and combination bias. Due to its dual quadrant
capability, other biasing types are also possible including zero bias and voltage
divider, both of which are variations on constant voltage bias.

The E-MOSFET operates in the first quadrant only (enhancement mode). Compared
to the DE-MOSFET, its characteristic curve is shifted positive such that VGS(off) is now
VGS(th), and IDSS signifies the off-state leakage current. E-MOSFETs are available in
both low power and high power variants. The high power versions utilize an
alternate internal structure that allows drain current to flow vertically rather than
horizontally. This results in very high current carrying ability and very low values
for rDS(on).

341
Review Questions

    1. What are the differences between JFETs and MOSFETs?
    2. What are the differences between DE-MOSFETs and E-MOSFETs?
    3. Why are MOSFETs sometimes referred to as "Insulated Gate" or IGFETs?
    4. How does the DC bias model of the MOSFET compare to that of the BJT?
    5. What biasing circuits are available for use with the DE-MOSFET?
    6. What biasing circuits are available for use with the E-MOSFET?
    7. What is "trench" construction and where is it used?
    8. Explain typical precautions taken when handling MOSFETs and why they

         are necessary.

Problems

Analysis Problems
    1. For the circuit of Figure 12.18, determine ID, VG and VD. IDSS = 20 mA,
         VGS(off) = -6 V, VDD = 15 V, RG = 470 k, RS = 1.2 k, RD = 1.8 k.
    2. For the circuit of Figure 12.18, determine ID, VDS and VD. IDSS = 20 mA,
         VGS(off) = -5 V, VDD = 30 V, RG = 560 k, RS = 420 , RD = 1.5 k.

                                                                        Figure 12.18

    3. For Figure 12.19, determine ID, VG and VD. IDSS = 15 mA, VDD = 25 V,
         VGS(off) = -3 V, VSS = -6 V, RG = 820 k, RS = 2 k, RD = 3.6 k.

    4. For the circuit of Figure 12.19, determine ID, VDS and VD. IDSS = 18 mA,
         VGS(off) = -3 V, VDD = 30 V, VSS = -9 V, RG = 910 k, RS = 1.2 k,
         RD = 2.7 k.

    5. For the circuit of Figure 12.20, determine ID, VG and VD. IDSS = 12 mA,
         VGS(off) = -4 V, VDD = 35 V, RG = 680 k, RD = 1.8 k.

342
                                                                        Figure 12.19

    6. For the circuit of Figure 12.20, determine ID, VDS and VD. IDSS = 8 mA,
         VGS(off) = -2 V, VDD = 30 V, RG = 750 k, RD = 2.7 k.
                                                                        Figure 12.20

    7. For the circuit of Figure 12.21, determine ID, VG and VD. IDSS = 8 mA,
         VGS(off) = -4 V, VDD = 30 V, R1 = 2.7 M, R2 = 110 k, RD = 470 .

    8. For the circuit of Figure 12.21, determine ID, VDS and VD. IDSS = 12 mA,
         VGS(off) = -6 V, VDD = 20 V, R1 = 2 M, R2 = 100 k, RD = 680 .

    9. For the circuit of Figure 12.22, determine ID, VG and VD. ID(on) = 8 mA,
         VGS(on) = 5 V, VGS(th) = 3 V, VDD = 30 V, R1 = 2 M, R2 = 330 k,
         RD = 1.2 k.

    10. For the circuit of Figure 12.22, determine ID, VDS and VD. ID(on) = 12 mA,
         VGS(on) = 6 V, VGS(th) = 2.5 V, VDD = 25 V, R1 = 1.5 M, R2 = 470 k,
         RD = 680 .

343
                                                                        Figure 12.21

                                                                        Figure 12.22

    11. For the circuit of Figure 12.23, determine ID, VG and VD. IDSS = 12 mA,
         VGS(off) = 2 V, VDD = -25 V, RG = 470 k, RS = 800 , RD = 1.8 k.

    12. For the circuit of Figure 12.23, determine ID and VD. IDSS = 10 mA,
         VGS(off) = 2 V, VDD = -20 V, RG = 560 k, RS = 680 , RD = 1.5 k.
                                                                        Figure 12.23

344
    13. For the circuit of Figure 12.24, determine ID, VG and VD. IDSS = 14 mA,
         VGS(off) = 3 V, VDD = -25 V, VSS = 6 V, RG = 780 k, RS = 2 k, RD = 3.3 k.
                                                                        Figure 12.24

    14. For the circuit of Figure 12.24, determine ID and VD. IDSS = 16 mA,
         VGS(off) = 3.5 V, VDD = -20 V, VSS = 7 V, RG = 1 M, RS = 1.5 k,
         RD = 2.2 k.

    15. For the circuit of Figure 12.25, determine ID and VD. IDSS = 11 mA,
         VGS(off) = 2 V, VDD = -24 V, RG = 750 k, RD = 1.2 k.

    16. For the circuit of Figure 12.25, determine ID and VD. IDSS = 9 mA,
         VGS(off) = 3 V, VDD = -18 V, RG = 430 k, RD = 910 .
                                                                        Figure 12.25

Design Problems
    17. Using the circuit of Figure 12.18, determine a value for RS to set ID to
         4 mA. IDSS = 10 mA, VGS(off) = -2 V, VDD = 18 V, RG = 470 k, RD = 1.5 k.

345
                                                                        Figure 12.26

    18. For the circuit of Figure 12.26, determine RD and RG to set ID = 10 mA.
         ID(on) = 15 mA, VGS(on) = 6 V, VGS(th) = 2 V, VDD = 20 V.

    19. For the circuit of Figure 12.26, determine RD and RG to set ID = 15 mA.
         ID(on) = 10 mA, VGS(on) = 5 V, VGS(th) = 2 V, VDD = 25 V.

Challenge Problems
    20. Using the circuit of Figure 12.19, determine values for RD, RS and VSS to set
         ID to 5 mA and VD to 20 V. IDSS = 15 mA, VGS(off) = -3 V, VDD = 30 V,
         RG = 560 k.
    21. Using the circuit of Figure 12.27, determine values for RD to set VD to 15 V.
         IDSS = 10 mA, VGS(off) = 3 V, VSS = 25 V, RG = 680 k.

                                                                        Figure 12.27

346
Comic courtesy of xkcd.com

347
13 MOSFET Small Signal Amplifiers

13.0 Chapter Learning Objectives

After completing this chapter, you should be able to:

               Draw and explain a basic AC model for a MOSFET.
               Analyze basic MOSFET amplifiers for voltage gain, input impedance and output impedance.
               Analyze basic MOSFET voltage followers for voltage gain, input impedance and output

                   impedance.

13.1 Introduction

MOSFETs can be used to create both common source voltage amplifiers and common drain voltage followers
(i.e., source followers). Both circuits offer the potential for very high input impedance due to the extremely low
gate current MOSFETs provide. As with JFET amplifiers, at higher frequencies input capacitance dominates and
reduces the input impedance. Not all bias prototypes lend themselves to all possible AC circuits. For example,
zero bias for a DE-MOSFET is not suitable for followers or swamped amplifiers as it lacks a source resistor. The
same is true for voltage divider biasing used with both DE- and E-MOSFETs. These biasing schemes are suitable
for non-swamped amplifiers, though.

In general, MOSFET amplifiers tend to have good high frequency performance, offer low noise and exhibit low
distortion with modestly sized input signals. Compared to BJTs, their voltage gain magnitude is lower.

A key parameter in determining gain is the device's transconductance, gm. Transconductance varies widely
depending on the kind of MOSFET used. A small signal DE-MOSFET may exhibit a transconductance of just a
few millisiemens. In contrast, a high power E-MOSFET may exhibit a transconductance of over 100 siemens.

13.2 MOSFET Common Source Amplifiers

Before we can examine the common source amplifier, an AC model is needed for both the DE- and E-MOSFET. A
simplified model consists of a voltage-controlled current source and an input resistance, rGS. This model is
shown in Figure 13.1. The model is essentially the same as that used for the JFET. Technically, the gate-source
resistance is higher in the MOSFET due to the insulated gate, and this is useful in specific applications such as in
the design of electrometers, but for general purpose work it is a minor distinction. The impedance associated
with the current source is not shown as it is typically large enough to ignore. Similarly, the device capacitances
are not shown. It is worth noting that the capacitances associated with small signal devices might be just a few
picofarads, however, a power device might exhibit values of a few nanofarads.

348
As the device model is the same for both DE- and E-MOSFETs, the analysis of                 Figure 13.1
voltage gain, input impedance and output impedance will apply to both devices. The          AC device model for MOSFETs.
only practical differences will be how the transconductance is determined, and
circuit variations due to the differing biasing requirements which will effect the
input impedance. In fact, there will be a great uniformity between JFET-based
circuits and DE-MOSFET circuits operating in depletion mode.

An AC equivalent of a swamped common source amplifier is shown in Figure 13.2.
This is a generic prototype and is suitable for any variation on device and bias type.
Ultimately, all of the amplifiers can be reduced down to this equivalent, occasionally
with some resistance values left out (either opened or shorted). For example, if the
amplifier is not swamped then rS = 0. Similarly, rG might correspond to a single gate
biasing resistor or it might represent the equivalent of a pair of resistors that set up a
gate voltage divider.

                                                                                            Figure 13.2
                                                                                            Generic common source
                                                                                            amplifier equivalent.

Voltage Gain

In order to derive an equation for the voltage gain, we start with its definition,
namely that voltage gain is the ratio of vout to vin. We then proceed by expressing
these voltages in terms of their Ohm's law equivalents. Note that rL can also be
called rD.

              Av = vout = v L = vD   (13.1)
                    vin vG vG

              Av = -iD rL
                    iD r S +vGS

              Av = - gm vGS r L
                    gm vGS r S +vGS

              Av = - g m r L
                      gm rS+1

349
or, if preferred

                  Av = - g m r D       (13.1b)
                          gm rS+1

This is the general equation for voltage gain. If the amplifier is not swamped then
the first portion of the denominator drops out and the gain simplifies to

                  Av = -gm rL          (13.2)

or alternately

                  Av = -gm rD          (13.2b)

The swamping resistor, rS, plays the same role here as it did with both the BJT and
JFET. Swamping helps to stabilize the gain and reduce distortion, but at the expense
of voltage gain.

Input Impedance

Referring back to Figure 13.2, the input impedance of the amplifier will be rG in
parallel with the impedance looking into the gate terminal, Zin(gate). At a minimum this
will be rGS (it is somewhat higher when swamped but this can be ignored in most
cases). At low frequencies rGS is very large, perhaps as high as 1012 ohms. In most
practical circuits, rG will be much lower, hence

                  Zin = rG || rGS  rG  (13.3)

It is important to reiterate that rG is the equivalent resistance seen prior to the gate  Figure 13.3
terminal that is seen from the vantage point of Vin. In the case of self bias,            Decoupled voltage divider.
combination bias, zero bias and constant current bias, this will be the single biasing
resistor RG. For simple voltage divider biasing, rG will be the parallel combination of
the two divider resistors (i.e., R1 || R2). For decoupled voltage divider biasing, as
shown in Figure 13.3, rG will be the decoupling resistor (i.e., R3) that is connected
between the divider and the gate. This is because the divider node is bypassed to
ground via a capacitor. Finally, for drain feedback biasing, rG is the Millerized RG
that bridges the drain and gate.

Output Impedance

The derivation of output impedance is unchanged from the JFET case. From the
perspective of the load, the output impedance will be the drain biasing resistor, RD,
in parallel with the internal impedance of the current source within the device
model. RD tends to be much lower than this, and thus, the output impedance can be
approximated as RD.

350
Therefore we may state

                        Zout = rmodel || RD  RD                         (13.4)

At this point, a variety of examples are in order to illustrate some of the myriad
combinations.

Example 13.1

     For the amplifier in Figure 13.4, determine the input impedance and load       Figure 13.4
     voltage. Vin = 20 mV, VDD = 20 V, RG = 1 M, RD = 1.8 k, RSW = 20 ,             Circuit for Example 13.1.
     RS = 400 , RL = 12 k, IDSS = 40 mA, VGS(off) = -1 V.

     This is a swamped common drain amplifier utilizing self bias. Zin
     can be determined via inspection.

                        Zi n = Z i n(gate) || RG
                        Zin  1 M

     To find the load voltage we'll need the voltage gain, and to find
     the gain we'll first need to find gm0.

                        g m0 = - 2 I DSS
                                  V GS ( off )

                        g m0 =- 80 mA -1 V
                        g m0 = 80 mS

     The combined DC value of RS is 420 , therefore gm0RS = 33.6. From the self
     bias equation or graph this produces a drain current of 1.867 mA.

                        g m = g m0 I D

                            I DSS

                         g m = 80 mS 1.867 mA 40mA

                        g m = 17.3mS

     The swamping resistor, rS, is 20 . The voltage gain is

                        Av = - g m r L
                                 gm r S +1

                        Av =-17.3 mS(1.8 k  || 12 k ) 17.3 mS20 +1
                        Av = -20.1

351
     And finally

                  V load = Av V i n
                  V load =-20.120 mV
                  V load = 402 mV

Computer Simulation

The amplifier of Example 13.1 is simulated to verify the results. The circuit is
entered into the simulator as shown in Figure 13.5. One issue is finding an
appropriate DE-MOS device to match the parameters used in the example. The
BSS229 proves to be reasonably close. This device model was tested for IDSS by
applying a 20 volt source to the drain and shorting the source and gate terminals to
ground in the simulator. The current was just under the 40 mA target. Similarly, a
negative voltage was attached to the gate and adjusted until the drain current
dropped to nearly zero in order to determine VGS(off). The model's value was just under
the desired -1 volt. Consequently, we can expect the simulation results to be close to
those predicted, although not identical.

                                                                                                                     Figure 13.5
                                                                                                                     The circuit of Example 13.1
                                                                                                                     in the simulator.

352
The transient analysis is run next and is shown in Figure 13.6. The expected signal
inversion is obvious. The peak amplitude is 417 mV, just a few percent higher than
the calculated value. At least some of this deviation is due to the model's variation
from the assumed device parameter values.

                                                                                                                     Figure 13.6
                                                                                                                     Transient analysis simulation
                                                                                                                     for the circuit of Example 13.1.

A DC bias check is also performed. The drain current was calculated to be
1.867 mA. This yields an RD voltage of a little over 3 volts, thus we expect to see a
drain voltage of about 17 volts. Similarly, we would expect the source terminal to be
sitting at around 700 to 800 mV and the gate at about 0 V.
The results of the DC operating point simulation are shown in Figure 13.7. The
agreement with the predicted values is quite good, especially considering that the
device model is not a perfect match.

353
                                                                           Figure 13.7
                                                                           DC bias simulation for the
                                                                           circuit of Example 13.1.

Example 13.2

     For the circuit of Figure 13.8, determine the voltage gain and input
     impedance. Assume VGS(th) = 2 V, ID(on) = 50 mA at VGS(on) = 5 V.

     First find the value of k:                                            Figure 13.8
                                                                           Circuit for Example 13.2.
                                 I D(on )
              k=
                                                      2
                  (V GS (on ) -V GS (th ))

              k = (5 V -2 V)2 50mA

              k = 5.56 mA/V2

     This circuit uses power supply decoupling. The voltage
     drop across the 2 M resistor is small enough to ignore
     as the current passing through it is gate current.
     Therefore the gate voltage is determined by the divider.
     Also, as the left end of the 2 M resistor is tied to an AC
     ground due to the bypass capacitor, it represents the
     input impedance.

              Zin = 2 M || Zin(gate)  2 M

              V G = V DD R2
                           R1 +R 2

              V G = 24 V 5.6 k  47k +5.6 k 
              V G = 2.56 V

354
     The source is grounded so VGS = VG.

                           I D = k (V GS -V GS (th))2
                           I D = 5.56 mA/V2(2.56 V -2 V )2
                           I D = 1.74 mA

                           g m = 2 k (V GS -V GS (th))
                           g m = 25.56 mA/V2(2.56 V -2 V)
                           g m = 6.23 mS

     This amplifier is not swamped so the simplified gain equation may be used.

                           Av = - gm r D
                           Av =-6.23mS (3.3 k  || 10 k )
                           Av =-15.5

Example 13.3                                                                     Figure 13.9
                                                                                 Circuit for Example 13.3.
         For the circuit of Figure 13.9, determine the voltage gain and input
         impedance. Assume VGS(off) = -0.75 V and IDSS = 6 mA.

         This amplifier uses zero bias, therefore ID = IDSS and gm = gm0.

                               g m0 = - 2 I DSS
                                          V GS (off )

                               g m0 =- 26 mA -0.75 V
                               g m0 = 16 mS

         This amplifier is not swamped so we may use the simplified
         equation for voltage gain.

                               Av = - gm rD
                               Av =-16 mS (2.7 k  || 15k )
                               Av = -36.6

         Finally, for the input impedance we have

                                Zin = 5 M || Zin(gate)  5 M

355
13.3 MOSFET Common Drain Followers

As discussed under the section on JFETs, the common drain amplifier is also known
as the source follower. The prototype amplifier circuit with device model is shown in
Figure 13.10. As with all voltage followers, we expect a non-inverting voltage gain
close to unity with a high Zin and a low Zout.

                                                                                                                     Figure 13.10
                                                                                                                     Common drain (source
                                                                                                                     follower) prototype.

As is usual, the input signal is applied to the gate terminal and the output is taken
from the source. Because the output is at the source, biasing schemes that have the
source terminal grounded, such as zero bias and voltage divider bias, cannot be used.

Voltage Gain

The voltage gain equation for the common drain follower is developed as follows:
We begin with the fundamental definition that voltage gain is the ratio of vout to vin,
and proceed by expressing these voltages in terms of their Ohm's law equivalents.
The load is now located at the MOSFET's source, and thus can be referred to as either
rL or rS.

              Av = vout = v S = vL  (13.5)
                    vin vG vG

              Av = iD rL
                    iD r L+vGS

              Av = gm v GS r L
                    gm vGS r L+vGS

              Av = g m r L
                    gm r L+1

356
or, if preferred

                  Av = gm r S          (13.5b)
                         g m r S +1

If gmrS >> 1, the voltage gain will be very close to unity; a desired outcome.

Input Impedance

The analysis for source follower's input impedance is virtually identical to that for
the common source amplifier. The same commentary applies regarding the
simplification of gate biasing resistors to arrive at the value of rG.

                  Zin = rG || rGS  rG  (13.6)

Output Impedance

In order to determine the output impedance, we modify the circuit of Figure 13.10
by separating the load resistance from the source bias resistor. This is shown in
Figure 13.11.

                                                                                       Figure 13.11
                                                                                       Source follower output
                                                                                       impedance analysis.

Looking back into the source from the perspective of the load we find that the source
biasing resistor, RS, is in parallel with the impedance looking back into the source
terminal.

                             Zout = RS || Zsource

357
To find Zsource, note that the voltage at the source is vGS and the current entering this
node is iD. The ratio of the two will yield the impedance looking back into the
source.

              Z source = vGS           (13.7)
                         iD

              Z source = vGS
                        g m v GS

              Z source = 1
                        gm

Therefore, the output impedance is

              Zout = RS || 1           (13.8)
                             gm

Looking at Equation 13.8 it is obvious that the higher the transconductance, the
lower the output impedance. As noted earlier, a large transconductance also means
that the voltage gain will be close to unity. As a general rule then, a large
transconductance is desired for the source follower.

Time for a few illustrative examples.

Example 13.4

     For the circuit of Figure 13.12, determine the voltage gain and input                 Figure 13.12
     impedance. Assume VGS(off) = -0.8 V and IDSS = 30 mA.                                 Circuit for Example 13.4.

     This amplifier uses self bias so we need to determine gm0RS.

                           g m0 = - 2 I DSS
                                      V GS ( off )

                           g m0 = -230 mA -0.8 V
                           g m0 = 75 mS

     The DC source resistance is the 270  biasing resistor
     resulting in gm0 RS = 16.2. From the self bias equation or
     graph this produces a drain current of 2.61 mA.

358
                           g m = g m0 I D

                I DSS

             g m = 75 mS 2.61 mA 30 mA

                           g m = 22.1 mS

     The voltage gain is

                           Av = gmrS
                                  g m rS +1

                           Av = 22.1 mS(270 || 150 ) 22.1 mS(270  || 150) +1
                           Av = 0.68

     Finally, for the input impedance we have

                           Zin = 1.2 M || Zin(gate)  1.2 M

Example 13.5

     For the circuit of Figure 13.13, determine the voltage gain and input       Figure 13.13
     impedance. Assume VGS(off) = -2.5 V and IDSS = 80 mA.                       Circuit for Example 13.5.

     This follower uses a P-channel device with combination bias. Note that the
     source terminal is toward the top of the schematic. First, determine gm0RS
     and the bias factor, k. Then the combination bias equation can be used to
     determine the drain current.

                           g m0 = - 2 I DSS
                                      V GS ( off )

                           g m0 = -280 mA -2.5 V
                           g m0 = 64 mS

     The DC source resistance is the 1.8 k biasing resistor
     resulting in gm0 RS = 115.2. The bias factor is VSS/VGS(off), or 4.
     The combination bias equation (Equation 10.9) yields
     ID= 6.67 mA.

     We can now find the transconductance and voltage gain.

359
                      g m = g m0 I D

           I DSS

        g m = 64 mS 6.67 mA 80mA

                      g m = 18.5 mS

The voltage gain is

                      Av = g m r S
                             gm r S+1

                      Av = 18.5 mS (1.8 k  || 800) 18.5 mS(1.8 k  || 800 ) +1
                      Av = 0.91

Lastly, the input impedance is

                      Zin = 560 k || Zin(gate)  560 k

13.4 MOSFET Common Gate Amplifiers

Like the common source and common drain amplifiers, the analysis of MOSFET
common gate amplifiers follows that of the JFET counterpart. The main point to note
is that some biasing forms are not allowed as they ground the source terminal, which
would short out the input signal, rendering the amplifier useless. These biasing
forms include zero bias and voltage divider bias for the DE-MOSFET, and both the
voltage divider and drain feedback bias forms for the E-MOSFET. For the most part,
this leaves self and combination biasing with DE-MOSFETs. The relevant AC
equations are reproduced below, for convenience.

Av = gm rL                                                                      (13.9)
Zi n = RS || 1                                                                  (13.10)
                                                                                (13.11)
              gm

Zout  RD

Summary

DE- and E-MOSFET devices may be used to create both common source voltage
amplifiers and common drain voltage followers. The common source amplifiers may
be swamped or non-swamped, depending on the bias form used. If the bias type does
not utilize a source resistor, swamping is not available. This includes zero bias for
the DE-MOSFET and voltage divider bias for both the DE- and E-MOSFET.

360
Like their JFET counterparts, MOSFET common source amplifiers exhibit moderate
inverting voltage gain, very high input impedance and moderate output impedance.
The input impedance is a function of the biasing resistor configuration situated in
front of the gate as the impedance looking into the gate itself is very, very high at
low frequencies.

The MOSFET common drain followers also behave similarly to the JFET version.
Again we see a non-inverting voltage gain approaching unity, a very high input
impedance and a low output impedance. The higher the transconductance is, the
closer the gain will be to unity and the lower the output impedance will be.

Review Questions

    1. How well does the MOSFET voltage amplifier compare to its JFET
         counterpart?

    2. How well does the MOSFET source follower compare to its JFET
         counterpart?

    3. What are the practical differences between a voltage amplifier using a DE-
         MOSFET versus using an E-MOSFET ?

    4. It has been stated that a source follower cannot be made using a standard
         zero biased DE-MOSFET. Why is this?

    5. It has been stated that a swamped voltage amplifier cannot be made using a
         standard voltage divider biased E-MOSFET. Why is this?

Problems

Analysis Problems

    1. For the amplifier of Figure 13.14, determine Zin and Av. Vin = 20 mV,
         IDSS = 10 mA, VGS(off) = -2 V, VDD = 20 V, RG = 750 k, RD = 2 k,
         RL = 4 k, RS = 1 k, RSW = 200 .

    2. For the amplifier of Figure 13.14, determine Zin and Vout. Vin = 25 mV,
         IDSS = 15 mA, VGS(off) = -2 V, VDD = 22 V, RG = 330 k, RD = 2 k,
         RL = 6 k, RS = 510 , RSW = 220 .

    3. For the circuit of Figure 13.15, determine Zin and Av. Vin = 10 mV,
         IDSS = 12 mA, VGS(off) = -2.5 V, VDD = 26 V, RG = 510 k, RD = 1.2 k,
         RL = 25 k.

361
                                                                        Figure 13.14

    4. For the circuit of Figure 13.15, determine Zin and Vout. Vin = 25 mV,
         IDSS = 15 mA, VGS(off) = -1.5 V, VDD = 24 V, RG = 820 k, RD = 1 k,
         RL = 12 k.
                                                                        Figure 13.15

    5. For the circuit of Figure 13.16, determine Zin and Vout. Vin = 25 mV,
         IDSS = 8 mA, VGS(off) = -3.5 V, VDD = 24 V, R1 = 1 M, R2 = 100 k,
         RD = 800 , RL = 10 k.

    6. For the circuit of Figure 13.16, determine Zin and Av. Vin = 10 mV,
         IDSS = 6 mA, VGS(off) = -4 V, VDD = 26 V, R1 = 2 M, R2 = 120 k,
         RD = 1.2 k, RL = 15 k.

362
                                                                        Figure 13.16

    7. For the circuit of Figure 13.17, determine Zin and Vout. Vin = 20 mV,
         ID(on) = 6 mA at VDS(on) = 3 V, VGS(th) = 2.5 V, VDD = 34 V, R1 = 1 M,
         R2 = 100 k, RD = 1 k, RL = 10 k.

    8. For the circuit of Figure 13.17, determine Zin and Av. Vin = 15 mV,
         ID(on) = 10 mA at VDS(on) = 4 V, VGS(th) = 2 V, VDD = 30 V, R1 = 2 M,
         R2 = 180 k, RD = 1.2 k, RL = 15 k.
                                                                        Figure 13.17

    9. For the circuit of Figure 13.18, determine Zin and Vout. Vin = 200 mV,
         IDSS = 15 mA, VGS(off) = -3 V, VDD = 15 V, RG = 910 k, RL = 10 k,
         RS = 330 .

    10. For the circuit of Figure 13.18, determine Zin and Vout. Vin = 200 mV,
         IDSS = 20 mA, VGS(off) = -2 V, VDD = 12 V, RG = 1 M, RL = 1.8 k,
         RS = 220 .

363
                                                                        Figure 13.18

    11. For the circuit of Figure 13.19, determine Zin and Av. IDSS = 18 mA,
         VGS(off) = -2 V, VDD = 12 V, VSS = -4 V, RG = 680 k, RL = 10 k, RS = 1 k.

    12. For the circuit of Figure 13.19, determine Zin and Av. IDSS = 20 mA,
         VGS(off) = -2 V, VDD = 10 V, VSS = -6 V, RG = 2.2 M, RL = 5 k, RS = 510 .
                                                                        Figure 13.19

Design Problems
    13. Following the circuit of Figure 13.14, design an amplifier with a gain of at
         least 5 and an input impedance of at least 500 k. RL = 10 k. The MOSFET
         has the following parameters: VGS(off) = -2 V, IDSS = 25 mA. Try to use
         standard resistor values.
    14. Using the circuit of Figure 13.18, design a follower with a gain of at least
         0.75 and an input impedance of at least 1 M. RL = 2 k. The MOSFET has
         the following parameters: VGS(off) = -1.5 V, IDSS = 40 mA. Try to use standard
         resistor values.

Challenge Problems
    15. Using Figure 13.20, find Zin and Av. IDSS = 15 mA, VGS(off) = -2 V.

364
                                                                        Figure 13.20

    16. For the circuit of Figure 13.21, determine Zin and Av. IDSS = 12 mA,
         VGS(off) = -1.5 V.
                                                                        Figure 13.21

Computer Simulation Problems
    17. Utilizing manufacturer's data sheets, find devices with the following
         specifications (typical) and verify them using the measurement techniques
         presented in the prior chapter. Device 1: VGS(off) = -2 V, IDSS = 25 mA.
         Device 2: VGS(off) = -1.5 V, IDSS = 40 mA.
    18. Using the device model from the preceding problem, verify the design of
         Problem 13.
    19. Using the device model from Problem 17, verify the design of Problem 14.

365
14 Class D Power Amplifiers

14.0 Chapter Learning Objectives

After completing this chapter, you should be able to:

               Outline the building blocks of a class D amplifier.
               Discuss the advantages and disadvantages of the class D amplifier compared to class A and class

                   B amplifiers.
               Explain the concepts of pulse width modulation, shoot-through and dead time.

14.1 Introduction

Much has been written in this text regarding the efficiency of various power amplifier topologies. While class A
is known for its circuit layout simplicity, it is also known for its very low efficiency. Class B and class AB, while
more complex than class A, present serious improvements in efficiency. In spite of these improvements, the
family of class B amplifiers can hardly be considered as exhibiting high efficiency. Although not explicitly
covered in this text, class G and H topologies are variations on class B and attempt to increase efficiency through
the use of multiple sets of power supply rails or output devices, and in the process, tick the complexity up to
another level.

The class D amplifier is perhaps the last word in amplifier efficiency. Theoretically with ideal devices, the
efficiency of the output stage approaches 100%. Unlike the other amplifier forms, the transistors used in class D
amplifiers never operate in the linear region; the output devices only operate as a switch, in either saturation or
cutoff. High switching speed turns out to be a huge plus as it plays a major role in efficiency.

The increase in efficiency comes at a considerable increase in circuit complexity, however, for some
applications this turns out to be a very good trade-off. As odd as it might at first seem, the two areas where class
D topologies have taken root are at the opposite ends of the power output spectrum. The first area is perhaps the
most obvious, mainly, very high output power amplifiers. An example might be an amplifier used as part of a
large public address system and capable of delivering in excess of 1000 watts into a loudspeaker. High
efficiency does two things here: First, it reduces the waste heat in the amplifier itself, and second, it reduces the
current draw from the AC mains. Both of these are serious issues in a PA system used to fill a stadium or large
concert hall as there may be dozens of such amplifiers comprising the system. As a bonus, improved efficiency
also leads to a lighter and small enclosure because the need for heat sink area and mass will be reduced, as will
the size of the AC power supply transformer. These traits will also reduce production costs and help offset the
design complexity cost. The advantages have become so great that, in recent years, class D designs dominate the
high end professional audio power amplifier market as well as the very high power automotive audio market
(here there is another system limitation working in favor of class D, and that's the limited current capacity of the

366
vehicle's alternator to deliver current).

The second area where class D has found acceptance is for low power portable
devices. Examples include personal music devices, cell phones and hearing aids.
Output powers for these applications might range from tens of milliwatts up to a few
watts, so excess heat is generally not a big problem except in the most compact of
enclosures. What is a problem, though, is the energy budget. Unlike a large PA
amplifier that might pump out in excess of two horsepower, these portable devices
do not have the luxury of running off of the AC mains with tens or even hundreds of
amps of current capacity. Instead, these devices are restricted to battery power and
batteries can only store so much energy. For a given battery capacity, higher
efficiency directly translates into longer battery life. Another way of thinking about
this is that, given a higher efficiency, a smaller battery can be used to achieve the
same battery life, and this means that the unit can be both smaller and less
expensive. Of course, nothing says that we can't opt for a little of each.

14.2 Class D Basics

The key to the high efficiency of class D operation is to only operate the output
devices as switches. That is, they are operated at the extreme ends of the load line, in
either cutoff or saturation. The only exception to this rule is when the output device
is transitioning from one state to another. Either BJTs or E-MOSFETs can be used,
although for reasons that we shall examine, E-MOSFETs tend to be preferred in many
applications and therefore we shall use them here as a general rule.

To understand the power advantage of class D switching, consider the circuit of
Figure 14.1. Here we have an E-MOSFET being driven by a square wave at its gate
terminal. The square wave runs from zero to some voltage well above VGS(th),
sufficient to fully turn-on the MOSFET.

                                                                                                                     Figure 14.1
                                                                                                                     A simple MOSFET switch.

At the drain, an inverted square wave appears that ideally runs from +VDD down to
zero volts. When the MOSFET is off, no drain current flows. Therefore, the drop

367
across the drain resistor, RD, is zero. Consequently, by KVL, VDS must equal VDD.
When the gate signal goes high, it turns on the MOSFET causing a large current.
Ideally, this current equals VDD/RD and VDS = 0 V. In reality, the MOSFET will present
some resistance (rDS(on)) and this essentially creates a voltage divider between the
device and RD. Obviously, if rDS(on) << RD then we can approximate the low state as
zero volts.

In the ideal case, the transistor dissipates no power. Here's why: When the gate is
low, the device is off so no current flows. Although the device voltage is very high,
the product of the device's voltage and current is zero. When the gate is high, the
transistor turns on and conducts maximum current, however, the voltage across the
device is zero, and the resulting product is zero once again. Therefore, the device
dissipates no power.

The reality of the situation reveals that some power is indeed wasted by the output
device. There are two chief culprits: non-zero turn-on voltage (caused by rDS(on) for
example) and state transitions that are not instantaneous (i.e., the rise and fall times
of the waveforms are not zero). These effects are illustrated in Figure 14.2.

IVP  VDS  ID                                                                              Figure 14.2
                                                                                          Switching losses.

                                                                       PD

                                                        VDS(on) t

The rise and fall times are exaggerated for clarity as is the voltage drop across the
transistor. The green curve represents the device current while the blue curve
indicates the device voltage. Note that during the on-state the transistor voltage is
not zero, although it is very small. The product of these two curves is the power
dissipated by the transistor and is shown in red. In the off-state, no power is
dissipated. In the on-state, a small amount of power is dissipated due to the device's
on-voltage. Power spikes also occur at the state transitions as neither the current nor
the voltage are at zero.

The area under the red curve represents the total power dissipated by the output
transistor. In order to minimize this loss and maximize the efficiency, we would like
as low of an rDS(on) as possible along with very fast switching speeds. As power E-
MOSFETs tend to switch faster than their BJT counterparts, this presents a
compelling argument for their use. Further, large power E-MOSFETs may exhibit

368
rDS(on) values of just a few milliohms, guaranteeing relatively small on-state losses
(compared to load power) even with drain currents of several tens of amps.

14.3 Pulse Width Modulation

Clearly, class D presents the possibility of minimal wasted power and high
efficiency. We are now left with the problem of how to turn a series of pulses into a
continuous, smoothly varying waveform, such as a voice or music signal. There are
a few ways to accomplish this; it's a matter of encoding the amplitude of the original
signal into the pulse train that drives the output devices. Theoretically, as long as the
"area under the curve" for a segment of input signal is identical to the area
represented by the pulse train, we will have successfully encoded the signal and we
then should be able to decode it, turning it back into a smoothly varying output
signal. For this to work properly, the pulse train will have to be at much higher
frequency than the input signal in order to follow its changes over time. One way to
do this is through pulse density modulation, or PDM. The idea is to produce a
number of narrow pulses to represent the area. If the input amplitude is large, we
create a large number of pulses and if the amplitude is small, we produce a small
number of pulses. While this technique can work, it is somewhat challenging to turn
this pulse train back into the desired signal at the load.

Another technique to encode the input is pulse width modulation, or PWM. Instead
of altering the number of pulses in a given period of time, we keep the frequency
constant and adjust the width of the pulses. If the input amplitude is high, the width
of the corresponding pulse will be wide and if the amplitude is low, the pulse width
will be narrow. The decoding of PWM is easier than that of PDM and is generally the
preferred route.

Generating PWM is a relatively straightforward affair. All we need is a triangle wave
and a comparator. The comparator has two input terminals: the signal to be encoded
(input signal) and the reference wave (triangle wave). It has a two-state, logical
output. The output will be high if the signal is more positive than the reference and it
will be low if the reference is more positive than the signal. This is shown in block
diagram form in Figure 14.3.

                                                                                                                     Figure 14.3
                                                                                                                     PWM encoder.

369
As mentioned, the triangle wave needs to be at a much higher frequency than the
signal that is being encoded. As a general rule, this frequency should be at least ten
times the highest input signal frequency.

     ftriangle  10 f2                                                (14.1)

A simulation showing the PWM waveforms is presented in Figure 14.4.

                                                                                        Figure 14.4
                                                                                        PWM waveforms.

370
The input signal is the red sine wave. The blue triangle wave is the reference and is
approximately 20 times higher in frequency. The green wave is the PWM output.
Note that when the red input signal climbs above the blue reference triangle, the
green output goes high, otherwise, the output is low. Thus, the duty cycle of the
pulses correlates with the input signal amplitude. The input signal should not exceed
the amplitude of the triangle wave otherwise accuracy will impaired. Also, the
accuracy of the encoding process is dependent on the linearity of the triangle wave,
so a high quality triangle wave generator is needed. Lastly, for accuracy and ease of
decoding, the output pulses should not be allowed to become too thin, so the input
signal should be limited to about 75% of the amplitude of the triangle wave.

Reconstituting the Output

Although we have successfully encoded the input signal into a series of pulses, we
still need to decode them, that is, reconstitute the original continuously variable
input signal. Mathematically, the PWM signal contains all of the original input signal
frequency components and amplitudes, it just has added a large of number of new
frequency components. These new components are multiples (harmonics) of the
fundamental PWM frequency, and consequently, they are all higher than the input
signal frequencies. As such, they may be removed with a low-pass filter. This will
effectively reconstitute the original signal (but at a much higher amplitude, of
course). A simple passive LC filter would be appropriate in this instance as it must
pass large currents and voltages. An example is shown in Figure 14.5.

                                                                                                                     Figure 14.5
                                                                                                                     Passive low-pass filter.

At low frequencies, XL will be very small while XC will be very high, thus virtually
all of the input signal frequencies will pass on to the load. At high frequencies, such
as the harmonics of the PWM pulses, the situation is reversed: XL is large and XC is
small, creating a large loss so that these components do not reach the load.44 The
critical frequency of the network is set to the highest input signal frequency (e.g., for
high fidelity audio, slightly above 20 kHz).

44 For an audio amplifier, it is important that these components do not reach the
    loudspeaker. Even though they are beyond the range of human hearing, they can damage
    loudspeaker sub-components and, at the very least, present an extra power dissipation
    burden to them. Other kinds of loads may not be effected by the harmonics and filtering
    may not be needed.

371
We now have a complete outline for the class D amplifier, as shown in Figure 14.6.

                                                                                          Figure 14.6
                                                                                          Class D amplifier block
                                                                                          diagram.

The pre-amp can be comprised of any of the linear amplifier outlines presented in
earlier chapters, whether they use BJTs or FETs. What remains then, is further
investigation into the output switching network.

14.4 Output Configurations

If we apply the switching concept to a dual supply, push-pull topology, we arrive at
the generic circuit of Figure 14.7.

                                                                                          Figure 14.7
                                                                                          Generic push-pull switching.

The two output devices are alternately switched on and off. When the upper device
is on, the lower device is off, and current flows from the positive supply to the load
(blue path). Alternately, when the lower device is on, the upper device is off, and
current flows through the load via VSS (red path). We could use either BJTs or E-
MOSFETs for these devices.

Two obvious variations exist of the generic output circuit. The first version, shown
in Figure 14.8, appears to be a direct take-off of a class B output. It is shown with E-
MOSFETs but could be made with BJTs. Biasing details are not shown, instead a
generic "driver" circuit block will prove sufficient for our discussion.

372
In this circuit, the driver produces a bipolar pulse train that swings from negative to           Figure 14.8
positive rather than from ground to positive. A positive level from the driver will               Basic push-pull switching.
turn on the upper N-channel device, allowing current flow to the load. In contrast, a
negative level will turn on the lower P-channel device, allowing load current flow                Figure 14.9
via VSS.45 It is worth noting that the gate drive signal must swing higher and lower              Alternate push-pull switching.
than the two power supplies. This is because when a device is on, VDS will be nearly
zero, meaning that the source will be at the power rail. As VGS must be greater than
VGS(th), this means that VG must be greater than the power supply.

An alternate connection scheme is shown in Figure 14.9. Here, the N- and P-channel
devices have switched positions.

The logic here is reversed: the negative pulse turns on the upper device and the
positive pulse turns on the lower device. The gate swing is lessened a little compared

45 Yes, it is labeled VSS in spite of the fact that it's connected to the drain of the P-channel
    device. It's a matter of consistency with other circuits. "A rose by any other name" and all
    that...

373
to the earlier circuit but it suffers from a flaw common to both configurations,
namely, asymmetry between the N- and P-channel device characteristics. This
includes variations between internal device capacitances and rDS(on) values. For the
best possible matching, and thus the lowest distortion and highest performance, it
would be better to configure the output using identical devices. This is shown in
Figure 14.10.

                                                                                        Figure 14.10
                                                                                        Output switching using
                                                                                        identical devices.

This configuration complicates the drive signal in that we can no longer drive both     Figure 14.11
gates with the same signal; instead, unique signals must be presented to each gate      Full bridge output.
terminal. This circuit is known as a half bridge. Our final step will be to drive both
ends of the load in differential fashion using a full bridge, or H bridge as it is
sometimes known. This is shown in Figure 14.11.

374
The output devices are controlled as diagonal pairs. When Q1 is on, Q4 is on,
creating a path for load current from left to right (red trace). In contrast, when Q2 is
on, Q3 will also be on, thus creating a load current path from right to left (blue trace).
This effectively doubles the current amplitude which quadruples the load power
(because power varies as the square of current). This is the same technique discussed
in Chapter 9 with class B amplifiers. A dual LC filter is included in this diagram to
remove unwanted frequency components.

Example 14.1

         A pair of E-MOSFETs are configured to drive an 8  load as in Figure 14.10.
         Assuming that 50 volt sources are used and that each device has an rDS(on) of
         0.03 , determine the peak load current and VDS for the MOSFETs.

         At any given time, one MOSFET will be on, creating a path between one
         supply, itself, the load and ground. The total resistance to limit the current
         will be the load plus rDS(on).

                                iload = V DD
                                        r load +r DS (on)

                               iload = 50 V 8+0.03 
                               iload = 6.227 A

         The device voltage is found via Ohms law as load and drain current are
         identical.

                               v DS = iload r DS (on)
                               v DS = 6.227 A0.03 
                               v DS = 0.19 V

Practical Concerns

There are a few details left that should not be overlooked. Two of them are related to
the edge transition areas, another concerns the complexity of the drive circuits, and
the final issue deals with the power supplies themselves

The first item of concern is precisely what happens during the transition. All of the
output forms we have examined utilize two active devices configured in series
between two power sources. There is nothing in that path to limit current. If both
devices were to be simultaneously triggered to the on-state, a huge and possibly

375
damaging current would flow. While it would be foolish to turn both devices on
intentionally, the rise and fall times of the pulses effectively do this. As one device is
turning on and the other is turning off, both devices are in a conducting state, even if
it's not maximum conduction. Essentially, we have two low impedance devices in
series between two sources. This results in a large current pulse known as shoot-
through. This situation is depicted in Figure 14.12.

I Q1 Q2                                                                                     Figure 14.12
                                                                                            Shoot-through.

         shoot-
         through

                                                                         t

The current pulses for the two devices are shown in blue and violet. The maximal
currents are directed to the load, but during the transition, a pulse of current, shown
in red, "shoots through" the two devices, from one power supply directly to the
other.

The solution to shoot-through is to adjust the turn-on and turn-off pulse timing so as
to create a dead time, that is, a time span when neither device is directed to turn on.
This is illustrated in Figure 14.13.

                                                                                                                     Figure 14.13
                                                                                                                     Dead time.

Dead time is adjusted to correspond with the rise and fall times of the output
devices. Basically, a device is not allowed to turn on until the other device is, indeed,
fully off. The inclusion of dead time alters the width of the pulse and consequently
can introduce waveform distortion. A minimum amount of dead time should be used

376
to avoid this. This is another reason to use very fast output devices as they will
require shorter dead times.

The second issue regarding timing is one of device capacitance. Power MOSFETs
exhibit relatively high device capacitances. For example, the FDMS86180 examined
in Chapter 12 exhibits input and output capacitances of roughly 4.4 nF and 2.7 nF,
respectively. Although the extremely high gate input resistance might seem to
indicate that very little drive current is needed to turn these devices on, the
capacitance tells a different story.

The rate of change of voltage across a capacitor is a function of the capacitance and
the current driving it:

                                dvC = iC
                                dt C

The larger the current, or the smaller the capacitor, the greater the rate of change of
voltage. This can place a serious limit on how quickly a device may be controlled.
For example, suppose the drive circuit can pump out up to 10 mA. At first glance
that may seem like an enormous amount of current to drive a MOSFET. Now,
consider what happens if the input capacitance is 2 nF:

                                dvC = iC
                                 dt C
                                dvC = 10 mA
                                 dt 2 nF
                                dvC = 5E6 V/s
                                dt

While a 5 million volt-per-second slope might sound fast, it's only 5 volts per
microsecond. Compared to the requirements of, say, a 200 kHz to 300 kHz
switching frequency, that is horribly slow.

Computer Simulation

To see the effect of input capacitance, a two-stage amplifier is captured in a
simulator, as shown in Figure 14.14. The circuit consists of a relatively standard
small signal amplifier feeding a medium power E-MOSFET, the IRF7201. A 10 kHz
square wave is used to drive the circuit. The input capacitance of the MOSFET is 550
pF, certainly larger than a small signal FET but not an extremely large value. A single
capacitor is placed across the gate that will be used to simulate a much larger device
and the associated increased input capacitance.

377
                                                                                                                     Figure 14.14
                                                                                                                     Circuit for input capacitance
                                                                                                                     testing.

The initial transient analysis is run using a 5 pF gate capacitance which has no
appreciable effect on the outcome. The result of the simulation is shown in Figure
14.15.
The red trace is the gate voltage at node 6 while the blue trace is the final output at
node 2. The gate drive signal is suffering somewhat at the upper portion and the rise
and fall times are evident. The output signal is swinging from the power supply of
+15 volts down to ground, as expected. The rise time is somewhat quicker than the
fall time but, in general, the output presents a decent square pulse at close to 50%
duty cycle. The simulation is repeated but this time the gate capacitance is increased
from 5 pF to 5 nF, a value more typical of a large power FET. The result is shown in
Figure 14.16. The red gate drive signal has taken a serious hit and is no longer
square in shape. The output pulse in blue still runs to and from the expected voltage
levels, but the rising and falling edges are noticeably slowed. Also, the positive pulse
width has been stretched due to the slowing of the gate signal which retards the turn
on of the MOSFET. The result is a duty cycle that is greater than 50%.

378
                                                                                                                     Figure 14.15
                                                                                                                     Waveforms for normal circuit.

                                                                                                                     Figure 14.15
                                                                                                                     Waveforms for circuit with
                                                                                                                     increased gate capacitance.

379
The bottom line is that, in order maximize speed, care must be taken to minimize
capacitance, decrease the output impedance of the driver circuit and increase the
drive current. Fortunately, this issue has been largely solved by IC manufacturers
who offer FET driver integrated circuits designed specifically for these applications.

The final item of practical concern is the power supply itself, or more precisely, the
quality of the supply voltage. Remember, the output device is being used as a
switch. When the device is on, the power supply is directly connected to the output
(with the exception of the small voltage drop across the output device). This means
that any noise or ripple on the power supply will make its way to the output filter.
Whatever noise components fall within the desired input signal range will not be
filtered out, and thus are delivered to the load. In short, the output devices will
"leak" the power supply noise into the output, so care must be taken to have as clean
of a power supply voltage as possible.

Summary

The class D amplifier boasts very high efficiency, theoretically approaching 100%.
The amplifier operates its output devices as switches; they are either fully on or fully
off. The power losses are mostly relegated to switching edge losses so it is important
to not switch the output devices at too high of a frequency.

The input signal is encoded as a series of pulses, typically via pulse width
modulation. The pulse frequency is much higher than the highest input signal
frequency, typically by an order of magnitude. The width of the pulses is a function
of the amplitude of the input signal. That is, the higher the input signal, the greater
the pulse width. The pulses are amplified by applying them to the output devices
which then act as switches to alternately connect and disconnect the power supplies
to the output terminal. The sequence of much larger amplitude pulses are then fed to
a low-pass filter, typically, an LC filter, to remove the high frequency components of
the pulse train. The reconstituted input signal is what remains, but at a much higher
amplitude.

The output can be configured using either two-device half-bridge or four-device full-
bridge arrangements. The full-bridge is preferred for higher performance. The input
capacitance of the output devices can be relatively high, so care must be taken to
ensure that sufficient capacity is available from the driver circuit.

380
Review Questions

    1. What is PWM?
    2. How does PWM differ from PDM (pulse density modulation)?
    3. What is shoot-through? What causes it?
    4. What is dead time? What is its purpose?
    5. What is the function of the output LC filter?
    6. What effect does device input (e.g., gate) capacitance have on the operation

         of the amplifier?
    7. Sketch a half-bridge configuration.
    8. Sketch a full-bridge configuration.
    9. What is the effect of rDS(on) regarding load current and power losses?
    10. What is the effect of drive current capacity on the output devices?
    11. What effect does power supply noise have on the output?

Problems

Analysis Problems

    1. A telephony system has a frequency range from 200 Hz to 3.5 kHz.
         Determine the minimum acceptable PWM frequency.

    2. A background music and paging system has a frequency range from 50 Hz
         to 10 kHz. Determine the minimum acceptable PWM frequency.

    3. Determine the maximum rate of change of input voltage for a driver circuit
         capable of producing 50 mA with a load consisting of a 1.5 nF gate
         capacitance.

    4. Determine the maximum rate of change of input voltage for a driver circuit
         capable of producing 60 mA with a load consisting of a 3.5 nF gate
         capacitance.

    5. A power E-MOSFET has an rDS(on) of 0.012  and switches a 100 volt source
         to an 8  load. Determine the maximum load current and VDS.

    6. Four power E-MOSFETs drive a 4  load via a full bridge network. If each
         device has an rDS(on) of 0.02  and they switch 75 volt sources to the load,
         determine the load current and VDS of the devices.

381
15 Insulated Gate Bipolar Transistors (IGBTs)

15.0 Chapter Learning Objectives

After completing this chapter, you should be able to:

               Discuss the basic operation of the IGBT.
               Describe the internal structure of the IGBT.
               Describe the differences between PT and NPT IGBTs.
               Compare and contrast the IGBT to the power BJT.
               Compare and contrast the IGBT to the power MOSFET.
               Interpret important parameters found on an IGBT data sheet.
               Describe basic circuits using the IGBT as a power control device.

15.1 Introduction

The Insulated Gate Bipolar Transistor, or IGBT, is a power semiconductor that first became available to the
commercial market during the 1980s. Initial devices had certain performance issues but these problems largely
have been taken care of with subsequent generations. Today, the IGBT is in wide use, competing with power
BJTs and power E-MOSFETs across a range of applications. The IGBT is designed to be used as a high
voltage/high current switch and typically is not used for linear applications such as an audio class B power
amplifier. The IGBT has also overtaken the older thyristor devices (e.g., SCR) in many areas due to its speed and
the relative simplicity of the driving circuits used to control it.

The IGBT offers a mix of performance characteristics of both the power BJT and the power E-MOSFET. Like the
BJT, the IGBT offers low on-state power loss and the ability to handle large currents and voltages. Like the
power E-MOSFET, it is relatively easy to drive, being a voltage-controlled device rather than a current-controlled
device. On the down-side, it is not as fast as the current generation of power E-MOSFETs and tends to be more
costly than both the power BJT and power E-MOSFET. Consequently, the choice of which of these three devices
should be used for a given power switching application will depend on the specifics of the design. For example,
a medium to high power design that focuses on lowest cost may favor the BJT, a low to medium power
application that requires very high switching speeds may be best solved with a power E-MOSFET, while an IGBT
might be ideal for a very high power application utilizing low to medium speed clocking. This chapter will
examine a number of power switching applications, and while they will all revolve around using the IGBT,
please bear in mind that, depending on the specifics, power BJTs and E-MOSFETs might also be used.

The IGBT is available in two variants: the punch through, or PT; and the non-punch through, or NPT, versions.
We shall look at both.

382
15.2 IGBT Internals

The IGBT is a multi-layer device. The cutaway shown in Figure 15.1 uses an N-
channel, although P-channel is possible. This device has many features in common
with the power E-MOSFET discussed in Chapter 12.

                     Gate                                                             Figure 15.1
                                                                                      Cutaway view of IGBT.
                           Emitter

                     N                   N

                           P body region

                           N- drift region

                           N+ buffer

                           P+ substrate

                           Collector

To begin, note the labeling of the three terminals: gate, emitter and collector. The
gate is isolated just as it is in MOSFETs. When a positive gate-emitter potential is
applied, an N-type inversion layer will develop in the the P body region, allowing
current to flow. The middle N region is split into two sections, the main N- drift
region and the N+ buffer layer (the +/- signs indicate heavy and light doping,
respectively). The device shown is the punch through (PT) variety. The non-punch
through (NPT) omits the buffer layer. The functional differences between the two are
that splitting the N material to include the buffer layer improves speed and lowers
on-state voltage. Consequently, the PT version exhibits lower switching and
conduction losses.

The upper three layers of Figure 15.1 form an E-MOSFET while the lower section
(P body, N drift/buffer and P substrate) form a PNP transistor. Thus, we can make a
simplified model of the IGBT using these other devices, as shown in Figure 15.2.

                                                                                      Figure 15.2
                                                                                      Simple model of an IGBT (left)
                                                                                      compared to a Sziklai pair
                                                                                      (right).

383
This simplified model is reminiscent of the NPN version of the Sziklai pair examined
in Chapter 9. The input device has been replaced by an E-MOSFET. Therefore we
expect the very small gate current and relatively simple drive requirements of the E-
MOSFET with the power handling of a BJT.

The operational device curves are, unsurprisingly, also reminiscent of these two
components. A set of collector curves is presented in Figure 15.3 using
representative values for voltage and current.

     IC

     (A)                                                                                              Figure 15.3

     50                                                                                               IGBT collector curve family.

     40

                                                                                          Increasing
     30 VGE

     20

     10

                          10 20 30 40 (V) VCE

This set of curves appears as a cross between the collector curve family seen in
Chapter 4 and the drain curve family seen in Chapter 10, with one slight twist: the
entire set of curves is displaced positively from the origin by about one volt. As with
any E-MOSFET, channel current does not begin to flow until the gate threshold
voltage is reached, here referred to as VGE(th). Increasing values of VGE cause
increased conduction and current flow. Finally, note that the curves do not begin to
"flatten" until VCE has reached several volts, unlike the saturation voltage of a single
BJT which might be only tenths of a volt.

The forward current-voltage characteristic curve reflects the E-MOSFET portion of
the model. This is shown in Figure 15.4.

          IC                                                                                          Figure 15.4
                                                                                                      IGBT characteristic curve and
                       25 C                                                                           variation with temperature.

                             150 C

              VGE(th)               VGE

384
Two traces are plotted for two different temperatures. The curves are essentially the
same as the characteristic curve of the E-MOSFET, as seen in the introductory
MOSFET chapter, Figure 12.11 (here the current axis has been expanded, making the
traces appear steeper, in order to more clearly show the variation with temperature).
Conduction begins at the threshold voltage, VGE(th), and then rises rapidly, following a
square law trajectory. Once a sufficient current level is reached, the curve can be
approximated as a straight line.

Of particular interest here is how the curve varies with temperature. As temperature
increases (red trace), the slope decreases. Recalling that the slope of the current-
voltage characteristic curve is the device transconductance, this means that the
transconductance decreases with temperature. In other words, the IGBT exhibits a
negative temperature coefficient of transconductance, just like power E-MOSFETs,
and thus are also less inclined to suffer from current hogging and thermal runaway
problems than BJTs.

Unfortunately, there isn't a single, standardized schematic symbol for the IGBT. Two
versions are shown in Figure 15.5.

                                                                                                                     Figure 15.5
                                                                                                                     IGBT schematic symbols.

Both symbols attempt to reflect the dual E-MOSFET/BJT character of the device. The
symbol on the left appears to have wider use currently, although there is also a third
variation based on it where the gate connection is drawn toward the center rather
than closer to the emitter.

15.3 IGBT Data Sheet Interpretation

A portion of the data sheet for the Fairchild/ON Semiconductor FGH50T65SQD
IGBT is shown in Figure 15.6. This is a fourth generation IGBT featuring trench
construction. It is rated for 650 volts and 50 amps. The device includes an anti-
parallel diode. This is useful for bridge applications that drive inductive loads (recall
that the current through an inductor cannot change instantaneously, thus, when
devices are switched on/off in a bridge, the diode serves to create a path around the
IGBT for this current).

385
                                                                                                                     Figure 15.6a
                                                                                                                     FGH50T65SQD data sheet.

                                                                                                                                                   Used with permission from SCILLC
                                                                                                                                                   dba ON Semiconductor.

386
                                                                                                                     Figure 15.6b
                                                                                                                     FGH50T65SQD data sheet
                                                                                                                     (cont).

387
The main features are the 650 volt rating for VCE, 100 amp continuous collector        Figure 15.6c
current and 268 watt dissipation at 25캜. The current and power ratings are            FGH50T65SQD data sheet
essentially halved at the more practical temperature of 100캜. The threshold voltage,  (cont).
VGE(th), is specified as 4.5 volts with a 1.9 volt spread. The saturation voltage
typically is 1.6 volts at room temperature with 50 amps of collector current. This
compares favorably to basic power BJTs. Like power MOSFETs, the input
capacitance is relatively high at 3275 pF, so the same gate drive precautions must be
followed. Finally, note the asymmetry in switching times. At room temperature and
12.5 amps of collector current, the turn-on delay plus rise time is specified as
approximately 31 nanoseconds while the turn-off delay and fall time is nearly 110
nanoseconds. This relative slowing of the off-state transition is typical of IGBTs.
Further, as both current and temperature increase (Figure 15.6c), these times
increase by a few percent. By comparison, the FDMS86180 power E-MOSFET
examined in Chapter 12 exhibited symmetrical values in the mid-30 nanosecond
region at a drain current of 67 amps.

388
Finally, consider the graphical data presented in Figure 15.6d.  Figure 15.6d
                                                                 FGH50T65SQD data sheet
                                                                 (cont).

389
The top two graphs show the collector curves in the low voltage region. Compare
these with Figure 15.3. Similarly, the middle-left graph shows the current-voltage
characteristic with temperature variation. This reflects Figure 15.4. Finally, the
bottom two graphs show the collector-emitter saturation voltage with respect to gate-
emitter drive voltage for three different collector currents. Note that for the highest
current at room temperature, saturation voltage is around 2 volts for a gate drive of
at least 8 volts. This rises to about 3 volts at 175캜.

Computer Simulation

To highlight the performance of the IGBT, a simple series load switch is simulated.
The circuit is shown in Figure 15.7.

                                                                                                                     Figure 15.7
                                                                                                                     IGBT simulation schematic.

A 10 ohm load is switched from a 100 volt DC power supply via an International
Rectifier IRGPC40K IGBT. The gate is driven from a 10 volt peak square wave
running at 100 kHz.
Ideally, if the IGBT produced no losses, the full 100 volt source would drop across
the load, producing 10 amp current pulses. According to the device data sheet,
collector-emitter saturation voltage typically is 2.1 volts (3.2 volts maximum) with a
25 amp collector current. The total turn-on/rise time and turn-off/fall time values are
62 nanoseconds and 290 nanoseconds typically, at 25 amps and room temperature.
A transient analysis is run, with the results shown in Figure 15.8.

390
                                                                                                                     Figure 15.8
                                                                                                                     Transient analysis of simple
                                                                                                                     IGBT switch.

The drain voltage (node 1) is shown as the purple trace and the drain current is
shown in green (reversed in polarity to see it more clearly). The two cursors (red is
#1, blue is #2) show the various levels. As expected, the drain voltage peaks at 100
volts in the off-state, at which time the current is nil. During the on-state, the drain
voltage drops to about 2.36 volts, very close to the data sheet's typical saturation
potential. This small drop reduces the voltage across the load to about 97.64 volts.
This is verified by cursor #1 showing a current of 9.765 amps. Also, although it is
not possible to determine the edge timings with great precision from this plot, the
asymmetry between rise and fall is apparent, and the edges are generally consistent
with the numeric values from the data sheet.
Figure 15.9 shows the result of multiplying the current and voltage waveforms. This
new waveform represents the power dissipation of the IGBT.
391
                                                                                                                     Figure 15.9
                                                                                                                     Power waveform of simple
                                                                                                                     IGBT switch.

The power trace is shown in fuchsia, or magenta, or screaming purple-pink, or
whatever-you-want-to-call-it. The edge spikes dominate but the on-state power is
apparent as well. Remember, during the on-state, the load is dissipating close to
1000 watts. The cursor output window is shown separately in Figure 15.10. The on-
state power dissipation is approximately 23 watts which represents less than 2.5
percent of the load power. In contrast, the edge spikes are maxing out at around 250
watts. Of course, the time duration is very short, being only a few percent of the
cycle period, but it cannot be ignored.

392
                                                                                                                     Figure 15.10
                                                                                                                     Numeric values at waveform
                                                                                                                     cursors for the IGBT switch.

15.4 IGBT Applications

IGBTs lend themselves to a variety of high power switching applications. In this
section, we shall look at four of them. Bear in mind that power BJTs and power E-
MOSFETs might also be used for these applications, depending on the specifics of
the design. In general, power E-MOSFETs will be preferred when using high
switching frequencies at medium to low powers and voltages, while IGBTs are
favored at higher voltages, currents and powers.

Induction Heating

Although thermal conduction is the first method commonly thought of when it
comes to heating something, magnetic induction may also be used. Magnetic
induction creates heat through the Joule effect and can be used for large scale
industrial processes, such as creating metal alloys via an induction furnace, to much
smaller scale consumer applications, such as an inductive cooktop. Induction heating
is efficient because the vessel itself is heated directly and less heat is lost to the
immediate environment. Also, control of heating can be very precise. The basic idea
is to create a rapidly changing magnetic field placed next to the container to be
heated. If this vessel is ferromagnetic, eddy currents will be induced in the vessel,
creating heat. Thus, if we were to place a cast iron pot within the field, the pot itself
would heat up as eddy currents are induced within it, thus heating the pot's contents.
There are no open flames or surface heating elements involved. The only downside
to this process is that the vessel must be made of ferromagnetic material. For a
cooktop, that means that pots and pans must be made of iron or certain steel alloys.
An aluminum saut pan or ceramic container will not work with this system.

393
As an example, let's consider an inductive cooktop. A sophisticated design could
feature a full- or half-bridge arrangement of IGBTs, but for illustrative purposes we'll
focus on a simple single-ended system using just one IGBT.

The system features four main components: the rectifier/EMI filter, the control/drive
circuit, the IGBT switch and the LC resonant tank sub-circuit that generates the field.
This is illustrated in Figure 15.11.

                                                                                                                     Figure 15.11
                                                                                                                     Simple inductive heater.

The rectifier produces full-wave pulsating DC, and the associated capacitor, C2, is
used to help minimize EMI (electromagnetic interference) and also provide a return
path for the tank. The control circuit produces a variable duty cycle pulse train to
drive the gate of the IGBT. The greater the duty cycle, the longer the on-state of the
IGBT, and ultimately, the greater the heating. Between the IGBT and the rectified
power signal is a parallel resonant tank circuit comprised of C1 and L1. The inductor
is comprised of a series of loops of large gauge wiring or copper tubing embedded in
the cook surface, typically under a glass or ceramic top. The resonant frequency of
the tank is tuned to the frequency of the controlling pulse train. This will maximize
the tank current and thus produce a more powerful magnetic field. The switching
frequency is usually placed just above the range of human hearing to avoid audible
microphonics.46 Values in the range of 20 kHz to 30 kHz are typical, and the base
frequency may change as the heat demand changes. For example, to minimize
switching losses, the controlling frequency might start at 30 kHz for modest heating
and decrease to 20 kHz for maximum heating.

From the cook's perspective there is no change between using the inductive cooktop
and an ordinary electric cooktop using resistive heating elements: The cook places
the pot or pan on the surface, under which lies the coil. A heat level control knob is
provided for them to adjust the heat intensity. To their advantage, when they remove
the pot or pan, the cooking surface itself will not be as hot as an ordinary cooktop.

46 Granted, it may still fall within the hearing range of your dog, so don't be surprised if
    your border collie prefers a gas cooktop to make a balsamic reduction.

394
From the designer's perspective, the heat control knob simply changes the duty cycle
of the controlling pulse train (and optionally, its frequency, as mentioned
previously). Other refinements might include sensing whether or not a vessel is on
the cooktop and throttling back control if nothing is detected. Finally, an even
simpler system could switch the IGBT on and off at a much slower rate (think in
terms of seconds) to greatly reduce switching losses but this runs the risk of heat
cycling if the pots and pans used are of very light gauge construction (i.e., their
thermal time constant will be faster).

DC-to-AC Inversion

There are many instances where we wish to derive an AC voltage from an existing
DC voltage. Examples include an uninterruptible power supply (UPS) that would
draw current from a battery and deliver standard AC power when there is a
disruption in the power grid, and the need to operate electronic devices designed for
the home in a remote location. This process is known as DC-to-AC inversion.

The simplest method to create AC from DC is to just "chop" the DC at the desired
line frequency and then scale it, that is, feed the DC into a simple IGBT switch which
will produce a square wave and then feed the square wave into a transformer to
arrive at the desired voltage. The obvious problem with this technique is that the AC
signal will not be a nice, smooth sine wave, but rather, a distorted square wave.
Unfortunately, for many electronic components this will present a challenge to their
power supply circuits. A possible refinement involves making a step-wise
approximation of a sine wave but this is still not ideal.

A more accurate scheme involves synthesizing a sine wave via PWM. We still chop
the DC, but now the action is performed at a higher frequency and with a varying
duty cycle such that, when the output is averaged, we arrive at a sine wave. A block
diagram of this scheme is shown in Figure 15.12.

                                                                                                                     Figure 15.12
                                                                                                                     DC-to-AC inverter (anti-
                                                                                                                     parallel diodes not shown).

395
The controller generates a set of PWM signals to drive the four IGBTs configured as
a full-bridge. The bridge output is then fed to a balanced LC filter that removes the
high frequency PWM components, leaving a smoothed sine wave. This signal can be
used as is, or fed into a step-up transformer if the desired AC voltage is greater than
the starting DC voltage. An example of this would be the need to supply a device
designed to run on 120 VAC from the nominal 12 VDC system found in a car.

There is a side item worthy of mention here. Some devices derive timing signals
from the line frequency (a classic example is an electronic alarm clock/radio). This
is possible because the power generation utility monitors this frequency with great
accuracy. If the controller shown in Figure 15.12 does not produce an accurate base
frequency, then that clock/radio will not tell time accurately.

Motor Control

IGBTs can be used to control the speed of electric motors. The configuration of the
control circuit will depend on the kind of motor being controlled. In simplest terms,
the speed of a DC motor is controlled by the voltage applied to it: the higher the
voltage, the higher the speed. In contrast, the speed of an AC motor depends on the
frequency of the applied source (they are proportional).

Controlling a DC motor is a straightforward situation. If all we need to do is start and
stop the motor, the IGBT can be inserted in series with the motor and used as a
switch to open and close the circuit. Being solid-state, the IGBT has numerous
advantages over a mechanical switch or relay including long-term reliability and
simplicity of the control circuit. To alter the speed, the IGBT can be controlled via
PWM. This is illustrated in Figure 15.13.

                                                                                                                     Figure 15.13
                                                                                                                     DC motor control via IGBT.

D1 and D2 are flyback or snubber diodes used for protection from inductive current
spikes caused by the motor's current being switched on and off. As noted earlier,
some IGBTs are co-packaged with an anti-parallel diode (D1).

396
To vary the motor's speed, the controller produces a PWM drive signal. The smaller
the duty cycle of this pulse train, the lower the average applied voltage to the motor,
and therefore the slower its speed. The base frequency of the PWM signal does not
have to be particularly high in this scenario; a few hundred hertz may prove
sufficient. This will help minimize switching losses.

For an AC motor the situation is a little more complex. One approach is to use the
PWM technique explained under the DC-to-AC converter section. The difference is
that the power source would not be DC, but rather, AC. Consequently, we would
need to transform the AC power source into a more usable signal and then apply the
circuit depicted in Figure 15.12 to power the motor. The controller itself will need to
be considerably more sophisticated. In Figure 15.12, the duty cycle is continuously
changed such that the "area under the curve" approximates a sine wave. Eventually,
the pattern will repeat itself for subsequent cycles of the sine wave. In other words,
the rate at which the pattern repeats is the sine wave's period. In the DC-to-AC
inverter application, this rate never changes because we need a constant output
frequency (e.g., 60 Hz). In the AC motor control application, such is not the case.
This repetition rate needs to be adjustable because that's what controls the motor's
speed. One way to do this is to simply increase the base frequency of the PWM pulse
train. This method is simple and direct but has the disadvantage of creating more
transient edges per unit time and therefore tends to increase switching losses. An
alternate approach is to keep the base frequency constant and instead alter the duty
cycle pattern. This helps minimize the switching loss issues but has the disadvantage
of requiring a more complex control circuit and possibly producing a lower quality
sine wave at higher output frequencies.

DC-to-DC Conversion

Our final application is DC-to-DC up-conversion, that is, producing a new DC
voltage that is higher than the original source and also capable of high output current
(voltage doublers and triplers can be made from diode/capacitor lattices but they are
not designed to deliver high, continuous currents). Applications requiring up-
conversion include photovoltaic systems (i.e, combining the outputs of several solar
panels and tying them into the power system) and high output car audio systems.
Specifically, the nominal 12 volt automotive power system is insufficient to supply
an amplifier intended to deliver hundreds or even thousands of watts to a subwoofer.
The 12 volt source will need to be increased, perhaps by a factor of ten, to achieve
the desired output levels.47

47 In the process, the current demand will be increased greatly as well, perhaps beyond the
    capabilities of the vehicle's alternator (which will also require upgrading), but these are
    the prices one must pay if one desires very high sound pressure levels in what is arguably
    the worst acoustical environment in which to listen to music. Of course, we should also
    admit that the act of critically listening to and enjoying music may not be the point of
    such an exercise.

397
As we have already seen how DC can be translated into AC via an inverter, it is
possible to simply rectify and filter the new AC, producing a higher DC level. This
scheme is illustrated in Figure 15.14.

                                                                                     Figure 15.14
                                                                                     DC-to-DC conversion via
                                                                                     transformer (anti-parallel
                                                                                     diodes not shown).

The transformer pictured here will need to be a step-up variety in order to achieve
the desired output voltage level. Note that the AC generation side does not have to
produce a particularly nice sine wave nor does it have to be at the usual line
frequency. In fact, increasing the frequency will likely result in reduced sizes for the
transformer and filter capacitors.

A completely different approach is to use a switching regulator. Switching regulators
use a feedback control system to generate a very stable output voltage by comparing
it to a reference voltage. They can be configured in step-down, step-up or polarity
inversion forms.48 In this case, we can use the step-up, or boost, form. An example is
shown in Figure 15.15.

                                                                                                                     Figure 15.15a
                                                                                                                     Step-up switching regulator,
                                                                                                                     on-state.

As with the other applications presented so far, the IGBT is being used as a switch.
Figure 15.15a illustrates the on-state of the IGBT. During this phase, current is drawn
through the inductor, L, storing energy in the associated magnetic field. The reverse-
biased Schottky diode, D, isolates this section from the output section, where C is
delivering the load voltage and current.
48 For details on switching regulators, see Fiore, J, Operational Amplifiers and Linear

    Integrated Circuits: Theory and Application, another free OER text.

398
                                                                                                                     Figure 15.15b
                                                                                                                     Step-up switching regulator,
                                                                                                                     off-state.

The off-state is depicted in Figure 15.15b. During this portion, the inductor
discharges and appears as a source. As it is in series with the input voltage, the
voltage at the output will equal the inductor's voltage plus the input voltage. Also,
during this phase the capacitor is recharged, ready for the next on-state of the IGBT.
Note that a Schottky diode is used here because it exhibits fast switching times and a
low forward voltage drop. Switching frequencies for these circuits tend to be high
(100 kHz and up are common) as that minimizes the sizes of the inductor and
capacitor.

Summary

The Insulated Gate Bipolar Transistor, or IGBT, can be thought of as a combination
of a power BJT and a power E-MOSFET. As such, it combines the low on-state
conduction losses of the BJT with the relatively easy drive requirements of the E-
MOSFET. The IGBT is available in two variants; the PT, or punch through, and the
NPT, or non-punch through types. The PT type includes an N+ buffer layer in its
construction and this endows the device with faster switching speed and lower on-
state losses.

The IGBT's characteristic curves tend to echo that of the E-MOSFET. Conduction
does not begin until the gate-emitter voltage exceeds a threshold voltage, VGE(th).
From there, the current-voltage characteristic follows a square-law trajectory, and at
sufficiently high current levels it can be approximated as a straight line. The IGBT
exhibits a negative temperature coefficient of transconductance, like the MOSFET,
making it less prone to thermal runaway and current hogging issues. A family of
collector curves (i.e., VCE vs. IC) shares attributes with BJT collector curves and
MOSFET drain curves. The curves echo the same overall shape, starting with a
section where current rises rapidly compared to voltage, and then leveling out into a
constant current region. The initial region of rapid change is somewhat drawn out as
it is in the MOSFET. Also, the entire set of curves is displaced positively by about a
volt, rather than current increasing immediately from the origin.

In general, the IGBT offers higher voltage, current and power capability than the
power E-MOSFET although it lags behind in switching speed. Further, switching
times for the on- and off-state are asymmetrical. Compared to the power BJT, the

399
IGBT tends to be more expensive. Consequently, power E-MOSFETs tend to be
favored at low and moderate power levels when high switching speeds are needed
and BJTs tend to be preferred when cost is a major component in more modest
designs. As such, IGBTs find use across a range of applications including power
inverters, uninterruptible power supplies, induction heaters, solar power systems,
motor controllers and so forth.

Review Questions

    1. What are the advantages and disadvantages of IGBTs compared to power
         BJTs?

    2. What are the advantages and disadvantages of IGBTs compared to power
         E-MOSFETs?

    3. What are the differences between NPT and PT IGBTs?
    4. Compare the simple IGBT model to that of a Sziklai pair.
    5. Explain the basic operation of an induction heater and how an IGBT is used

         to control the generation of heat.
    6. Explain how pulse width modulation might be used to control the speed of a

         DC motor via an IGBT.
    7. Explain how an IGBT can be used to translate a DC power source into an AC

         power source.

Problems

Analysis Problems

    1. From the FGH50T65SQD data sheet, determine the collector-emitter
         saturation voltage at 25캜 for VGE = 7 volts and IC = 50 amps.

    2. From the FGH50T65SQD data sheet, determine the change in collector-
         emitter saturation voltage from 25캜 to 175캜 for VGE = 8 volts and IC = 100
         amps.

    3. From the FGH50T65SQD data sheet, determine the rise time for a 50 amp
         collector current at 25캜 for VGE = 15 volts.

    4. From the IRGPC40K data sheet, determine the combined turn-on and rise
         time at 150캜.

    5. From the IRGPC40K data sheet, determine the combined turn-off and fall
         time at 150캜.

400
Computer Simulation Problems
    6. Repeat the simple switch simulation from this chapter using the
         FGH50T65SQD IGBT and compare the resulting voltage, current and power
         waveforms.
    7. Repeat the simple switch simulation from this chapter using the
         FDMS86180 power E-MOSFET from Chapter 12 and compare the resulting
         voltage, current and power waveforms.

401
16 Decibels and Bode Plots

16.0 Chapter Learning Objectives

After completing this chapter, you should be able to:

     Convert between ordinary and decibel based power and voltage gains.
     Utilize decibel-based voltage and power measurements during circuit analysis.
     Define and graph a general Bode plot.
     Detail the differences between lead and lag networks, and graph Bode plots for each.
     Combine the effects of several lead and lag networks together in order to determine a system Bode plot.

16.1 Introduction

This chapter introduces two related items; the decibel and Bode plots. The decibel measurement scheme is in
wide use, particularly in the fields of audio and communications. We will be examining its advantages over the
ordinary system of measurement used up to now and how to convert values of one form into the other. One of
the more important parameters of a circuit is its frequency response, that is, the way in which the circuit
responds to input signals over a range of frequencies. While we have investigated this to some extent in prior
work, in this chapter we shall take it to its logical conclusion, namely the Bode plot. A Bode plot is, in fact, a
pair of plots; one of relative signal magnitude or gain with respect to frequency and a second detailing the phase
response with respect to frequency. Bode plots are of particular importance in the study of circuits such as
amplifiers and filters, as well as in systems that make use of negative feedback. The gain magnitude plot makes
use of a decibel scale and thus it makes sense to begin our study looking at the decibel system: specifically how
it is defined and its practical use.

16.2 The Decibel

Most people are familiar with the term "decibel" in reference to sound pressure. It's not uncommon to hear
someone say something such as "It was 110 decibels at the concert last night and my ears are still ringing." This
popular use is somewhat inaccurate, but does show that decibels indicate some sort of quantity or relative level;
in this case, sound pressure level.

Decibel Representation of Power and Voltage Gains

In its simplest form, the decibel is used to measure system gain, such as power or voltage gain, where gain is
simply the ratio of an output signal to an input signal. For an amplifying circuit, the gain would be greater than
one, but for purely passive systems it will likely be fractional (i.e., the output quantity is smaller than the input

402
quantity). For example, a simple voltage divider might be said to have a "gain" of
0.2, or some such, meaning that the output signal is only 20% of the input signal.
Unlike the ordinary gain measurements, the decibel form is logarithmic. Because of
this, it can be very useful for showing ratios of change, as well as absolute change.
The base unit is the Bel, named after Alexander Graham Bell, the noted American
scientist and inventor. To convert an ordinary gain to its Bel counterpart, just take
the common log (base 10) of the gain. In equation form:

     Bel gain = log10( ordinary gain )                  (16.1)

Note that on most hand calculators common log is denoted as "log" while the natural
log is given as "ln". Unfortunately, some programming languages use "log" to
indicate natural log and "log10" for common log. More than one student has been
bitten by this bug, so be forewarned! As an example, if an amplifier circuit produces
an output power of 200 milliwatts for an input of 10 milliwatts, we would normally
say that it has a power gain of:

     G= Pout
         Pin

     G=200 mW 10 mW
     G= 20

For the Bel version, just take the log of this result.

     G '=log10G
     G '=log1020
     G '=1.301

The Bel gain is 1.3 Bels. The term "Bels" is not a unit in the strict sense of the word
(as in "watts"), but is simply used to indicate that this is not an ordinary gain. In
contrast, ordinary power and voltage gains are sometimes given units of W/W and
V/V to distinguish them from Bel gains. Also, note that the symbol for Bel power
gain is G' and not G. All Bel gains are denoted with the following prime (') notation
to avoid confusion. Because Bels tend to be rather large, we typically use one-tenth
of a Bel as the norm. The result is the decibel (one-tenth Bel). To convert to decibels,
simply multiply the number of Bels by 10. Our gain of 1.3 Bels is equivalent to 13
decibels. The units are commonly shortened to dB. Consequently, we may say:

     G '=10 log10G                                      (16.2)

     Where the result is in dB.

At this point, you may be wondering what the big advantage of the decibel system
is. To answer this, recall a few log identities. Normal multiplication becomes

403
addition in the log system, and division becomes subtraction. Likewise, powers and
roots become multiplication and division. Because of this, two important things
show up. First, ratios of change become constant offsets in the decibel system, and
second, the entire range of values diminishes in size. The result is that a very wide
range of gains may be represented within a fairly small scope of values, and the
corresponding calculations can become quicker.

There are a couple of dB values that are useful to remember, and are illustrated in
Figure 16.1. With the aid of your calculator, it is very easy to show the following:

     Factor    dB Value using                                                            Figure 16.1
              G'= 10 log10 G                                                             Positive dB factors.
           1
           2               0 dB
           4           3.01 dB
           8           6.02 dB
         10            9.03 dB

                         10 dB

We can also look at fractional factors (i.e., losses instead of gains, Figure 16.2):

     Factor   dB Value                                                                   Figure 16.2
                                                                                         Negative dB factors.
        0.5   -3.01 dB
       0.25   -6.02 dB
     0.125    -9.03 dB
        0.1
                -10 dB

If you look carefully, you will notice that a doubling is represented by an increase of
approximately 3 dB. A factor of 4 is in essence, two doublings. Therefore, it is
equivalent to 3 dB + 3 dB, or 6 dB. Remember, because we are using logs,
multiplication turns into simple addition. In a similar manner, a halving is
represented by approximately -3 dB. The negative sign indicates a reduction. To
simplify things a bit, think of factors of 2 as 3 dB, the sign indicating whether you
are increasing (multiplying), or decreasing (dividing). As you can see, factors of 10
work out to a very convenient 10 dB. By remembering these two factors, you can
often estimate a dB conversion without the use of your calculator. For instance, we
could rework our initial conversion problem as follows:

               The amplifier has a gain of 20.
               20 can be written as 2 times 10.
               The factor of 2 is 3 dB, the factor of 10 is 10 dB.
               The answer must be 3 dB + 10 dB, or 13 dB.

Time for a few examples.

404
Example 16.1

         An amplifier has a power gain of 800. What is the decibel power gain?

                    G '=10 log10G
                    G '=10 log10800
                    G '=102.903
                    G '=29.03dB

         We could also use our estimation technique:

          G = 800 = 8102
          8 is equivalent to 3 factors of 2, or 222, and can be expressed as 3 dB +

              3 dB + 3 dB, which is, of course, 9 dB
          102 is equivalent to 2 factors of 10, or 10 dB + 10 dB = 20 dB.

              Alternately, the power of 2 literally represents 2 Bels, and thus 20 dB.
          The result is 9 dB + 20 dB, or 29 dB

         Note that if the leading digit is not a power of 2, the estimation will not be
         as precise. For example, if the gain is 850, you know that the decibel gain is
         just a bit over 29 dB. You also know that it must be less than 30 dB
         (1000=103 which is 3 factors of 10, or 30 dB.) As you can see, by using the
         dB form, you tend to concentrate on the magnitude of gain, and not so much
         on trailing digits.

Example 16.2

         An attenuator reduces signal power by a factor of 10,000. What is this loss
         expressed in dB?

                    G '=10 log10 1 10,000
                    G '=10(-4 )
                    G '=-40 dB

         By using the approximation, we can say,

                    1 10,000 =1 0-4

         The negative exponent tells us we have a loss (negative dB value), and 4
         factors of 10 (i.e., 4 Bels).

405
               G '= -10 dB -10dB -10dB -10 dB
               G '= -40dB

     Remember, if an increase in signal is produced, the result will be a positive
     dB value. A decrease in signal will always result in a negative dB value. A
     signal that is unchanged indicates a gain of unity, or 0 dB.

To convert from dB to ordinary form, just invert the steps; that is, divide by ten and
then take the antilog.

                      -1 G '  (16.3)
              G= log10

                          10

On most hand calculators, base 10 antilog is denoted as 10x. In most computer
languages, you just raise 10 to the appropriate power, as in G = 10.0**(Gprime /
10.0) (Python), or use an exponent function, as in pow(10.0, Gprime / 10.0) (C).

Example 16.3

     An amplifier has a power gain of 23 dB. If the input is 1 mW, what is the
     output?

     In order find the output power, we need to find the ordinary power gain, G.

                        -1 G '
               G= log10

                           10
                        -1 23
               G =log10

                           10
               G=199.5

     Therefore, Pout =199.5  1 mW, or 199.5 mW

     You could also use the approximation technique in reverse. To do this, break
     up the dB gain in 10 dB and 3 dB chunks:

               23dB=3 dB+10 dB+10dB

     Now replace each chunk with the appropriate factor, and multiply them
     together (remember, when going from log to ordinary form, addition turns
     into multiplication.)

               3dB=2X ,10dB=10X , so,

406
     G= 21010
     G= 200

While the approximation technique appears to be slower than the calculator, practice
will show otherwise. Being able to quickly estimate dB values can prove to be a
very handy skill in the electronics field. This is particularly true in larger, multi-stage
designs.

Example 16.4

         A three-stage amplifier has gains of 10 dB, 16 dB, and 14 dB per section.
         What is the total dB gain?

         Because dB gains are a log form, just add the individual stage gains to arrive
         at the system gain.

                    G 'total =G ' 1+G ' 2+G '3
                    G 'total =10dB+16 dB+14 dB
                    G 'total =40 dB

As you may have noticed, all of the examples up to this point have used power gain
and not voltage gain. You may be tempted to use the same equations for voltage
gain. In a word, don't. If you think back for a moment, you will recall that power
varies as the square of voltage. In other words, a doubling of voltage will produce a
quadrupling of power. If you were to use the same dB conversions, a doubling of
voltage would be 3 dB, yet, because the power has quadrupled, this would indicate a
6 dB rise. Consequently, voltage gain (and current gain as well) are treated in a
slightly different fashion. We would rather have our doubling of voltage work out to
6 dB, so that it matches the power calculation. The correction factor is very simple.
Because power varies as the second power of voltage, the dB form should be twice
as large for voltage (remember, exponentiation turns into multiplication when using
logs). Applying this factor to equation 16.2 yields:

     A 'v=20 log10 Av  (16.4)

Be careful though, the Bel voltage gain only equals the Bel power gain if the input
and output impedances of the system are matched (you may recall from your other
work that it is quite possible to design a circuit with vastly different voltage and
power gains). If we were to recalculate our earlier table of common factors, we
would find that a doubling of voltage gain is equivalent to a 6 dB rise, and a ten fold
increase is equivalent to a 20 dB rise, twice the number of decibels of their power
gain counterparts.

407
Note that current gain may be treated in the same manner as voltage gain (although
this is less commonly done in practice).

Example 16.5

         A circuit has an output signal of 2 V for an input of 50 mV. What is A'v?
         First find the ordinary gain.

                    Av= 2 0.05 =40
         Now convert to dB form.

                    A 'v=20 log10 40
                    A 'v=201.602
                    A 'v=32.04 dB

         The approximation technique yields 40=2210, or 6 dB + 6 dB + 20 dB, or
         32 dB.

To convert A'v to A, reverse the process.  (16.5)
                    Av=log10 -1 A 'v 20

Example 16.6

     An amplifier has a gain of 26 dB. If the input signal is 10 mV, what is the
     output?

               Av=log10 -1 A' v 20
               Av=log10 -1 2620
               Av =19.95
               V out= Av V i n
               V out=19.9510 mV

The final point to note in this section is that, as in the case of power gain, a negative
decibel value indicates a loss. Therefore, a 2:1 voltage divider would have a gain of
-6 dB.

408
Signal Representation in dBW and dBV

As you can see from the preceding section, it is possible to spend considerable time
converting between decibel gains and ordinary voltages and powers. Because the
decibel form does offer advantages for gain measurement, it would make sense to
use a decibel form for power and voltage levels as well. This is a relatively
straightforward process. There is no reason why we can't express a power or voltage
in a logarithmic form. Because a dB value just indicates a ratio, all we need to do is
decide on a reference (i.e., a comparative base for the ratio). For power
measurements, a likely choice would be 1 watt. In other words, we can describe a
power as being a certain number of dB above or below 1 watt. Positive values will
indicate powers greater than 1 watt, while negative values will indicate powers less
than 1 watt. In general equation form:

              P ' =10log 10 P reference                                   (16.6)

The answer will have units of dBW, that is, decibels relative to 1 watt.

Example 16.7

A power amplifier has a maximum output of 120 W. What is this power in

dBW?

          P ' =10log 10 P 1 Watt
          P ' =10log 10 120 W 1 W
          P ' =20.8 dBW

There is nothing sacred about the 1 watt reference, short of its convenience. We
could just as easily choose a different reference. Other common reference points are
1 milliwatt (dBm) and 1 femtowatt (dBf). Obviously, dBf is used for very low signal
levels, such as those coming from an antenna. dBm is in very wide use in the
communications industry. To use these other references, just divide the given power
by the new reference.

Example 16.8

         A small personal audio music player delivers 200 mW to its headphones.
         What is this output power in dBW, and in dBm?

         For an answer in units of dBW, use the 1 watt reference.

409
                 P ' =10 log10 P 1 Watt
                 P ' =10 log10 200 mW 1 W
                 P ' =-7 dBW

     For units of dBm, use a 1 milliwatt reference.

                 P ' =10 log10 P 1 Watt
                 P ' =10 log10 200 mW 1 mW
                 P ' =23 dBm

     200 mW, -7 dBW, and 23 dBm are three ways of saying the same thing.
     Note that the dBW and dBm values are 30 dB apart. This will always be
     true, because the references are a factor of 1000 (30 dB) apart.

In order to transfer a dBW or similar value into watts, reverse the process.

              P=log10-1 P '10 reference  (16.7)

Example 16.9

     A studio microphone produces a 12 dBm signal while recording normal
     speech. What is the output power in watts?

                  P=log10 -1 P '10 reference
                  P=log10 -1 12dBm 10 1 mW
                 P=15.8mW=0.0158 W

For voltages, we can use a similar system. A logical reference is 1 V, with the
resulting units being dBV. As before, these voltage measurements will use a
multiplier of 20 instead of 10.

              V '=20log10 V reference     (16.8)

410
Example 16.10

         A test oscillator produces a 2 volt signal. What is this value in dBV?

                    V '=20log10 V reference
                    V '=20log10 2 V 1 V
                    V '= 6.02dB

When both circuit gains and signal levels are specified in decibel form, analysis can
be very quick. Given an input level, simply add the gain to it in order to find the
output level. Given input and output levels, subtract them in order to find the gain.

Example 16.11

         A computer hard drive read/write amplifier exhibits a gain of 35 dB. If the
         input signal is -42 dBV, what is the output signal?

                    V 'out=V ' i n+ A' v
                    V 'out=-42 dBV+35dB
                    V 'out=-7 dBV

         Note that the final units are dBV and not dB, thus indicating a voltage and
         not merely a gain.

Example 16.12

         A guitar power amp needs an input of 20 dBm to achieve an output of 25
         dBW. What is the gain of the amplifier in dB?

         First, it is necessary to convert the power readings so that they share the
         same reference unit. Because dBm represents a reference 30 dB smaller than
         the dBW reference, just subtract 30 dB to compensate.

                    20 dBm=-10 dBW
                    G '= P 'out- P 'i n
                    G '=25dBW-(-10 dBW)
                    G '=35 dB

411
         Note that the units are dB and not dBW. This is very important! Saying that
         the gain is "so many" dBW is the same as saying the gain is "so many"
         watts. Obviously, gains are "pure" numbers and do not carry units such as
         watts or volts.

The usage of a dB-based system is shown graphically in Figure 16.3. Note how the
stage gains are added to the input signal to form the output. Even large circuits can
be quickly analyzed in this form. To make life in the lab even easier, it is possible to
take measurements directly in dB form. By doing this, you need never convert while
troubleshooting a design. For general-purpose work, voltage measurements are the
norm, and therefore a dBV scale is often used.

       10 dB          -6 dB          15 dB                                                Figure 16.3
                                                                                          Multistage dB application.

8 dBm         18 dBm         12 dBm         27 dBm

Items Of Interest In The Laboratory

When using a digital meter on a dBV scale it is possible to "underflow" the meter if
the signal is too weak. This will happen if you try to measure around zero volts, for
example. If you attempt to calculate the corresponding dBV value, your calculator
will probably show "error". The effective value is negative infinite dBV. The meter
will certainly have a hard time showing this value! Another item of interest revolves
around the use of dBm measurements. It is common to use a voltmeter to make dBm
measurements, in lieu of a wattmeter. While the connections are considerably
simpler, a voltmeter cannot measure power. How is this accomplished then? Well, as
long as the circuit impedance is known, power can be derived from a voltage
measurement. A common impedance in communication systems (such as recording
studios) is 600 , so a meter can be calibrated to give correct dBm readings by using
Power Law. If this meter is used on a non-600  circuit, the readings will no longer
reflect accurate dBm values (but will still properly reflect relative changes in dB).

Finally, recalling the chapter introduction regarding "110 dB" concert levels,
properly, that would read "110 dB-SPL", referring to "Sound Pressure Level". The
reference level corresponding to 0 dB-SPL is the quietest sound the average person
can hear; the threshold of hearing (20 micropascals for young healthy humans).
Thus, 110 dB-SPL refers to a sound pressure that is 110 dB greater than the threshold
of hearing. Typically, 1 dB represents a "just noticeable difference" in loudness for
humans, although this depends on the precise frequency and sound pressure.

412
16.3 Bode Plots

The Bode plot is a graphical response prediction technique that is useful for both
circuit design and analysis. It is named after Hendrik Wade Bode, an American
engineer known for his work in control systems theory and telecommunications. A
Bode plot is, in actuality, a pair of plots: One graphs the signal gain or loss of a
system versus frequency, while the other details the circuit phase versus frequency.
Both of these items are very important in the design of well-behaved, optimal
circuits.

Generally, Bode plots are drawn with logarithmic frequency axes, a decibel gain
axis, and a phase axis in degrees. First, let's take a look at the gain plot. A typical
gain plot is shown Figure 16.4. Remember, "gains" can be fractional, as with a
voltage divider.

              A' v                                                                        Figure 16.4
     A' midband                                                                           Generic gain plot.

                    f1  midband  f2  f

Note how the plot is relatively flat in the middle, or midband, region. The gain value
in this region is known as the midband gain. In purely passive circuits this value
may be fractional (i.e., a negative dB value). At either extreme of the midband
region, the gain begins to decrease. The gain plot shows two important frequencies,
f1 and f2. f1 is the lower break frequency while f2 is the upper break frequency. The
gain at the break frequencies is 3 dB less than the midband gain. These frequencies
are also known as the half-power points, or corner frequencies. Normally, amplifiers
are only used for signals between f1 and f2. The exact shape of the rolloff regions will
depend on the design of the circuit. For example, it is possible to design amplifiers
with no lower break frequency (i.e., a DC amplifier), however, all amplifiers will
exhibit an upper break. The break points are caused by the presence of circuit
reactances, typically coupling and stray capacitances. The gain plot is a summation
of the midband response with the upper and lower frequency limiting networks.
Let's take a look at the lower break, f1.

413
Lead Network Gain Response

Reduction in low frequency gain is caused by lead networks. A generic lead network           Figure 16.5
is shown in Figure 16.5. It gets its name from the fact that the output voltage              Lead network.
developed across R leads the input. At very high frequencies the circuit will be
essentially resistive. Conceptually, think of this as a simple voltage divider. The
divider ratio depends on the reactance of C. As the input frequency drops, Xc
increases. This makes Vout decrease. At very high frequencies, where Xc<<R, Vout is
approximately equal to Vin. This can be seen graphically in Figure 16.6, where the
frequency axis is normalized to fc. The break frequency (i.e., the frequency at which
the signal has decreased by 3 dB) is found via the standard equation,

                       f c= 1 2  R C

                         Lead Network Magnitude Response

                   0.01  0.1                        1           10
                 10                                               10
                              Approximate                Exact
                  0                                                    Figure 16.6
Amplitude (dB)  -10                                                    Lead network gain plot.

                                                                  0

                                                                  -10

                -20 Slope: 6 dB/octave or 20 dB/decade -20

                -30                                             -30

                -40      0.1  Normalized frequency  1.0            -40
                    0.0                                         10.0

The response below fc will be a straight line if a decibel gain axis and a logarithmic
frequency axis are used. This makes for very quick and convenient sketching of
circuit response. The slope of this line is 6 dB per octave (an octave is a doubling or
halving of frequency, e.g., 800 Hz is 3 octaves above 100 Hz).49 This range covers a
factor of two in frequency. This slope may also be expressed as 20 dB per decade,
where a decade is a factor of 10 in frequency. With reasonable accuracy, this curve
may be approximated as two line segments, called asymptotes, shown in Figure 16.6
(blue). The shape of this curve is the same for any lead network. Because of this, it is
very easy to find the approximate gain at any given frequency as long as fc is known.

49 The term octave is borrowed from the field of music. It gets its name from the fact that
there are eight notes in the standard western scale: do-re-mi-fa-sol-la-ti-do.

414
It is not necessary to go through reactance and phasor calculations. To create a
general response equation, start with the voltage divider rule to find the gain:

                 V out = R
                 V i n R- j X c

                 V out =            R0
                 V i n  R2+ X c2-arctan X c R

The magnitude of this is,

                  Av=      R

                       R +X c2      2

                 Av=         1                                      (16.9)
                               X c2

                           1+ 2
                               R

Recalling that,

                 f c= 1 2  R C

we may say,

                 R= 1
                     2 f cC

For any frequency of interest, f,

                 X c= 1 2  f C

Equating the two preceding equations yields,

                 fc= Xc                                             (16.10)
                 fR

Substituting equation 16.10 in equation 16.9 gives,

                 Av=        1                                       (16.11)
                              f c2

                          1+ 2
                              f

To express Av in dB, substitute equation 16.11 into equation 16.5.
415
                A 'v=20 log10    1
                                   f c2

                               1+ 2
                                   f

After simplification, the final result is:

                    ( )f c2                                 (16.12)

               A 'v=-10 log10 1+ 2
                                       f

     Where
     fc is the critical frequency,
     f is the frequency of interest,
     A'v is the decibel gain at the frequency of interest.

Example 16.13

     A circuit has a lower break frequency of 40 Hz. How much signal is lost at
     10 Hz?

              ( )f c2

               A 'v=-10 log10 1+ 2
                                       f

               ( )402

               A 'v=-10 log10 1+ 2
                                       10

               A 'v=-12.3 dB

     In other words, the signal level is 12.3 dB lower than it is in the midband.
     Note that 10 Hz is 2 octaves below the break frequency. Because the cutoff
     slope is 6 dB per octave, each octave loses 6 dB. Therefore, the approximate
     result is -12 dB, which double-checks the exact result. Without the lead
     network, the gain would stay at 0 dB all the way down to DC (0 Hz.)

Lead Network Phase Response

At very low frequencies, the circuit of Figure 16.5 is largely capacitive. Because of
this, the output voltage developed across R leads by 90 degrees. At very high
frequencies the circuit will be largely resistive. At this point Vout will be in phase with
Vin. At the critical frequency, Vout will lead by 45 degrees. A general phase graph is
shown in Figure 16.7. As with the gain plot, the phase plot shape is the same for any
lead network. The general phase equation may be obtained from the voltage divider:

416
                         V out = R
                         V i n R- j X c

                         V out =         R0
                         V i n R2+ X c2 -arctan X c R

The phase portion of this is,

                         =arctan X c
                                      R

By using equation 10.6, this simplifies to,

                         =arctan f c                                              (16.13)
                                      f

                         Where
                         fc is the critical frequency,
                         f is the frequency of interest,
                          is the phase angle at the frequency of interest.

                                     Lead Network Phase Response

                   0.01         0.1               1                         10              100
                 90                                                                            90
                 80      Exact       Approximate
                 70                                                                                Figure 16.7
Phase (degrees)  60                                                                           80 Lead network phase response.
                 50
                 40             0.1               1.0                       10.0               70
                 30                      Normalized frequency                                  60
                 20                                                                            50
                 10                                                                            40
                                                                                               30
                  0                                                                            20
                    0.0                                                                        10
                                                                                               0
                                                                                           100.0

Often, an approximation, such as the blue line in Figure 16.7, is sufficient. By using
Equation 16.13, you can show that this approximation is off by no more than 6
degrees at the corners.

417
Example 16.14

         A telephone amplifier has a lower break frequency of 120 Hz. What is the
         phase response one decade below and one decade above?

         One decade below 120 Hz is 12 Hz, while one decade above is 1.2 kHz.
                    =arctan f c
                                 f
                    =arctan 120 Hz 12Hz

          =84.3degrees one decade below f c (i.e, approaching 90 degrees)
                    =arctan 120 Hz 1.2 kHz

          =5.71degrees one decade above f c (i.e., approaching 0 degrees)

         Remember, if a circuit or amplifier is direct-coupled, and has no lead
         networks, the phase will remain at 0 degrees right back to 0 Hz (DC).

Lag Network Response

Unlike its lead network counterpart, all systems will contain lag networks. In           Figure 16.8
essence, it is little more than an inverted lead network. As you can see from Figure     Lag network.
16.8, it simply transposes the R and C locations. Because of this, the response tends
to be inverted as well. In terms of gain, Xc is very large at low frequencies, and thus
Vout equals Vin. At high frequencies, Xc decreases, and Vout falls. The break point
occurs when Xc equals R. The general gain plot is shown in Figure 16.9. Like the
lead network response, the slope of this curve is -6 dB per octave (or -20 dB per
decade.) Note that the slope is negative instead of positive. We can derive a general
gain equation for this circuit in virtually the same manner as we did for the lead
network. The derivation is left as an exercise.

          ( )f 2                                            (16.14)

     A 'v=-10 log10 1+ 2
                             fc

     Where
     fc is the critical frequency,
     f is the frequency of interest,
     A'v is the decibel gain at the frequency of interest.

418
Note that this equation is almost the same as Equation 16.12. The only difference is
that f and fc have been transposed.

                         Lag Network Magnitude Response

                    0.1         1                            10                      100
                 10                                                                     10
                         Exact                  Approximate
                  0                                                                          Figure 16.9
Amplitude (dB)  -10                                                                          Lag network gain plot.

                                                                                        0

                                                                                        -10

                -20                                                                  -20

                                                Slope: -6dB/octave
                                                or -20dB/decade

                -30                                                                  -30

                -40             1.0  Normalized frequency    10.0                        -40
                    0.1                                                              100.0

In a similar vein, we may examine the phase response. At very low frequencies, the
circuit is basically capacitive. Because the output is taken across C, Vout will be in
phase with Vin. At very high frequencies, the circuit is essentially resistive.
Consequently, the output voltage across C will lag by 90 degrees. At the break
frequency the phase will be -45 degrees. A general phase plot is shown in Figure
16.10. As with the lead network,we may derive a phase equation. Again, the exact
steps are very similar, and left as an exercise.

                         =-90+arctan f c                                    (16.15)
                                             f

                         Where
                         fc is the critical frequency,
                         f is the frequency of interest,
                          is the phase angle at the frequency of interest.

419
                                           Lag Network Phase Response

                         0.01         0.1                   1               10                                                 100
                        0                                                                                                         0
                      -10      Exact       Approximate                                                                            -10  Figure 16.10
                      -20                                                                                                         -20  Lag network phase response.
                      -30                                                                                                         -30
     Phase (degrees)  -40                                                                                                         -40
                      -50                                                                                                         -50
                      -60             0.1                   1.0             10.0                                                  -60
                      -70                             Normalized frequency                                                        -70
                      -80                                                                                                         -80
                      -90                                                                                                         -90
                          0.0
                                                                                                                              100.0

Example 16.15

                      A medical ultra sound transducer feeds a lag network with an upper break
                      frequency of 150 kHz. What are the gain and phase values at 1.6 MHz?

                      Because this represents a little more than a 1 decade increase, the                                              Figure 16.11
                      approximate values are -20 dB and -90 degrees, from                                                              Bode plot for 150 kHz lag.
                      Figures 16.7 and 16.8, respectively. The exact values are:

                                                                                                                         A'v

                                    ( )f 2                                        0 dB                                                 150 kHz

                               A 'v=-10 log10 1+ 2                                                                                                                  f
                                                       fc

                               A 'v=-10 log10 1+( ) 1.6MHz2    2                                                                       -6 dB/octave
                                                      150 kHz

                               A 'v=-20.6dB

                               =-90+arctan f c
                                                   f

                               =-90+arctan 150 kHz 1.6 MHz                        

                                =-84.6 degrees                                    0                                                   15 kHz  150 kHz 1.5 MHz

                                                                                                                                                                    f

                      The complete Bode plot for this network is shown in Figure
                      16.11. It is very useful to examine both plots simultaneously. -45
                      In this manner you can find the exact phase change for a
                      given gain quite easily. For example, if you look carefully at -90
                      the plots of Figure 16.11, you will note that at the critical
                      frequency of 150 kHz, the total phase change is -45 degrees.

420
Because this circuit involved the use of a single lag network, this is exactly
what you would expect.

Rise Time versus Bandwidth

For pulse-type signals, the "speed" of a circuit is often expressed in terms of its rise
time. If a square pulse such as Figure 16.12a is passed into a simple lag network, the
capacitor charging effect will produce a rounded variation, as seen in Figure 16.12b.
This effect places an upper limit on the duration of pulses that a given circuit can
handle without producing excessive distortion.

Vpeak                                                                                     Figure 16.12a
                                                                                          Pulse rise time effect:
                                                                                          Input to network.

         t0                   t

By definition, rise time is the amount of time it takes for the signal to traverse from
10% to 90% of the peak value of the pulse. The shape of this pulse is defined by the
standard capacitor charge equation examined in earlier course work, and is valid for
any system with a single clearly dominant lag network.

               ( )-t                (16.16)

         V out=V peak 1- R C

  Vpeak                                                                                   Figure 16.12b
.9Vpeak                                                                                   Pulse rise time effect:
                                                                                          Output of network.

.1Vpeak

         t0 t1 t2                t

In order to find the time internal from the initial starting point to the 10% point, set
Vout to 0.1Vpeak in Equation 16.16 and solve for t1.

421
              ( )-t1                                         (16.17)

     0.1 V peak = V peak 1- RC

                                                       -t 1

     0.1 V peak = V peak -V peak  RC

                                         -t1

     0.9 V peak = V peak  RC

                              -t1

           0.9 =  RC
       log 0.9 = -t1

                   RC

             t1=0.105 RC

To find the interval up to the 90% point, follow the same technique using 0.9Vpeak .
Doing so yields:

     t2=2.303 RC                                             (16.18)

The rise time, Tr, is the difference between t1 and t2

     T r=t 1-t 2                                             (16.19)
     T r=2.303 R C-0.105 RC
     T r  2.2 R C

Equation 16.19 ties the rise time to the lag network's R and C values. These same
values also set the critical frequency f2. By combining equation 16.15 with the basic
critical frequency relationship, we can derive an equation relating f2 to Tr.

     f 2= 1 2  RC

Solving 16.19 in terms of RC, and substituting yields

     f 2= 2.2                                                (16.20)
          2 T r

      f 2=0.35
             Tr

     Where
     f2 is the upper critical frequency,
     Tr is the rise time of the output pulse.

422
Example 16.16

         Determine the rise time for a lag network critical at 100 kHz.

                     f 2=0.35
                           Tr

                    T r=0.35
                            f2

                    T r= 0.35 100 kHz
                    T r=3.5 s

16.4 Combining the Elements - Multi-Stage Effects

A complete gain or phase plot combines three elements: (1) the midband response,
(2) the lead response, and (3) the lag response. Normally, a particular design will
contain multiple lead and lag networks. The complete response is the summation of
the individual responses. For this reason, it is useful to find the dominant lead and
lag networks. These are the networks that affect the midband response first. For lead
networks, the dominant one will be the one with the highest fc . Conversely, the
dominant lag network will be the one with the lowest fc . It is very common to
approximate the complete system response by drawing straight-line segments such
as those given in Figures 16.5 and 16.7. The process goes something like this:

     Locate all fc s on the frequency axis.
     Draw a straight line between the dominant lag and lead fc s at the midband

         gain. If the system does not contain any lead networks, continue the
         midband gain line down to DC.
     Draw a 6 dB per octave slope between the dominant lead and the next lower
         lead network.
     Because the effects of the networks are cumulative, draw a 12 dB per octave
         slope between the second lead fc and the third fc. After the third fc, the slope
         should be 18 dB per octave, after the fourth, 24 dB per octave, and so on.
     Draw a -6 dB per octave slope between the dominant lag fc and the next
         highest fc. Again, the effects are cumulative, so increase the slope by -6 dB
         at every new fc .

423
Example 16.17

     Draw the Bode gain plot for the following amplifier: A'v midband = 26 dB,
     one lead network critical at 200 Hz, one lag network critical at 10 kHz, and
     another lag network critical at 30 kHz.

     The dominant lag network is 10 kHz. There is only one lead network, so it's
     dominant by default.

      Draw a straight line between 200 Hz and 10 kHz at an amplitude of
         26 dB.

      Draw a 6 dB per octave slope below 200 Hz. To do this, drop down
         one octave (100 Hz) and subtract 6 dB from the present gain (26 dB
         - 6dB = 20 dB.) The line will start at the point 200 Hz/26 dB, and
         pass through the point 100 Hz/20 dB. Because there are no other
         lead networks, this line may be extended to the left edge of the
         graph.

      Draw a -6 dB per octave slope between 10 kHz and 30 kHz. The
         construction point will be 20 kHz/20 dB. Continue this line to
         30 kHz. The gain at the 30 kHz intersection should be around
         16 dB. The slope above this second fc will be -12 dB per octave.
         Therefore, the second construction point should be at 60 kHz/4 dB
         (one octave above 30 kHz, and 12 dB down from the 30 kHz gain).
         Because this is the final lag network, this line may be extended to
         the right edge of the graph.

     A completed graph is shown in Figure 16.13.                                   Figure 16.13
                                                                                   Gain plot of complete amplifier.
          A'v
                                                  -6 dB/octave
       26 dB

               6 dB/octave                        -12 dB/octave

     0 dB                    10 k 30 k                          f
                        200

424
There is one item that should be noted before we leave this section, and that is the
concept of narrowing. Narrowing occurs when two or more networks share similar
critical frequencies, and one of them is a dominant network. The result is that the
true -3 dB breakpoints may be altered. Here is an extreme example. Assume that a
circuit has two lag networks, both critical at 1 MHz. A Bode plot would indicate that
the breakpoint is 1 MHz. This is not really true. Remember, the effects of lead and
lag networks are cumulative. Because each network produces a 3 dB loss at 1 MHz,
the net loss at this frequency is actually 6 dB. The true -3 dB point will have been
shifted down. The Bode plot only gives you the approximate shape of the response.

Summary

We have seen how to convert gains and signals into a decibel form for both powers
and voltages. This is convenient because what would require multiplication and
division under the ordinary scheme only requires simple addition and subtraction in
the dB scheme. Along with this, dB measurement is used almost exclusively for
Bode gain plots. A Bode plot details a system's gain magnitude and phase response.
For gain, the amplitude is measured in dB, while the frequency is normally
presented in log form. For a phase plot, phase is measured in degrees, and again, the
frequency axis is logarithmic. The changes in gain and phase at the frequency
extremes are caused by lead and lag networks. Lead networks cause the low
frequency gain to roll off. The roll off rate is 6 dB per octave per network. The phase
will change from +90 degrees to 0 degrees per network. Lag networks cause the high
frequency gain to roll off at a rate of -6 dB per octave per network. The phase
change per lag network is from 0 degrees to -90 degrees.

Review Questions

    1. What are the advantages of using decibels over the ordinary scheme?
    2. How do decibel power and voltage gain calculations differ?
    3. Define the differences between dB, dBW, dBm, dBV and dBu.
    4. Describe a Bode plot.
    5. What is a lead network? What general response does it yield?
    6. What is a lag network? What general response does it yield?
    7. What do the terms f1 and f2 indicate about a system's response?
    8. What are the rolloff slopes for lead and lag networks?
    9. What are the phase changes produced by individual lead and lag networks?
    10. How is rise time related to upper break frequency?
    11. How do multiple lead or lag networks interact to form an overall system

         response?
    12. How does the decibel measurement scheme differ from the ordinary method

         of indicating gains and signal level?

425
Problems

Analysis Problems - dB emphasis

    1. Convert the following power gains into dB form: a) 10 b) 80 c) 500 d) 1
         e) 0.2 f) 0.03.

    2. Convert the following dB power gains into ordinary form: a) 0 dB b) 12 dB
         c) 33.1 dB d) 0.2 dB e) -5.4 dB f) -20 dB.

    3. An amplifier has an input signal of 1 mW, and produces a 2 W output. What
         is the power gain in dB?

    4. A Hi-Fi power amplifier has a maximum output of 50 W and a power gain
         of 19 dB. What is the maximum input signal power?

    5. An amplifier with a power gain of 27 dB is driven by a 25 mW source.
         Assuming the amplifier doesn't clip, what is the output signal in watts?

    6. Convert the following voltage gains into dB form: a) 10 b) 40 c) 250 d) 1
         e) 0.5 f) 0.004

    7. Convert the following dB voltage gains into ordinary form: a) 0.5 dB
         b) 0 dB c) 46 dB d) 10.7 dB e) -8 dB f) -14.5 dB

    8. A guitar pre-amp has a gain of 44 dB. If the input signal is 12 mV, what is
         the output signal?

    9. A video amplifier has a 140 mV input and a 1.2 V output. What is the
         voltage gain in dB?

    10. The pre-amp in a particular tape deck can output a maximum signal of 4 V.
         If this amplifier has a gain of 18 dB, what is the maximum input signal?

    11. Convert the following powers into dBW: a) 1 W b) 23 W c) 6.5 W
         d) 0.2W e) 2.3 mW f) 1.2 kW g) 0.045 mW h) 0.3 W i) 5.6E-18 W.

    12. Repeat Problem 11 for units of dBm.
    13. Repeat Problem 11 for units of dBf.
    14. Convert the following voltages into dBV: a) 12.4 V b) 1 V c) 0.25 V

         d) 1.414 V e) 0.1 V f) 10.6 kV g) 13 mV h) 2.78 V.
    15. A two stage power amplifier has power gains of 12 dB and 16 dB. What is

         the total gain in dB and in ordinary form?
    16. If the amplifier of Problem 15 has an input of -18 dBW, what is the final

         output in dBW? in dBm? in watts?
    17. Referring to Figure 16.3, what are the various stages' outputs if the input is

         changed to -4 dBm? to -34 dBW?
    18. Which amplifier has the greatest power output? a) 50 watts b) 18 dBW

         c) 50 dBm.
    19. Which amplifier has the greatest power output? a) 200 mW b) -10 dBW

         c) 22 dBm.

426
    20. A three stage amplifier has voltage gains of 20 dB, 5 dB, and 12 dB
         respectively. What is the total voltage gain in dB and in ordinary form?

    21. If the circuit of Problem 20 has an input voltage of -16 dBV, what are the
         outputs of the various stages in dBV? In volts?

    22. Repeat Problem 21 for an input of 12 mV.
    23. Which amplifier produces the largest output voltage? a) 15 V b) 16 dBV

Analysis Problems - Bode plot emphasis

    24. Given a lead network critical at 3 kHz, what are the gain and phase values at
         100 Hz, 3 kHz, and 40 kHz?

    25. Given a lag network tuned to 700 kHz, what are the gain and phase values at
         50 kHz, 700 kHz, and 10 MHz? What is the rise time?

    26. A noninverting amplifier has a midband voltage gain of 18 dB and a single
         lag network at 200 kHz. What are the gain and phase values at 30 kHz,
         200 kHz, and 1 MHz. What is the rise time?

    27. Repeat Problem 26 for an inverting (-180 degrees) amplifier.
    28. Draw the Bode plot for the circuit of Problem 26.
    29. Draw the Bode plot for the circuit of Problem 27.
    30. An inverting (-180 degrees) amplifier has a midband gain of 32 dB and a

         single lead network critical at 20 Hz (assume the lag network fc is high
         enough to ignore for low frequency calculations). What are the gain and
         phase values at 4 Hz, 20Hz, and 100 Hz?
    31. Repeat Problem 29 with a noninverting amplifier.
    32. Draw the Bode plot for the circuit of Problem 30.
    33. Draw the Bode plot for the circuit of Problem 31.
    34. A noninverting amplifier used for ultrasonic applications has a midband gain
         of 41 dB, a lag network critical at 250 kHz, and a lead network critical at
         30 kHz. Draw its gain Bode plot.
    35. Find the gain and phase at 20 kHz, 100 kHz, and 800 kHz for the circuit of
         Problem 34.
    36. If the circuit of Problem 34 has a second lag network added at 300 kHz,
         What are the new gain and phase values at 20 kHz, 100 kHz, and 800 kHz?
    37. Draw the gain Bode plot for the circuit of Problem 36.
    38. What are the maximum and minimum phase shifts across the entire
         frequency spectrum for the circuit of Problem 36?
    39. A noninverting DC amplifier has a midband gain of 36 dB, and lag networks
         at 100 kHz, 750 kHz, and 1.2 MHz. Draw its gain Bode plot.

427
    40. What are the maximum and minimum phase shifts across the entire
         frequency spectrum for the circuit of Problem 39?

    41. What is the maximum rate of high frequency attenuation for the circuit of
         Problem 39 in dB/Decade?

    42. If an amplifier has two lead networks, what is the maximum rate of low
         frequency attenuation in dB/Octave?

Challenge Problems

    43. You would like to use a voltmeter to take dBm readings in a 600  system.
         What voltage should produce 0 dBm?

    44. Assuming that it takes about an 8 dB increase in sound pressure level in
         order to produce a sound that is subjectively "twice as loud" to the human
         ear, can a Hi-Fi using a 100 W amplifier sound twice as loud as one with a
         40 W amplifier (assuming the same loudspeakers)?

    45. Hi-Fi amplifiers are often rated with a "headroom factor" in dB. This
         indicates how much extra power the amplifier can produce for short periods
         of time, over and above its nominal rating. What is the maximum output
         power of a 250 W amplifier with 1.6 dB headroom?

    46. If the amplifier of Problem 34 picks up an extraneous signal that is a -10
         dBV sine wave at 15 kHz, what is the output?

    47. If the amplifier of Problem 39 picks up a high frequency interference signal
         at 30 MHz, how much is it attenuated over a normal signal? If this input
         signal is measured at 2 dBV, what should the output be?

    48. If an amplifier has two lag networks, and both are critical at 2 MHz, is the
         resulting f2 less than, equal to, or greater than 2 MHz?

    49. If an amplifier has two lead networks, and both are critical at 30 Hz, is the
         resulting f1 less than, equal to, or greater than 30 Hz?

Simulation Problems

    50. Use a simulator to plot the Bode gain response of the circuit in Problem 39.
    51. Use a simulator to plot the Bode phase response of the circuit in Problem 34.
    52. Use a simulation program to generate a Bode plot for a lead network

         comprised of a 1 k resistor and a 100 nF capacitor.

428
17 Frequency Limits

17.0 Chapter Learning Objectives

After completing this chapter, you should be able to:

     Recognize circuit components which impact the low frequency performance of BJT and FET amplifiers.
     Recognize circuit components which impact the high frequency performance of BJT and FET amplifiers.
     Analyze and compute the frequency limits (f1 and f2) of BJT and FET amplifiers.
     Design or modify the frequency limits (f1 and f2) of BJT and FET amplifiers.
     Understand how Miller's Theorem can impact the high frequency limit (f2) of certain amplifiers.

17.1 Introduction

All amplifiers, regardless of design, exhibit frequency limits. That is to say, there is a range of frequencies over
which an amplifier will work effectively. This concept was introduced in Chapter 6 and will be expanded greatly
here. The primary goal of this chapter is to offer methods of determining this range for both BJT and FET
amplifiers, as well as offering insight in how to design amplifiers to meet certain frequency criteria. As a
reminder, the lower and upper limit frequencies are denoted as f1 and f2, respectively. They represent the
frequencies at which the midband response has fallen by three decibels, or half power. They are also referred to
as the 3 dB down frequencies or corner frequencies. Without exception, all amplifiers will exhibit an upper
frequency limit, however, amplifiers can be designed to have no lower frequency limit. In other words, the f1 is
DC or 0 Hertz. Normally, these amplifiers are referred to as being DC or direct coupled.

In order to analyze the frequency range of amplifiers, we shall introduce new AC models for the circuits; one set
for low frequencies, and a second set for high frequencies. Certain assumptions that we took for granted, such as
coupling capacitors being treated as short circuits, may no longer be valid. Consequently, in order to obtain a
full frequency analysis of a given amplifier, we may need to examine three separate equivalent circuits: one for
the midband response, a second for the low frequency response, and a third for the high frequency response. The
low frequency equivalent will contain lead networks while the high frequency equivalent will contain lag
networks. The end result will be a Bode plot of the amplifier, much like the generic plots created in the prior
chapter.

We shall also make use of Miller's Theorem in this analysis. This will prove to be particularly important when
considering the high frequency performance of common emitter BJT and common source FET amplifiers.
Miller's Theorem also can be of great use when designing an amplifier to meet a specific high frequency limit as
it effectively multiplies the size of the associated capacitor.

429
17.2 Low Frequency Response

We begin our discussion at the low end of the frequency spectrum. Here, our focus is
on obtaining a value for f1, or designing for a desired f1.

Lead Networks

The system response at lower frequencies is dependent on the lead networks in the
circuit. Fortunately, these are easy to spot as generally they are caused by the
presence of coupling and/or bypass capacitors. Thus, a typical single stage amplifier,
whether BJT or FET, will have three such networks: one at the input, a second at the
output, and a third in the emitter or source bypass position. In multi-stage systems,
the output network of one stage will combine with the input network of the
following stage to create a single, combined network. Technically, the bypass
network is not a true lead network like the input and output networks, but the
practical difference is usually trivial. In any case, we will examine the difference a
little later in this section.

BJT Amplifiers

Common Emitter
Let us begin with a fairly generic swamped common emitter amplifier, as shown in
Figure 17.1.

                                                                                                                     Figure 17.1
                                                                                                                     BJT common emitter amplifier.

430
The low frequency equivalent circuit is similar to the midband equivalent, except
that we do not assume that the coupling and bypass capacitors are shorted. This is
shown in Figure 17.2, redrawn for clarity.

                                                                                                                     Figure 17.2
                                                                                                                                  Low frequency equivalent of CE
                                                                                                                     amplifier.

In general, a lead network exists wherever the signal current flows through a            Figure 17.3
capacitor on its way to the load. The capacitor creates a frequency dependent voltage    Input lead network of CE
divider with the associated impedance. The capacitive reactance increases with           amplifier.
decreasing frequency, and thus the voltage divider effect worsens as the frequency is
lowered. That is, the percentage of the signal that gets to the load is progressively
reduced as the frequency decreases. This is the hallmark of a lead network. This
effect should be obvious with the input and output networks. The emitter bypass
network operates a little differently, as we shall see in a moment.

First, let's consider the input network. This section is shown in Figure 17.3. In order
to find the critical frequency, we need values for the capacitance and resistance. The
capacitance is just Cin, the input coupling capacitor. To find the resistance,
find the Thevenin equivalent resistance seen from the capacitor. To the left,
we have the internal resistance of the signal source, Rgen. The source itself is
shorted, leaving that branch at ground. To the right, we see the input
impedance of the stage which is the base biasing resistor, RB, in parallel with
Zin(base). Zin(base) is found by the usual equation, (RSW + r'e), assuming the
reactance of CE is negligible. For lack of a better term, we can call this total
resistance Rin(lead).

     Rin(lead) = Rgen + RB || (RSW + r'e)  (17.1)

If the circuit is not swamped, we can just set the swamping resistor, RSW, to zero.

431
The general equation for critical frequency is

                f c= 1 2  R C                                                             Figure 17.4
                                                                                          Output lead network of CE
Substituting the values for the input network, we find                                    amplifier.

                f c(input lead ) = 1                                         (17.2)       Figure 17.5
                               2  Ri n (lead ) C i n                                      Bypass lead network of CE
                                                                                          amplifier.
The analysis for the output network is similar. The equivalent circuit of the output
network is shown in Figure 17.4. Finding the Thevenin resistance, which we shall
call Rout(lead), is a simple matter of opening the current source. The resistance is the
series combination of RC and RL.

                Rout(lead) = RC + RL                                         (17.3)

Thus, we find,

                f c(output lead ) = 1                                        (17.4)
                                2  Rout (lead ) C out

Finally, we need to consider the emitter bypass network. The associated
capacitance is CE, And the low frequency equivalent circuit is shown in
Figure 17.5. By inspection, we can see that the resistance that the
capacitor "sees" is the emitter bias resistor, RE, in parallel with the
series combination of the swamping resistor, RSW, and the impedance
looking into the emitter, or Zin(emitter). From prior work with common
collector amplifiers in Chapter 7, it was discovered that the impedance
looking into the emitter is equal to r'e in series with the base resistance
divided by beta, which gives us

                ( ) Rbypass(lead ) = RE || RSW + r 'e + RB || Rgen           (17.5)

The swamping resistor tends to dominate the result as the final term usually is rather
small. We now have the third and final lead critical frequency formula for our BJT
common emitter amplifier:

                f c(bypasslead ) = 1                                         (17.6)
                                2  Rbypass(lead )C E

432
As mentioned previously, the bypass network is not a true lead network. By "true", it
is meant that the response does not roll off continuously as frequency is decreased.
In fact, at some point, the response will level off with no further loss incurred. This
can be understood by looking at precisely how the bypass capacitor controls the
gain. The job of this capacitor is to "short out" the emitter bias resistor, RE. This
occurs because XC is much smaller than the associated resistance at midband
frequencies. As the frequency decreases, the reactance increases, and the effective
AC emitter resistance is no longer zero. At this point we can think of the capacitor as
only partially bypassing the resistor. Thus, the voltage gain starts to decrease. It's as
if the swamping is increasing. With further decreases in frequency, the reactance
continues to increase. At some point, the reactance magnitude will equal the value of
the biasing resistor and further decreases in the frequency will have little effect on
the total AC emitter impedance. Thus, the gain will decrease no further. The result is
a "stepped" response. That is, after the initial rolloff, the gain flattens again,
producing the appearance of a step. From this we can deduce that this second
frequency is equal to

     f c(bypass step) = 1              (17.7)
                     2 RECE

A quick approximation of this frequency can be found by simply dividing the bypass
critical frequency by the ratio of the bias and swamping resistors. For example, if the
bias resistor is 5 k and the swamping resistor is 250 , the step frequency will be
roughly 20 times lower than the bypass critical frequency. Usually, this frequency is
low enough that it will not impact greatly the overall response of the amplifier, and
we need not bother with it.

Once the lead frequencies are computed, an appropriate Bode plot for the low
frequency portion of the spectrum may be generated for the amplifier, as outlined in
the prior chapter. Remember that the highest of these frequencies is the dominant
frequency, that is, the frequency at which midband response is first affected. Also, if
two or more of the frequencies are in close proximity and one of them is dominant,
there will be an interaction between them. This may lead to the system f1 being
somewhat higher than the dominant fc.

One final consideration is the absence of a swamping resistor. If the amplifier is not
swamped, the expressions developed for the input and bypass networks (i.e.,
equations 17.1 and 17.5) can still be used; just insert zero for the value of RSW. It is
worth noting, though, that the elimination of the swamping resistor will decrease the
associated effective resistance in these networks, resulting in higher required
capacitance values for a given critical frequency. In the case of the bypass network,
the effect can be dramatic.

Time for a few illustrative examples.

433
Example 17.1                                                                    Figure 17.6
                                                                                Circuit for Example 17.1.
         For the circuit of Figure 17.6, determine f1. Assume  = 165.

         First, we can approximate the DC emitter current to be
         about 2 mA which sets r'e to 13 . Starting with the
         input network, we find the total impedance using
         equation 17.1, and then find the input critical frequency.

                    Ri n(lead ) = Rgen+ RB || ( RSW +r ' e)
                    Ri n(lead ) = 50  + 20 k  || 165(100+13 )
                    Ri n(lead ) = 9.7 k 
                    f c (input lead) = 1

                                    2  Ri n(lead)C i n
                    f c(inputlead ) = 1 2  9.7 k  4.7  F
                    f c (inputlead ) = 3.5 Hz

         Turning to the output network, we see that the total
         resistance is the load plus RC, or 15 k.

                    f c (output lead ) = 1
                                     2  Rout(lead)C out

                    f c(output lead ) = 1 2  15 k  20  F
                    f c(output lead ) = 0.53 Hz

         Finally, we consider the bypass network. First, we find the effective
         resistance using equation 17.5.

       ( ) Rbypass(lead ) = RE || RSW + r 'e + RB || Rgen 

        ( ) Rbypass(lead ) = 4.5 k  || 100  + 13 + 20k  || 50  165

                    Rbypass (lead ) = 113 

                    f c (bypass lead ) = 1
                                     2  R bypass(lead )C E

                     f c(bypasslead ) = 1 2  113  33  F
                    f c (bypass lead ) = 42.7 Hz

434
The dominant network is the highest of the lead networks. This is the bypass
network at 42.7 Hz. The other two networks are reasonably well below this
point, thus, f1 is approximately 42.7 Hz.

Computer Simulation

To crosscheck the calculations, the circuit of Example 17.1 is entered into a
simulator, as shown in Figure 17.7.

                                                                                     Figure 17.7
                                                                                     BJT low frequency simulation
                                                                                     schematic.

An AC analysis is performed on the circuit and a Bode plot is generated. The result
is shown in Figure 17.8. The amplifier's midband gain is just below 29 dB. The "3
dB down" corner frequency is at approximately 42.8 Hz, verifying our computed
value.

435
                                                                                                                     Figure 17.8
                                                                                                                     BJT low frequency simulation
                                                                                                                     results for original circuit
                                                                                                                     (Cby dominant).

The next question is, how do we verify that the analyses of the other two networks
are correct? This turns out to be quite easy. As each network is dependent on a single
capacitor, all we have to do is change the capacitor value(s) such that the remaining
networks become dominant in turn. For example, in order to make the input network
dominant, we can decrease Cin by a large amount which raises the associated
frequency. We also increase Cby, dropping its frequency, and thus effectively
swapping their places in the spectrum.
To see the input network, Cin is reduced by a factor of ten to 470 nF. This raises its
expected critical frequency by a factor of ten, to 35 Hz. At the same time, the bypass
capacitor is increased by a factor of ten to 330 F, reducing its frequency to 4.27 Hz.
The results of the modified circuit are shown in Figure 17.9. The cursor indicates a
frequency of approximately 34 Hz, once again confirming our calculations. It is
worth noting that the interaction with the two lower frequency networks is apparent
by the increasing steepness of the rolloff in the vicinity of 3 to 5 Hz.
To use the same technique on the output network, we can decrease Cout to 200 nF, or
a factor of 100. This will push up its critical frequency by the same factor, to 53 Hz.
To avoid interaction, Cin is changed back to 4.7 F. The results can be seen in Figure
17.10, producing a frequency of about 54.5 Hz. Again, the agreement is good.

436
                                                                                                                     Figure 17.9
                                                                                                                     BJT low frequency simulation
                                                                                                                     results for second capacitor
                                                                                                                     configuration (Cin dominant).

                                                                                                                     Figure 17.10
                                                                                                                     BJT low frequency simulation
                                                                                                                     results for third capacitor
                                                                                                                     configuration (Cout dominant).

437
The final item to check for is the "stepped" response of the bypass network that was
mentioned earlier. This is a little trickier in that the secondary frequency (i.e., where
the rolloff begins to revert to horizontal), is easiest to see if it occurs above the
remaining critical frequencies. To see this, we will need to reduce the bypass
capacitor by a considerable amount. By dropping to a 330 nF, the critical frequency
will be translated up to 4.27 kHz. The "step" frequency will be lower by a factor just
a little less than the ratio of RE to RSW, or a factor of about 40 here. The results of this
simulation can be seen in Figure 17.11. In this case, the frequency of 110 Hz is
found by moving above the flat stepped portion by 3 dB.

                                                                                                                     Figure 17.11
                                                                                                                     BJT low frequency simulation
                                                                                                                     results showing stepped
                                                                                                                     response of bypass network
                                                                                                                     with Cby set to 330 nF.

Common Collector (Emitter Follower)
We turn our attention next to the emitter follower configuration. An example circuit
is shown in Figure 17.12. The first thing to notice is that this circuit has only two
lead networks; one at the input and another at the output. Consequently, unlike the
common emitter amplifier, the rolloff rate will be no steeper than 12 dB per octave
(40 dB per decade).

438
                                                                                           Figure 17.12
                                                                                           BJT common collector or emitter
                                                                                           follower circuit.

The analysis of this circuit is similar to that of the common emitter amplifier. The
input network formulas are virtually unchanged, except for a minor variation on the
computation of Zin(base), namely, that RL must be placed in parallel with RE, and this
combination serves the place of the former swamping resistor, RSW, in the equation.
This assumes that the reactance of Cout is negligible.

     Rin(lead) = Rgen + RB || (RE || RL + r'e)            (17.8)

The critical frequency equation is unchanged. As far as the output network is
concerned, the effective resistance to the right is RL, and to the left is RE in parallel
with the impedance looking into the emitter. In other words, it is similar to the
expression used for the common emitter's bypass network. The critical frequency
equation remains unchanged here as well.

     ( ) Routput (lead ) = RL+ RE || r ' e + RB || Rgen   (17.9)

Example 17.2

         For the circuit of Figure 17.13, determine f1. Assume  = 100.

         If we assume that the DC base voltage is close to zero, we can approximate
         the DC emitter current to be approximately 1 mA. This sets r'e to 26 . For
         the input network, we find the total impedance using equation 17.8, and then
         the input critical frequency. The generator impedance is assumed to be zero.

439
          Ri n(lead ) = Rgen+ RB || ( RE || RL +r ' e)                                          Figure 17.13
          Ri n(lead ) = 0  + 15 k  || 100(10 k  || 5.3 k +26 )                                  Circuit for Example 17.2.
          Ri n(lead ) = 14.4 k 
           f c( input lead ) = 1

                          2  Ri n(lead )C i n
           f c(inputlead ) = 1 2  14.4 k 3.3  F
           f c (inputlead ) = 3.35 Hz

For the output network, the resistance looking into the
emitter is the r'e of 26 , due to the fact that the source
shorts the base to ground. This value is placed in parallel
with the 5.3 k biasing resistor, for a result of
approximately 26 . Finally, the 10 k load is added,
leaving us with approximately 10 k total. From here we
can find the critical frequency.

           f c (output lead ) = 1
                           2  R output( lead) C out

           f c(output lead) = 1 2  10 k  47  F
           f c (output lead ) = 0.34 Hz

Clearly, the input network is dominant, and therefore, f1 is approximately
3.35 Hz.

Common Base

Analysis of the common base configuration follows that of the common emitter and
common source configurations. Like the emitter follower, it has only two lead
networks; one at the input, and a second at the output. The output network is
virtually identical to that of the common emitter (essentially a current source feeding
two resistors that are separated by an in-line capacitor). As such, the equations for
equivalent resistance and critical frequency are unchanged.

For the common base amplifier, the signal source drives the emitter. Thus, the input
impedance is found in essentially the same manner as we find the impedance
looking toward the emitter of the emitter follower. This is equal to the emitter bias
resistor, RE, in parallel with Zin(emitter). Further, as the base terminal of the common
base amplifier is at AC ground, Zin(emitter) is equal to r'e. Finally, the value of the signal
source's internal impedance (i.e., Rgen) is added to the total to find the effective
resistance. That might sound like a bit of work, but with typical values, this can be
approximated as r'e plus Rgen. Being relatively small, this will require a large
capacitance if a low critical frequency is desired.

440
FET Amplifiers

When it comes to lead network response, FET-based circuits have much in common
with their BJT counterparts. This is due, at least in part, to the fact that both devices
are modeled as controlled current sources. Also, due to the fact that the gate of a FET
exhibits a very high input impedance, finding f1 for FET circuits tends to be
somewhat easier than for BJTs. Finally, the low frequency analysis for MOSFETs is
virtually the same as that for JFETs, further easing our analysis efforts.
Common Source
To start, consider the generic common source amplifier shown in Figure 17.14. To
keep this as general as possible, this amplifier includes a swamping resistor.

                                                                                                                     Figure 17.14
                                                                                                                     FET common source amplifier.

Like the bipolar version, this amplifier has three lead networks; one at the input due
to Cin, a second at the output due to Cout, and a third due to the bypass capacitor, CS.
Once again, the bypass network is not a true lead network, and ultimately will
produce a stepped-style response.
In order to determine the effective resistance values for these three networks, we
shall use a low frequency AC equivalent of the circuit, as shown in Figure 17.15.
This is just an ordinary AC midband equivalent, except that we keep the coupling
and bypass capacitors. The objective will be to find the Thevenin equivalent
resistance as seen from the perspective of each of the three capacitors.

441
                                                                                           Figure 17.15
                                                                                           Low frequency equivalent
                                                                                           of FET common source
                                                                                           amplifier.

First, let's consider the input network. To the left of Cin we have Rgen, with the signal
source shorting back to ground. To the right we see the gate biasing resistor, RG,
which is in parallel with Zin(gate). As Zin(gate) is assumed to be infinite at low
frequencies, this reduces to just RG. Thus, the effective resistance is

     Rin(lead) = Rgen + RG                       (17.10)

Therefore, the input lead critical frequency is

     f c(input lead ) = 1                        (17.11)
                    2  Ri n (lead ) C i n

For the output network, we see the same sort of connection that we had with the BJT
version. The FET is modeled as a controlled current source and is opened, leaving
one resistor on either side of Cout. The effective resistance is

     Rout(lead) = RD + RL                        (17.12)

The corresponding critical frequency is

     f c(output lead ) = 1                       (17.13)
                     2  Rout (lead ) C out

We now turn our attention to the third and final network, that of the source bypass
capacitor, CS. To help clarify the analysis, this network is redrawn in Figure 17.16.

442
                                                                                     Figure 17.16
                                                                                     Low frequency equivalent of
                                                                                     FET bypass network.

Unsurprisingly, this network is not much different from the BJT bypass network. The
sole difference is in the computation for the impedance seen looking into the
transistor's terminal. The FET version is simpler, being the same as the input
impedance of a common gate amplifier, or the reciprocal of the transconductance.
The resulting equivalent value as seen by the capacitor is

     ( ) Rbypass(lead ) = RS ||
                                      RSW + 1                     (17.14)
                                              gm

The associated critical frequency is

     f c(bypass lead ) = 1                                        (17.15)
                     2  Rbypass(lead )C S

If the amplifier is not swamped, simply set RSW to 0. Now for an example:            Figure 17.17
Example 17.3                                                                         Circuit for Example 17.3.

     Given the circuit of Figure 17.17, determine f1. Assume gm
     is 2 mS.

     Beginning with the input network, to the right of the 47 nF
     capacitor we have 5 M in parallel with Zin(gate) (which
     approaches infinity), leaving just 5 M. To this we add the
     600  generator impedance for a total of virtually 5 M.

                f c (inputlead ) = 1
                               2  Ri n(lead )C i n

                f c(inputlead ) = 1 2  5 M  47 nF
                f c (inputlead ) = 0.677 Hz

443
     At the output network, the 1 F capacitor "sees" the drain biasing resistor
     and the load, for a total of 18 k.

                f c (output lead ) = 1
                                2  R output( lead) C out

                f c(output lead ) = 1 2  18 k  1  F
                f c(output lead ) = 8.84 Hz

     For the unswamped bypass network, the effective resistance is

                 Rbypass (lead ) = RS || 1
                                       gm

                 Rbypass(lead ) = 3 k  || 1 2 mS
                 Rbypass (lead ) = 429

     Therefore, the critical frequency for the bypass network is

                f c ( bypass lead) = 1
                                2  Rbypass (lead )C S

                f c(bypasslead ) = 1 2  429 220 F
                f c(bypasslead ) = 1.69 Hz

     The output network is dominant and thus the expected f1 is approximately
     8.84 Hz. The other networks are not that far off, so some interaction can be
     expected. This would push the true f1 to a slightly higher frequency.

Common Drain (Source Follower)

The lead network analysis for the common drain configuration is similar to that of
the BJT common collector follower. Further, some of the equations are identical to
those used for a non-swamped common source amplifier. To investigate, we shall
make use of a simple source follower, as seen in Figure 17.18. To begin with, the
input network is identical to the common source configuration. This yields an
equivalent resistance of

     Rin(lead) = Rgen + RG                               (17.16)

Consequently, the input lead critical frequency must be

     f c(input lead ) = 1                                (17.17)
                    2  Ri n (lead ) C i n

444
                                                                                         Figure 17.18
                                                                                         Simple common drain follower.

At the output network, the capacitor "sees" the load to the right. To the left, we find
the source biasing resistor, RS, in parallel with the value looking into the source,
which we know is equal to the reciprocal of the transconductance.

              Rbypass (lead ) = RL+ RS || 1            (17.18)
                                          gm

Therefore, the output lead critical frequency is

              f c(output lead ) = 1                    (17.19)
                              2  Routput (lead )C out

And now for something slightly different: an example using a design target
frequency.

Example 17.4

         Determine values for the capacitors in the circuit of Figure 17.19 to achieve   Figure 17.19
         a lower break frequency, f1, of 20 Hz. Assume gm is 4 mS.                       Circuit for Example 17.4.

         Unlike the earlier analysis examples, here we have a
         known value for the lower corner frequency. Thus, we will
         need to find the effective resistance values for the input
         and output networks, and then solve for the capacitances.
         It is important to note that we cannot make both networks
         critical at 20 Hz. Doing so would create a 6 dB loss rather
         than a 3 dB loss at that frequency. This means that the real
         3 dB frequency would be higher than 20 Hz. What we will
         do instead is find the capacitor values that will each
         achieve 20 Hz, and then increase the size of one of them in
         order to push its critical frequency down to the point

445
where there is no interference. Usually, this will be the smaller of the two as
this will tend to minimize the size of the components.

First, the input network. Given the size differential between the generator
and gate resistances, we can approximate the total value as 10 M. For a
critical frequency of 20 Hz, we find

Cin = 1
        2  R in (lead) f c( input lead )

Ci n = 1 2  10 M 20 Hz
Ci n = 796 pF

Moving to the output network, the effective resistance is

Rbypass (lead ) = RL+ RS || 1               1
                            gm            4 mS

Rbypass(lead ) = 5 k  + 2.2 k  ||
Rbypass (lead ) = 5225 

The corresponding capacitance for 20 Hz is

C out = 1
        2  Rout (lead) f c( output lead)

Cout = 1 2  5225 20 Hz
Cout = 1.52  F

For the final step, the obvious choice here would be to increase the value of
Cin, perhaps by a factor of ten, leaving us with just shy 8 nF. The nearest
standard value would be 8.2 nF. Cout would not change; the nearest standard
value being 1.5 F.

Common Gate

Finally, our tour of lead network analysis arrives at the common gate configuration.
As you might have guessed, there is much in common here with the common base
configuration as well as the common source and common drain configurations. Like
the source follower, the common gate has only two lead networks; one at the input
and one at the output. First off, the output network is identical to that of the common
source amplifier and uses the same equations. The effective resistance is RD in
parallel with RL. For the input network, the analysis is very similar to the output
network of the source follower. In both cases we need to determine the impedance

446
looking toward the source terminal. Recall that the impedance looking toward the
FET's source is the source bias resistor in parallel with the reciprocal of the
transconductance. To this we add the generator impedance to arrive at the effective
ohmic value.

Rinput(lead) = Rgen+ RS || 1    (17.20)
                            gm

Before leaving this section, there are two items worth repeating: First, not all
amplifiers have lead networks, and second, design is a relatively straightforward
process of picking the right values for coupling and bypass capacitors. If you want to
extend the frequency response to lower and lower frequencies, just increase the sizes
of these capacitors. The frequency will drop by the same ratio as the capacitor
increase. Similarly, to limit the low frequency response to a higher value, decrease
the sizes of the capacitors. As we shall see shortly, designing is not always quite so
easy at the other end of the spectrum.

17.3 High Frequency Response

In this section we shall examine the performance of amplifiers at the high end of
their range. We are interested in what causes the limits and how to predict the
various critical frequencies involved. Further, we would like to determine ways of
controlling those limits. It is important to remember that, unlike the low frequency
response, all amplifiers without exception exhibit high frequency limits. In other
words, while it is possible to design amplifiers without an f1, all amplifiers will have
an f2. Our discussion mostly will focus on common emitter and common source
amplifiers. As these are inverting configurations, Miller's Theorem will be of
considerable use.

Lag Networks

The high frequency response of amplifiers entails lag networks. Remember, a lag
network can be considered to be a frequency-dependent voltage divider with the
resistor in-line with the signal and the capacitor situated across the load. As
frequency increases, the reactance decreases, and thus, the voltage available to the
load is reduced. It turns out that a single stage amplifier will have two lag networks;
one at the input and a second at the output. For multi-stage amplifiers, the output of
one stage will combine with the input of the following stage to create a single,
interstage lag network.

Unlike the low end of the spectrum, the high end limits are caused by capacitors that
you can't see. These are undesirable parasitic capacitances found within the devices
themselves, and due to printed circuit board traces and cabling. Transistor
capacitances can range from just a few picofarads up into the nanofarad range,

447
depending on transistor type and size. Individual carbon or metal film resistors are
around one picofarad or less, although it is possible to find surface mount versions
that are below a tenth of a picofarad.

Regarding the wiring capacitance, this can vary greatly. Simple circuit board traces
may be just a few picofarads or less, but loads can also include cabling that is
measured in tens of picofarads per foot (perhaps 100 picofarads per meter). The
extra capacitance from resistors, PCB traces, and the like all appear in parallel, and
can be lumped together into a single value for each lag network that we will
generically refer to as C(stray).

BJT Amplifiers

Let us begin with a typical common emitter amplifier, as shown in Figure 17.20.

                                                                                                                     Figure 17.20
                                                                                                                     A typical common emitter
                                                                                                                     amplifier.

For the midband analysis, we assumed that the coupling and bypass capacitors are          Figure 17.21
effective shorts. At the even higher frequencies that we are now considering, this        BJT parasitic capacitances.
must still be the case. Before we attempt to redraw the circuit for high frequency
analysis, we must remember that there are small parasitic capacitances found
between the transistor's terminals, as shown in Figure 17.21.

The parasitic capacitances of a small signal BJT are quite small when compared to
the values used for coupling and bypass capacitors. Typical values are in the single
digit picofarad range. In fact, the collector-emitter capacitance, Cce, is usually small
enough to ignore.

448
With this model, the amplifier can now be redrawn for the high frequency case, as
shown in Figure 17.22. Of primary importance, we have added the relevant device
capacitances. Note that Ccb is in the Miller position; that is, it straddles the amplifier
from input to output. Remember, Miller's Theorem only applies to inverting
amplifiers, like this one, not to non-inverting amplifiers. The theorem allows us to
split this capacitor into two capacitors, one across the input and another across the
output, that will have the same impact as the original.

                                                                                                                     Figure 17.22
                                                                                                                     High frequency equivalent of
                                                                                                                     CE amplifier with transistor
                                                                                                                     capacitances.

By applying Miller's Theorem, we can create an equivalent input network and an
equivalent output network. The input network is shown in Figure 17.23.

                                                                                            Figure 17.23
                                                                                            High frequency equivalent of
                                                                                            BJT input network.

For this network, we have moved Zin(base) to the left to avoid visual clutter. This is not
a problem as all of the elements are in parallel. We have also included a lumped
Cin(stray) value along with Cin(miller), the Millerized value of Ccb. As a reminder, this
increases the capacitance by the magnitude of the amplifier's gain plus 1. Thus,

     Cin(miller) = Ccb (|Av| + 1)                  (17.21)

In many amplifiers, Cin(miller) is the largest capacitance in the group by a large margin.
As all of the capacitances are in parallel, the total is just the sum of their values.
Also, all of the resistances are in parallel when looking back from the capacitors.

     Cinput(lag) = Cbe + Cin(miller) + Cin(stray)  (17.22)

     Rinput(lag) = Rgen || RB || Zin(base)         (17.23)

449
And, as expected, we find

     f c(input lag) = 1                                      (17.24)
                   2  Rinput (lag) C input (lag )

The situation at the output network is similar except that the network is driven by a
parallel current source instead of series voltage source. The Thevenin equivalents
will be the same, though. Refer to Figure 17.24.

                                                                                          Figure 17.24
                                                                                          High frequency equivalent of
                                                                                          BJT output network.

A reminder for Cout(miller) is useful at this point.

     C out (miller) = C cb | Av |+1 | Av |                   (17.25)

By inspection, we find

     Coutput(lag) = Cout(load) + Cout(miller) + Cout(stray)  (17.26)

     Routput(lag) = RC || RL                                 (17.27)

And finally, we reach

     f c(output lag) = 1                                     (17.28)
                    2  Routput (lag) C output (lag )

The lower result of equations 17.24 and 17.28 will be the dominant frequency, and
thus, is the system f2.

At this point, there is a practical wrinkle. Unfortunately, manufacturer's data sheets
do not list the values of Ccb and Cbe directly. Instead, they list other values that are
easier to measure. Fortunately, it's easy enough to convert said data to what we need.
Data sheets usually list values for Cibo and Cobo (and sometimes, these values go by
different names, so be forewarned). The measurement circuit for these parameters is
shown in Figure 17.25.

450
                                                                                         Figure 17.25
                                                                                         Measuring Cibo and Cobo.

The subscript ibo stands for "input in common base configuration with an open
output". Similarly, obo refers to "output in common base configuration with an open
input". By observation, Cibo is equal to Cbe in parallel with the series combination of
Cce and Ccb. Recalling that capacitors in series combine in the same manner as
resistors in parallel, and that Cce is usually very small, we can see that

     Cbe  Cibo  (17.29)

     Ccb  Cobo  (17.30)

To make things just a little more fun, these two capacitances are not fixed values. In
fact their precise values depend on the transistor's bias voltages. For example,
consider Ccb. This parasitic capacitance is caused by the reverse biased collector-
base junction. You can think of the two terminals as the plates of a capacitor and the
depletion region between them as the capacitor's dielectric. As the reverse bias
potential increases, this widens the depletion region, which is akin to increasing the
plate separation distance. The result is that the capacitance decreases with increasing
reverse voltage. Fortunately, manufacturers will publish curves for Cibo and Cobo in
their device data sheets. An example of such is shown in Figure 17.26 for the
popular 2N3904.

                                                                                         Figure 17.26
                                                                                         Cibo and Cobo curves.

                                                                                         Used with permission from SCILLC dba
                                                                                         ON Semiconductor.

451
For instance, in this curve we can see that Cobo is about 3.5 picofarads at very low
reverse voltages and decreases to less than 2 picofarads above 5 volts. Data sheets
will also list values for these capacitances but these are usually maximums measured
at zero volts. For highest accuracy, it is best to perform a DC bias calculation to
determine the reverse voltage, and then use a graph like this to obtain the
capacitance value.

A couple of final twists: first, for amplifiers being driven by a particularly low
impedance (i.e., Rgen), it is advisable to use the more accurate transistor model that
includes the base spreading resistance, r'b. This value appears in series with Rgen, so
the two values should be added together before placing the sum in parallel with the
other input resistors. The second twist is the issue of a swamped amplifier. A
reexamination of the input network for the swamped case shows that Cin(miller) is not
in parallel with Cbe due to RSW. In practice, Cin(miller) is usually much larger than Cbe,
and placing them in parallel generally will yield acceptable results.

Time for an illustrative example.

Example 17.5                                                                                Figure 17.27
                                                                                            Circuit for Example 17.5.
         For the circuit of Figure 17.27, determine the input and output lag critical
         frequencies, and the system f2. Assume  = 100,
         Cobo = 3 pF, Cibo = 5 pF. and ignore any stray or load
         capacitances.

     First, we need to determine the system voltage gain
     so that we can find the input and output Miller
     capacitances. To do that, we need r'e, and thus, IE.

     If we assume that the DC base voltage is at nearly
     ground, then approximately 4.3 VDC drops across
     RE, leaving IE = 1 mA, and thus, r'e = 26 . The
     effective AC collector impedance is 10 k  in
     parallel with 30 k , or 7.5 k. This yields a
     voltage gain of 288, inverting.

     Ccb is approximately equal to Cobo, and Cbe is
     approximately equal to Cibo. Therefore, the input
     and output Miller capacitances are:

     C i n(miller) = C cb (| Av |+1)
     Cin(miller) = 3 pF(|-288|+1)

     C i n(miller) = 867 pF

452
                  C out (miller) = C cb | Av |+1
                                       | Av |

                  Cout (miller) = 3 pF |-288 |+1 |-288|
                  C out (miller)  3 pF

         For the input network's resistance, we will need Zin(base). In this circuit, that's
          r'e, or 2.6 k. Thus, the input lag resistance is:

                  Rinput (lag) = Rgen || R B || Z i n(base)
                  Rinput(lag) = 100 || 15 k  || 2.6 k 
                  Rinput (lag) = 95.7

         Ignoring stray input capacitance, the total input lag capacitance is:

                  C input (lag) = C be+C i n(miller )
                  C input (lag) = 5 pF+867 pF
                  C input (lag) = 872 pF

         Thus, the input lag fc is:

                   f c(input lag) = 1
                                 2  Rinput (lag) C input (lag)

                   f c(input lag) = 1 2  95.7 872 pF
                   f c(input lag) = 1.91 MHz

         Clearly, the Miller input capacitance dominates. This is typical in high gain
         amplifiers of this type.

         The output network analysis is similar. The output lag resistance is:

                  Routput (lag) = RC || R L
                  Routput (lag) = 10 k  || 30 k 
                  Routput (lag) = 7.5 k 

         Once again, ignoring any stray or load capacitance, the total output lag
         capacitance is:

                  C output (lag ) = C out(miller )
                  C output (lag ) = 3 pF

453
         The output lag fc is:

                   f c(output lag) = 1
                                  2  Routput (lag) C output (lag )

                   f c(output lag) = 1 2  7.5 k 3 pF
                   f c(output lag) = 7.07 MHz

         Here we see that, even though the capacitance is much lower than it is in the
         input network, the increased resistance places the critical frequency in the
         same neighborhood. Between the two, the input network is lower, and
         therefore, dominant. Thus, the system f2 is approximately 1.91 MHz. In
         reality, the true "3 dB down frequency" will be somewhat lower than this
         due to the fact that the two critical frequencies are relatively close.
         Consequently, there will be some non-zero loss for the output network at
         1.91 MHz.

The analysis for common collector followers and common base amplifiers is similar
to the preceding, but with one important caveat: these amplifiers are non-inverting,
and thus, Miller's Theorem does not apply. In the common collector follower, Cbc
winds up in parallel with Cbe across the input, while Cce appears across the output.
For the common base amplifier, Cbe is across the input, Ccb is across the output, and
the bridged Cce usually is small enough to ignore.

FET Amplifiers

To start our discussion of FET high frequency response, let's consider a typical
common source amplifier, such as the one shown in Figure 17.28. This circuit
features a JFET, but for the most part, the analysis for MOSFETs is the same. To be
clear, there are some differences that arise from the availability of alternate biasing
schemes, and power MOSFETs can exhibit considerably higher values for gate
capacitance than small signal JFETs, but these differences are still compatible with
the analysis. For consistency, we'll stick with JFETs in the following discussion and
examples.

The amplifier of Figure 17.28 features three coupling and bypass capacitors that
shape the circuit's low frequency response. Like the BJT amplifiers examined in the
prior section, the high frequency response of this circuit is controlled by
capacitances that, in general, you don't see on a schematic. Here, we deal with the
same set of capacitances; namely, the parasitic device capacitances of the FET, those
of associated circuit components such as resistors, stray wiring capacitances, and
load capacitance.

454
                                                                                         Figure 17.28
                                                                                         A typical common source
                                                                                         amplifier.

Like the BJT amplifier, this circuit will also have two lag networks; one at the input   Figure 17.29
and a second at the output. The FET itself exhibits parasitic capacitances between its   FET parasitic capacitances.
terminals, as shown in Figure 17.29. The drain-source capacitance, Cds, tends to be
small enough to ignore in most amplifiers. For common source amplifiers, Cdg is in
the Miller position, and Cgs is at the input. For typical small signal devices, these
parasitics are usually measured in the single digit picofarad range, although for large
signal power devices, Cgs can be in the nanofarad range.

Using this transistor model, we can now create a high frequency model for the
amplifier. We begin by shorting the coupling and bypass capacitors, replacing the
DC source with its ideal internal resistance (a short), and then redrawing. Perhaps
unsurprisingly, it is similar to its BJT counterpart. The resulting circuit is shown in
Figure 17.30.

                                                                                         Figure 17.30
                                                                                         High frequency equivalent of
                                                                                         CS amplifier with transistor
                                                                                         capacitances.

455
Continuing the process, we can Millerize Cdg, which splits into input and output
equivalents.

     Cin(miller) = Cdg (|Av| + 1)                  (17.31)

     C out (miller) = C dg | Av |+1 | Av |         (17.32)

Focusing on the input network, the equivalent circuit is shown in Figure 17.31.

                                                                                          Figure 17.31
                                                                                          High frequency equivalent of
                                                                                          FET input network.

By inspection, we can determine the equivalent lag capacitance and resistance.

     Cinput(lag) = Cgs + Cin(miller) + Cin(stray)  (17.33)

     Rinput(lag) = Rgen || RG || Zin(gate)         (17.34)

Given that the values of Zin(gate) and RG are often very large in comparison to Rgen, in
many circuits we can approximate Equation 17.34 as Rinput(lag) = Rgen.

Finally, we arrive at the formula for critical frequency of the input network:

     f c(input lag) = 1                            (17.35)
                   2  Rinput (lag) C input (lag )

For the output network, the high frequency equivalent is shown in Figure 17.32.

                                                                                          Figure 17.32
                                                                                          High frequency equivalent of
                                                                                          FET output network.

456
The effective capacitance is the parallel combination of the three capacitances.
Looking back from that combination while opening the current source shows that
the effective resistance is the parallel combination of RD and RL.

     Coutput(lag) = Cout(miller) + Cout(stray) + Cout(load)  (17.36)

     Routput(lag) = RD || RL                                 (17.37)

And this leads us to,

     f c(output lag) = 1                                     (17.38)
                    2  Routput (lag) C output (lag )

Manufacturer's datasheets do not always list values for our idealized device            Figure 17.33
capacitances. Instead, the often listed values are Ciss and Crss, due to ease of        Measurement of Crss and Ciss.
measurement. These measurement circuits are shown in Figure 17.33.

The rss subscript stands for "reverse in common source configuration with shorted
input", while the subscript iss stands for "input in common source configuration
with shorted output". For the top circuit, shorting the input removes Cgs. This leaves
Cds in parallel with Cdg. Typically, Cds is small enough to ignore, and thus

     Cdg  Crss                                               (17.39)

In the lower circuit, note that shorting the output removes Cds and also places Cdg in
parallel with Cgs. From this, we can deduce that

     Cgs  Ciss - Crss                                        (17.40)

At this point, astute readers might observe that the FET's parasitic device
capacitances will vary with the applied reverse bias, just as was the case with the
BJT. As such, the manufacturer may give graphical data in place of simple numerics,
as shown in Figure 17.34. In this case, the manufacture has conveniently (for us,
anyway) plotted Cgs and Cgd instead of Ciss and Crss. Note also that the graph
explicitly states that Cds is negligible. As expected, the increasing reverse bias
potential widens the depletion region which results in reduced capacitance. For
example, Cgs is just over 10 picofarads in the region near a zero volt potential but
drops to 4 picofarads at 10 volts, and just over 3 picofarads at 30 volts. A similar
situation can be seen for Cgd.

457
                                                                                              Figure 17.34
                                                                                              Cgs and Cgd curves.

                                                                                              Used with permission from SCILLC
                                                                                              dba ON Semiconductor.

In this discussion we have focused on unswamped amplifiers. For swamped                       Figure 17.35
amplifiers, an inspection of the equivalent circuit reveals that Cgs is no longer in          Circuit for Example 17.6.
parallel with Cin(miller) and Cin(stray). In many circuits, the loss of accuracy in treating
them as though they are in parallel will be acceptable. This is more likely to be a
problem when gains are particularly low or when Cgs is much larger than Cdg.
Finally, for common gate and common drain followers, the issues for FETs are
similar to those of BJT common base and common collector followers, namely that
these configurations are non-inverting and Miller's Theorem does not apply.

Once again, it's time for a few illustrative examples.

Example 17.6

         For the circuit of Figure 17.35, determine the input and
         output lag critical frequencies, and the amplifier's f2.
         Assume gm = 1.25 mS, Crss = 1.5 pF, and Ciss = 4.5 pF.
         Ignore stray and load capacitance.

         First, we need to translate the device capacitances into a
         more convenient form.

                   Cgd = Crss = 1.5 pF

                  C gs = C iss-C rss
                  C gs = 4.5 pF - 1.5 pF
                  C gs = 3 pF

458
         Next, we can determine the Miller input and output capacitances. To do this,
         we'll need to find the voltage gain.

                  Av =-gm r L
                  Av =-1.25 mS(6 k  || 12 k )
                  Av =-5

                  C i n(miller) = C dg (| Av |+1)
                  C in(miller) = 1.5 pF (|-5 |+1)
                  C i n (miller) = 9 pF

                  C out(miller ) = C gd | Av |+1
                                        | Av |

                  C out (miller) = 1.5 pF |-5 |+1 |-5 |
                  C out (miller ) = 1.8 pF

         Now we can move to the input lag network's resistance value. We can
         assume that Zin(gate) is large enough to ignore.

                  Rinput (lag) = Rgen || RG || Zi n (gate )
                  Rinput(lag) = 50 || 2 M  ||  
                  Rinput (lag) = 50

         Ignoring input stray capacitance, the total input lag capacitance is:

                  C input (lag) = C gs+C i n(miller )
                  C input (lag) = 3 pF+ 9 pF
                  C input (lag) = 12 pF

         Thus, the input lag fc is:

                   f c (input lag ) = 1
                                 2  Rinput (lag )C input (lag)

                   f c(input lag) = 1 2  50 12 pF
                   f c(input lag) = 265 MHz

         Continuing with the output network analysis, the output lag resistance is:

459
                  Routput (lag) = RD || R L
                  Routput (lag) = 6 k  || 12 k 
                  Routput (lag) = 4 k 

         Ignoring any output stray and load capacitance, the total output lag
         capacitance is:

                  C output (lag ) = C out(miller )
                  C output (lag ) = 1.8 pF

         The output lag fc is:

                   f c(output lag) = 1
                                  2  Routput (lag) C output (lag )

                   f c(output lag) = 1 2  4 k  1.8 pF
                   f c(output lag) = 22.1 MHz

         Obviously, the output network is dominant and the two critical frequencies
         are over a decade apart, thus the system f2 is 22.1 MHz.

Computer Simulation

In order to crosscheck the results of Example 17.6, the circuit is captured in a
simulator, as shown in Figure 17.36. A 2N5458 JFET was chosen for the simulation
as the device capacitance and transconductance values match those given in the
example. A simple transient analysis (not shown) was performed using an input sine
wave of 100 millivolts peak amplitude at 1 kHz. The output signal showed a slight
asymmetry, which is to be expected in such an amplifier, but the amplitude averaged
to 500 millivolts peak, verifying the expected gain of 5, inverting.

An AC analysis follows, as shown in Figure 17.37. This Bode plot provides further
verification of the midband gain, with a value of approximately 14 dB. The system f2
is the point where the gain drops by 3 dB, or in this case, down to 11 dB. A
measurement cursor pinpoints this frequency at 25.25 MHz. This is a little over ten
percent higher than our computed value. This deviation may be due to slight
variances between our assumed device capacitances and those of the simulator's
transistor model. Naturally, in the real world, there will be variances from device to
device, as well as the parasitic capacitances due to resistors, wiring, and the like.
Consequently, the simulation results are within expected norms.

460
                                                                                                                     Figure 17.36
                                                                                                                     JFET high frequency simulation
                                                                                                                     schematic.

                                                                                                                     Figure 17.37
                                                                                                                     JFET high frequency simulation
                                                                                                                     results of original circuit.

461
Of course, this simulation only verifies the output network. In order to check the
input network, we can perform a scaling trick, similar to the one performed with
lead networks. Instead of scaling the capacitors, though, this time we can scale the
internal resistance of the signal generator, Rgen. This is possible because Rgen doesn't
affect the gain (which would effect the Miller capacitances) and is the primary
determiner of the input lag resistance; all without affecting the output network.
The value of Rgen was increased by a factor of 100 to 5 k. This translates the input
critical frequency down by a factor of 100, to 2.65 MHz. The network is now
dominant, although there may be a slight interaction with the output network,
pushing f2 a little lower. The resulting Bode plot is shown in Figure 17.38.

                                                                                                                     Figure 17.38
                                                                                                                     JFET high frequency simulation
                                                                                                                     results of modified circuit.

The measurement cursor is again moved to 11 dB, showing a system 3 dB down
frequency of approximately 2.4 MHz. Scaled back up by a factor of 100, this is in
line with the computed value, although a little on the low side.
Granted, changing the generator's internal impedance is a nice enough trick for the
simulator, but is often not possible or desirable in real world circuits. This brings up
the question of how we might alter the high frequency response of an amplifier. The
reasons for increasing f2 might be obvious, but decreasing it can also be useful,
particularly when it comes to avoiding high frequency interference. Unfortunately,
raising the frequency turns out to be a bit of work as it requires a decrease in either
the device capacitances or the surrounding resistances. Indeed, this may require a

462
different transistor model or even a complete redesign of the circuit. On the other
hand, decreasing f2 is relatively easy. This only requires an increase in capacitance,
and it is a simple matter to add shunt capacitance to the input and/or output
network(s). A more efficient approach is to add a capacitor in the Miller position
(i.e., from drain to gate in a FET, or collector to base in a BJT). Such a capacitor will
affect both the input and output networks, so it's almost like getting a second
capacitor for free. This idea is explored in the following example.

Example 17.7                                                                               Figure 17.39
                                                                                           Circuit for Example 17.7.
         Using the circuit and results from Example 17.6, add a Miller capacitor, CM,
         like the one shown in Figure 17.39, to shift f2 down to 100 kHz.

     We will be changing nothing else in the circuit, so the prior values for gain
     and network resistance remain unchanged. All we have to do is determine
     the total capacitance for each network that will bring its critical frequency
     down to 100 kHz. We then subtract off the the associated device, stray,
     and load capacitances (if any). This results in the required Cin(miller) and
     Cout(miller). From there it is a simple matter to find CM by using the Miller
     equations in reverse. The smaller result is the one we'll use.

     Starting with the input network, the input lag resistance is 50 . The
     required total input lag capacitance is:

     C input (lag) = 1
                   2  Rinput (lag ) f input (lag)

     Cinput(lag) = 1 2  50 100 kHz
     C input(lag) = 31.8 nF

     The input already has 12 pF from Cgs and the Millerized Cdg, but this is small
     enough to ignore by comparison. Consequently, CM will be 31.8 nF divided
     by the gain magnitude plus one.

     C M (i n) = C input (lag)
                | Av |+1

     CM (i n) = 31.8 nF |-5|+1
     CM (i n) = 5.3 nF

     We follow a similar process for the output network. The output lag
     resistance is 4 k and required capacitance is:

463
         Once again, the existing output capacitance is small enough to ignore. Now
         we apply Miller's Theorem in reverse to find the required CM.

                  C M (out ) = C output(lag) | Av |
                                         | Av |+1

                   CM (out ) = 398 pF |-5 | |-5|+1
                  C M (out ) = 332 pF
         The output network version of CM is lower, so that's what we'll use. Note this
         will also lower the input network to approximately 1.6 MHz. If we had
         chosen the input network version of CM, the output network critical
         frequency would have dropped below the target of 100 kHz.
         If we add a 332 pF capacitor to the simulator circuit used in the prior
         example and then rerun the simulation, we get the Bode plot shown in
         Figure 17.40.

                                                                                                                     Figure 17.40
                                                                                                                     JFET high frequency simulation
                                                                                                                     results using a Miller position
                                                                                                                     capacitor.

464
         The simulation shows a critical frequency of 115 kHz, or about 15% above
         target. If desired, this can be remedied by increasing CM to about 380 pF.

Summary

All transistor amplifiers exhibit limits that define the frequency range over which
they remain effective. The limits are the half power points, meaning the frequencies
at which the voltage gain drops to 70.7% of its midband value. The lower and upper
limits are denoted as f1 and f2, respectively. All transistor amplifiers have an upper
limit, but it is possible to design amplifiers that do not have a lower limit, meaning
that the gain is maintained down to 0 Hertz (DC). The lower and upper frequency
limits of amplifiers are caused by lead networks and lag networks, respectively.

Lead networks involve coupling and bypass capacitors. A typical single stage
inverting amplifier, whether based on a BJT or FET, exhibits three such networks:
one at the input, a second at the output, and a third for the emitter or source bypass.
The standard critical frequency equation is used for each network with the resistance
value being equal to the Thevenin resistance seen from the position of the associated
capacitor. The highest of these frequencies is dominant and will set the system f1,
although the actual value may be somewhat higher if any of the other network's
critical frequency is relatively close to the dominant frequency.

Lag networks are caused generally by small parasitic capacitances associated with
the transistor, other components, wiring, and the like. A typical single stage inverting
amplifier will exhibit two lag networks: one at the input and another at the output.
Any capacitance that bridges an inverting amplifier, running from input to output
across the transistor, must be converted into equivalent input and output
capacitances using Miller's Theorem. These capacitances appear in parallel with the
other device and stray capacitances to form the equivalent input and output lag
capacitances. The equivalent resistances are found by Thevenizing the surrounding
elements from the perspective of the lag capacitors. The standard critical frequency
equation can then be used to determine the input and output network frequencies.
The lower of two is dominant and sets the system f2. Again, if the other network is
close in terms of its frequency, the interaction will shift f2. In this case f2 will shift to
a lower frequency.

It is relatively straightforward to design an amplifier for a specific value of f1. This is
because individual coupling and bypass capacitors can be specified to reach said
value. Manipulating f2 is somewhat trickier. Reducing f2 can be achieved most
efficiently by adding a capacitor in the Miller position. In contrast, increasing f2 may
require selection of a different transistor, or even a major redesign of the circuit.

465
Review Questions

    1. What circuit elements define the low frequency response of amplifiers?
    2. What circuit elements define the high frequency response of amplifiers?
    3. Do all amplifiers exhibit a lower frequency limit, f1? Why/why not?
    4. Do all amplifiers exhibit a higher frequency limit, f2? Why/why not?
    5. Compare and contrast the low frequency analysis of BJT versus FET

         amplifiers.
    6. Compare and contrast the high frequency analysis of BJT versus FET

         amplifiers.
    7. Of what use is Miller's theorem when analyzing the frequency limits of

         amplifiers?

Problems

Analysis Problems
    1. For the circuit of Figure 17.41, determine the lead critical frequencies and
         the system f1. VCC = 32 V, VEE = -10 V,  = 100, RL = 8 k, RC = 22 k,
         RE = 9.3 k, RB = 20 k, Rgen = 75 , Cin = 1 F, Cout = 2 F, CE = 100 F.

                                                                                Figure 17.41

    2. For the circuit of Figure 17.41, determine the lead critical frequencies and
         the system f1. VCC = 20 V, VEE = -10 V,  = 150, RL = 4.7 k, RC = 12 k,
         RE = 4 k, RB = 10 k, Rgen = 50 , Cin = 2 F, Cout = 10 F, CE = 470 F.

    3. In the circuit of Figure 17.42, find the lead critical frequencies and system f1.
         VCC = 20 V, VEE = -8 V,  = 100, Rgen = 50 , RB = 22 k, RE = 36 k,
         RSW = 500 , RC = 40 k, RL = 60 k, Cin = 1 F, Cout = 2 F, CE = 100 F.

466
                                                                                Figure 17.42

    4. In the circuit of Figure 17.42, find the lead critical frequencies and system f1.
         VCC = 18 V, VEE = -12 V,  = 160, Rgen = 600 , RB = 8.2 k, RE = 7.5 k,
         RSW = 100 , RC = 6 k, RL = 10 k, Cin = 2.2 F, Cout = 10 F, CE = 330 F.

    5. For the circuit of Figure 17.43, determine the lead critical frequencies and
         the system f1.  = 100.
                                                                                Figure 17.43

    6. For the circuit of Figure 17.43, determine the lead critical frequencies and
         the system f1.  = 200.

467
    7. Given the circuit of Figure 17.44, determine the lead critical frequencies and
         the system f1. VCC = 25 V,  = 100, Rgen = 100 , R1 = 10 k, R2 = 2.5 k,
         RE = 1 k, RC = 3 k, RL = 6 k, Cin = 10 F, Cout = 6.8 F, CE = 330 F.
                                                                                Figure 17.44

    8. Given the circuit of Figure 17.44, determine the lead critical frequencies and
         the system f1. VCC = 15 V,  = 150, Rgen = 500 , R1 = 4.7 k, R2 = 2.2 k,
         RE = 3.3 k, RC = 3.9 k, RL = 5 k, Cin = 4.7 F, Cout = 10 F, CE = 680 F.

    9. For the circuit of Figure 17.45, determine the lead critical frequencies and
         the system f1.  = 100, Cin =10 F, Cout = 22 F.
                                                                                Figure 17.45

    10. For the circuit of Figure 17.45, determine the lead critical frequencies and
         the system f1.  = 200, Cin = 1 F, Cout = 470 F.

    11. Given the circuit of Figure 17.46, determine the lead critical frequencies and
         the system f1. VDD = 20 V, gm = 2 mS, Rgen = 50 , RG = 4.7 M, RD = 12 k,
         RS = 4 k, RL = 10 k, Cin = 100 nF, Cout = 10 F, CS = 22 F.

468
                                                                                Figure 17.46

    12. Given the circuit of Figure 17.46, determine the lead critical frequencies and
         the system f1. VDD = 15 V, gm = 3 mS, Rgen = 100 , RG = 1 M, RD = 6.8 k,
         RS = 3.3 k, RL = 15 k, Cin = 330 nF, Cout = 2.2 F, CS = 680 F.

    13. In the circuit of Figure 17.47, determine the lead critical frequencies and the
         system f1. VDD = 22 V, VSS = -4 V, gm = 2.5 mS, RG = 1 M, RD = 5 k,
         RS = 4 k, RL = 10 k, Cin = 100 nF, Cout = 3.3 F, CS = 560 F.
                                                                                Figure 17.47

    14. In the circuit of Figure 17.47, find the lead critical frequencies and the
         system f1. VDD = 25 V, VSS = -3 V, gm = 5 mS, RG = 2.2 M, RD = 10 k,
         RS = 4.7 k, RL = 20 k, Cin = 470 nF, Cout = 100 F, CS = 33 F.

469
    15. Given the circuit of Figure 17.48, determine the lead critical frequencies and
         the system f1. gm = 8 mS, Cin = 10 nF, Cout = 330 F.

                                                                                Figure 17.48

    16. Given the circuit of Figure 17.48, determine the lead critical frequencies and
         the system f1. gm = 10 mS, Cin = 150 nF, Cout = 47 F.

    17. For the circuit of Figure 17.41, determine the lag critical frequencies and the
         system f2. VCC = 32 V, VEE = -10 V,  = 100, RL = 8 k, RC = 22 k,
         RE = 9.3 k, RB = 20 k, Rgen = 75 , Cibo = 5 pF, Cobo = 2 pF.

    18. For the circuit of Figure 17.41, determine the lag critical frequencies and the
         system f2. VCC = 20 V, VEE = -10 V,  = 150, RL = 4.7 k, RC = 12 k,
         RE = 4 k, RB = 10 k, Rgen = 50 , Cibo = 15 pF, Cobo = 3 pF.

    19. In the circuit of Figure 17.42, find the lag critical frequencies and system f2.
         VCC = 20 V, VEE = -8 V,  = 100, Rgen = 50 , RB = 22 k, RE = 36 k,
         RSW = 500 , RC = 40 k, RL = 60 k, Cin(stray) = 20 pF, Cout(stray) = 50 pF,
         Cibo = 3 pF, Cobo = 2 pF.

    20. In the circuit of Figure 17.42, find the lag critical frequencies and system f2.
         VCC = 18 V, VEE = -12 V,  = 160, Rgen = 600 , RB = 8.2 k, RE = 7.5 k,
         RSW = 100 , RC = 6 k, RL = 10 k, Cin(stray) = 10 pF, Cout(stray) = 100 pF,
         Cibo = 6 pF, Cobo = 2 pF.

    21. For the circuit of Figure 17.43, determine the lag critical frequencies and the
         system f2.  = 100, Cibo = 5 pF, Cobo = 1 pF.

    22. For the circuit of Figure 17.43, determine the lag critical frequencies and the
         system f2.  = 200, Cibo = 2 pF, Cobo = 4 pF.

    23. Given the circuit of Figure 17.44, determine the lag critical frequencies and
         the system f2. VCC = 25 V,  = 100, Rgen = 100 , R1 = 10 k, R2 = 2.5 k,
         RE = 1 k, RC = 3 k, RL = 6 k, Cibo = 10 pF, Cobo = 1 pF.

470
    24. Given the circuit of Figure 17.44, determine the lag critical frequencies and
         the system f2. VCC = 15 V,  = 150, Rgen = 500 , R1 = 4.7 k, R2 = 2.2 k,
         RE = 3.3 k, RC = 3.9 k, RL = 5 k, Cibo = 20 pF, Cobo = 1.5 pF.

    25. Given the circuit of Figure 17.46, determine the lag critical frequencies and
         the system f2. VDD = 20 V, gm = 2 mS, Rgen = 50 , RG = 4.7 M, RD = 12 k,
         RS = 4 k, RL = 10 k, Rgen = 50 , Cgs = 3 pF, Cdg = 2 pF.

    26. Given the circuit of Figure 17.46, determine the lag critical frequencies and
         the system f2. VDD = 15 V, gm = 3 mS, Rgen = 100 , RG = 1 M, RD = 6.8 k,
         RS = 3.3 k, RL = 15 k, Cgs = 5 pF, Cdg = 2.5 pF.

    27. Given the circuit of Figure 17.49, determine the lag critical frequencies and
         the system f2. gm = 3 mS, Cgs = 5 pF, Cdg = 4 pF.
                                                                                Figure 17.49

    28. Given the circuit of Figure 17.49, determine the lag critical frequencies and
         the system f2. gm = 8 mS, Cgs = 20 pF, Cdg = 3 pF.

    29. Given the circuit of Figure 17.49, determine the lag critical frequencies and
         the system f2. gm = 3 mS, Ciss = 5 pF, Crss = 4 pF.

    30. Given the circuit of Figure 17.49, determine the lag critical frequencies and
         the system f2. gm = 8 mS, Ciss = 20 pF, Crss = 3 pF.

471
Design Problems
    31. Alter the coupling and bypass capacitors of Figure 17.43 so that the input fc
         is 200 Hz, the output fc is 20 Hz, and the bypass fc is 2 Hz. Assume  = 100.
    32. Alter the coupling and/or bypass capacitors of Figure 17.43 so that the
         system f1 is 100 Hz . Assume  = 200.
    33. Determine values for the coupling capacitors of Figure 17.45 so that the
         system f1 is 50 Hz. Assume  = 100.
    34. Determine values for the coupling capacitors of Figure 17.45 so that the
         input fc is 100 Hz and the output fc is 10 Hz. Assume  = 200.
    35. Determine values for the coupling capacitors of Figure 17.48 so that the
         system f1 is 50 Hz. Assume gm = 8 mS.
    36. Determine values for the coupling capacitors of Figure 17.48 so that the
         input fc is 100 Hz and the output fc is 10 Hz. Assume gm = 10 mS.
    37. Determine values for the coupling capacitors of Figure 17.49 so that the
         system f1 is 1 kHz. Assume gm = 3 mS.
    38. Determine values for the coupling capacitors of Figure 17.49 so that both
         the input and output fc values are 500 Hz. Assume gm = 8 mS.

Challenge Problems
    39. Given the circuit of Figure 17.50, determine the lead critical frequencies and
         the system f1.  = 100, Cin = 4.7 F, Cout = 10 F, CE = 33 F.
    40. Given the circuit of Figure 17.50, determine the lag critical frequencies and
         the system f2.  = 150, Cibo = 8 pF, Cobo = 3.5 pF.
    41. Given the circuit of Figure 17.51, determine the lead critical frequencies and
         the system f1. gm = 5 mS, Cin = 56 nF, Cout = 15 F, CG = 33 pF.
    42. Given the circuit of Figure 17.51, determine the lag critical frequencies and
         the system f2. gm = 12 mS, Ciss = 30 pF, Crss = 5 pF, CG = 36 pF.

472
                                                                                Figure 17.50

                                                                                Figure 17.51

Computer Simulation Problems
    43. Run a simulation to verify the results of Design Problem 32. Verify all
         critical frequencies.
    44. Run a simulation to verify the results of Design Problem 34. Verify both
         critical frequencies.
    45. Run a simulation to verify the results of Challenge Problem 39. Verify all
         critical frequencies.

473
Appendix A

                       Manufacturer's Data Sheet Links

These links are current as of Fall, 2022 and are listed here for convenience. Always check the manufacturer's
site for the latest information before beginning any new design. Note that some devices are available from
several different manufacturers.
Diodes
1N4002 rectifier: https://www.onsemi.com/pub/Collateral/1N4001-D.PDF
1N4148/1N914 switching: https://www.onsemi.com/pdf/datasheet/1n914-d.pdf
NZX5V1B Zener: https://assets.nexperia.com/documents/data-sheet/NZX_SER.pdf
LED
LED: https://www.cree.com/led-components/media/documents/ds-C566D-1275.pdf
Transistors
2N3904 NPN BJT: https://www.onsemi.com/pub/Collateral/2N3903-D.PDF
2N306 PNP BJT: https://www.onsemi.com/pub/Collateral/2N3906-D.PDF
J112 N JFET: https://www.onsemi.com/pub/Collateral/J111-D.PDF
2N3055 Power NPN BJT: http://www.onsemi.com/pub_link/Collateral/2N3055-D.PDF
FDMS86180 Power E-MOSFET: https://www.onsemi.com/pub/Collateral/FDMS86180-D.pdf
IRF7201 Power E-MOSFET: http://www.infineon.com/dgdl/irf7201pbf.pdf?
fileId=5546d462533600a4015355f13efb1ada
FGH50T65SQD IGBT: https://www.onsemi.com/pub/Collateral/FGH50T65SQD-D.PDF
IRGPC40K IGBT: http://www.irf.com/product-info/datasheets/data/irgpc40k.pdf

474
Appendix B

                          Standard Component Sizes

Passive components (resistors, capacitors and inductors) are available in standard sizes. The tables below are for
resistors. The same digits are used in subsequent decades up to at least 1 Meg ohm (higher decades are not
shown). Capacitors and inductors are generally not available in as many standard values as are resistors.
Capacitors below 10 nF (.01 F) are usually available at the 5% standard digits while larger capacitances tend to
be available at the 20% standards.

                         5% and 10% standard values, EIA E24 and EIA E12

                                                 10% values (EIA E12) are bold
                            20% values (seldom used) are every fourth value starting from 10

                                                   (i.e., every other 10% value)
             10 11 12 13 15 16 18 20 22 24 27 30
             33 36 39 43 47 51 56 62 68 75 82 91

                         1% and 2% standard values, EIA E96 and EIA E48

                                                  2% values (EIA E48) are bold
            10.0 10.2 10.5 10.7 11.0 11.3 11.5 11.8 12.1 12.4 12.7 13.0
            13.3 13.7 14.0 14.3 14.7 15.0 15.4 15.8 16.2 16.5 16.9 17.4
            17.8 18.2 18.7 19.1 19.6 20.0 20.5 21.0 21.5 22.1 22.6 23.2
            23.7 24.3 24.9 25.5 26.1 26.7 27.4 28.0 28.7 29.4 30.1 30.9
            31.6 32.4 33.2 34.0 34.8 35.7 36.5 37.4 38.3 39.2 40.2 41.2
            42.2 43.2 44.2 45.3 46.4 47.5 48.7 49.9 51.1 52.3 53.6 54.9
            56.2 57.6 59.0 60.4 61.9 63.4 64.9 66.5 68.1 69.8 71.5 73.2
            75.0 76.8 78.7 80.6 82.5 84.5 86.6 88.7 90.9 93.1 95.3 97.6

475
Appendix C

                           Answers to Selected Numbered Problems

                         Chapter 2

1. .53 mA
3. 4.37 V, 6.23 V
5. 8.79 mA
7. 1.18 mA for both
9. 4.7 V
11. 8.3 V
13. 430 

                                               Chapter 3

1. 16.3 V peak
3. 12 V peak
5. 24 V peak
7. 10sin2100t, positive clipped at 8.7 V
9. 12sin2100t, positive clipped at 6.7 V, negative clipped at -4.7 V
11. 8sin2500t + 9.3 VDC
13. Use biased clipper (see Problem 11, Figure 3.37)

                         Chapter 4

1. 99

3.   IB = 21.5 A, IC = 2.15 mA, IE = 2.175 mA

5. 10.74 mA

7. 0 mA

9. 10.74 mA

11. .2 V

13. 47% of former value

15. 3.37 k

17. 150 

476
                                                Chapter 5

1.   VCE(cutoff) = 28 V, IC(sat) = 1.27 mA, ICQ = 0.73 mA, VCEQ = 11.94 V

3.   VCE(cutoff) = 23 V, IC(sat) = 8.52 mA, ICQ = 3.03 mA, VCEQ = 14.8 V

5.   VCE(cutoff) = 20 V, IC(sat) = 1.49 mA, ICQ = 1 mA, VCEQ = 6.6 V

7.   VCE(cutoff) = 16 V, IC(sat) = 0.988 mA, ICQ = 0.613 mA, VCEQ = 6.06 V

9.   VCE(cutoff) = 12 V, IC(sat) = 3.64 mA, ICQ = 1.27 mA, VCEQ = 7.81 V

11. VCE(cutoff) = 18 V, IC(sat) = 2.4 mA, ICQ = 1.6 mA, VCEQ = 5.99 V

13. VCE(cutoff) = 15 V, IC(sat) = 3.89 mA, ICQ = 2.72 mA, VCEQ = 4.51 V

15. VCE(cutoff) = 18 V, IC(sat) = 2.3 mA, ICQ = 1.96 mA, VCEQ = 2.66 V

17. VCE(cutoff) = 18 V, IC(sat) = 4.15 mA, ICQ = 1.58 mA, VCEQ = 11.4 V

19. 3.65 k

21. 7.58 k

                                                Chapter 6

1. 465 mV
3. No, yes
5. 50,000:1
7. 2.86 k

                                                Chapter 7

1.   Zin = 1.53 k, Zout = 8.1 k

3.   Zin = 9.08 k, Zout = 22 k, vload = 4 V (inverted)

5.   Zin = 1.8 k, Zout = 1.82 k, vload = 224 mV (inverted)

7.   Zin = 3.25 k, Zout = 8.1 k, vload = 1.19 V (inverted)

9.   Zin = 90.4 k, Zout = 4.1 , vload = 182 mV

11. Zin = 236 k, Zout = 6.6 , vload = 279 mV

13. Zin = 42.7 , Zout = 22 k, vload = 594 mV

15. Set RSW = 300  to maintain Av (note r'e change), increase 22 k several times (220 k is fine)

17. Set RSW = 49  to double Av (including effect of r'e), increase RE to 1049  to maintain Q

477
                                           Chapter 8

1.   ICQ = 24 mA, ic(sat) = 127.6 mA, VCEQ = 6.7 V, vce(cutoff) = 8.25 V, Compliance = 1.55 Vp, Pl(max) = 16 mW,

     PD(max) = 161 mW,  = 3.7%

3. Not centered

5.   ICQ = 186 mA, ic(sat) = 1.374 A, VCEQ = 16.4 V, vce(cutoff) = 19 V, Compliance = 2.57 Vp, Pl(max) = 206 mW,

     PD(max) = 3.05 W,  = 3.16%

7.   ICQ = 30.4 mA, ic(sat) = 554 mA, VCEQ = 15.7 V, vce(cutoff) = 16.6 V, Compliance = 0.912 Vp,

     Pl(max) = 13 mW, PD(max) = 477 mW,  = 1.16%

9.   ICQ = 51.7 mA, ic(sat) = 391 mA, VCEQ = 8.65 V, vce(cutoff) = 9.79 V, Compliance = 0.79 Vp,

     Pl(max) = 19.5 mW, PD(max) = 449 mW,  = 0.94%

11. Yes

13. 4.07 C/W

15. 98 VDC (not particularly practical, changing RE as well would be more flexible)

                                           Chapter 9

1.   BVCEO = 30 V, IC(max) = 0.9375 A, Pl(max) = 7.03 W, PD(max) = 1.4 W

3. 187 

5.   BVCEO = 15 V, IC(max) = 0.469 A, Pl(max) = 1.76 W, PD(max) = 351 mW

7. 187 

9.   BVCEO = 48 V, IC(max) = 3 A, Pl(max) = 36 W, PD(max) = 7.2 W

11. BVCEO = 48 V, IC(max) = 1.5 A, Pl(max) = 18 W, PD(max) = 3.6 W

13. 3.5 A

15. R1:R2 ratio is 8.55:1, e.g., if R2 = 500  then R1 = 4.275 k

                                           Chapter 10

1.   ID = 10 mA, VDS = 14 V

3.   ID = 2.11 mA, VG = 0 V, VD = 32.2 V

5.   ID = 3.77 mA, VDS = 9.9 V

7.   ID = 4.15 mA, VG = 0 V, VDS = 13.8 V

9.   RS = 180 

11. RE = 2.825 k

478
                                             Chapter 11

1.   Zin = 220 k, Av = -7.5

3.   Zin = 270 k, Vout = 173 mV (inverted)

5.   Zin = 390 k, Av = -12.5

7.   Zin = 220 k, Av = 0.643

9.   Zin = 470 k, Vout = 83.8 mV

11. Vout = 99.3 mV

13. Av = -12, Vout = 120 mV (inverted)

15. Zin = 231 , Zout = 4 k

                                             Chapter 12

1.   ID = 3 mA, VG = 0 V, VD = 9.6 V

3.   ID = 5.1 mA, VG = 0 V, VD = 11.6 V

5.   ID = 12 mA, VG = 0 V, VD = 13.4 V

7.   ID = 9.1 mA, VG = 1.17 V, VD = 25.7 V

9.   ID = 3.125 mA, VG = 4.25 V, VD = 26.25 V

11. ID = 1.56 mA, VG = 0 V, VD = -17.2 V

13. ID = 3.67 mA, VG = 0 V, VD = -12.9 V

15. ID = 11 mA, VD = -4.8 V

17. 180 

19. RD = 1.29 k, RG is not tied to any particular value but probably > 1 M

                                             Chapter 13

1.   Zin = 750 k, Av = -2.58

3.   Zin = 510 k, Av = -8.86

5.   Zin = 90.9 k, Vout = 142 mV (inverted)

7.   Zin = 90.9 k, Vout = 515 mV (inverted)

9.   Zin = 910 k, Vout = 125 mV

11. Zin = 680 k, Av = 0.91

13. RG = 510 k or greater. The remainder of the design has nearly infinite possibilities. The first thing to

     notice is that the goal is achievable because gm0 = 25 mS and RL = 10 k, giving a ceiling Av of 250

     unswamped (but unrealistic). Using a standard 15 VDC supply and picking a mid-point bias (VGS = 0.5

     VGS(off) and ID = 0.25 IDSS) yields RS = 1 V/6.25 mA = 160  and gm = 12.5 mS. Using a common 1 k for

     RD yields rL = 909  and VD = 8.75 V (reasonable). The resulting unswamped gain is over 11 so the

     160  source resistance can be split into two parts, RS and RSW, with RSW adding enough degeneration to

     position the gain at the desired level. For example, RSW = 100  with RS = 60  yields a gain of 5.

479
                                            Chapter 14

1. 35 kHz
3. 33.3 V/s
5. 12.48 A, 0.15 V

                                            Chapter 15

1. 4 V
3. 30 ns
5. 610 ns

                                            Chapter 16

1. A) 10 dB B) 19 dB C) 26.99 dB D) 0 dB E) -6.99 dB F) -15.23 dB

3.   33 dB

5.   G = 501, Pout = 12.53 W

7. A) 1.06 B) 1 C) 199.5 D) 3.43 E) 0.398 F) 0.188

9. A = 8.57 A' = 18.66 dB

11. A) 0 dBW B) 13.6 dBW C) 8.13 dBW D) -7 dBW E) -26.4 dBW F)30.8 dBW

     G) -43.5 dBW H) -65.2 dBW I) -172.5 dBW

13. A) 150 dBf B) 163.6 dBf C) 158.1 dBf D) 143 dBf E) 123.6 dBf F) 180.8 dBf

     G) 106.5 dBf H) 84.8 dBf I) -22.5 dBf

15. G'total = 28 dB, G = 631

17. For P'in = 4 dBm: output stage 1 = 6 dBm, stage 2 = 0 dBm, stage 3 = 15 dBm.

     For P'in = -34 dBm: output stage 1 = - 24 dBW, stage 2 = -30 dBW, stage 3 = -15 dBW.

19. a. 200 mW

21. V'out = 21 dBV, 21 dBV = 11.2 V (final output)

     For stage 1: 4 dBV = 1.58 V. For stage 2: 9 dBV = 2.82 V

23. a. 15 V

25. At 50 kHz: -0.022 dB, -4.09 degrees. At 700 kHz: -3 dB, -45 degrees.

     At 10 MHz: -23.1 dB, -86 degrees. Tr = 500 sec

27. The amplitude portion does not change. Phases are: At 30 kHz -188.5 degrees, at 200 kHz -225

     degrees, at 1 MHz -258.7 degrees

480
29.                                                                             20 kHz  2 MHz

                   A'v                                                      0                    f
                                                                       -180
                  18 dB
                                                                       -270
                                                  200 kHz
                                                           f

31. At 4 kHz: 78.7 degrees, at 20 Hz: 45 degrees, at 100 Hz: 11.3 degrees

33.

     A'v                                                   

     32 dB                                                 90

                                                           45

            20 Hz                                                          0   2 Hz 20 Hz 200 Hz f

                                                           f

35. Net gain at 20 kHz = 35.87 dB. Net phase at 20 kHz = 51.7 degrees
         At 100 kHz: phase = -5.1 degrees, A'v = 40 dB. At 800 kHz: phase = -70.5 degrees, A'v = 30.5 dB

37.

       A'v

                     30 kHz 250 kHz 300 kHz f

481
39.

             A'v

           36 dB

                  100 kHz 750 kHz 1.2 MHz f

41. Each lag network rolls off at 20 dB/decade for a 60 dB/decade total (i.e., above 1.2 MHz).
43. 0.775 V
45. 360 W
47. 71.5 dBV
49. Greater than 30 Hz.

                                                 Chapter 17

1.   fin = 67 Hz, fout = 2.65 Hz, fbypass = 61.2 Hz. f1 > 67 Hz due to proximity.

3.   fin = 9.76 Hz, fout = 0.796 Hz, fbypass = 2.57 Hz. f1 > 9.76 Hz due to proximity.

5.   fin = 477 Hz, fout = 8.8 Hz, fbypass = 7.42 Hz. f1  477 Hz.

7.   fin = 4.5 Hz, fout = 2.6 Hz, fbypass = 69.4 Hz. f1  69.4 Hz.

9.   fin = 4.5 Hz, fout = 67.9 Hz. f1  67.9 Hz.

11. fin = 0.34 Hz, fout = 0.723 Hz, fbypass = 16.3 Hz. f1  16.3 Hz.

13. fin = 1.59 Hz, fout = 3.22 Hz, fbypass = 0.781 Hz. f1 > 3.22 Hz due to proximity.

15. fin = 7.23 Hz, fout = 0.672 Hz. f1  7.23 Hz.

17. fin = 4.78 MHz, fout = 13.6 MHz. f2 < 4.78 Hz due to proximity.

19. fin = 40.8 MHz, fout = 3.32 MHz. f2  3.32 MHz.

21. fin = 84.1 MHz, fout = 33.9 Hz. f2 < 33.9 MHz due to proximity..

23. fin = 5.63 MHz, fout = 79.6 Hz. f2  5.63 MHz.

25. fin = 128 MHz, fout = 13.3 MHz. f2  13.3 MHz.

27. fin = 535 kHz, fout = 6.88 MHz. f2  535 kHz.

29. fin = 566 kHz, fout = 6.88 MHz. f2  566 kHz.

31. Cin = 239 nF, Cout = 440 nF, Cbypass = 371 F.

33. For 50 Hz: Cin = 902 nF, Cout = 29.9 F. Pick one and increase the other.

35. For 50 Hz: Cin = 1.45 nF, Cout = 4.43 F. Pick one and increase the other.

37. For 1 kHz: Cin = 79.4 pF, Cout = 7.23 nF, Cbypass = 531 nF. Pick one and increase the others.

482
Appendix D

              "There is life beyond the cymbals."

                                -Bill Bruford

After many years of observing the food ingestion habits of college students and faculty, it can be said that many
do not cook, bake and eat food so much as they consume prepackaged food-like substances of dubious
nutritional quality and limited flavor. There is no need for this as basic cooking is not difficult, and besides, it
gives you control of what goes inside your body. Here is an excellent bit of snack-food: tasty, nutritious and
relatively easy to make. And when you're done, you can feel good that you didn't drop a bunch of cash on some
assembly-line manufactured excuse for sustenance that's loaded with saturated fat, refined sugar, salt and who-
knows-what-else. Also, your cooking-challenged friends will think you're a genius.

Autumn Bread

Autumn bread is a variation on banana bread, but is very low in fat. If you add the optional nuts, the fat content
goes up but it's not saturated fat or trans fat as in butter, margarine, or shortening. Walnuts in particular are a
decent source of alpha-linolenic acid, a "good fat". Autumn bread is fairly dense and moist. It definitely sticks
with you. For variations, you could swap one of the bananas for another apple if desired. In this case you might
consider adding a little nutmeg. Also, if you like it less sweet, you can drop the honey back to 1/3 cup. For many
people, there are sufficient raisins in the raisin bran but an extra half cup has been added "just because". In fact,
extra raisins will help sweeten the flavor and that's another reason to cut back on the honey. Actually, don't
bother to measure out the raisins and walnuts, just eyeball them and add what looks good at the moment.
Cooking should be fun and a little bit experimental. "t" = teaspoon, "T" = tablespoon, "C" = 8 ounce cup. Yeow,
I really do prefer metric units, but...

3 egg whites                                               (optional)
3 overripe mashed bananas
1 medium apple, diced
3/4 C plain non-fat yogurt
2 T molasses
1/2 C honey
1 t cinnamon
1 t vanilla
1/2 C walnuts, almonds, or pecans; or combination thereof
1/2 C raisins
1 1/2 C raisin bran
2 1/2 C flour (try using 50/50 whole wheat/all-purpose)
1/2 t baking soda
2 1/2 t baking powder

483
Preheat oven to 350 and coat a 9x5 loaf pan with non-stick spray. Make sure that was 350캟 and not 350캜;
otherwise, prepare to eat carbon chunks when this comes out of the oven.
In a large bowl beat egg whites for about a minute by hand, then add next nine ingredients (through raisins),
mixing well. Make sure you do this in a large bowl as doing it directly on the kitchen counter probably will be
messy. Add raisin bran, mixing to make sure it's all wet. Let stand 10 minutes or so. While you're waiting,
combine flours, baking soda and baking powder in a second bowl. Go back to first bowl and mix it around to
make sure that the raisin bran is broken up. If it's not broken up, tell it a funny story and see if that breaks it up.
Add the flour mixture to the wet bowl in batches, mixing thoroughly. If you don't know how to spell
"thoroughly", just do the best you can. Now, grab the loaf pan. If you sprayed the outside of the pan instead of
the inside, discard it, get another pan, and only spray the inside this time. Dump the contents of the bowl (not the
empty one, because that would just be confusing) into the loaf pan and pop it in the oven (the loaf pan, not the
bowl). Bake 60 - 65 minutes or until toothpick comes out clean when inserted in center of pan. Cool on rack for
15 minutes. You might wish to let the loaf cool and then cover it in plastic wrap for a couple of hours as this
softens the crust.
This makes one big gigundo size loaf, enough to feed a family of four for a week, or one hungry distance runner
for the afternoon.

484
     Eventually, everything is history.

     Image from Psychology Doggie cartoon  Jim Fiore, All Rights Reserved

485
