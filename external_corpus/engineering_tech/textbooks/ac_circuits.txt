AC Circuits

1st Edition

1 Chad Davis, PhD, PE  11/11/17  AC Circuits, 1st ed.
How to navigate this book: This document contains bookmark links,
which are links to other locations in this document. These are not
the same as website links, which will open up a webpage in your
default browser. If you click on a bookmark and want to go back to
where you were previously at in the document, click on ALT - Left
Arrow ().

For example:
 This is a bookmark to the Preface section  Preface
 This is a website link to the DC Circuits pre-requisite book.

Getting the Latest Version of this book: If you see any errors or
typos please go to my website (ChadDavis.oucreate.com) and enter
them in the comments section and I will get the book updated.
Minor changes in the book will not result in a new version number,
but instead will be corrected and uploaded to the following
webpage:
https://shareok.org/handle/11244/51946
If you have any suggestions for significant changes that could
potentially be implemented into a new edition in the future, I would
also appreciate that type of feedback on my website.

 Chad Davis, PhD, PE 2017
CC BY-NC-SA
This book was created by Chad E. Davis and released under the Creative Commons License.

2
Table of Contents

Preface ....................................................................................................................................................4
Module 1 - AC Signal Overview ................................................................................................................5

   Section 1.1 - AC Introduction.................................................................................................................................5
   Section 1.2 - Sinusoids ...........................................................................................................................................6
   Section 1.3- Defining AC Voltage Types for Common AC Waveforms ............................................................... 12

      Section 1.3.1 - Peak and Peak to Peak Voltage............................................................................................... 15
      Section 1.3.2 - Average Voltage...................................................................................................................... 16
      Section 1.3.3 - Root Mean Square (RMS) Voltage .......................................................................................... 16
   Section 1.4- Sine Wave, Square Wave, and Triangle Wave Example Problems ................................................. 18
      Section 1.4.1 - Example Calculations of Vpp, Vpk, Vavg, and Vrms for Sine Waves ...................................... 18
      Section 1.4.2 - Example Calculations of Vpp, Vpk, Vavg, and Vrms for Square Waves .................................. 20
      Section 1.4.3 - Example Calculations of Vpp, Vpk, Vavg, and Vrms for Triangle Waves ................................ 23
Module 2 - AC Circuits Math Background ...............................................................................................26
Module 3 - RLC Circuit Analysis with AC Sources.....................................................................................32
   Section 3.1 - Introduction of Impedance and Admittance and the Laplace Transform ..................................... 32
   Section 3.2 - Series RLC Circuits .......................................................................................................................... 33
   Section 3.3 - Parallel RLC Circuits........................................................................................................................ 41
   Section 3.4 - AC Power Calculations ................................................................................................................... 44
   Section 3.5 -AC Maximum Power Transfer......................................................................................................... 50
Module 4 - Passive Filters ......................................................................................................................53
   Section 4.1 - Low Pass Filters (LPF) ..................................................................................................................... 54
   Section 4.2 - High Pass Filters (HPF) ................................................................................................................... 57
   Section 4.3 -Band Pass Filters (BPF).................................................................................................................... 59
   Section 4.4 -Band Stop Filters (BSF).................................................................................................................... 66
Module 5 - Transformers .......................................................................................................................68
Module 6 - Diodes and AC to DC Conversion ..........................................................................................72
   Section 6.1 - Diode Constant Drop Model .......................................................................................................... 73
   Section 6.2 - Diode Logic Circuits........................................................................................................................ 78
   Section 6.3 - Protection Diodes .......................................................................................................................... 79
   Section 6.4 - Rectifiers ........................................................................................................................................ 80
Module 7 -Operational Amplifiers (OpAmps) .........................................................................................84
   Section 7.1 - OpAmps Used as Comparators ...................................................................................................... 86
   Section 7.2 - OpAmps used as Amplifiers ........................................................................................................... 89
      Section 7.2.1 - Inverting OpAmp Configuration.............................................................................................. 92
      Section 7.2.2 - Non-Inverting OpAmp Configuration...................................................................................... 94
   Section 7.3 - Superposition with OpAmps .......................................................................................................... 95
References and Links..............................................................................................................................96
Appendix ...............................................................................................................................................98

3
Preface

This eBook was written as the sequel to the eBook titled DC Circuits, which was written in 2016 by Chad Davis.
The DC Circuits eBook (https://shareok.org/handle/11244/52245) should be reviewed prior to reading this book.
While the first book covered only DC circuits, this book covers Alternating Current (AC) circuits as well as a brief
introduction of electronics. It is broken up into seven modules. Module 1 covers the theory of AC signals. Since
only DC sources are used in the first eBook, details of AC signals such as sinusoidal waveforms (or sine waves),
square waves, and triangle waves are provided. Module 2, titled AC Circuits Math Background, covers the
mathematics needed for solving AC circuit problems. The background material in Modules 1 and 2 are combined
in Module 3 to solve circuits with AC sources with resistors, inductors, and capacitors (RLC circuits).

Note: The term RLC circuit will apply to circuits that contain resistors and capacitor and/or inductors in this
eBook. Therefore, the RLC term will also apply to RL and RC circuits.

Module 4 focuses on using RLC circuits as passive filters. Content that is traditionally associated with AC Circuits
material ends in Module 4, but additional content is included in Modules 5 to 7 to provide more practical
knowledge that builds upon the theory learned in AC circuits. Topics in these final three modules include
transformers, diodes, and operational amplifiers. These topics in Modules 5 to 7 are the foundation of the field
of electronics. Only an overview is provided in this eBook, but if it peaks your interest
http://www.allaboutcircuits.com/textbook/semiconductors/ has a detailed open source eBook on electronics.

An important thing to realize is that most of the information covered in DC circuit theory also applies to AC
circuit theory. In fact, it is a good idea to think of a DC signal as one that can be obtained by freezing time in an
AC signal and looking at the "instantaneous" voltage or current values at that moment in time. With this in
mind, it should be apparent that KVL, KCL, Ohm's law, and all of the other primary equations used in DC circuits
also apply to AC circuits, since the AC circuit is simply a DC circuit that continually changes values. While DC
voltage or current signals are typically given capital letter variables (V or I), AC waveforms are given lower case
variables and often written as a function of time, v(t) or i(t). In this eBook scalar values that define the different
types of AC voltages and currents are given capital letters (Vpk, Ipk, Vpp, Ipp, Vavg, Iavg, Vrms, Irms, and A) as
defined in Module 1.

One goal of this book is to provide practical information to better equip the reader to put circuit theory into
practice. The picture on the cover of this book shows an example of a RLC circuit built on a breadboard. After
the completion of this book you will understand how RLC circuits work and many of the applications they are
used for, as well as obtain a foundation in electronics. While providing practical information, this eBook tries to
avoid going into too many tangents that result in numerous pages being skipped over by the reader. Links are
provided throughout the eBook where more background information is available when I felt the temptation to
depart from the main point. Many of the links come from allaboutcircuits.com, which is a very good open
educational resource. If a link doesn't open copy it into your browser or search for the document title online.

The circuits in this eBook are created with a user friendly circuit drawing and simulation tool called Multisim.
Creating new circuits and simulating them to verify that your calculations are correct is a good way to hone your
circuit analysis skills. By providing an explanation of how to verify calculations in Multisim, this eBook enables
the reader to create more complicated problems, while having a method to check the results. This is vitally
important with AC circuits because the complex algebra involved in solving them is very tedious and mistakes
are frequently made by students that are learning the problem solving techniques. The DC probes and
Multimeters were used extensively in the DC Circuits eBook, but in this eBook AC probes and the MultiSim
oscilloscope will also be used to make more complicated AC measurements.

4
Module 1 - AC Signal Overview

Module 1 is broken up into the following 4 sections.
      Section 1.1 - AC Introduction
      Section 1.2 - Sinusoids
      Section 1.3 - Common AC Waveforms and Voltage Types
      Section 1.4 - Sine Wave, Square Wave, and Triangle Wave Example Problems

Section 1.1 - AC Introduction

When analyzing Direct Current (DC) circuits, calculations and measurements were simplified because the
currents and voltages remained at a constant value when the circuit was at steady state. For Alternating Current
(AC) circuits, the steady state voltage and current fluctuates in such a manner that the current periodically
changes directions in the circuit. With the signals in the circuit being much more complicated, the analysis of AC
circuits is also at a higher complexity level. An important thing to realize is that most of the information covered
in DC circuit theory also applies to AC circuit theory. In fact, it is a good idea to think of a DC signal as one that
can be obtained by freezing time in an AC signal and looking at the instantaneous voltage or current values at
that specified time. With this in mind, it should be apparent that KVL, KCL, Ohm's law, and all of the other
primary equations used in DC circuits also apply to AC circuits since the AC circuit is only a DC circuit that
continually changes values. While DC voltage or current signals are given capital letter variables (V or I), AC
signals are given lower case variables and written as a function of time, v(t) or i(t). In this eBook scalar values
that define the different types of AC voltages and currents are given capital letters (Vpk, Ipk, Vpp, Ipp, Vavg,
Iavg, Vrms, Irms, and A). These AC parameters are defined in sections 1.2 to 1.4.
Note: In the DC Circuits eBook Figure 1.7a showed how to change the probe settings in MultiSim and described
each of the "periodic" probe measurements. For convenience, the explanation and Figure (see Figure 1.0) is
repeated here. When the current and voltage probes are normally placed in Multisim the "Instantaneous and
periodic" probe setting is the default so you will see 5 voltage measurements (as shown in Figure 1.0). From top
to bottom these measurements are: 1-Instantaneous, 2-peak to peak (Vpp or Ipp), 3-Root-Mean-Square (Vrms
or Irms), 4-average (Vavg or Iavg), and 5-frequency of the signal. The average voltage is labeled V(dc) in the
Multisim probe because the average voltage is equivalent to the DC value. The instantaneous voltage is the
value at a specific time and will continuously change as the AC current flows through the circuit. These four
additional parameters for voltage or current are only used for AC circuits. When dealing with DC circuits there is
only one type of voltage and current so only the instantaneous measurements are needed. To get only the DC
current or voltage click on the probe settings and change the default to "Instantaneous Only" as shown in Figure
1.0.

Figure 1.0: Preferred probe settings for DC circuits (Left) and AC circuits (Right).

5
Before analyzing AC circuits it is good to have a brief history of DC and AC circuits. This link
(http://www.allaboutcircuits.com/news/why-is-the-us-standard-60-hz/) provides some DC and AC background
and discusses how the United States (US) power system standardized on 60 Hertz (Hz) sinusoidal signals and
Europe, and most of the rest of the world, standardized on 50 Hz sinusoidal signals (Sinusoids are discussed in
detail in Section 1.2). This eBook will focus primarily on 60 Hz signals. The voltage levels used in AC circuits is
also an important factor. US most commonly uses a Root Mean
Square (RMS - discussed in detail in Section 1.3) voltage level
between 110 and 120 Volts. 110 Vrms and 120 Vrms are often
used interchangeably to describe the same signal. In the
previous link 110 Vrms is used, but 120 Vrms is a more
commonly referred to value and therefore 120 Vrms will be used
for the amplitude of a standard AC outlet voltage signal in this
eBook. According to this link the average RMS voltage is really
around 117 Vrms.

Figure 1.1 shows a Multimeter in AC mode measuring the RMS

voltage of a standard US electrical outlet. In this case, the

measurement is slightly higher than 120 Vrms. Figure 1.2 shows

how a 120 VRMS, 60 Hz voltage source would appear if plotted

on an oscilloscope. Notice, that the top AC outlet in Figure 1.1 is

concealed with a safety cover to avoid an accidental shock. One                                   Figure 1.1: AC Outlet
important note about AC is that it is usually considered much

more dangerous than DC for many reasons. The following link discussed electrical safety in great detail and

provides data that shows that a 60 Hz AC signals can result in heart fibrillation at much lower currents than DC.

http://www.allaboutcircuits.com/textbook/direct-current/chpt-3/ohms-law-again/

             200

                                                                                                  There are many applications based on sinusoids. The AC power

             150                                                                                  outlet voltage signal shown in Figure 1.1 is sinusoidal and can be

                                                                                            characterized by Equation 1.1. If the amplitude is 120 Vrms, the

             100

                                                                                            frequency is 60 Hz, and the phase shift is zero then the voltage

                   50                                                                             equation would be:

                       0                                                                           () =   (    )

Voltage (V)  -50                                                                                  Note: The Amplitude (or peak voltage of a symmetrical sine wave) is

                                                                                                  equal to the RMS voltage multiplied by 2 (e.g. 120 Vrms = 169.7

             -100                                                                                 Vpk). This will be discussed in more detail in Section 1.2. This AC

                                                                                                  outlet signal is plotted in Figure 1.2 and is what you would see if you

             -150 connected the wall outlet of Figure 1.1 signal to an oscilloscope.

             -200               -0.005  0  0.005                  0.01  0.015  0.02  0.025  0.03
                         -0.01

                                                  time (seconds)

Figure 1.2: Standard AC outlet signal in U.S. homes (120 Vrms, 60 Hz sinusoid)

Section 1.2 - Sinusoids

A sinusoid is described in this eBook as a signal that is governed by Equation 1.1. A sine wave or a cosine wave
are both considered sinusoids and they can be converted to each other through a 90 (or a /2 radians) phase
shift.

                    sin(t) = cos(t - /2)                                      or                 cos(t) = sin(t + /2)

6
Equation 1.1 will be referred to as "sinusoidal form" throughout this eBook. Since it is desirable to have zero
initial values for voltage and current sine waves are preferred for circuits (instead of cosine waves that have max
amplitude at t=0). The terms sinusoid and sine wave will often be used interchangeably in this eBook.

[1.1]  () =   sin(   + ) or () =   sin(   + )

    A = Amplitude (or peak value of the sinusoid assuming the signal is symmetric about the x axis)
     = Phase shift (units = radians)
    t = time (units = seconds)
     = angular frequency (units = rad/sec)
    v(t) or i(t) = The equation for the AC voltage or current. (The Amplitude sets the units of v(t) or i(t))

[1.2]   = 2     = 2                   f = Frequency (units = Hertz) and T = Period (units = seconds)

                                    

In order to plot a sinusoid that is symmetrical about the x-axis (i.e. no DC offset) from the sinusoidal form
(Equation 1.1) or to conversely write the sinusoidal form equation from the plot you need to know 3 things:

   1) Amplitude (A): This can be measured from the difference of the maximum and minimum voltage
       divided by 2  A = (max - min)/2 If the sinusoid is symmetric then A = max = |min|, but if it is NOT
       symmetric then a DC offset is added to Equation 1.1 as follows: () =  +   sin(   + )

   2) Period (T): The period can be measured as the time between sinusoidal peaks on the plot. Once the
       period is measured,  can be calculated as  = 2/T as shown in Equation 1.2.

   3) Time Shift (tS): The time shift is determined by measuring the distance between the y axis and the
       nearest starting cycle of the sine wave. If the sine wave begins its positive cycle before x = 0 (left of the y
       axis) then tS has a negative value and the sinusoid is said to be "advanced". If the sine wave begins its
       positive cycle after x = 0 (right of the y axis) then tS has a positive value and the sinusoid is said to be
       "delayed". Once the angular frequency () and time shift (tS) are known, then the phase shift () can be
       determined from (-   tS) as shown in equations 1.3.

[1.3]   = -   Note: time shift (tS) and phase shift () always have opposite signs.

7
Example 1.1) Determine the sinusoidal form equation for the signal in Figure 1.2.

                                    T

                                                    tS

Figure 1.3: Plot of a symmetric sine wave used in Example 1.1.
Find the 3 items need to write the sinusoidal equation (A, T, ts) and convert T to  and ts to .

    1) Amplitude = A = 5 (no units for the y axis are given, but we would normally assume it is volts).
    2) Period = T = ~ (0.015 seconds) - (-0.085) = 0.1 sec or 100 msec. Once the period is measured,  is

         calculated as  = 2/T = 2/0.1 = 20  rad/sec
    3) ts = the time shift is ~ -0.01 seconds as shown by the red arrow on Figure 1.1. Now that tS and  are

         known the phase shift can be calculated by Equation 1.3   = -   = -20 (-0.01) = 0.2 
Using results from 1) through 3) yields  v(t) = 5 sin (20   t + 0.2)
Since the time shift was negative the sine wave in Figure 1.2 is considered to be "advanced" when compared to
a sine wave with no phase shift.
Example 1.1 showed how to determine the sinusoidal form equation when a plot of the sine wave is available.
Example 1.2 shows how to plot the sine wave if the equation is available.
Note: If you want to find the phase difference between two signals it is often easier to measure the time
difference between the peaks and then use Equation 1.3 to convert to phase (see Figure 2.2 in Module 2).
Example 1.2) Plot the sine wave that is represented by the equation: i(t) = 20  sin (200t - 30) mA
Note: In the equation for Example 1.2 the units are given at the end of the equation as mA. Whenever you write
the sinusoidal form of a voltage or current you should include the units at the end like this. If no units are given
assume v(t) is Volts and i(t) is Amps. Additionally, the phase shift is listed with a degree sign, but the phase shift
must be in radians for the units to agree. Since most people can comprehend degrees better than radians listing
the phase shift in degrees is a common practice. If you do this make sure you label it with the degrees symbol.
CAUTION: If you are analyzing an equation that lists phase shift in degrees make sure you convert it to radians
before adding it to the t term in the sinusoidal form equation.

8
First, convert the phase shift to radians.  = -30*( radians/180) = -/6 radians
To plot the sine wave from the sinusoidal form equation you need A, T, and tS.

    1) A = 20 mA (Make sure the y axis is labeled with mA)
    2) T = 2/ = 2/200 = 0.01 = 31.4159 msec
    3) tS = -/ = - (-/6 rad) / (200 rad/sec) = +2.618 msec

Now that these three parameters are known the sine wave can easily be plotted by hand. Use tS to determine
where to start the sine wave. Use A to know how far above and below the X axis it goes and use T to determine
how much time elapses in one cycle of the sine wave. The final plot should look like the following figure. The
Matlab code is shown to the right of Figure 1.4.

              20

                                                T = 31.4 ms                                % Step 1 - Determine the Amplitude, A

              15                                                                           A = 20; % Make sure mA is on y axis label

                                                                                           % Step 2 - Determine the Period, T

              10                                                                           w = 200; % This is given in Example 1.2

                                                                                           T = 2*pi/w; % This is used to draw i(t) by hand

                       5                                                                   % Step 3 - Determine the Time Shift, ts

                                                                                           Theta = -30; % Degrees (This is Given in Example 1.2)

                       0                                                                   Theta = -30*pi/180; % Radians

                                                         tS = 2.6 ms

Current (mA)                                                                               ts = -Theta/w % This is used to draw i(t) by hand

                   -5                                                                      % Plotting in Matlab

                                                                                           t = -.04:.001:.04;

              -10                                                                          i = A*sin(w*t + Theta);

                                                                                           plot(t,i,'k')

              -15 grid on

                                                                                           xlabel('time (seconds)')

              -20          -0.03  -0.02  -0.01                        0  0.01  0.02  0.03  0.04 ylabel('Current (mA)')
                    -0.04

                                                time (seconds)

Figure 1.4: Plot for Example 1.2

Note: In Module 3 we will use the term "lead" to describe a signal that is an advanced version of another signal
and "lag" to describe a signal that is a delayed version of another signal.

For example, in Figure 1.5 the left plot shows that the solid black sine wave is advanced (or leading the dashed
blue sine wave) because the time shift of the solid black sine wave (referenced to the blue sine wave) is a
negative value. The following it the best way to think of this:

     The leading sine wave is the sine wave that completes its sinusoidal cycle first.

The right plot of Figure 1.5 shows the opposite case where the solid black sine wave has a time shift that is
positive resulting in a delay. In the right plot the black sine wave can be said to be lagging the blue dashed sine
wave. Keep in mind you can also say it in the reverse order and change lagging to leading (i.e. the blue sine wave
in the right plot of Figure 1.5 is leading the black sine wave because its sinusoidal cycle is completed first).

Some of the Matlab code for plots in this eBook are included at the end of the Appendix.

9
        5                                                                                                                                                                                                                                                                                                                                                                                       5

        4                                                                                                                                                                                                                                                                                                                                                                                       4

        3                                                                                                                                                                                                                                                                                                                                                                                       3

        2                                                                                                                                                                                                                                                                                                                                                                                       2

        1                                                                                                                                                                                                                                                                                                                                                                                       1

       0                                                                                                                                                                                                                                                                                                                                                                                    0 tS = +0.01s

                                          tS = -0.01s                                                                                                                                                                                                                                                                                                                                       -1

    -1
    Voltage (V)
                                                                                                                                                                                                                                                                                                                                                                               Voltage (V)

    -2                                                                                                                                                                                                                                                                                                                                                                                      -2

    -3                                                                                                                                                                                                                                                                                                                                                                                      -3

    -4                                                                                                                                                                                                                                                                                                                                                                                      -4

    -5       -0.05                  0                  0.05  0.1                                                                                                                                                                                                                                                                                                                            -5       -0.05                  0  0.05  0.1
       -0.1                                                                                                                                                                                                                                                                                                                                                                                    -0.1

                    time (seconds)                                                                                                                                                                                                                                                                                                                                                                          time (seconds)

Figure 1.5: Dashed Blue Line (Zero time shift), Solid Black Line (Left, tS = -0.01s, Right, tS = +0.01s)

Music is another area where sinusoids are present. Each musical note is a sinusoid at a different frequency. If
you are new to the idea of frequency a good way to understand it is download a tone generator app that will
play different frequencies through your mobile device. You will find that as you increase the frequency that you
will stop being able to hear the sound as the frequency approaches or slightly exceeds 20 kHz. This is due to the
limitation of the human ear. Other animals, such as dogs, can hear much higher frequencies. The following link
describes the frequencies of the different notes of the musical scale in detail:
http://www.allaboutcircuits.com/textbook/alternating-current/chpt-1/ac-waveforms/

When musical notes (or any sound for that matter) are played and different frequencies are present at different
times a frequency versus time plot can be used to characterize the "spectrum" of the sound over time. Two
popular frequency versus time plots are the spectrogram and the power spectrum density (psd) plot.

Figure 1.6 shows the spectrogram and the psd for a train whistle sound that is sampled at a frequency of 8 kHz.
See this link for more information about sampling.

The Spectrogram (top plot of Figure 1.6) shows the frequency versus time and uses a color code to show the
amplitude at different frequencies. The psd plot (bottom plot of Figure 1.6) shows the amplitude versus
normalized frequency (Actual_Frequency/0.5Sampling_Frequency) for a block of time, which in this case is the
complete 1.6 seconds of the train whistle sound. The 6 red lines of the spectrogram can be correlated to the 6
spikes in the psd plot. These plots help characterize sound so operations can be performed to enhance/amplify
certain frequencies (e.g. an audio equalizer) or remove/attenuate certain frequencies (i.e. filtering - See Module
4). Another reason characterizing the frequency spectrum of a signal is important is that the sounds can be
replaced by computer generated sounds. For example, vocoders (like Siri on an iPhone) digitally speaks like a
human by pre-analyzing the spectrum of speech for the language setting that is selected. In Module 4 another
type of frequency response plot called the Bode plot will be used to characterize RLC filters.

10
Figure 1.6: Spectrogram (top) and psd plot (bottom) of a train whistle sound
The following statement is perhaps the most important thing about sinusoids.

  Any periodic waveform (one that repeats every T seconds) can be created by a sum of sinusoids.

For example, a square wave with amplitude (A) and a fundamental frequency (f0) is created by taking an infinite
sum of odd harmonic sine waves as follows (The red bolded numbers are called the harmonics):

() = 4   sin(1  20  ) + sin(  20  ) + sin(  20  ) + sin(  20  ) +  + sin(  20  )
      1  3  5  7                                                                          

http://www.allaboutcircuits.com/textbook/alternating-current/chpt-7/square-wave-signals/

A triangle wave with amplitude (A) and fundamental frequency (f0) is also created by taking an infinite sum of
odd harmonic sine waves, but with slightly different constants and alternating signs of each term:

() = 2 8   sin(1  20  ) 1 - sin(  20  ) 9 + sin(  20  ) 25 - sin(  20  ) 49 +  - 2 sin(  20  )

These links from Wikipedia show the equations and also have an option for you to play the sound of the waveforms.

https://en.wikipedia.org/wiki/Square_wave https://en.wikipedia.org/wiki/Triangle_wave

The square and triangle waves will be closer to exact as more terms (or harmonics) are included. Figure 1.7 (see Matlab
code in the Appendix) shows a square and triangle wave created with different numbers of terms with A = 1 and f0 = 60 Hz.

11
                                    10 sinusoidal terms                                         20 sinusoidal terms
             1                                                           1

    0.5                                                        0.5

             0                                                           0

-0.5                                                           -0.5

         -1                                                          -1

                0  0.02                                  0.04               0  0.02                                  0.04

                                 100 sinusoidal terms                                      1000 sinusoidal terms
             1                                                           1

    0.5                                                        0.5

             0                                                           0

-0.5                                                           -0.5

         -1                                                          -1

                0  0.02                                  0.04               0  0.02                                  0.04

Figure 1.7: Square wave (black) and Triangle wave (red) created with different numbers of sinusoidal terms.

Section 1.3- Defining AC Voltage Types for Common AC Waveforms

In this section the three common waveforms that have been previously discussed (sine wave, square wave, and
triangle wave) will be described in more detail. These three are the most common waveforms and are the three
that are available in practically all function generators as shown in Figure 1.8 and Figure 1.9.

ONLY periodic waveforms (signals that repeat their pattern every T seconds) are discussed in this eBook.

Figure 1.8 shows the Multisim tool that is a replica of the Agilent 33120A function generator. The knobs and
buttons work in the same way as the actual Agilent device works. A red box is drawn around the sine wave,
square wave, and triangle wave buttons. The Multisim symbol for the function generator has the title XFG1 and
the output and ground connectors are wired into channel A of the generic Multisim 2-channel scope that is
titled XSC1. In Figure 1.8 a 1 kHz square wave is selected.

12
Figure 1.8: Agilent Function Generator and Multisim 2-Channel Oscilloscope.
Figure 1.9 shows the generic Multisim function generator tool and the scope tool that is a replica of the
Tektronix TDS 2024 Oscilloscope. The knobs and buttons work in the same way as the actual Tektronix device
works. The Multisim symbol for the function generator has the title XFG2 and the + output and ground
connectors are wired into channel 2 of the Tektronix scope that is titled XSC1. In this example a 60 Hz sine wave
with a peak voltage of 10 V is selected. The right side of the Oscilloscope shows 5 measurements. Figure 1.10
shows a zoomed in view of these 5 measurements.

Figure 1.9: Multisim Function Generator and Tektronix Oscilloscope.
The primary goal of this section is to show how to solve the peak to peak (Vpp), peak (Vpk), average (Vavg), and
root mean square voltage (Vrms) for the sine wave, square wave, and triangle wave. Figure 1.8 and Figure 1.9
shows two ways that you can simulate these three signals and two ways that you can make these four
measurements in Multisim. Figure 1.10 shows that Vpk is called Vmax and the Vavg is called Vmean on the
Tektronix oscilloscope. Another terminology note is that Vrms is frequently referred to as VAC.

13
Figure 1.10: From top to bottom (F, Vp-p, Vpk, Vrms, and Vavg) Measurements from Figure 1.9
You can also use a Multimeter to measure AC waveforms, but you only get the RMS current or voltage. The
meter in Figure 1.11 is put in AC mode (the wavy line) and is measuring the RMS current in the AC circuit. The
voltage could also be measured if the meter was placed across a component and the V button selected.

Figure 1.11: Using the Multsim Multimeter to measure the RMS current (also called IAC)
14
Section 1.3.1 - Peak and Peak to Peak Voltage
Determining the peak (Vpk) and peak to peak (Vpp) voltage (or current) for the sine wave, square wave, and
triangle wave is a simple process, as described in the two bullets below. The voltage variable will primarily be
used in this eBook, but the following AC currents can also be determined: Ipp, Ipk, Irms, and Iavg

 Vpk is the maximum value of any periodic waveform. This includes sine, square, and triangle waves.
 Vpp is the difference between the maximum and minimum values of a periodic waveform.
 A, which is the amplitude of a sinusoid that was defined in section 1.2, is equal to Vpp/2. It is also equal to

    Vpk if the sinusoid is symmetric about the x-axis (i.e. There is no DC offset and max = |min|).

[1.4]   =           :     -    

                 2

Figure 1.12 shows both scenarios: with and without a DC offset. Keep in mind that when measuring an AC signal
on an oscilloscope you must put it in DC coupling mode if you want to see the DC offset. When the oscilloscope
is in AC coupling mode the DC offset is automatically filtered out. The DC coupling setting is changed by clicking
on the Blue shaded button that corresponds to the channel on the bottom of the oscilloscope (Figure 1.12
shows both channels are in DC coupling mode). This figure shows that XFG1 has a symmetric (DC offset = 0)
triangle wave with a Vpp of 16 V (amplitude = 8) and sine wave with a 5 V DC offset and a Vpp of 20 V
(Amplitude =10).

Note: To change the color of the plot in the Multisim oscilloscope you have to change the wire color going into
the + terminal on channel A or B. To change the color you right click on the wire and click on "segment color".
Also, if the - pin of the oscilloscope is desired to be referenced to ground you can leave it unwired.

   The far right terminal of the function generator produces an
   output that is the inverted (or negative) version of the far
   left terminal. I would recommend only using the left and
   middle terminals and ignoring the third terminal.

Figure 1.12: Using the Multisim function generator to plot two waveforms on the Multisim oscilloscope

15
Section 1.3.2 - Average Voltage
The average voltage (Vavg) is the voltage measured by a Multimeter in DC mode. Periodic signals (i.e. they
repeat their pattern every T seconds) that are symmetrical about the x-axis have an average voltage of zero.
The average value for a waveform that is not symmetric can either be calculated by using integration (Equation
1.5) or using the area method. The area method is preferred for most waveforms because it is usually much
easier to calculate. This is especially true for square waves and triangle waves.

[1.5]                1      : ()    ,    

        =  0 () 

The average value of any periodic signal can also be solved numerically using the area method.

Step 1) Break up the periodic square wave into rectangles over 1 period and label the areas AI, AII, AIII, AIV, etc.
Step 2) Find the sum of the areas over 1 period (ATotal). Note: Negative voltage peaks produce negative areas.
Step 3) Divide the sum of the area (ATotal) by the period (T)   = /

Section 1.3.3 - Root Mean Square (RMS) Voltage

Vpk, Vpp, and Vavg are key AC voltage quantities, but the most important AC voltage type is the RMS voltage
(Vrms). The Root Mean Square (RMS) voltage is found by:

     1) Squaring all (or as many points as possible) along one period of a periodic waveform.
     2) Finding the Mean (or the average) of all of the square values found in step 1).
     3) Taking the square Root of the mean found in step 2).

The RMS value for any periodic waveform can be calculated mathematically by using Equation 1.6.

[1.6]   =  1 0 ()2  : ()    ,    

The RMS voltage is an important quantity in AC circuits because it allows the AC power delivered to a load to be
equated to the DC power. Vrms can be defined as the magnitude of AC voltage that produces the same amount
of average power on a load as an equivalent DC voltage, as shown in Figure 1.13.

       Instantaneous Power

Figure 1.13: Instantaneous and Average Power of a circuit with a DC source (left) and an AC source (right).
16
The top power measurement in the power probe box in Figure 1.13 is the "instantaneous power" (Pinst) and the
bottom power value is called the "average power" (PAVG). Since voltage and current doesn't change in a DC
circuit at steady state Pinst and Pavg are the same. For AC circuits Pinst is determined in the same way as it is in a DC
circuit, but Pavg is determined using RMS current and voltage. The Pinst value continually changes in an AC circuit
as the voltage and current change. At the moment in time the MultiSim circuit in Figure 1.13 was paused, Pinst
just happened to be equal to 17.5 W, but the voltage could theoretically have been anywhere from -Vpk to +
Vpk depending on when the circuit was paused. Since Pinst depends on the instantaneous voltage (or the exact
voltage at the moment it was paused) it changes from 0 to Vpk2/R. Recall in section 1.1 it was stated "it is a good
idea to think of a DC signal as one that can be obtained by freezing time in an AC signal and looking at the
instantaneous voltage or current values at that specified time."

Note: In the DC Circuits book instantaneous power (Pinst) is given a positive value when it is dissipated (or
absorbed) by a resistor, but a negative value when power is supplied (or delivered) by a source.

     For DC power these equations were used in the DC Circuits eBook: PDC = Pinst = VI = V2/R = I2R
     For AC power the RMS values (Vrms and Irms) are used: PAC = Pavg = Vrms  Irms = Vrms2/R = Irms2R

Caution: Make sure the RMS voltage (Vrms) and current (Irms) are used when AC power is calculated.

There are simplified methods for determining the RMS voltage or current for symmetrical waveforms (i.e. DC
offset = 0) as shown in equations 1.7 to 1.9 below. Notice only the peak voltage is needed to determine Vrms.
The phase and frequency have no effect.

[1.7]     =   2 = 0.7071  :        

[1.8]     = 1  :         

[1.9]     = 0.577  :         

For any periodic square waves (symmetrical or not symmetrical) the RMS value can be calculated using the
following steps. This method will be referred to as the "modified area method" because it is a slight
modification of the area method that was used to find the average voltage. If you get confused on the order of
the steps, double checking the units can help catch mistakes.

Step 1)  Break up the periodic square wave into rectangular sections over 1 period and square the peak voltage
         of each. If the section is above the x-axis square the maximum voltage and if it is below the x-axis square
Step 2)  the minimum voltage. Call these values 1, 2, etc. The units are V2 (or A2if it is a current waveform).
Step 3)  Multiply each  value (found in Step 1) by the base of the rectangle (t) so that you get 1t1, 2t2, etc.
Step 4)  The units for each of these terms will be V2sec (or A2sec if it is a current waveform).
Step 5)  Sum the values from Step 2 to get Total. The units will be V2sec.
         Divide the value of Total (determined in Step 3) by the period (T). The units will now be V2.
         Take the square root of the result of Step 4. The units will now be V and this result is Vrms.

Make sure you only use the modified area method for periodic square waves.

     Triangle waves and all other periodic waveforms (except only symmetrical sinusoids and periodic
         square waves) must use the integration method (Equation 1.6) to determine the RMS value.

17
Section 1.4- Sine Wave, Square Wave, and Triangle Wave Example Problems

This section provides example calculations of Vpk, Vpp, Vavg, and Vrms for sine waves, square waves, and
triangle waves. To save time and reduce calculation errors the integration formulas (Equations 1.5 and 1.6)
should be avoided for situations where there is a simplified method. Table 1.1 shows the simplified methods
available for different types of AC waveforms.

Table 1.1) Table Showing Vpk and Vpp values and Simplified Methods for Determining Vavg and Vrms

      Waveforms that are symmetrical about x-axis     Waveforms that are NOT symmetrical

      Sine Wave Square Wave Triangle Wave Sine Wave Square Wave Triangle Wave

Vpp   Vpp is always the maximum voltage - the minimum voltage (i.e. Vmax-Vmin)
Vpk
Vavg                     Vpk is always the maximum voltage (i.e. Vmax)

Vrms                  0                               The DC offset     Area Method

       0.7071  Vpk       1.0  Vpk      0.577  Vpk     Use Integration    Modified   Use Integration
      Equation [1.7]  Equation [1.8]  Equation [1.9]  Equation [1.6]   Area Method  Equation [1.6]

Section 1.4.1 - Example Calculations of Vpp, Vpk, Vavg, and Vrms for Sine Waves

Example 1.3) Using Table 1.1 as guidance determine Vpp, Vpk, Vavg, Vrms, and Amplitude of a symmetrical sine
wave with the sinusoidal form equation v(t) = 6 sin (200 t)

     Vpp = max - (min) = 6 - (-6) = 12 V (measured to be 11.91 V with the Multisim oscilloscope and 11.9 V
         with the Multisim voltage probe). The true value is 12 V (which is twice the amplitude entered in XFG1).

     Vpk = max = 6V (measured as 5.958 V with the scope)
     Amplitude = A = Vpp/2 = 6V
     Vavg = 0V (as stated in Table 1.1 for any symmetrical sine wave). The probe measures it as 2.24 mV.
     Vrms = Vpk/sqrt(2) = 6/sqrt(2) = 4.24V (Table 1.1 says to use Equation 1.5 for symmetrical sine waves)

These values are verified below using the Multisim function generator, Multimeters, probes, and the scope.

Figure 1.14: Function generator (XFG1), Multimeters (XMM1 and XMM2), Scope (XSC1), and Probe (box)
18
Figure 1.15: Close up view of the AC Voltage Probe from Example 1.3
In the Multisim probe box from Example 1.3 (Figure 1.15) the Vpp, Vrms, Vavg, and the frequency are shown as
V(p-p) = 11.9V, V(rms) = 4.24 V, V(dc) = 2.24 mV, and V(freq)=31.8 Hz respectively. The actual peak to peak
voltage (Vpp) should have been 12V, but the Multisim probes will often have a slight error as it does in this case.
The Vavg (or V(dc)) should have been 0, but it reads 2.24 mV in the probe box. Again, this level of inaccuracy can
be expected. The top value that reads 1.67 V is called the "instantaneous voltage". For an AC signal this value
constantly changes. If you freeze the time in an AC circuit the problem can be treated as a DC problem and the
instantaneous voltage measured would be the DC voltage that would be used for that problem.

For example 1.3 the rms voltage probe and the two Multimeters all had the same result, but for the next
example that has a sine wave with a DC offset it will show the two Multimeters do not produce the correct
result. The DC offset cannot be accounted for with either of the Multisim Multimeter or the Agilent Multimeter
because they have "AC Coupling" on the input, which removes DC before the measurement is made. Therefore,
if you have a signal that is not symmetric only the voltage probe to can be used measure Vrms or Irms.

Example 1.4) Using Table 1.1 as guidance determine Ipp, Ipk, Iavg, Irms, and Amplitude of a non-symmetrical
sine wave with the sinusoidal form equation i(t) = 3 + 8 sin (120 t)

This sinusoidal current has a DC offset of 3V and is plotted in Figure 1.16.

                                                                              Ipp = max - (min) = 11 - (-5) = 16A
                                                                              Ipk = max = 11A
                                                                              Amplitude = A = Ipp/2 = 8A
                                                                              Iavg = (max + min)/2 = 3A (This is the

                                                                                  "DC offset" that Table 1.1 refers to
                                                                                  for any non-symmetrical sine wave).
                                                                              T = 2/ = 2/120 = 0.01667 sec

                                                                        Table 1.1 states that the integration method
                                                                        (Equation 1.6) must be used for non-
                                                                        symmetrical sine waves. This method is
                                                                        shown below.

 Figure 1.16: Non-symmetrical sine wave in Example 1.4

 =  1 0 ()2  =  1 0(3 + 8  (120 ))2 

 =  1 0.01667 00.01667[9 + 48  (120 ) + 64  (120 )2] = 6.4 A

19
The integration in Example 1.4 was solved using the online Wolfram Alpha Integration Widget. Multisim verifies
the results of Example 1.4 in Figure 1.17. Since the waveform was not symmetric only the probe box was used
for the verification. Also, since the function generator can only output voltage signals the voltage probe was
used. Anytime you want to know the Vpp, Vrms, and Vavg (or Ipp, Irms, and Iavg) values you can use this
method even if it is a current waveform. If it is a current waveform just replace the Volts units with Amps.

Figure 1.17: Multisim Verification of Values Calculated in Example 1.4. Note: Irms = 6.4Vrms/1 = 6.4A

Section 1.4.2 - Example Calculations of Vpp, Vpk, Vavg, and Vrms for Square Waves
The term "square wave" in this eBook will be used to define any signal that has a periodic series of rectangular
pulses. The most common square wave is one that has a period with one rectangular pulse above the x-axis
(high pulse) and one below the x-axis (low pulse) as shown in Example 1.5. An important parameter for square
waves with only one high and one low pulse per period is the duty cycle (DC), which is defined in Equation 1.10.

[1.10]  =                     Where: thigh is the time of the high pulse & tlow is the time of the low pulse.

                          + 

Example 1.5) Using Table 1.1 as guidance, determine Vpp, Vpk, Vavg, and
Vrms for the following symmetric 50% duty cycle square wave.

The cursors on the scope show the high time 50 ms and since the duty cycle is
50% the low time is also 50 ms. The period is equal to thigh + tlow

     T = 50 ms + 50 ms = 100 ms = 0.1 sec.
     Vpk = 3V (Max voltage on the plot)
     Vpp = max - min = 3 - (-3) = 6V
     Vavg = 0 (symmetrical square wave in Table 1.1)
Solve for Vrms using the modified area method
    1) Square peaks of each area: 1 = (3)2 = 9V2 2 = (-3)2 = 9V2
    2) 1t1 = 9V20.05s = 0.45 V2s 2t2 = 9V20.05s = 0.45 V2s
    3) Total modified area = 1t1 + 2t2 = 0.45 V2s + 0.45 V2s = 0.9 V2s
    4) 0.9 V2s/T = 0.9 V2s/0.1s = 9V2
    5) Vrms = sqrt(9 V2) = 3V
The calculations in Example 1.5 are verified in Figure 1.18. The Duty Cycle in the XFG only affects square waves.

20
Figure 1.18: Multisim Verification of Values Calculated in Example 1.5

Example 1.6) Using Table 1.1 as guidance, determine Vpp, Vpk, Vavg, and
Vrms for the following non-symmetric 50% duty cycle square wave that has
a DC offset of 2V.

 T = 50 ms + 50 ms = 100 ms = 0.1 sec.

 Vpk = 5V (Max voltage on the plot)

 Vpp = max - min = 5 - (-1) = 6V (Verified in Figure 1.19)

Solve for Vavg using the area method

1) AI = 5V0.05s = 0.25 Vs  AII = -1V0.05s = -0.05 Vs

2) ATotal = AI + AII = 0.25 Vs + -0.05 Vs = 0.2 Vs

3) Vavg = ATotal /T = 0.2 Vs / 0.1s = 2V (Verified in Figure 1.19)

Solve for Vrms using the modified area method

1) Square peaks: 1 = (5)2 = 25V2               2 = (-1)2 = 1V2

2) 1t1 = 25V20.05s = 1.25 V2s 2t2 = 1V20.05s = 0.05 V2s

3) Total Modified Area = 1t1 + 2t2 = 1.25 V2s + 0.05 V2s = 1.3 V2s

4) 1.3 V2s/T = 1.3 V2s/0.1s = 13V2

5) Vrms = sqrt(13V2) = 3.61V (Verified in Figure 1.19)

Figure 1.19: Multisim Verification of Values Calculated in Example 1.6
21
Example 1.7) Using Table 1.1 as guidance, determine Vpp, Vpk, Vavg, and
Vrms for the following non-symmetric 80% duty cycle square wave that has a
DC offset of -2 V.

 thigh is shown to be ~ 80ms on the scope plot.

 Solving for tlow using Equation 1.10 gives tlow = 20 ms

 T = 80 ms + 20 ms = 100 ms = 0.1 sec.

 Vpk = 3V (Max voltage on the plot)

 Vpp = max - min = 3 - (-7) = 10V (Verified in Figure 1.20)

Solve for Vavg using the area method

1) AI = 3V0.08s = 0.24 Vs  AII = -7V0.02s = -0.14 Vs

2) ATotal = AI + AII = 0.24 Vs + -0.14 Vs = 0.1 Vs

3) Vavg = ATotal /T = 0.1 Vs / 0.1s = 1V (Verified in Figure 1.20)

Solve for Vrms using the modified area method

1) Square peaks: 1 = (3)2 = 9V2                2 = (-7)2 = 49V2

2) 1t1 = 9V20.08s = 0.72 V2s 2t2 = 49V20.02s = 0.98 V2s

3) Total Modified Area = 1t1 + 2t2 = 0.72 V2s + 0.98 V2s = 1.7 V2s

4) 1.7 V2s/T = 1.7 V2s/0.1s = 17V2

5) Vrms = sqrt(17V2) = 4.12V (Verified in Figure 1.20)

Figure 1.20: Multisim Verification of Values Calculated in Example 1.6
Examples 1.5, 1.6, and 1.7 show realistic square waves that have one high pulse and one low pulse per period,
but you can also use these methods to determine the Vpp, Vpk, Vavg, and Vrms for a square wave that has
multiple high and low pulses (see Example 1.8). Unfortunately, Multisim cannot be used to verify answers when
there is more than one high and one low pulse.

22
Example 1.8) One cycle of a periodic square wave is shown in the figure below. Using Table 1.1 as guidance,
determine the Vpp, Vpk, Vavg, and Vrms values for this square wave.

Figure 1.21: One cycle of a periodic square wave in Example 1.8 (Left), Average Value shown in right plot.

     T = 20 sec. (From plot)

     Vpk = 5V (Max voltage on the plot)

     Vpp = max - min = 5 - (-2) = 7V

Solve for Vavg using the area method (labeling the areas from left to right in ascending order)

    1) AI = 3V3s = 9Vs AII = -2V4s = -8Vs AIII = 5V6s = 30Vs AIV = -1V7s = -7Vs

    2) ATotal = AI + AII + AIII + AIV = 9Vs - 8Vs + 30Vs - 7Vs = 24 Vs

    3) Vavg = ATotal /T = 24 Vs / 20 s = 1.2V (See the plot above-right with the red dashed line)

Solve for Vrms using the modified area method

    1) Square peaks: 1 = (3)2 = 9V2 2 = (-2)2 = 4V2                     3 = (5)2 = 25V2 4 = (-1)2 = 1V2

    2) 1t1 = 9V23s = 27V2s 2t2=4V24s=16V2s 3t3=25V26s=150V2s 4t4=1V27s=7V2s

    3) Total Modified Area = 1t1 + 2t2 + 3t3 + 4t4= 27 V2s + 16 V2s + 150 V2s + 7 V2s = 200 V2s

    4) 200 V2s/T = 200 V2s/20s = 10 V2

    5) Vrms = sqrt(10V2) = 3.16V

Section 1.4.3 - Example Calculations of Vpp, Vpk, Vavg, and Vrms for Triangle Waves

Triangle waves aren't nearly as common as sine waves and square waves, but they are present from time to
time in AC circuits. One example is when high frequency square wave pulses are transmitted in a circuit that
have such narrow pulses that the components can't handle the speed due to slew rate (v/t) limitations and
the square wave is converted to a waveform that looks more like a triangle. A saw tooth is another popular
triangular waveform that ramps upwards until it reaches its positive peak (just like a standard triangle wave) and
then drops instantaneously to its negative peak (like a standard square wave). The term "triangle wave" in this
eBook will be used to define any signal that has a periodic series of triangular pulses. The most common triangle
wave is one where each period has one triangular section above the x-axis and one below the x-axis with a slope
that has a constant magnitude, but alternates signs as shown in Example 1.9.

23
Example 1.9) Using Table 1.1 as guidance, determine Vpp, Vpk, Vavg, and Vrms for the following symmetric
triangle wave. Note: The Duty Cycle in the function generator settings below also has an effect on triangle waves.
If the Duty cycle is set to a minimum value of 1 then the triangle wave will look like a "saw tooth" wave that will
ramp up to its peak nearly instantaneously and drop down to its negative peak more slowly. The reverse will
happen if a Duty Cycle is set to the maximum value of 99. Stop and restart the simulation when making changes.

Figure 1.22: Multisim function generator settings and scope print for triangle wave in Example 1.9.

     T = 1/F = 1/10 = 0.1 sec.

     Vpk = 5V (Max voltage on the oscilloscope plot)

     Vpp = max - min = 5 - (-5) = 10V (Verified with Multisim voltage probe)

     Vavg = 0 (symmetrical square wave in Table 1.1) (Verified as ~ 0 V with Multisim voltage probe)

    For triangle waves the integration method (Equation 1.6) must be used for Vrms. There is no simplification.

     Each line needs to be broken up in separate functions over one period. The easiest way to do this is

    determine the slope (5/0.025 = 200) and break the waveform up into 2 sections.

     From t = 0 to T/2, v1(t) = 200t  and             From t = T/2 to T, v2(t) = -200t

 =  1 0 ()2  =  1 [-/4 /4 (200  )2 + /4 3/4(10 - 200  )2 ]
 =  10.1 {[13333.333  3]-0.00.20525 + [100   - 2000  2 + 13333.33  3]00..002755

24
 =  8.3333 = .   * The Multisim probe value was very close to this value (2.97 V).

Example 1.10) Using Table 1.1 as guidance, determine Vpp, Vpk, and Vavg for the following figure that shows
one cycle of a non-symmetric periodic triangle wave. Note: The Multisim function generator can't be used to
create a complicated waveform like this. Since calculating Vrms for triangle waves is arduous and not frequently
necessary this example will leave it out and only solve Vpk, Vpp, and Vavg.

Figure 1.23: Triangle wave for Example 1.10.
     T = 1 sec.
     Vpk = 0.75V (Max voltage)
     Vpp = max - min = 0.75 - (-4) = 4.75V

Solve for Vavg using the area method (labeling the areas from left to right of each right angle triangle in
ascending order). Assume the Y values shown in Figure 1.23 that are -.0004 and -.0005 are equal to zero.

    1) AI =  bh =  (0.25 - 0) sec  0.5V = 0.0625Vs
         AII =  bh =  (0.2778 - 0.25) sec  0.5V =  0.0278 sec  0.5V = 0.00695 Vs
         AIII=  bh =  (0.5 - 0.2778) sec  (- 4V) =  0.222 sec  (- 4V) = - 0.4444 Vs
         AIV =  bh =  (0.7105 - 0.5) sec  (- 4V) =  0.2105 sec  (- 4V) = - 0.421 Vs
         AV =  bh =  (0.75 - 0.7105) sec  0.75V =  0.0395 sec  0.75V = 0.014813 Vs
         AVI =  bh =  (1 - 0.75) sec  0.75V =  0.25 sec  0.75V = 0.09375 Vs

    2) ATotal =AI + AII + AIII + AIV + AV + AVI = 0.0625+0.00695-0.4444-0.421 + 0.014813 + 0.09375 = -0.6874Vs
    3) Vavg = ATotal /T = -0.6874 Vs / 1 s = -0.6874 V (See the plot above with the red dashed line shows this

         value looks like the midpoint between the positive and negative parts of the waveform.

25
Module 2 - AC Circuits Math Background

Module 1 described common types of AC sources. From this point on the focus will be solely on sinusoidal inputs
that were represented in Equation 1.1 in Section 1.2 as the following:

    Sinusoidal Form  v(t) = Asin(t + )

Module 2 will provide the math background needed to be able to solve RLC circuits with AC sources. The first
mathematical simplification is to represent the sinusoidal signal as a "phasor" that has a set amplitude and
phase. The "phasor form" of a sinusoid is the amplitude and phase represented in polar form.

    Phasor Form  V = A  

Capital letters are used for Phasor variables and lower case letters are used for sinusoidal form variables. Phasor
form is convenient because all signals in any RLC circuit will have the same frequency as the source (or input)
frequency. For example, the following figure shows an RC circuit and the input and output voltage signals.
Notice that the frequencies of vin and vout are the same, but both the amplitude and phase change.

Figure 2.1: Example showing how an RC circuit affects the amplitude and phase of a sinusoidal input.

    Cursor 2 (Blue)  Cursor 1 (Red)          * The Red waveform is the input waveform with a
                                             peak voltage of ~5V and a phase of 0. Phasor = 5  0

                                             * The Black waveform is the output that has an
                                             amplitude of ~3V and a 0.294 phase  3 0.294

                                             * The phase can be verified using the time cursors of
                                             the oscilloscope plot. The time difference between the
                                             two peaks is equal to ~ 2.436 ms. The value is negative
                                             because the peak of the output is to the left of the
                                             input. The time shift is measured to be: tS = - 2.436 ms

                                             * Eq. 1.3)  = -   tS = - (120 -2.436 ms) = + 0.292 

                                             This is very close to the actual phase shift of + 0.294.
                                             This slight difference comes from the inability to
                                             precisely measure the time shift on the scope.

Figure 2.2: Oscilloscope plot of Figure 2.1

26
Figure 2.2 shows how the phase shift and amplitude can be determined using Multisim, but there is some
measurement error due to the limited resolution of the scope plots. The frequency could also be found in the
scope plot by measuring the period and using the equation f = 1/T. It can be seen that the frequency stays the
same in Figure 2.2 since the output and input always have the same time shift between them. Therefore, the
phasor can be used to describe the signal, and the math required to determine the output phasor can be
accomplished using simple vector operations of the phasors instead of trigonometry. The frequency can be
removed from the calculations. Example 3.1 in Module 3 shows how to calculate the output phasor (3 0.294)
for the circuit in Figure 2.1, but before getting to that it will be beneficial for many students at this point to
review vector addition, subtraction, multiplication, and division for vectors in polar and rectangular form. If your
skills in this area are not solid then you will have a very difficult time solving the circuits in Module 3.

The vectors in this section will be used to represent currents, voltages, admittances, and impedances in Module
3. The impedance for capacitors and inductors are -90 and +90 out of phase respectively with resistors which
leads to the xy plot in Figure 2.3 where the y-axis represents the imaginary plane and the x-axis represents the
real plane. The two types of vector forms are rectangular and polar (Recall: Phasors are in polar form). An
example of a vector in quadrant 1 is shown in Figure 2.3 with the variables labeled that are used in rectangular
form (X + j Y) and polar form (A  ).

                        y axis (imaginary axis, j)                      2 ways to represent vector Z

     Quadrant II        Quadrant I                    Y                       Rectangular Form
              Vector Z                                                            Z = X + j Y
                         A                          x axis (real axis)
    Quadrant III                                                              Polar (or Phasor) Form
                                                                                  Z = A  
                            X
                                                                        Converting between the forms
                        Quadrant IV
                                                                        Rectangular  Polar Form
                                                                              A = (X2 + Y2)
                                                                               = atan (Y/X)

                                                                        Polar  Rectangular Form
                                                                              X = A  cos()
                                                                              Y = A  sin()

Figure 2.3: XY plot of vector Z (Note: Z is just the variable used for the vector. Any variable can be used).

In polar (or Phasor) form the angle, , is always taken with respect to the positive real x-axis such that a unit
length vectors lying on the positive or negative x or y axes can be represented as follows:

 Z1 = 10 lies on the positive (+) side of the x-axis and has a rectangular form as Z1 = 1+j0 or just Z1 = 1
 Z2 = 190 = 1/2 lies on the (+) side of the y-axis and has a rectangular form as Z2 = 0+j1 or Z2 = j
 Z3 = 1180 = 1 lies on the (-) side of the x-axis and has a rectangular form as Z3 = -1+j0 or Z3 = -1
 Z4 = 1270 = 1-/2 lies on the (-) side of the y-axis and has a rectangular form as Z4 = 0-j1 or Z4 = -j

Note: The angles for Z1 to Z4 were given in degrees and signified by a degree symbol, but when converting it to
radians no symbol is needed. It is always assumed the angle is in radians if there is no degree symbol. When
radians are used to list the angle it is preferred to put the radians value as a fraction of . Always represent a
phasor such that the angle is between -180 and +180 (or - and +). If the angle, , is greater than  then

27
subtract 2 until  is between - and +. Conversely, if  is less than - then add 2 until  is between - and
+.

Converting between rectangular and polar form is something that needs to be done frequently when solving AC
circuits because:

      When adding or subtracting vectors rectangular form is much easier.
      When multiplying or dividing vectors polar form is much easier.
When combining impedances or admittances or when using a KVL or KCL, vectors are added or subtracted so all
vectors should be converted to rectangular form. When using Ohm's law vectors are multiplied or divided so all
vectors are converted to polar form.

Converting from polar to rectangular form (as shown in Example 2.1) is straightforward, but converting from
rectangular to polar form (as shown in Example 2.2) is trickier due to the ambiguity of the angle. For example,
when Y and X have the same value the arc tangent (atan) of 1 is equal to 45, but this situation can occur in two
different situations: Quadrant I where X and Y are positive or Quadrant III where X and Y are negative. If the
vector was in quadrant I then  = +45, but if the vector was in quadrant III then  = -180 + 45 = -135. In order
to avoid mistakes when calculating  the "reference angle" (REF) should be found and then the quadrant should
be determined based on the signs of X and Y as shown below.
 REF = atan(|Y|/|X|) Note: Take the absolute value of Y and X so REF is always between 0 and 90.
Next, the reference angle can be used to find the actual angle by knowing what quadrant the vector is in.

   I. Quadrant I (X > 0, Y > 0):  = REF
  II. Quadrant II (X < 0, Y > 0):  = 180 - REF OR  - REF
 III. Quadrant III (X < 0, Y < 0):  = -180 + REF OR -  + REF
 IV. Quadrant IV (X > 0, Y < 0):  = - REF
Example 2.1) Convert the following vectors from polar to rectangular form.

Z1 = 1.414  3/4 Z2 = 1.6  /6 Z3 = 3  -/2 Z4 = 7  7

     Z1 = 1.414  3/4  Z1 = X + j Y = 1.414 cos(3/4) + j 1.414 sin (3/4) = -1 + j 1

     Z2 = 1.6  /6  Z2 = X + j Y = 1.6 cos(/6) + j 1.6 sin (/6) = 1.386 + j 0.8

     Z3 = 3  -/2  Z3 = X + j Y = 3 cos(-/2) + j 3 sin (-/2) = - j 3

     Z4 = 7  7  Z4 = X + j Y = 7 cos(7) + j 7 sin (7) = -7

Example 2.2) Convert the following vectors from rectangular to polar form.

Z1 = j 2 Z2 = - 1 + j Z3 = -3 - j 4 Z4 = (0,-1)

     Z1 = j 2 = 0 + j 2 = X + j Y

                o A = [02 + 22]  = 2
                o  lies on the positive y-axis so it is equal to 90 or /2

              o Z1 = 0 + j 2  Z1 = A = 2  /2
     Z2 = - 1 + j = X + j Y

                o A = [(-1)2 + 12]  = 1.414

              o REF = atan(|1|/|-1|) = /4
              o  =  - REF (Quadrant II) = 3/4
              o Z2 = -1 + j  Z2 = A = 1.4143/4

28
     Z3 = - 3 - j4 = X + j Y

              o A = [(-3)2 + (-4)2]  = 5

             o REF=atan(|-4|/|-3|)=53.13(  /180) =.295

              o =- + REF (Quadrant III) = -0.705

             o Z3 = 5-0.705
     Z4 = (0,-1)  This (X,Y) notation simply means X = 0, Y = -1 so Z4 = 0 - 1 j

              o A = [02 + (-1)2]  = 1
              o  is on the negative y-axis so it is equal to - /2

             o Z4 = 1-/2

After mastering the ability to convert vectors between rectangular and polar form it is time to add, subtract,
multiply, and divide vectors. When adding or subtracting vectors they should be put in rectangular form and the
real parts are added or subtracted and the imaginary parts are added or subtracted separately as shown in the
following example. Multiplying and dividing vectors is shown in Example 2.4.

Example 2.3) Practice adding and subtracting different combinations of vectors from Examples 2.1 and 2.2.

Z1 = j 2 Z2 = 1.6  /6    Z3 = -3 -j 4

     We will need to first convert Z2 to rectangular form: Z2 = 1.6  /6  Z2 = 1.386 + j 0.8
    Addition Method  (X1 + j Y1) + (X2 + j Y2) = (X1 + X2) + j (Y1 + Y2)

     Z1 + Z2 = (0 + j 2) + (1.386 + j 0.8) = (0 + 1.386) + j (2 +0.8) = 1.386 + j 2.8
     Z1 + Z3 = (0 + j2) + (-3 - j 4) = (0 + -3) + j (2 - 4) = -3 - j 2
     Z2 + Z3 = (1.386 + j 0.8) + (-3 - j 4) = (1.386 + -3) + j (0.8 - 4) = -1.614 - j 3.2

    Subtraction Method  (X1 + j Y1) - (X2 + j Y2) = (X1 - X2) + j (Y1 - Y2)

     Z1 - Z2 = (0 + j 2) - (1.386 + j 0.8) = (0 - 1.386) + j (2 - 0.8) = -1.386 + j 1.2
     Z1 - Z3 = (0 + j2) - (-3 - j 4) = (0 - -3) + j (2 - - 4) = 3 + j 6
     Z2 - Z3 = (1.386 + j 0.8) - (-3 - j 4) = (1.386 - -3) + j (0.8 - - 4) = 4.1386 + j 4.8

For addition problems, plotting the vectors can be very helpful in determining if the answer is correct. If you put the second
(Z2) vector on the tail of the first vector (Z1) the resultant vector (Z1 + Z2) is the vector from the origin (point 0,0) to the tail
of Z2. This is demonstrated in Figure 2.4.

                                                        j axis

          Vector Z2 projected
          on the tail of Z1

                         Vector Z1 + Z2 = 1.386 + j 2.8

    Vector Z1 = 0 + j 2

                                                    real axis

                         Vector Z2 = 1.386 + j 0.8

Figure 2.4: Visualization of the addition of two vectors.

The subtraction of vectors is also shown in Example 2.3, but addition of vectors is something that is far more
commonly done in AC circuit problems. Since the visualization method shown in Figure 2.4 makes catching math
mistakes very easy, it is highly recommended any time vector addition is performed. In fact, a common practice

29
in Module 3 will be to determine the total impedance by adding individual impedances and making an
impedance plot, which is a plot of all of the impedance vectors in a series circuit.

Example 2.4) Practice multiplying and dividing different combinations of vectors from Example 2.1 and 2.2.

Z1 = j 2 Z2 = 1.6  /6         Z3 = -3 -j 4

 We will need to first convert Z1 and Z3 to polar form: Z1 = j 2  Z1 = 2 /2, Z3 = -3 -j 4  Z3 = 5-0.705

Multiplication Method  [A1 1]  [A2 2] = (A1  A2)  (1 + 2)

 Z1  Z2 = [2/2]  [1.6  /6] = (2  1.6)  (/2 + /6) = 3.2(2/3)
 Z1  Z3 = [2/2]  [5-0.705] = (2  5)  (/2 + -0.705) = 10-0.205
 Z2  Z3 = [1.6  /6]  [5-0.705] = (1.6  5)  (/6 + -0.705) = 8-0.538

Division Method  [A1 1]  [A2 2] = (A1/A2)  (1 - 2)

 Z1  Z2 = [2/2]  [1.6  /6] = (2 / 1.6)  (/2 - /6) = 1.25(/3)
 Z1  Z3 = [2/2]  [5-0.705] = (2 / 5)  (/2 - -0.705) = 0.41.205 = 0.4-0.795

           Note: 1.205 is >  so to get the final angle between - and  we had to subtract 2 .
 Z2  Z3 = [1.6  /6]  [5-0.705] = (1.6 / 5)  (/6 - -0.705) = 0.320.8717

Multiplication and division of vectors will be done when Ohm's Law is used in AC circuits. Addition, multiplication, and
division will all be used when you combine two impedances in parallel  ZTotal = (Z1  Z2)/(Z1 + Z2)

Before ending the discussion on sinusoidal form and how it is represented by a phasor, the concept of the "rotating phasor"
is shown in Figure 2.5. This is a good way to see the connection between the phasor (A  ) and the sinusoid it represents,
A sin (t + ). When time equals zero, sin t is also equal to zero and the phasor is located at A   as shown in Figure 2.5.

                                                        j axis

After the phasor rotates for
t seconds at an angular
frequency of  radians per
second the phase angle
changes by  = t.

                                                                                                real axis
                                                   Initial phasor = A  , This comes
                                                   from the sinusoid A sin(t + )

Figure 2.5: Rotating Phasor Visualization.

The phasor (or the vector A  ) can be thought of as being rotated by an angular velocity of  radians per second. The
time variable t in the term sin t can be represented by the variable t because the initial time is zero for the rotating
phasor concept. The amplitude (A) of the phasor will not change as it rotates, but the phase () will change so that the new
phase angle is equal to the initial phase and the product of  and t.

Example 2.5) If v(t) = 5 sin (90t - 0.2), where is the phasor located at after 21.32 ms?

      Initially the phasor is located at 5-0.2
      The amount of phase change is   = t = 90 rad/sec (0.02132 sec) = 1.9188 radians = 0.61
      The final phase angle is equal to   = -0.2 + 0.61 = 0.41
      The new location of the phasor is equal to  50.41

     The connection between the phasor and the original sinusoidal function v(t) is as follows:

     If you put in 21.32 ms into the v(t) equation you get  5 sin(900.02132 - 0.2) = 4.8
     50.41 was the value of the final phasor and 5 sin(0.41) = 4.8

30
Example 2.6) If v(t) = 12 sin (1200t + 0.8), where is the phasor located at after 3.892 seconds? Make sure the
final phasor location is listed as a value between - and + so it can be easily visualized on the real, imaginary
(x,y) axis. ALWAYS put phase values between - and + (or -180 and + 180).

      Initially the phasor is located at 12+0.8
      The amount of phase change is   = t = 1200 rad/sec (3.892 sec) = 4670.4 radians = 1486.6345
      The final phase angle is equal to   = +0.8 + 1486.6345 = 1487.4345  This is >  so subtract multiples of 2
      If 2 is continually subtracted from 1487.4345 until  is between - and  the value is equal to is at the same

          location as 0.19. This can be found by subtracting 2 until  is between - and  you get -0.5655
      The new location of the phasor is equal to  12-0.5655
     The following is only done to verify the result:

     If you put in 3.892 s into the v(t) equation you get  12 sin(12003.892 + 0.8) = -11.74678
     50.41 was the value of the final phasor and 12 sin(-0.5655) = -11.74678

           ALWAYS put phase values between - and + (or -180 and + 180)

31
Module 3 - RLC Circuit Analysis with AC Sources

Module 3 is broken up into the following 5 sections.

     Section 3.1 - Introduction of Impedance and Admittance and the Laplace Transform
     Section 3.2 - Series RLC Circuits
     Section 3.3 - Parallel RLC Circuits
     Section 3.4 - AC Power Calculations
     Section 3.5 - AC Maximum Power Transfer

Section 3.1 - Introduction of Impedance and Admittance and the Laplace Transform

Before solving RLC circuits with AC sources there is some terminology that needs to be discussed. First of all this
eBook focuses only on RLC circuits with AC sources. For brevity, these types of circuits will be referred to as "AC
Circuits". For DC circuits at steady state, resistors were the only components used in calculations because all
capacitors in the circuit were replaced with open circuits and all inductors in the circuit were replaced with
short circuits. For AC circuits at steady state the capacitors/inductors no longer can be replaced with open/short
circuits, but instead are included in the calculations. The remainder of this module will look only at AC circuits at
steady state. Transient analysis of AC circuits is accomplished by using Laplace Transform solving techniques.
Some Laplace Transform examples are shown in the Appendix.

The impedance, Z, is shown for resistors, capacitors, and inductors in the left side of Table 3.1 in both
rectangular and polar (Phasor) form. The magnitude of the impedance is called the reactance, X. For AC circuits
in series the impedance of the components can be added together to get the total impedance, just like the
resistors where added together to get the total resistance in DC circuits. For networks of components in parallel
and series the math for combining them because very time consuming since for each combination a complex
algebra problem must be performed. For this reason only series (section 3.2) and parallel (section 3.3) AC
circuits will be discussed in this eBook. However, the same rules for combining resistors are used for combining
impedances as shown in the DC and AC equation comparison below:

     Equations Used in DC Circuits                               Equations Used in AC Circuits

    - N Resistors in series: R = 1 + 2 +                         - R, L, and Cs in series: Z = 1 + 2 +  
    -2 Resistors in parallel:  = 1  2 1+2                        - 2 Impedances in parallel:  = 1 2 1+2
    -N Resistors in parallel:  = 1 1 1 1                         - R, L, and Cs in parallel:  = 1 1 1 1

                                                        1 +2 +                                                        1 +2 + 

    -Conductance:  = 1                                           - Admittance:  = 1

                                                                                                 

    -N Resistors in parallel:  = 1 + 2 +                         - R, L, and Cs in parallel:  = 1 + 2 +  
    - Ohm's Law: V =      =  =                                   - Ohm's Law: V =      =  =   

                                                                                                                       

32
Table 3.1) Impedance, Reactance, Admittance, and Susceptance for Resistors, Capacitors, and Inductors

Section 3.2 - Series RLC Circuits

For DC circuits with series resistors all of the resistors are added to determine the total resistance. Then the
current in the loop is calculated from Ohm's Law (I = Vs/Rtot). For AC circuits the same process is followed
except resistance is changed to impedance and each of the variables is a phasor instead of a scalar. The next
three examples show the process.
Example 3.1) Verify the output (Vout) for the circuit in Figure 3.1 by finding the total impedance and using Ohm's
Law. Go to Figure 3.2 to see the oscilloscope plot of the waveforms

Figure 3.1: Solving for the output in phasor and sinusoidal form for Example 3.1.
For this example the voltage across the capacitor could also be solved for by using Ohm's Law.

     VC = I  ZC = I  XC-90 = I  (C)-1-90 = (3.0153) [(2e-6)(260)]-1-90) = 4-37 = 4-0.20556
     vC(t) = 4 sin (120  t - 0.20556)
Example 3.1 shows the process of solving series AC circuits, but one thing that isn't addressed is the leading and
lagging aspects that were discussed in Section 1.2.
Recall: A waveform is leading another waveform if it completes its sinusoidal cycle first. Mathematically, a
waveform leads another waveform if it has a larger phase. Since the phase of Vout ( = 53) is greater than Vin (
= 0) in Example 3.1 Vout is leading.

33
    Vout is leading  Vin is lagging

Figure 3.2: Scope plot of the circuit in Example 3.1

The leading waveform will be the one with the largest phase, but there is a pneumonic called "ELI the ICE man"
that can be used to determine which waveform is leading or lagging without calculating the phase.

      ELI the ICE man

The L and the C stand for inductor and capacitor, respectively (I will frequently use Blue font for inductors and
red font for capacitors). If the circuit is a series RL circuit it is an ELI circuit and if it is a series RC circuit it is an
ICE circuit. If the circuit is a series RLC circuit, then the quadrant of the total impedance will determine whether
it is an ELI or ICE circuit. If Ztotal is in quadrant I it is an ELI circuit and if it is in quadrant IV it is an ICE circuit. The
"E" stands for the potential, which is the input voltage. The "I" stands for the current in the single loop AC
circuit. Since the current and voltage across a resistor are always in phase with each other in a series AC circuit
then the current (I) can also be used to represent the voltage across a resistor for lead/lag determination. If "E"
is written to the left of "I" (i.e. ELI) then "E" (or Vin) is "first" and leads "I" (the current or voltage across the
resistor). The opposite is true for ICE circuits. In summary:

     ELI - Any RL circuit or an RLC series AC circuit with a total impedance in quadrant I.
     The input voltage (Vin) leads the current (I) or the voltage across any resistor (VR) in an ELI circuit.
     ICE - Any RC circuit or an RLC series AC circuit with a total impedance in quadrant IV.
     The input voltage (Vin) lags the current (I) or the voltage across any resistor (VR) in an ICE circuit.

34
Current Clamp

               ICE Circuit so    ICE Circuit so
               I is leading Vin  Vin is lagging I

Figure 3.3: Input Voltage a Current scope plot of circuit in Example 3.1.

For the circuit in example 3.1 the input voltage and current are plotted in Figure 3.3. The current can be plotted
on a scope using the current clamp as shown in Figure 3.3. The current clamp conversion is shown in this
example to be 1 mV/mA so the peak current reading of the red current waveform is 3.007 mV, which equates to
3.007 mA. The next example is an RLC cirucit. Notice how in the calculations in Figure 3.4 that the current and
VR both have a phase angle of -18.5. This means they are "in phase" with each other.

Example 3.2) Solve the circuit in Figure 3.4 for VR1 and verify it with the Multisim oscilloscope.

                                                                                                    ELI Circuit so I and
                                                                                                    VR are lagging Vin

                                 ELI Circuit so Vin
                                 is leading I and VR

Figure 3.4: Circuit and Scope plot for Example 3.2. Vin is the Red sinusoid and VR is the black sinusoid.
35
The calculations for Example 3.2 are shown in Figure 3.4. The following link can be used to verify the total
impedance calculation in a RLC circuit: http://hyperphysics.phy-astr.gsu.edu/hbase/electric/powerac.html
The phase of VR1 that was calculated using the time shift measurement from the scope is equal to -18.46 and
the value was calculated as -18.5. Vin_pk should be equal to 1 V, but is measured as 980.634 mV and VR1_pk
should be equal to 948 mV, but it is measured as 938.284 mV in Multisim. The small errors of the time shift and
peak voltage measurements are expected due to limited resolution of the Multisim oscilloscope.
Note: If the minus sign of the Multisim oscilloscope is left disconnected then it is automatically assumed to be
ground. Therefore, only the + side of channel A is connected in Figure 3.4. If you want to take a scope
measurement across a component that is not connected to ground (i.e. vR in Figure 3.4) then you connect the
two sides of the component to the + and - side of the scope channel. Most oscilloscopes in the real world
require that the minus sign (or black clip) be connected to ground. For example, Figure 3.6 shows a sinusoid that
is connected to channel 1 of a Rigol DS1074 oscilloscope. This scope has 4 channels. Each channel has a probe
that has a black clip that can only be connected to ground as shown in Figure 3.5. If you want to take a
measurement across a component that is NOT connected to ground (i.e. differential measurement) then you
have to connect 2 different probes to the two sides of the component and use the Math subtraction function to
determine the voltage across the component.

Figure 3.5: Rigol Oscilloscope Probe: http://www.prc68.com/I/RigolDS1052E.shtml

36
Figure 3.6: Photo of Rigol DS1074 Oscilloscope with a 10Vp-p sine wave at 1 kHz.
Example 3.3) Solve the circuit in Example 3.2 for the voltage across the inductor and verify it in Multisim.

Figure 3.7: Circuit and Scope plot for Example 3.3. Vin is the Red sinusoid and VL is the blue sinusoid.
Calculation and simulation results comparison for Example 3.3

     VL = 0.317671.5 (Calculated), VL Phase Measurement from scope = 71.38
     VL Amplitude Measurement: VL = VPP/2 = 637mV/2 = 0.3185 V (Probe) or 0.317371 V (Scope)
     Notice that VL leads Vin in the scope plot, but this cannot be determined from the ELI the ICE man

         pneumonic that only relates Vin and I (or VR). VL has larger phase that Vin so it leads Vin.
37
The last series AC circuit example will be a RLC circuit. For this example the impedance plot will be drawn to help
determine the phasor of the total impedance that will result when all impedances are added. Even though only
one resistor, one capacitor, and one inductor are in this circuit there could be multiple components in series and
the same process of summing all impedances would still be performed in the same way it is done in Example 3.4.

Example 3.4) Solve for the total impedance phasor (ZT) in the circuit in Figure 3.8 when L = 0.2 H and when L = 1.8
H.

               R  L
             500
                                                       Vin_pk = 120 Vin_rms  2 = 169.7 V

                                                       Vin = 169.70

    Vin                                             C  Ztot = R + j L - j/(C)

    120Vrms                                         10킚 Ztot =500 + j (L120) - j/(10e-6  120)
    60Hz
    0                                                 Ztot =500 - j 189.86 = 534.8 -20.8 (L = 0.2 H)

                                                       Ztot =500 + j 413.33 = 648.7 39.6 (L = 1.8 H)

Figure 3.8: Circuit for Example3.4

The phasors for the total impedance (Ztot) for each of the two cases (L = 0.2 H and L = 1.8 H) are calculated in
textbox in Figure 3.8. An impedance plot is performed in Figure 3.9 to help verify the total impedance was
calculated correctly.

     Case 1 where L = 0.2 H results in Ztot in quadrant IV, which means it is an ICE circuit and Vin lags the
         current and the voltage across the resistor.

     Case 2 where L = 1.8 H results in Ztot in quadrant I, which means it is an ELI circuit and Vin leads the
         current and the voltage across the resistor.

    j axis                                             j axis ELI Circuit - ZTotal in Quadrant I

    ICE Circuit - ZTotal in Quadrant IV                ZL = 0 + j 678.9  ZC and ZL
                                                                         Projected
                 ZL = 0 + j 75.4                                         For addition

                      ZR = 500 + j 0                             ZTotal = 500 + j 413.3 = 648.739.6
                                                                                              real axis
                                        real axis
                                      ZC and ZL                      ZR = 500 + j 0
                                      Projected
                                      For addition     ZC = 0 - j 265.3

         ZTotal = 500 - j 189.9 = 534.8-20.8
    ZC = 0 - j 265.3

Figure 3.9: Impedance Plots for Example3.4. Case 1: L = 0.2 H (Left Plot), Case 2: L = 1.8 H (Right Plot)

38
Example 3.5) Solve for the loop current and VR for each of the two cases in Example 3.4 (L = 0.2 H and L = 1.8 H)
and represent them in phasor form and sinusoidal form. Verify the loop current results with Multisim.

First, the current will be calculated using Ohm's Law and the Multisim values will be measured on the scope.

* Case 1: L = 0.2 H, ZTotal = 534.8 -20.8 (see Fig. 3.9)  * Case 2: L = 1.8 H, ZTotal = 648.7 39.6 (see Fig. 3.9)
*  = 169.70 = 0.3173  20.80 = 0.3173  0.116               *  = 169.70 = 0.2616  - 39.60 = 0.2616  - 0.22

          534.8-20.8                                                648.739.6

*  =    = (0.3173  0.116)  500 = 158.7  0.116             *  =    = (0.2616  - 0.22)  500 = 130.8  - 0.22

* VR (Multisim Probe) = 113 Vrms * 2 = 159.8 V            * VR (Multisim Probe) = 91.4 Vrms * 2 = 129.6 V

* i(t) = 0.3173 sin(120  t + 0.116 )                      * i(t) = 0.2616 sin(120  t - 0.22 )

* vR(t) = 158.7 sin(120  t + 0.116 )                      * vR(t) = 130.8 sin(120  t - 0.22 )

* Multisim Current Verification for Case 1 and Case 2 current calculations (See Figure 3.10 below).

* Multisim Amplitude, A = 312 mV                          * Multisim Amplitude, A = 257 mV

* Multisim Time Shift, tS = -0.94 ms                      * Multisim Time Shift, tS = 1.833 ms

* Phase Shift,  = - ts = xyz 120 = 20.3                   * Multisim Phase Shift,  = - ts  = -39.7

Zt = -20.8 (in QIV)  ICE                                               Zt = +39.6 (in QI)  ELI
Current (and VR) Leads Vin                                             Current (and VR) Lags Vin

                                                Note: These current probe
                                                measurements in Channel B are in
                                                mA, but the scope labels them as mV.

Figure 3.10: Current (Pink) and Vin (Black) Plots for Case 1: L = 0.2 H (Left) and Case 2: L = 1.8 H (Right)
39
Example 3.6) Solve for the inductor and capacitor voltage for the two cases in Example 3.4. Case 1: L = 0.2 H and
Case 2: L = 1.8 H. Represent voltages in phasor form and sinusoidal form. Verify the Case 1 values in Multisim.

VL (peak voltage) will be solved two different ways: 1) Ohm's Law and 2) Voltage Divider Rule (VDR).

* Case 1: ZTotal = 534.8 -20.8 and I = 0.3173 20.8      * Case 2: ZTotal = 648.7 39.6 and I = 0.2616 -39.6

*  =    = (0.3173  20.80)  0.2   90 = .   .  *  =    = (.   - . )  .     = .   . 

* ()  =     = 120   2  0.2 90 534.8-20.8 = 23.9  110.8  *()  =     =     .  .. = .   . 

* vL(t) = 23.9 sin(120  t + 0.616 ) Note: 0.616  = 110.8 * vL(t) = 177.5 sin(120  t + 0.28 ) Note: 0.28  = 50.4

* Multisim Case 1: VL = 23.8 V (scope), VL = 17.2 Vrms  2 = 24.3 V (probe), tS = -5.128ms,  = - ts = 110.8
*  =    = (0.3173  20.80)  (10-16)    - 900 = .   - .  *  =    = (.   - . )  -  -  = 69.4 129.6

* vC(t) = 84.2 sin(120  t - 0.384 ) Note: -0.384  = -69.2 * vC(t) = 69.4 sin(120  t + 0.72 ) Note: 0.72  = 129.6

* Multisim Case 1: VC = 81.7 V (scope), VC = 58.9 Vrms  2 = 83.3 V (probe), tS = 3.205ms,  = - ts = -69.2

Power Supplied and                                      Vin LEADS VC because
Power Factor are                                        Vin > VC (0 > -69.2)
discussed in section

VL LEADS Vin because
VL > Vin (110.8> 0)

Figure 3.11: Case 1 in Example 3.6, Vin (Black) & VL(Blue) (Left Plot), Vin (Black) & VC(Red) (Right Plot)
40
The process involved in solving RLC series circuits is summarized in Table 3.2.
Table 3.2) Summary of the process used to solve for all parameters in a series RLC circuit.

 Process for solving RLC Series Circuits
 1) Add all impedances to get the total impedance (Ztotal)
 * The magnitude of the inductor's impedance is the Inductive Reactance (XL)
 * The magnitude of the capacitor's impedance is the Capacitive Reactance (XC)
 2) Convert to Phasor form: Input voltage = Vin_pk and Total Impedance = AZtZt
 * If Zt > 0 it is an ELI circuit and Vin LEADS I and VR
 * If Zt < 0 it is an ICE circuit and Vin LAGS I and VR
 3) Calculate the Current using I = Vin/Ztotal
 4) Find voltage phasors using Ohm's Law: VR = IR, VL = IZL, VC = IZC
 * When comparing 2 signals, the one with the largest phase LEADS.
 5) Write the series circuit's loop current and all voltages in sinusoidal form: Asin (t + )

Section 3.3 - Parallel RLC Circuits

In this section a slight modification of the process in Table 3.2 is used to solve parallel RLC circuits.

Table 3.3) Summary of the process used to solve for all parameters in a parallel RLC circuit.
 Process for solving RLC Parallel Circuits
 1) Add all admittances to get the total admittance (Ytotal)
 * The magnitude of the inductor's admittance is the Inductive Susceptance (BL)
 * The magnitude of the capacitor's admittance is the Capacitive Susceptance (BC)
 2) Convert to Phasor form: Input voltage = Vin_pk and Total Admittance = AYtYt
 3) Convert Ytotal to Ztotal using the following equation: Y = 1/Z
 * ELI the ICE man is only used for series circuits, but if Zt > 0 then Vin LEADS the source current
 4) Calculate the source current using IS = Vin/Ztotal or skip step 3) and use IS = Vin  Ytotal
 5) Find currents through each component using Ohm's Law: IR = Vin/R, IL = VinYL, IC = VinYC
 * Note: From KVL you know that Vin = VR = VL = VC
 6) Write the currents and voltages in sinusoidal form: Asin (t + )

Before doing an example of solving an AC parallel RLC circuit the following figure shows a comparison from
series and parallel resistor circuits. Notice how the current is the same through all components in the series
circuit and the voltage is the same across all components in the parallel circuit.

Figure 3.12: Series (Left) and Parallel (Right) circuit comparison with AC input voltage and only resistors.

41
Figure 3.12 shows two different types of Multisim AC sources. The series circuit has a Multisim source called
"AC_Power" and the voltage is in RMS. The parallel circuit has the Multisim source called "AC_Voltage" and the
voltage is in peak voltage. The phasor voltage for the parallel circuit is Vin = 169.70. Since Vin is in peak voltage
it is in the form required for phasor form. Since the units are Volts no units are listed after the phasor (Volts
assumed if not units). The source in the series circuit is in RMS so it must be converted to peak before writing in
phasor form: Vin_pk = 120 Vin_rms  2 = 169.7 V  Vin = 169.70. However, it is acceptable nomenclature to write
the phasor amplitude in RMS if the units are included (i.e. Vin = 1200 Vrms).

Example 3.7) Solve for the following parallel RLC circuit and verify values in Multisim.

    Figure 3.13: Circuit for Example 3.7           Steps 1 to 3 of Table 3.3
                                                   YR = G = 1/R = 1/2 = 0.5 
                                                   BC = C= 250e-6  600 = 0.471239 
                                                   YC = j BC = j 0.471239  = 0.47123990
                                                   BL = 1/L= 1/(0.004 600) = 0.132629 
                                                   YL = -j BL = - j 0.132629  = 0.132629-90
                                                   YTot = YR + YC + YL = 0.5 + j 0.33861 
                                                   YTot = 0.603868  34.10663
                                                   ZTot = 1/ YTot =(10)/(.60386834.10663)
                                                   ZTot = 1.655991-34.1066

Steps 4 to 6 of Table 3.3 (Multisim Peak Values listed in Red Font and RMS values listed in Blue Font)
 Since the total impedance has an angle less than 0 the source current, IS, will lead the input voltage.
 Vin = VR = VL = VC = 120 (Phasor Form) Vin(t) = vR(t)= vL(t) = vC(t) = 12sin(600 + 0) (Sinusoidal Form)

I_source = IS = Vin/ZTotal = (120)/(1.655991-34.1066)=7.246434.1066 Multisim: IS =14.5/2 = 7.25A
iS(t) =7.2464sin(600 + 34.1066) IS,RMS = 7.2464/2 = 5.1 ARMS Multisim: 5.4 ARMS (Off due to DC offset)

 IR = Vin/R = (120)/(20) = 60 Multisim: IR = 11.9 Ap-p /2 = 5.95 A (Close to calculated)
 IR(t) =6sin(600 + 0) IR,RMS = 6/2 = 4.24 ARMS Multisim: 4.24 ARMS (Correct since no DC offset is added)

IL = VinYL = (120)(0.132629-90) = 1.59-90 Multisim: IL = 3.12 Ap-p/2 = 1.56 A (Close to calculated)
IL(t) =1.59sin(600 - 90) IL,RMS = 1.59/2 = 1.13 ARMS Multisim: 1.93 ARMS (WAY Off due to DC offset)

 IC = VinYC = (120)(0.47123990) = 5.6590 Multisim: IR = 11.4 Ap-p /2 = 5.7 A (Close to calculated)
 IC(t) =5.65sin(600 + 90) IC,RMS = 5.65/2 = 4 ARMS Multisim: 4.05 ARMS (Close: no DC offset is added)

The reason the RMS IS and IL don't match the calculations is due to the DC offset that is wrongly included in
the simulation as shown in Figure 3.14 (this link gives more info). Here are some options to avoid this error.

  1) Measure only the peak to peak probe current in Multisim and convert it to RMS  IRMS = Ip-p/(22)
  2) Calculate IS and use a current source instead of a voltage source. There is no DC offset in Figure 3.14.
  3) Double click on the inductor and enter a DC initial condition value to negate what Multisim adds in.

    DC offset wrongly         Wrong, IL_DC should  Simulation with Current Source input
    added to IS due to IL_DC  be close to zero     gives correct value  IL_DC is close to 0

Figure 3.14: Parallel circuit in Example 3.7 with AC Voltage source (Left) and AC Current Source (Right).

42
All of the voltages and currents have been calculated above and the magnitudes were verified in Multisim. To
verify the phase the oscilloscope is needed. To remove the DC offset of the inductor, method 3 described in
Figure 3.14 will be used. Figure 3.15 shows the dialog that comes up when you double click on the inductor.
Since the DC offset was measured to be 1.57A, a value of -1.57A is entered into the initial condition box to
correct for the DC offset. Figure 3.16 (Left) shows the plot of Vin and IS for the initial circuit without modifying
the initial condition of the inductor. Due the DC offset the peak value of IS is measured to be 8.738 A which is
about 1.5 A higher than the calculated value of IS_pk (7.2464 A). In the right plot of Figure 3.16 the initial
condition of the inductor is included and the DC offset is removed from both IL and IS.

Figure 3.15: Inductor dialogue box to enter the DC offset as the initial condition.

Figure 3.16: Parallel RLC circuit from Example 3.7 - Phase Verification in Multisim.
43
The time shift, tS, in Figure 3.16 is measured to be - 0.324786 ms (tS is negative because its sinusoidal cycle starts
before Vin). The phase of IS is calculated below and matches the calculated value (34.1) fairly closely.

      = - tS   = - (- 0.000324786 sec)  (300  2 radians /sec) = 0.6122 radians  35
     Even though the ELI the ICE man pneumonic doesn't apply to parallel circuits it DOES apply once the

         total impedance is determined and you want to compare the source current to the input voltage. In this
         example IS LEADS Vin (ICE) because the total impedance phase angle is in quadrant IV (-34.1). This is
         verified in Figure 3.16.
Figure 3.17 shows the capacitor current and Vin (Left) and the inductor current and Vin (Right). Recall that the
phase shift is positive if the time shift is negative (or shifted left) and vice versa.
     Both plots below show the time difference between peaks is 0.8333 ms. Multiplying the magnitude of
         the time shift by the angular frequency of Vin (600) results in /2 (or 90).
     It can be clearly seen that IC has a +90 phase shift since it is shifted  period to the left of Vin.
     The peak current of IC is measured to be 5.649 A. This is very close to the calculated value of 5.65 A.
     It can be clearly seen that IL has a -90 phase shift since it is shifted  period to the right of Vin.
     The peak current of IL is measured to be 1.549 A. This is very close to the calculated value of 1.59 A.

Figure 3.17: Example 3.7 verification: Left: IC (Red) and Vin (Black) plots, Right: IL (Blue) and Vin (Black) plots

Section 3.4 - AC Power Calculations

In section 1.3.3 the RMS voltage was found to be an important quantity in AC circuits because it allows the AC
power delivered to a load to be equated to the DC power. Vrms can be defined as the magnitude of AC voltage
that produces the same amount of average power on a load as an equivalent DC voltage, as shown in Figure
1.13. As previously discussed, if an AC circuit is frozen at a specific time the current and voltage at that time is
simply a DC value that is referred to as "instantaneous". Example 3.8 below shows the series circuit used in
Figure 3.12 with power probes included. The instantaneous voltage (Vinst) and current (Iinst) can be multiplied
44
together to get the instantaneous power (Pinst) as shown in Equation 3.1. Since Pinst constantly changes and only
applies to a specific instant of time it is not frequently used for AC power. Instead, the average power (shown in
Equation 3.2) is the primary type of power used for circuits with AC sources. The average power is can be
determined by Equation 3.2 or it can be determined by finding the average instantaneous power over 1 period
(see Table 3.4 and Figure 3.20 for an example).

[3.1]  =    (This is the same as freezing the circuit and treating values as DC)
[3.2]  =  =      (P or Pavg is called Real Power. The units are Watts)

[3.3]  =   = cos  (Zt is the total impedance phase angle)

Note: If Zt > 0 (ELI) the power factor (PF) is said to be "Lagging." If Zt < 0 (ICE) the PF is "Leading."

[3.4]  =    (S is called Apparent Power. The units are VA)
[3.5]  =     sin  (Q is also called Reactive Power. The units are VAR)

P, S, and Q make up what is referred to as the Power Triangle. This "triangle" (or vector in phasor
form) has the same angle as the total impedance, but the amplitude is equal to S (or VRMS  IRMS).
Resistors only have real power (P). Capacitors and inductors only have reactive power (Q). The
apparent power (S) is thought of as the total power that is possible for the ideal case where Q = 0.
Example 3.8) Calculate the instantaneous and average power magnitudes for each component and source in the
circuit below and show that the magnitude of the power supplied is equal to the power dissipated.

                                                             The probes in Multisim DO NOT stay in sync for
                                                             instantaneous measurements. For example:
                                                             V_R3 is shown to be -86.5 V, which is NOT equal
                                                             to (IR3)  (-1.23 A  50 ). An X is placed next to
                                                             instantaneous measurements. These Multisim
                                                             probe values should not be used for AC circuits.

Figure 3.18: Circuit for Example 3.8
Since there are only resistors in this circuit Zt = 0 and the power factor = 1 so Q = 0 and S = P = VRMSIRMS. The
Multisim power probes show instantaneous power (P) and average power (P(avg)). The magnitude of the
45
instantaneous power supplied will constantly change between 0 and Vin_pk  Iin_pk, but the average (or real) power
supplied will remain constant at a value of VRMS  IRMS. The magnitude of the supply power is equal to the
dissipated power for both Pinst and Pavg as shown below. Recall, the sign of supplied power is always set as a
negative. For instantaneous power there are infinite solutions depending on when the circuit is paused (or
frozen in time). Since the instantaneous measurements in Multisim aren't in sync (i.e. not associated with the
same moment in time) they will not be displayed in future circuits. They were only displayed in this example to
point out this limitation in Multisim and to make sure you don't use them in any calculations.

Instantaneous power calculations: (This is the same process used in DC circuits): At the moment the Multisim
simulation is paused the voltage source has a voltage of -98.2 V. The following calculations show that the
magnitude of the power supplied is equal to the power dissipated at this moment in time. The calculated values
won't match the Multisim values because the instantaneous probe values are not in sync.

     RTotal = 10  + 20  + 50  = 80 , Current: Iinst = Vinst/RTotal = -98.2 V / 80  = 1.2275 A
     Psupplied = Vinst  Iinst = (-98.2 V)  (1.2275A) = 120.5 W (power is always listed as positive in this eBook)
     P10 = (1.2275A)2(10 )= 15.07 W, P20 = (1.2275A)2(20 )= 30.14 W, P50 = (1.2275A)2(50 )= 75.33 W
     Pdissipate = P10 + P20 + P50 = 15.07 W + 30.14 W + 75.33 W = 120.5 W = Psupplied

Average power calculations: This is the same process as before, but the current and voltage instantaneous
values are replaced with RMS values. Each value is calculated below and the Multisim measurement is included
in blue font and shown next to the calculated value to be used as verification. For the voltage across the
resistors I2R was used previously and IV is used below. Another option that can be used is V2/R.

     RTotal = 10  + 20  + 50  = 80 , Current: IRMS = Vin-RMS/RTotal = 120 V / 80  = 1.5A Multisim (1.5A)
     Psupplied = Vin_RMSIRMS =(120 V)(1.5 A)= 180 W (180 W)  Always use the P=VI equation for sources.
     V10 = (1.5 A)(10 )= 15V (15V), V20 = (1.5 A)(20 )= 30 V (30V), V50 = (1.5 A)(50 )= 75 V (75V)
     P10=(1.5A)(15V)=22.5 W (22.5W),P20=(1.5A)(30V)=45 W (45W), P50=(1.5A)(75V)=112.5W (113W)
     Pdissipate = P10 + P20 P50 = 22.5 W + 45 W + 112.5 W = 180 W = Psupplied

Example 3.8 showed that the average power in AC circuits uses the RMS voltage and currents in the power
formula of Equation 3.2. For AC circuits with only resistors the current and voltages are always "in phase" with
each other which maximizes the average power. For RLC circuits the capacitors and/or inductors in the circuit
causes the current and voltage to be out of phase (as explained previously with the ELI the ICE man pneumonic),
which results in a reduced average (or real) power. Figure 3.19 shows an AC circuit with only a resistor and a
circuit with a capacitor added that results in the voltage and current being out of phase. In Table 3.4 and Figure
3.20 provide a detailed analysis showing the effects of adding a capacitor (resulting in the current and voltage
going out of phase) on the instantaneous and average power.

                                                                                                                                        Capacitors only have
                                                                                                                                        Q so the P is zero.

                                                                       Adding the capacitor
                                                                       reduces the power

Figure 3.19: Circuit showing that adding a capacitor (or inductor) reduces the average power.

46
Table 3.4) Instantaneous Values for 2 RC circuits. Case 1: (No Capacitor), Case 2: 470 킚 Capacitor added.

1 Period with 40 pts  Case 1: No Cap.  Case 2, 470킚  Table 3.4 shows 40 instantaneous data points over
                                       I_inst P_inst  1 period of V, I, and P of the circuits shown in
t(ms)    V_inst       I_inst P_inst    0.557 0        Figure 3.19. The instantaneous values are plotted
  0         0
                      0  0

0.25 0.939 0.188 0.176 0.679 0.637 over 1 period for both cases. To determine the

    0.5 1.854 0.371 0.688 0.784 1.454 average (or real) power (Pavg) take an average of

0.75 2.724 0.545 1.484 0.87 2.37 the instantaneous power values over 1 period or
  1 3.527 0.705 2.488 0.934 3.295 use Equation 3.2.  Pavg = VRMS  IRMS  cos(Zt)

1.25 4.243 0.849 3.6 0.976 4.139

    1.5 4.854 0.971 4.712 0.993 4.82

1.75 5.346 1.069 5.716 0.986 5.271

    2 5.706 1.141 6.512 0.955 5.447

2.25 5.926 1.185 7.024 0.9 5.332

    2.5  6            1.2 7.2 0.823 4.936             A circuit with only
                                                      resistors has a Zt of 0
2.75 5.926 1.185 7.024 0.725 4.299                    and PF = cos(0) = 1,
                                                      Pavg=VRMSIRMS(1)=3.6W
    3 5.706 1.141 6.512 0.61 3.482

3.25 5.346 1.069 5.716 0.48 2.566

    3.5 4.854 0.971 4.712 0.338 1.641

3.75 4.243 0.849 3.6 0.188 0.797

    4 3.527 0.705 2.488 0.033 0.116

4.25 2.724 0.545 1.484 -0.123 -0.335

    4.5 1.854 0.371 0.688 -0.276 -0.511

4.75 0.939 0.188 0.176 -0.422 -0.396

    5    0            0  0 -0.557 0                   Average of P_inst = Pavg = 3.6 W

5.25 -0.939 -0.188 0.176 -0.679 0.637

5.5 -1.854 -0.371 0.688 -0.784 1.454                  XC = 1/(C) = 3.386, R = 5  , Zt = atan(XC/R) = 34.1
5.75 -2.724 -0.545 1.484 -0.87 2.37                   PF = cos(0) = 0.828, Pavg = VRMS  IRMS (PF) = 2.468 W

  6 -3.527 -0.705 2.488 -0.934 3.295

6.25 -4.243 -0.849 3.6 -0.976 4.139

    6.5 -4.854 -0.971 4.712 -0.993 4.82

6.75 -5.346 -1.069 5.716 -0.986 5.271

    7 -5.706 -1.141 6.512 -0.955 5.447                                                  Capacitors and
                                                                                        Inductors have no
7.25 -5.926 -1.185 7.024 -0.9 5.332                                                     Real Power (Pavg).

    7.5  -6           -1.2 7.2 -0.823 4.936

7.75 -5.926 -1.185 7.024 -0.725 4.299                 Average of P_inst = Pavg = 2.468 W
  8 -5.706 -1.141 6.512 -0.61 3.482

8.25 -5.346 -1.069 5.716 -0.48 2.566

    8.5 -4.854 -0.971 4.712 -0.338 1.641

8.75 -4.243 -0.849 3.6 -0.188 0.797

    9 -3.527 -0.705 2.488 -0.033 0.116

9.25 -2.724 -0.545 1.484 0.123 -0.335

    9.5 -1.854 -0.371 0.688 0.276 -0.511

9.75 -0.939 -0.188 0.176 0.422 -0.396

    10   0            0  0 0.557 0 Figure 3.20: Data in Table 3.4 plotted

47
Example 3.9) For the following RLC series circuit calculate the values of vR1(t), vL2(t), S, P, and Q and draw the
power triangle. Determine what component needs to be added to the circuit to eliminate the apparent power
and produce a power factor of 1.

Figure 3.21: Circuit for Example 3.9
  = 2f = 21000 = 6283.2 rad/sec. XL1 = L1 = 62.8, XL2 = L2 = 188.5, XC1 = XC2 = 1/(2킚) = 79.6
 ZTotal = R1 + j XL1 + R2 + R3 - j XC1 + j XL2 - j XC2 = 20 + j 62.8 + 10 + 70 - j 79.6 + j 188.5 - j 79.6
 ZTotal = 100 + j 92.17 = 13642.67  (ELI) I = Vin/ZTotal = 100/13642.67 = 73.53-42.67 mA
 Time shift, tS, of current = -/ = -42.67  (/180)/6283.2 rad/sec = 0.119 ms (0.1197 ms in Multisim)
 VR1 = IR1 = (73.53-42.67 mA)(200) = 1.47-42.67 (1.493) vR1(t) = 1.471sin(2000t - 0.237)
 VL2 = IR1 = (73.53-42.67 mA)(188.590) = 13.947.33 (14.275) vL2(t) = 13.9sin(2000t + 0.263)
 Figure 3.21 shows VR1 and VL2 are 90 out of phase. Calculations agree  VL2 - VR1= 47.33 - -42.67= 90
48
The power calculations are shown below. PF = cos(Zt) = cos(42.67) = 0.7353 (0.71599 in Multisim)
 S = IRMS  VRMS = (0.07353/2 )  (10/2 ) = 0.368 VA
 Q = IRMS  VRMS  sin (Zt) = (0.07353/2 )  (10/2 ) sin (42.67) = 0.249 VAR
 P = IRMS  VRMS  cos (Zt) = (0.07353/2 )  (10/2 ) cos (42.67) = 0.27 W (0.256319 W in Multisim)
To get the power factor equal to 1 a capacitor must be added to move Zt from quadrant I to on the x axis.
 ZTotal = 100 + j 92.17, Need XC of added capacitor equal to 92.17 C = 1/(XC) = 1.7267 킚
 This capacitor is added into the circuit below. The current is now in phase with Vin and PF = ~ 1.

Figure 3.22: Verification that added capacitor makes power factor go to approximately 1.

49
The power triangle for the circuit before the capacitor is added is shown in Figure 3.23.

j axis          Reactive Power
Apparent Power
                Q = 0.368 sin (42.67) = 0.249 VAR
S = 0.368 VA

   Zt = 42.67   real axis
Real Power

P = 0.368 cos (42.67) = 0.27 W

Lagging Power Factor = cos(+42.67) = 0.735
Add capacitance to increase the power factor

Figure 3.23: Power Triangle for the circuit in Example 3.9.

Example 3.9 is a very practical problem because power companies are constantly trying to make the power
factor closer to 1 in their transmission lines. The load of the customers they supply electricity to is primarily
inductive (due to motors) so the transmission line circuit is initially in quadrant I (ELI). The power companies
purposely add large capacitors into the line to remove the VARs and increase the power factor closer to 1. When
the peak load ends when businesses shut down for the day the capacitors added to negate inductance might
add too much reactance and move the total impedance into quadrant IV (ICE). When this happens the some of
the capacitance added to the line is removed. This is a continual process that the power companies monitor to
increase the power factor and save money by making the transmission line more efficient.

Section 3.5 -AC Maximum Power Transfer

Example 3.9 showed how to modify a circuit to increase the power factor so that more of the power that is
generated is delivered to the load and less VAR waste occurs. This section contains a similar concept, but also
factors in the resistance balancing that is needed to maximize power transfer. For DC circuits the Maximum
Power Transfer Theorem stated that the maximum power transfer occurs when the load resistance is equal to
the Thevenin resistance of the circuit where the load is connected. In Figure 3.24 it can be seen that as the value
of RL is close to zero on the x-axis the power dissipated by RL is also close to zero, but when RL reaches 1000 ,
which is the value of Rth, the power dissipated in RL is at its maximum.

Figure 3.24: Graphical representation of the Maximum Transfer Theorem (RL = Rth) for DC circuits
50
For AC circuits the theorem is modified to account for the resistance and the reactance.

[3.6]                      (Maximum Power Transfer Theorem for AC circuits)

        = 

The * in Equation 3.6 denotes the conjugate. The following two scenarios could occur:

1. You know the source impedance (ZSource) and need to select a load impedance (ZLoad) for
    maximum power transfer so you try to set it equal to the conjugate of the source.

2. You have a set load and need to modify the source for maximum power transfer so you try to
    make the source impedance equal to the conjugate. This is the scenario of Example 3.9.

Example 3.10) Determine the load impedance for maximum power transfer if the source impedance is equal to 3
+ j 4. Use the A+jB Block and A-jB Block parts in Multisim that are located in the following directory: Group
Basic, Family  Z_Load. Solve the problem to determine the apparent, reactive, and real power.

                           Double Click on the A+jB or
                           A-jB blocks in Multisim to
                           change the values of A and B.

                               Maximum Power Transfer will
                               occur in this AC circuit because
                               3 - j 4 is the conjugate of 3 + j4

                         [3.16] ZLoad = Zsource*

Figure 3.25: Circuit including Multisim Z_loads for Example 3.10.
     The Load impedance must be 3 - j 4 for maximum power transfer (as shown in Figure 3.25).
     Ztotal = (3 + j 4) + (3 - j 4) = 6 
     IRMS = VRMS/Ztotal = (1200)/(60) = 20 ARMS
     Zt = 0  PF = cos(0) = 1
     S = IRMS  VRMS = (20 ARMS)(120 VRMS) = 2400 VA
     P = S  cos(0) = 2400 W  Multisim has value equal to 2399 W
     Q = S  sin(0) = 0 VAR

The Z_load blocks made Example 3.10 easier. If given only the reactance of a capacitor or inductor instead of the
actual value of them, Z_load blocks allow you to skip the step of calculating inductance or capacitance. For AC
circuits with multiple impedances in series and parallel Z_loads simplify the problem in Multisim.

51
Power transmisssion and distribution systems (as seen in Figure 3.26) is the most important application of RLC
circuits. Examples that showed how impedance matching is performed to increase the amount of power
delivered to the load was shown in examples 3.9 and 3.10. The following link contains a convenient
interactive interface that solves for some of the AC parameters in a series RLC circuit. http://hyperphysics.phy-
astr.gsu.edu/hbase/electric/powerac.html
For deeper reading on transmission lines Chapter 14 of the AllAboutCircuits.com - Alternating Current eBook is
recommended. http://www.allaboutcircuits.com/textbook/alternating-current/chpt-14/50-ohm-cable/
The following link also provides a brief overview of the electrical effects of the physical size of the transmission
line. http://www.allaboutcircuits.com/technical-articles/introduction-to-the-transmission-line/

Figure 3.26: Electrical Transmission System Overview. Source: Public domain image
The following link shows a figure with more information about the electrical grid and includes different sources
of electrical generation such as: wind, solar, hydro-electric, nuclear, and coal.
https://commons.wikimedia.org/wiki/File:Electricity_Grid_Schematic_English.svg

52
Module 4 - Passive Filters

While power transmission is probably the most important application of RLC circuits, filtering is a close second.
Chapter 8 of the AllAboutCircuits.com - Alternating Current eBook provides details about filters and is
recommended reading to gain a deeper understanding about the subject.
http://www.allaboutcircuits.com/textbook/alternating-current/chpt-8/what-is-a-filter/

There are two main categories of filters: passive and active. Active filters require a power source for operation,
but passive filters do not. Active filters include Operational Amplifiers (discussed in Module 7), while passive
filters use inductors and/or capacitors to filter signals. In this eBook only passive filters are covered, but
references for active filters are provided in Module 7 and a active filter example is shown in Figure A.4 in the
appendix.

In this section some of the common RL, RC, and RLC passive filters are discussed and example circuits with
calculations are provided to provide an overview of the topic. The frequency response tool called the Bode plot
will be used to provide a graphical understanding of how filter work. Many applications have Bode plot function.
In Matlab the function bode (or bodeplot) can be used to determine the magnitude response (how much the
output magnitude changes from the input) and phase response (how much the output phase changes from the
input) for a range of input frequencies. The Matlab function bodemag can also be used if only the magnitude
response is needed. The value obtained from the Bode magnitude response will be referred to as the gain
(Vout/Vin) for the remainder of this document. Performing frequency analysis of circuits in Matlab with the Bode
plot requires the circuit to be solved in the Laplace domain. An example of the Laplace solving method is shown
for a Band Pass Filter in Figure 4.15 and also for Low Pass and High Pass filters in the Appendix in Figure A.1,
Figure A.2, and Figure A.3.

Multisim also has a Bode plot tool that is very useful when simulating AC circuits. The tool is located 4 spots
below the Multimeter on the right side of the Multisim window. To understand how to use the Multisim Bode
plot Figure 4.1 shows a circuit with two resistors that form a voltage divider and reduces the output voltage by
50% (i.e. Gain = 0.5 V/V). The gain can also be represented in decibels (or dB). Equation 4.1 shows how to
convert from the "absolute" gain (which is in units of either V/V or A/A) to dB.

[4.1]  = 20  log10(/)

For example, the magnitude of the gain in Volt/Volt (or V/V) for the circuit in Figure 4.1 is calculated as:

      Voltage Divider Rule: Vout = Vin [1k/(1k + 1k)]  G / =   = 0.5 V  V
      G  = 20  log10(0.5 VV ) = - 6.021 dB
      Notice the Multisim Bode Plot cursor shows the magnitude is a constant value of - 6.021 dB.
      Since it is known that resistors don't change the phase, the phase is verified in Figure 4.2 where the

          phase is shown to be 0 for this circuit. This means that 0 is added to the input phase to get the
          output phase. This process might seem pointless for this circuit because the phase doesn't affect the
          output, but it will be important for circuits that have a Bode plot with a non-zero phase change.

     Equation 4.2 shows the output from the Bode plot given a specific input voltage, vin(t) = Asin(t + ).

[4.2] (t) = A  /  sin(  t +  + ) Get / and  from the Bode plot at the input frequency.

53
Example 4.1 shows how to apply Equation 4.2 to determine the output of a LPF circuit.

                                                                                                                                    Clicking on Magnitude or Phase shows
                                                                                                                                    them on the display (only one at a time).

   This Bode Magnitude Plot is constant at -6.021 dB                                       dB V/V
                                                                Click on Set to change the resolution.
                       The 4 fields with red stars adjust
                       the initial (I) and Final (F) values of
                       the x and y axis for the plot.

Move the cursor to see the Magnitude (i.e. Gain) at
different frequencies. Log = Gain(dB), Lin = Gain(V/V)

Figure 4.1: Multisim Bode Plot with the default settings.

Figure 4.2: Bode Plot from Figure 4.1 with adjustments: Magnitude Response (Left), Phase Response (Right).

The cursors are set in Figure 4.2 at 1.326 Hz for both the magnitude (left) and phase (right) modes. At 1.326 Hz
the gain is listed as "500 m" (or 0.5 V/V) and the phase is 0. It is apparent from the bode plot that both the gain
and phase are constant so the cursors for this circuit will result in 500 m and 0 no matter what the frequency
value of the input signal. However, for circuits with inductors or capacitors both the gain and phase will change
as the frequency changes so changing the frequency limits, resolution, and cursor position are needed to
determine the gain and phase at the desired frequency. Applying the values in the Bode plot in Figure 4.2 to the
following input signal at a frequency of 1.326 Hz  (t) = 3  sin(2  1.326  t)

Using Equation 4.2, the following result is obtained for the output signal from the circuit in Figure 4.1.

     (t) = A    sin(  t +  + ) = 3  0.5  sin(2  1.326  t + 00) = .   (  .   )

                                                   

Section 4.1 - Low Pass Filters (LPF)

In general terms, a low pass filter (LPF) allows input signals with lower frequencies to pass through to the output
while attenuating (i.e. reducing the amplitude) input signals with higher frequencies. The circuits in Figures 4.3
through 4.5 are called 1st order LPF circuits because they only have one reactive component (i.e. capacitor or
inductor). Only 1st order LPF circuits will be discussed in this section. Figure A.2 in the appendix shows how to
solve higher order filter circuits using the Laplace solving method. The capacitor or inductor in the 1st order LPF
causes a 3dB frequency (f3dB), which is the point at which the slope of the Bode magnitude plot changes by 20
dB/decade. A decade is a factor of 10 in frequency and 20 dB is 10 V/V (i.e. a factor of 10 in gain). For 1st order
LPF circuits, the reactive component causes the slope of the Bode magnitude plot to gradually change from flat
(0 dB/dec) to -20 dB/dec at f3dB. The 3dB frequency can either be denoted as angular frequency (3dB) or cyclic
frequency (f3dB). 3dB is equal to the inverse of the time constant () for a 1st order LPF or HPF. The reason the

54
3dB subscript is used is due to the gain in the Bode magnitude plot being 3dB below the "passband" at f3dB as
shown in Figures 4.3 through 4.7. The pass band is the flat region of the Bode magnitude plot that corresponds
to the frequency range where the gain is at its highest value. Over the pass band frequency range the Bode
phase plot approaches 0 for RLC circuits and non-inverting OpAmp circuits and approaches 180 for inverting
OpAmp circuits. Operational Amplifiers (OpAmps) are discussed in Module 7. For RLC circuits each inductor or
capacitor causes a 90 phase change in the Bode phase plot. The part of the frequency response that is not in
the pass band is called the stop band.

[4.3] 3   = 3 = 1 * For a 1st order RL or RC circuit

[4.4] 3   = 3 = 1 2 * For a 1st order RL or RC circuit

[4.5]    () =  = 

[4.6]    () =  =  

     Req is the equivalent resistance "seen" by the capacitor or inductor.

In DC circuits the time constant () for capacitors and inductors was used for transient analysis of DC circuits in
the decaying term  -. The larger the time constant the longer it took to charge the voltage of a capacitor
or to charge the current in an inductor. For filtering, a larger the time constant results in a smaller 3dB
frequency.

    Slope = 20 dB/dec Pass band Phase approaches 0

    Pass band Gain = 0dB (or 1 V/V)                             C.F. causes a 90
                    f3dB = 79.493 Hz                            total phase change

                                      (45 at f3dB) This is the
                                      midpoint between the
                                      passband (0) and 90

Figure 4.3: 1st Order RC Low Pass Filter Circuit with a 3dB frequency (f3dB) calculated to equal 79.6 Hz.

Figure 4.3 shows the 3dB frequency is calculated at 79.6 Hz and the gain is 3 dB below the pass band gain at that
frequency. Since the output is usually desired to be a resistive load, a common variant of the RC filter in Figure
4.3 is shown in Figure 4.4. Recall that a capacitor acts as an open circuit at DC, so the steady state DC output for
the circuit in Figure 4.4 is equal to 0.5Vin using the same voltage divider calculation that was used for the circuit
in Figure 4.1. With the pass band gain at 0.5 V/V (or -6 dB) the gain at f3dB is equal to - 9 dB (3dB below -6dB) as
shown below.

55
Figure 4.4: 1st Order RC Low Pass Filter Circuit with the output across a resistor.
Next, an RL LPF is shown in Figure 4.5. Recall that an inductor acts as a short circuit at DC steady state, so the
DC voltage will not be reduced due to an inductor being in series between the output and the input. In other
words, the inductor will act like a short circuit at DC and Vout will equal Vin. So at DC (or 0 Hz), which is the far left
of the x-axis of the Bode plot, the gain will be equal to 1 V/V (or 0 dB) just like it was in the 1st order RC filter
with one resistor (see Figure 4.3). Since it is a 1st order filter and therefore only has one reactive component (the
inductor) the slope of the Bode magnitude plot will be equal to (20 dB/dec) as it was for the circuit in Figure 4.3.
The Bode phase response plot is also the same as the RC LPF circuit in Figure 4.3.

Figure 4.5: 1st Order RL Low Pass Filter Circuit with a 3dB frequency (f3dB) equal to 7.96 kHz.
Example 4.1) Determine the output, vout(t), from the circuit in Figure 4.5 for each of the following inputs:

     vin1(t) = 5 sin (27.96t)
     vin2(t) = 120 sin (20.796t + 20)
     vin3(t) = 0.32 sin (279.6t - 150)
For each of the inputs the freqency is used to determine the magnitude and phase change from the Bode plot.
     vin1(t) is at fin = 7.96 Hz. The Bode plot shows at fin = -45and GdB = -3dB  GV/V = 0.7071
     1(t) = A  /  sin(  t +  + ) = 5  .   sin(2(7.96)  t + 00 - )
     () = .  (.    - )
     vin2(t) is at fin = 0.796 Hz. The Bode magnitude plot shows that 1 decade less than f3dB the gain is safely in

         the passband. With only 1 resistor, the gain should be ~ 0 dB (or 1 V/V) and  should be ~ 0.
     2(t) = A  /  sin(  t +  + ) = 120    sin(2(0.796)  t + 200 + )
     () =  .    +  = ()
     vin3(t) is at fin = 79.6 Hz which is 1 decade greater than f3dB. For a 1st order LPF the gain drops by 20 dB in

         1 decade due to the reacive component so the gain is ~ -23 dB (or 0.07071 V/V) and  is ~ -90.
     3(t) = A  /  sin(  t +  + ) = 0.32  .   sin(2(79.6)  t - 1500 - )
     () = .  .    -  = .  .    + 
     Recall the phase in sinusoidal from should be between -180 and 180 so -240 is coverted to +120.

56
Note: A 2nd order LPF is solved with Matlab using the Laplace Transform method in Figure A.2 in the Appendix.

Section 4.2 - High Pass Filters (HPF)

In general terms, a high pass filter (HPF) acts in opposite fashion as a LPF where it allows input signals with
higher frequencies to pass through to the output while attenuating (i.e. reducing the amplitude) input signals
with lower frequencies. The cirucit in Figure 4.6 is the most common type of High Pass Filter (HPF). Anytime a
capacitor is placed in series in between the input and output a HPF is produced. When a capacitor is placed in
this fashion it is often called a coupling capacitor or a DC blocking capacitor because the capacitor blocks the DC
signal and prevents it from getting to the output. The gain at 0 Hz is 0 V/V so the far left side of the Bode
magnitude plot starts low and ramps up at 20 dB/dec until it reaches the 3dB frequency. Then (at f3dB) the slope
is gradually reduced by 20 dB/dec resulting in a flat response (0 dB/dec).

Slope = 20 dB/dec

                   Capacitor causes a 90
                   total phase change

                   Pass band Gain = 0dB (or 1 V/V)

f3dB = 79.493 Hz   (45 at f3dB) This is the midpoint  Pass band Phase
                   between the passband (0) and 90    approaches 0

Figure 4.6: RC High Pass Filter Circuit with a 3dB frequency (f3dB) equal to 79.6 Hz.

The other 1st order filter with only one resistor is an RL circuit with the output taken across the inductor as
shown in Figure 4.7.

Figure 4.7: RL High Pass Filter Circuit with a 3dB frequency (f3dB) equal to 398 Hz.

Example 4.2) Design a RC HPF circuit that has a 3dB frequency of 1 kHz and determine the output if the standard
AC wall outlet signal (equation shown below) is the input and the output is connected to a 10 load resistance.

     vin1(t) = 1202 sin (260t)
To achieve a f3dB frequency of 1 kHz Equation 4.4 shows the time constant is equal to 1/(21000) = 0.159 msec.
Equation 4.5 shows that the time constant for a RC circuit is  = ReqC, where Req is equal to the resistor in the
circuit. To avoid reducing the gain only one resistor will be used in the circuit. C can be solved for using the

57
equation C = /Req = 0.000159/100 = 1.59 킚. This HPF circuit is shown below and the Bode magnitude plot in
Multisim verifies that the gain is approximately -3 dB at 1 kHz.

Figure 4.8: RC HPF design for Example 4.2 with Multisim verification of the 1 kHz f3dB.
To determine the output from the AC wall outlet signal the gain and phase at 60 Hz are shown in Figure 4.9.

Figure 4.9: RC HPF design for Example 4.2 with Multisim gain and phase change at 60 Hz.
The "Lin" option for the Bode magnitude plot is used in Figure 4.9 to avoid having to manually do the dB to V/V
conversion. The value shown in the left plot of Figure 4.9 is 59.785633 m (or GV/V = 0.059785633 V/V). Since 60
Hz is less than 1 decade away from the 1 kHz f3dB the phase change should be approximately 90different from
the passband. To be more exact, we will use the cursor value at a frequency as close to 60 Hz as possible on the
Bode phase plot (recall the resolution of the Bode plot is limited so exactly 60 Hz can't be selected). The value
of the phase change () in the right plot of Figure 4.9 is equal to 86.572.

     (t) = A  /  sin(  t +  + ) = 169.7  0.0597856  sin(2(60)  t + 00 + 86.572)
     () = .  (   + . )
Using the Bode plot to determine the output signal is much easier than solving the problem algebraically. The
following steps show how to solve this problem and the values are verified in the Multsim scope plot in Figure
4.10. The problem solving technique shown below is the same process that was performed in Section 3.2 - Series
RLC Circuits. The Blue Font shows the Multisim measurements. Notice that they closely match the calculations.
  = 2f = 260 = 377 rad/sec.
 XC = 1/(1.59킚) = 1668.3 
 ZTotal = RL - j XC = 100 - j 1668.3 ZTotal = 1671.3-86.57  (ICE) (Notice: VRL leads Vin in Figure 4.10)
 I = Vin/ZTotal = 169.70/1671.3-86.57 = 101.5+86.57 mA
 Time shift, tS, of current = -/ = -86.57  (/180)/377 rad/sec = -04.01 ms (-4.017 ms in Multisim)
 VRL = IRL = (101.5+86.57 mA)(1000) = 10.1586.57 (10.154) vRL(t) = 10.15sin(120t + 86.57)
58
Figure 4.10: Multisim oscilloscope verification of Bode plot and calculated results of Example 4.2.
A 2nd order HPF is solved with Matlab using the Laplace Transform method in Figure A.3 in the Appendix.

Section 4.3 -Band Pass Filters (BPF)

In general terms, High Pass Filters "partially reject" signals with frequencies below f3dB and Low Pass Filters
"partially reject" signals with frequencies above f3dB. The word "partially" is used because complete rejection
would mean that an input signal at a specific sinusoidal frequency is multiplied by zero to completely remove it
(and that doesn't occur). However, the further away the input signal's frequency is from f3dB the more rejection
(or attenuation) occurs (i.e. the amplitude is multiplied by a value that approaches zero). At this point, before
discussing Band Pass and Band Stop filters the terms "Pass Band" and "Stop Band" need to be reviewed.

     Pass Band - Section of the frequency response (or Bode magnitude plot) that is "passed".
     Stop Band - Section of the frequency response (or Bode magnitude plot) that is "rejected".
Figure 4.11 and Figure 4.12 show the Bode magnitude plots for the 4 categories of filters that are commonly
used. Figure 4.11 shows the pass band and stop band for 1st order Low Pass and High Pass filters. Figure 4.12
shows the pass band and stop band for the 2nd order Band Pass Filter circuit in Figure 4.13 and the pass band
and stop band for 2nd order Band Stop Filter for the circuit in Figure 4.16. Only the most basic LPF, HPF, BPF, and
BSF will be discussed in this eBook. Multiple capacitors and inductors can be arranged to produce higher order
passive filters that have steeper Bode magnitude plots and therefore attenuate the signals at frequencies in the
stop band to a greater extent (i.e. make the gain closer to 0 V/V).

59
Low Pass Filer - (Pass Band < f3dB) and (Stop Band > f3dB) High Pass Filer - (Pass Band > f3dB) and (Stop Band < f3dB)

Pass Band                 Stop Band                            Stop Band                                  Pass Band

           f3dB
                                                                                                    f3dB

Figure 4.11: 1st order LPF from circuit in Figure 4.5 (Left). 1st order HPF from circuit in Figure 4.7 (Right)

BPF - (Pass Band fL to fH) (Stop Band < fL and > fH)  BSF - (Stop Band fL to fH) (Pass Band < fL and > fH)

Stop Band      Pass Band      Stop Band               Pass Band                                           Pass Band

           fL             fH         The high and low 3dB        fL fH

                                     frequencies (fH and fL)

                                     are at gains of -3dB for

                                     both the BPF and BSF

Figure 4.12: 2nd order BPF from circuit in Figure 4.13 (Left). 2nd order BSF from circuit in Figure 4.16 (Right)
By combining the RL LPF in Figure 4.5 and the RC HPF in Figure 4.6 a RLC BPF can be created as shown in Figure
4.13. The values of the components in the circuit give it a wide pass band which makes it a "Low-Q" BPF.

                                                  XBP1

                    IN OUT

                 100킚 10mH
                                                      RL fL fH

                                                                                +

       Vin Vout- 100

Figure 4.13: 2nd Order Low-Q RLC Band Pass Filter.
60
The Bode plot in Figure 4.13 has 5 dB per division scale on the y-axis and a logarithmic scale on the x-axis that
increases 1 decade (a factor of 10 in Hertz) every division. The y-axis values for fL and fH are at gain values as
close to - 3 dB as possible with the best resolution of the Bode plot that was possible. The Bode plot shows two
cursors on the Bode plot, but in Multisim only one cursor is available. The Bode plots in sections 4.3 and 4.4 with
two 3dB frequencies shown were created by splicing two different Multisim Bode magnitude plots together.

When the pass band of a BPF is wide it is called a broad band or Low-Q filter and when the pass band is narrow
they it is called a narrow band or High-Q filter. The Q in Low-Q and High-Q comes from the "Quality Factor"
parameter. Q is used for RLC Band Pass filters as a measure of frequency selectivity. If Q is low then the filter is
not designed to select a specific frequency, but pass a range of frequencies instead. To determine the Quality
Factor the resonant frequency needs to first be calculated using Equation 4.7. RLC circuits like those shown in
Figures 4.13 and 4.14 tend to resonate (or cause oscillations) at a specific frequency as shown in Figure 4.15.
This frequency is also called the "center frequency" because it is the geometric mean of the pass band as shown
in Equation 4.8. The pass band region is quantified by a term called bandwidth (BW) that is the frequency range
between the low 3 dB frequency (fL) and the high 3 dB frequency (fH) as shown in Equation 4.9.

[4.7]   = 0 =   =  = 1 2

[4.8]  =   

[4.9]  =  - 

[4.10]   =  = 

                                                         

Equations 4.7 through 4.10 are true for the series RLC BPF shown in this section regardless of the values of the
components. For the circuit in Figure 4.13 the Equation 4.7 produces the following results:

    0 =  = 1 2 = 210-3100-6 1  = 159.155 

For a Low-Q Band Pass Filters with a large bandwidth (at least 2 decades of frequency difference between fL and
fH like the BPF example shown in Figure 4.12) the low and high 3 dB frequencies can be approximated fairly
closely with equations 4.11 and 4.12, which are the same equations used for 1st order LPF and HPF circuits.

[4.11]   1 2 *This is accurate for series RLC BPF when fH and fL are separated by 2 decades.

[4.12]    2 *This is accurate for series RLC BPF when fH and fL are separated by 2 decades.

When fL and fH become closer together, Equation 4.11 and Equation 4.12 become less accurate. For example, in
the circuit in Figure 4.13, Equation 4.11 and Equation 4.12 calculate the values as follows (The Multisim values
are in Blue Font):

61
      1 2 = 2100100-6 1  = 15.9  Multisim: 15.791 Hz
       = -3 100 = 1.59  Multisim: 1.605 kHz

                 2 210 

In this example fL and fH obey the rule of thumb that states the 3 dB frequencies (fL and fH) need to be two
decades or more apart for the approximations of equations 4.11 and 4.12 to be accurate. Using the approximate
calculations in equations 4.11 and 4.12 the bandwidth and quality factor can be calculated as:

     =  -  = 1.59  - 15.9  = 1575.6 

     =  = 159.155  = 0.1

                  1575.6 

A series RLC BPF circuit with a Q value of 0.1 can be safely called Low-Q. Furthermore, if the capacitor in the
circuit in Figure 4.13 is changed to a value of 10 킚 then fL becomes 159 Hz which is only one decade from fH.
When this circuit (with a 10 킚 capacitor) is simulated in Multisim the fL and fH values are 147 Hz and 1.734 kHz
respectively, which shows equations 4.11 and 4.12 have significant error when the 3 dB frequencies are only one
decade apart. Using the approximate calculations in equations 4.11 and 4.12, the bandwidth and quality factor
can be calculated as follows:

Note: The number in Blue Font is the BW determined from Multisim which will be much more accurate than
equations 4.11 and 4.12 when fL and fH are only one decade apart.

     = 1 2 = 210-310-6 1  = 503.3 

     =  -  = 1.59  - 159  = 1432.4  Multisim: BW = 1587 Hz
     =  = 503.3  = 0.35

                    1432.4 

A Q value of 0.35 would still probably be considered a Low-Q filter, but there is no simple method or equation to
use to easily calculate fL and fH for that circuit. Unfortunately, there is no perfect Q cut-off point that separates a
High-Q from a Low-Q filter, but there are approximate equations that can be accurately used for series RLC
circuits that are extremely Low-Q or extremely High-Q. Equations 4.11 and 4.12 can be accurately used for
extremely Low-Q series RLC circuits like shown in Figure 4.13 where fH and fL separated by 2 decades (Note:. The
Q value was 0.1 for the circuit in Figure 4.13).

Example 4.3) Design a circuit that filters out frequencies that are NOT in the audio range (20 Hz to 20 kHz). Use
the Bode plot to determine the output due to the following two signals.

     vin1(t) = 5 sin (21000t) This signal should pass through the filter with little to no attenuation.
     vin2(t) = 2.3 sin (250,000t+0.2 ) This signal is beyond 20 kHz so it should be significantly attenuated.
A low-Q BPF can be used since the upper and lower frequency limits are at least 2 decades apart. If we set the
3dB frequencies at 20 Hz (fL) and 20 kHz (fH) only the edges of the audio range will be slightly attenuated. The
resistor needed in the series RLC BPF circuit can be selected as many different values and still achieve the
desired 3dB frequencies. To keep the current in the circuit fairly low a resistor value of 1 k will be selected.
Equations 4.11 and 4.12 are used to determine the values of the capacitor and inductor that is needed.

     Set  = 1 2 = 20   = 1 2 = 1 =  2100020 .  

62
     Set  =  2 = 20,000   =  2 = 1000 =  220,000 .  

The following shows the final circuit design along with the Bode magnitude plot showing fL is at 20 Hz and fH is at
20 kHz. Two separate Bode Magnitude plots are shown so the exact gain can be seen.

Next, the Bode Plot is shown at the frequency of Vin1 (1 kHz) and Vin2 (50 kHz).
                                                                                                vin1(t) = 5 sin (21000t)
                                                                                           Gain = -004 dB  0.99954 V/V
                                                                                           Phase = -1.7765  -0.0099 

                                                                                                                                    Vout1(t) = 50.99954 sin (21000t - 0.0099 )
                                                                                                                      Vout1(t)= 4.998 sin (21000t - 0.0099 )

                        vin2(t) =2.3 sin (250000t +0.2 )
                        Gain = -8.598 dB  0.3716 V/V
                        Phase = -68.183  -0.379 

                        Vout2(t) = 2.30.3716 sin (t +0.2 -0.379 )
                        Vout2(t)= 0.855 sin (250000t - 0.179)

Next, equations 4.13 and 4.16 are introduced that can be accurately used for extremely High-Q series RLC
circuits. If the Q value is calculated to be 10 or greater, like the one shown in Figure 4.14, great accuracy is
achieved, but when Q drops lower than 10 equations 4.13 to 4.16 become less accurate as shown in the
following example for a series RLC BPF circuit with Q = 3.16.

For High-Q filters Q and BW can be calculated using equations 4.13 and 4.14 and then fL and fH can be calculated
using equations 4.15 and 4.16. These equations produce very close approximations when Q is 10 or greater as
shown in the next example. Equation 4.13 shows that XC equals XL at the center frequency, fC, for High-Q BPFs.

[4.13]   =  = 2 =  = 1  Only use Equation 4.13 if Q  10.
             2

63
[4.14]   = 

                      

[4.15]    -  2

[4.16]    +  2

When the capacitor in the series RLC circuit in Figure 4.13 is changed to a much smaller value, fL moves to the
right (as shown in Figure 4.14), which results in the bandwidth narrowing and Q increasing. Now the High-Q
filter equations (4.13 to 4.16) can be used to produce accurate results (see the Multisim comparison below).

                                fC                 fH

                                               fL

Figure 4.14: 2nd order High-Q RLC Bandpass Filter with 2 screen shots of the Bode Magnitude plot.

      = 1 =                  -6 1 = 15.9155   Multisim: fC = 15.919 kHz
        2 20.010.01 

      =  =  = 2 = 215915.50.01 = 10
                                    100

      =  = 15.919  = 1.59155 
                        10

       15.9155  - 1591.55  2 = 15.12  Multisim: fL = 15.147 kHz
       15.9155  + 1591.55  = 16.71  Multisim: fH = 16.728 kHz

                                                        2

This shows when Q equal to 10 equations 4.15 and 4.16 give very close approximations, but if the capacitor is
increased to a value of 0.1 킚 and Q is reduced the approximation is not as accurate (as shown below).

      = 1 =                  -6 1 = 5.033   Multisim: fC = 5.038 kHz
        2 20.010.1 

      =  =  = 2 = 25.033 0.01 = 3.16
                                    100

      =  = 50.33  = 1591.55 
                        3.16

       50.33  - 1591.55  2 = 4.237  Multisim: fL = 4.301 kHz
       50.33  + 1591.55  = 5.829  Multisim: fH = 5.894 kHz

                                                   2

64
These values show that when C was increased to 0.1킚 and Q = 3.16 the approximations of equations 4.15 and
4.16 are still fairly accurate, but not nearly as accurate as when Q was equal to 10 for the circuit in Figure 4.14.
In summary, there is not a perfect cut-off for the Quality Factor, Q, which classifies a series RLC BPF as High-Q or
Low-Q. The following Rules of Thumb help determine which equations to use to calculate fL and fH.

     You should only expect "very close" results (i.e. that the calculated fL and fH frequencies are at - 3dB
         gain points) with Equations 4.15 and 4.16 when Q  10. Q values of 10 or greater should definitely
         classify the series BPF as High-Q.

     You should only expect "very close" results with Equations 4.11 and 4.12 for fL and fH when fL and fH are
         2 decades in frequency apart. If this occurs the BPF or BSF should definitely be classified as Low-Q.

     If fL and fH are closer to each other than 2 decades in frequency and the Q value is less than 10 then
         there is no easy way to accurately determine the values of fL and fH. This would be a problem that would
         need to be solved using the Laplace Transform method (as shown in the Appendix). In this situation, the
         determination of whether to classify the filter as High-Q or Low-Q is also not clear.

Before moving on to Band Stop Filters the idea of resonance in RLC circuits and the "resonant frequency"
defined in Equation 4.7 should be explained in more detail. For the circuit in Figure 4.14 the resonant frequency,
f0, (or center frequency, fC) is calculated as 15.92 kHz. The figure below shows the transient response of the
circuit in Figure 4.14 when the input voltage is a 1 V DC signal that is suddenly applied (i.e. a step input, u(t)).
Since the capacitor acts as an open circuit at DC the voltage across the resistor will approach zero at steady
state. However, in the transient region the voltage across the resistor will oscillate (or resonate) at the resonant
frequency until the oscillations die out as steady state is reached as shown in Figure 4.15. The cursors in Figure
4.15 are placed at locations where the difference between them is the half-period of the oscillations. T/2 can be
determined from these cursors as (0.000518 - 0.000487 = 0.000031 seconds) which equates to a frequency of
(1/(20.000031) = ~ 15.92 kHz) which is equal to the calculated resonant frequency from Equation 4.7. The
Matlab bode magnitude plot in Figure 4.15 is also shown to match the Multisim Bode plot in Figure 4.14 closely.

65
                                                                            % Step response and Bode Magnitude Plot of
                                                                            an RLC series circuit
                                                                            C = 0.01e-6;
                                                                            L = 10e-3;
                                                                            R = 100;
                                                                            syms s
                                                                            Zt = R + 1/(C*s) + L*s;
                                                                            Vin_s = 1; %Laplace Transform of delta function
                                                                            Vout_s = Vin_s*R/Zt; %VDR
                                                                            % Since Vin_s is equal to 1 Vout_s is actually
                                                                            equal to (Vout(s)/Vin(s))
                                                                            TF_sym = Vout_s;
                                                                            % Find the numerator & denominator of
                                                                            TF_sym
                                                                            [num_TF_sym,den_TF_sym]=numden(TF_sym)
                                                                            % Convert num & den to polynomial form
                                                                            num_TF = sym2poly(num_TF_sym);
                                                                            den_TF = sym2poly(den_TF_sym);
                                                                            % Find the transfer function (Vo/Vin)
                                                                            sys_TF = tf(num_TF,den_TF);
                                                                            figure(1)
                                                                            step(sys_TF)%This is the step response
                                                                            title ('Vout across R in a Series RLC Circuit with
                                                                            1 VDC input')
                                                                            figure(2)
                                                                            h = bodeplot(sys_TF)
                                                                            setoptions(h,'FreqUnits','Hz','PhaseVisible','off')

Figure 4.15: Matlab step response and Bode plot simulation of the 2nd order High-Q filter circuit in Figure 4.14.

Section 4.4 -Band Stop Filters (BSF)

Band Stop Filter (BSF) will not be covered in as much detail as the other filters since its applications are not as
numerous as the others. A Band Stop Filter (also called Band Reject Filter or Notch Filter) is essentially the
opposite of a BPF because it partially rejects a range of frequencies in its stop band, but passes low and high
frequencies that are outside the stop band. The term notch filter is used in the previous sentence because it is a
much more descriptive term than BSF. The notch in the filter can be used to eliminate specific noise that is
present in a circuit. A common application of a notch filter is to remove 60 Hz noise from AC devices that are
plugged into AC wall outlets. Wires or cables that travel in close proximity to 60 Hz noise sources tend to pick up
noise, which can sometimes negatively affect the performance of the circuit. By adding in a 60 Hz notch filter the
noise can be eliminated to improve the performance of the circuit.

A common 2nd order (2 reactive elements: 1 inductor and 1 capacitor) BSF circuit is shown in Figures 4.16. The
Bode magnitude plot and calculations of the center frequency (fc) and the bandwidth (BW) are also included.
These two parameters characterize the notch in the BSF and the equations that apply to them are shown in

66
equations 4.7 and 4.9. The steeper the notch the more "selective" the filter is at rejecting frequencies. The term
quality factor (Q) shown in Equation 4.10 is used to quantify how selective the notch is. As described in Section
4.3, the quality factor was also used to determine how selective a BPF is at "passing" the center frequency. The
2nd order Low-Q BPF in Figure 4.13 is in many ways the opposite of the BSF shown in Figure 4.16. The parallel
capacitor and inductor result in something frequently referred to as a "Tank Circuit", which oscillates at its
resonant frequency and stores energy (like a storage tank). Notice that the inductor causes fL and the capacitor
causes fH, but it was the opposite for the series RLC BPF. The center frequency of the tank-style RLC BSF circuit
also uses Equation 4.7 like the series RLC BPF.

Note: The quality factor (and High-Q and Low-Q classifications) will not be applied to the Band Stop Filter and
only the following two equations will be given for the situation when fH and fL are separated by 2 decades.

[4.17]    2 *This is accurate for tank-style RLC BSF when fH and fL are separated by 2 decades.

[4.18]   1 2 *This is accurate for tank-style RLC BSF when fH and fL are separated by 2 decades.

Figure 4.16: 2nd order RLC Band Stop Filter.

This BSF circuit in Figure 4.16 (with L=100 mH) has the same fC, fL, and fH as the BPF circuit in Figure 4.13 (as
shown in the bulleted calculations below). The only difference (other than it is the opposite type of filter with
the pass band and stop bands reversed) is that fH comes from the capacitor and fL comes from the inductor.

      = 1 2 = 20.110-6 1  = 159.155  Multisim: 159.215 Hz
       1 =  -6 1 = .   Multisim: 1.6 kHz
    2 21010 

        2 = 10 20.1 = 15.9  Multisim: 15.84 Hz

      =  -  = 1.59  - 15.9  = 1575.6  Multisim: BW = 1584 Hz

    If the inductor in Figure 4.16 is changed to a value of L = 10 mH then fL becomes 159 Hz which is only one
    decade from fH. When this circuit (with a 10 mH inductor) is simulated in Multisim the fL and fH values are
    146.3 Hz and 1.732 kHz respectively and the bandwidth is (1732 - 146.3 = 1585.7 Hz). The Multisim
    simulated values are shown below to be much different than the calculated values from equations 4.17 and
    4.18. The error results by using equations 4.17 and 4.18 when fL and fH are only being one decade apart.

      = 1 2 = 210-310-6 1  = 503.3  Multisim: fC = 503.4 Hz
      =  -  = 1.59  - 159  = 1432.4  Multisim: BW = 1585.7 Hz

67
Module 5 - Transformers

A brief overview of transformers is needed in this eBook for two reasons. First of all, the invention of the
transformer led to AC voltages being used as the primary electric power source worldwide (Read:
https://en.wikipedia.org/wiki/War_of_Currents for more information on this topic). Additionally, transformers
are included in this eBook because without them rectifier circuits (Section 6.3) that convert an AC voltage to a
DC voltage could not be adequately be covered. If this module is not in depth enough, the following two links
from allaboutcircuits.com are recommended as additional resources.
http://www.allaboutcircuits.com/textbook/alternating-current/chpt-9/mutual-inductance-and-basic-operation/
http://www.allaboutcircuits.com/video-lectures/transformers-part-1/
Figure 5.1 shows a transformer with the following quantities labeled: primary voltage (VP), primary current (IP),
secondary voltage (VS), secondary current (IS), and the turns ratio (NP:NS or NP/NS). The primary side of the
transformer connects to the input and the secondary side of the transformer connects to the output (or load).

Figure 5.1: Iron Core Transformer Symbol
The vertical lines in the center of the transformer signify that it has an iron core. An iron core transformer is
usually used for low frequency applications, including power transmission, which is the primary application
addressed in this eBook. The curves on either side of the core represent the magnetic coil of wire that is
wrapped around the primary and secondary sides of the transformer. The turns-ratio is the ratio of the number
of primary coil turns of wire to the number of secondary coil turns of wire. The turns ratio is usually listed as
NP:NS or NP/NS. The middle line extending horizontally from the center of the secondary is called the center tap.
Some transformers have this physical connection (or tap) that separates two sections of the secondary coil. If
the tap is left unwired as shown in Figure 5.1 then the transformer will act as a standard transformer and can be
used for half wave or full wave bridge rectifier circuits as shown in Section 6.3. However, if the middle wire is
used then both sides of the tap will have its own turns-ratio value that must be factored into the problem. There
are three possible wiring methods for standard transformer applications that use only two wires: top and middle
legs, bottom and middle legs, and top and bottom legs. All three wires can be used in certain applications such
as parallel (or center tap) full wave rectifier circuits (Shown in the third figure from the top in this link). The two
68
dots above the primary and secondary coil symbols are used to label the type of phase change the transformer
will have. The dot notation states that if both dots are on top (or if there is only a single dot on top) then the
primary and secondary voltages will be in phase (0 phase shift) and if one is on top and the other is on bottom
then there will be a 180 phase shift.

Governed by Faraday's law (Equation 5.1), current from the input voltage source (Vp) is forced through the
primary coil of wire, which results in a magnetic flux being generated in the iron core. The flux travels through
the iron core and induces a voltage difference on the secondary coil of wire (Vs) as shown in Figure 5.2.

[5.1]   =            *Where e is the induced voltage, N is the # of turns, and  is the flux.

                   

Figure 5.2: Internal Diagram of a Transformer. "Ideal transformer and induction law" image  BillC. Used under
a CC BY-SA 3.0 license.

69
In this eBook the transformer will be assumed to be ideal (100% efficient), but there is magnetizing and leakage
inductance as well as resistance in the primary and secondary coils that reduce the efficiency. If the standard
(non-center tapped) transformer Multisim part called 1P1S (which stands for 1 primary and 1 secondary) is used
the turns ratio as well as the inductances and resistances that reduce the efficiency can be entered. The default
values for the 1P1S transformer are shown in Figure 5.3. The first tab allows the turns-ratio to be set. The next
three tabs allow the imperfections that cause efficiency reduction to be set. For this part it allows each of these
imperfections to be removed making the transformer truly idea. These settings will be set this way for the
circuits in this eBook so that the calculations will match Multisim closely.

Figure 5.3: 1P1S Mustisim Transformer User Interface with resistance and inductance values set to ideal.

The ideal transformer equations that determine the ratios of the primary and secondary voltage and currents
are shown in equations 5.2 and 5.3.

[5.2]  = 

           

[5.3]   = 

        

70
Example 5.1) Calculate VS, IS, and IP for a 1S1P 2:1 ideal Step-Down transformer with a standard 120 Vrms wall
outlet power signal connected to the primary and a 1 k resistor connected to the secondary as shown in Figure
5.4. Also, calculate the primary and secondary power.

Figure 5.4: 2:1 Step Down Transformer for Example 5.1.
This problem must be solved in the correct sequence (as follows):
1) The secondary voltage can be calculated from Equation 5.2  VS = VP/(NP/NS) = 120/2 = 60 Vrms
2) The secondary current can be calculated using Ohm's Law  IS = VS/RL = 60 Vrms/1 k = 60 mArms
3) The primary current can be calculated using Equation 5.3  IP = IS/(NP/NS) = 60 mArms/2 = 30 mArms
4) 100% efficient so PP = PS = VPIP = VSIS = 3.6 W
Keep in mind that a real transformer will NOT be 100% efficient. The voltage ratios in Equation 5.2 will remain
close to true for non-ideal transformers, but the current ratio (Equation 5.3) will become inaccurate because
additional primary current will be required by the source due to the power loss in the transformer.
The transformer in Example 5.1 is called a Step Down transformer because the voltage is reduced at the primary.
A Step Down transformer has a turns-ratio > 1. Example 5.2 shows a Step Up transformer (turns-ratio < 1).
Example 5.2) Calculate VS, IS, and IP for a 1S1P 2:1 ideal Step-Down transformer with a standard 120 Vrms wall
outlet power signal connected to the primary and a 1 k resistor connected to the secondary. Also, calculate the
primary and secondary power.

Figure 5.5: 1:10 Step Up Transformer for Example 5.2.

71
Module 6 - Diodes and AC to DC Conversion

Note: There some additonal Diode example problems at the end of the Appendix. A diode is a device that acts
like a current valve, where current is allowed to flow from anode to cathode, but not allowed to flow from
cathode to anode (base of triangle). When current is allowed to flow the diode is said to be forward biased and
when current is blocked it is reverse biased. There are many different types of diodes. The two main types
discussed in this eBook are shown in Figures 6.1 (switching diodes) and 6.2 (rectifier diodes).

           Cathode (-)                                                             Silicon switching or signal
                                                                                   diodes (Examples: 1N914,
Anode (+)                                                                          1N4148). This type of diode
                                                                                   can switch between forward
                                                                                   and reverse bias quickly.
                                                                                   They are used for low-
                                                                                   power, high-speed
                                                                                   switching applications. The
                                                                                   voltage drop (VD) when
                                                                                   forward biased is ~ 0.7 V,
                                                                                   but depends on current as
                                                                                   seen in the 1N914 I-V curve.

Figure 6.1: Characteristic Curve (ID vs VD) of a 1N914 silicone switching diode (also called signal diode).

           This I-V curve looks                                                    Silicon rectifier diodes
           similar to the 1N914,                                                   (Example: 1N4000 series)
           but the current is ~ 10x                                                This type of diode is used
           larger. The volts/div are                                               for high power applications,
           the same, but the                                                       but they are very slow and
           Amps/div is different.                                                  shouldn't be used for high-
                                                                                   speed circuits. They are
                                                                                   specifically created to be
                                                                                   used in rectifier circuits that
                                                                                   typically operate at 50 to 60
                                                                                   Hz. The VD vs ID curve is
                                                                                   shown for the 1N4007G.

Figure 6.2: Characteristic Curve (ID vs VD) of a 1N4007 silicone rectifier diode.

A few other types of diodes are discussed below. An ID vs. VD curve can be done for any diode using the Multisim
I-V Analysis tool (as shown in Figures 6.1 and 6.2) if the voltage at a specific current is needed to be known.

      A Schottky diode can be used for rectifiers or switching circuits. They have a forward voltage drop much
          smaller than silicone diodes (VD = ~ 0.3 V).

      A Zener diode works differently than the other diodes discussed thus far. They are designed to work in
          the reverse voltage region (where the other diodes prevent current from flowing). They are often used
          for reference voltage or low-power voltage regulator applications.

      A Light emitting diode (LED) is a type of diode that emits light as current flows through it. The smaller
          LEDs that are often used in a breadboard typically have a current limit (or rating) of around 20 mA. This

72
    Sparkfun tutorial is a good source for more information. Figure 6.3 shows the ID vs. VD curve for a typical
    low power Red LEDs (Left) and Green LEDs (Right). When too much current flows through a green LED
    the light color will change from green to yellow. This typically happens shortly before it is destroyed so
    if you see a green LED turn yellow cut off the power ASAP!

The Red LED I-V curve    The Green LED I-V
shows that at the 20     curve shows that at the
mA current limit the     20 mA current limit the
voltage drop = 1.827V    voltage drop = 2.131V

The horizontal           The horizontal division
division is 0.3          is 0.3 Volts/div for this
Volts/div for this I-V   I-V curve. When the
curve. When the Red      Green LED current is
LED current is slightly  slightly above 0 mA (the
above 0 mA (the turn     turn on point)
on point) VD = ~ 1.7V.   VD = ~ 1.9V.

Figure 6.3: Characteristic Curve (ID vs VD) of a low power 5mm Red LED (Left) and Green LED (Right).

The following are some good links to learn more about diodes if the next three sections leave some questions
unanswered: http://www.futureelectronics.com/en/diodes/diodes.aspx

http://www.allaboutcircuits.com/textbook/semiconductors/chpt-3/introduction-to-diodes-and-rectifiers/

Section 6.1 - Diode Constant Drop Model

In order to solve circuits that include diodes, a model for the diode is needed. There are many different types of
models that can be used, but the one that offers the best combination of accurate results and ease of use is the
Constant Drop Model. Before showing how to implement the Constant Drop Model, the process to solve
problems with diodes in them is listed below. All of the circuits in this section will only include DC sources. By
understanding how diodes affect circuits with DC sources, it is not a difficult jump to apply it to AC circuits also.

Process for Solving DC Circuits with Diodes using the Constant Drop Model

    1) Assume Forward or Reverse Bias for each diode in the circuit.
    2) Replace each diode with their model and solve for the forward bias current or reverse bias voltage.

         a. Reverse Bias - Diode replaced open circuit. Solve for voltage drop from anode to cathode.
         b. Forward Bias - Diode replaced with battery. Solve for current flowing from anode to cathode.

               The battery is placed with the + side where the anode of the diode was in the circuit. The value of
                 the voltage is approximated based on the type of diode. Assume the following: Shottky Diode =
                 0.3 V, Silicone switching or rectifier diodes = 0.7 V, Red LED = 1.8 V, Green LED = 2.1 V.

    3) Check the conditions for forward or reverse bias to make sure assumption in part 1 was correct:
         a. Forward Bias Condition: ID > 0 (i.e. The current calculated in part 2 is flowing from anode to cathode)
         b. Reverse Bias Condition: VD < Diode Turn On Voltage (i.e. The voltage calculated in part 2 is less than
              the values shown above  Schottky = 0.3V, Silicone = 0.7V, Red LED = 1.8V, Green LED = 2.1 V.

    4) If the assumptions from part 1 are verified in part 3 the problem is done. If any of the diodes don't meet
         the conditions in part 3, start the problem over by going back to step 1 and make different assumptions.

73
Example 6.1) Follow the DC Diode Analysis process to solve the following circuit if D1 is a silicone diode.

Figure 6.4: Circuit for Example 6.1
Step 1) D1 will be assumed to be forward biased because the 12V source will force current clockwise in this
circuit, which is the direction from the anode to cathode of the diode.
Step 2) The circuit on the right side of Figure 6.4 shows the forward bias model replacing the diode. The node
where the anode was connected is connected to the + side of the battery. 0.7 V is used for the battery voltage
because the problem stated it is a silicone diode. Next, calculate the current, ID1.
 ID1 = IR = V/R = (12 - 0.7)/1k = 11.3 mA (This is verified in Mulisim in Figure 6.4)
 Note: The actual diode voltage is shown in Multimeter XMM1 to be 717.774 mV, but there is no way to know

  the exact voltage across the diode unless a simulation tool is available. The approximate Constant Drop Model
  voltage used for silicone diodes is 0.7 V is very close to 0.717774 V so the calculations were identical to the
  Multisim calculation (within the accuracy of the current probe).
Step 3) Verify the diode is forward biased by making sure that ID1 > 0 and flowing from anode to cathode. The
current is 11.3 mA and the direction is clockwise in the circuit (which is from the anode to cathode).
Step 4) The forward bias condition assumed in Step 1) is verified in Step 3) so the problem is done.

Example 6.2) Follow the DC Diode Analysis process to solve the following circuit if D2 is a silicone diode.

Figure 6.5: Circuit for Example 6.2
Step 1) D2 will be assumed to be reverse biased.

74
Step 2) The circuit on the right side of Figure 6.4 shows the reverse bias model. Notice the + side of the
Multimeter that is measuring VD2 is on the same node as the anode was connected. To solve for VD2 there are
two possible methods.

     Find the node voltage on the + and - sides of the open circuit and subtract them. VD2+ = 0 (grounded)
         and VD2- = 12 - IR = 12 - 0R = 12 V (current = 0 A due to open circuit). VD2 = VD2+ - VD2- = -12 V

     Do a KVL around the loop including VD2  -12V + IR - VD2 = 0  VD2 = -12 V
     VD2 = -12 V is verified in Multisim in Figure 6.5.
Step 3) VD2 < 0.7 so the reverse bias condition is verified (0.7 V is used here because it is a silicon diode)
Step 4) The reverse bias condition assumed in Step 1) is verified in Step 3) so the problem is done.

Example 6.3) Follow the DC Diode Analysis process to solve the following circuit if D1 is a silicone diode.

Figure 6.6: Circuit for Example 6.3
Step 1) D1 will be assumed to be forward biased because the 12V source will force current clockwise in this
circuit, which is the direction from the anode to cathode of the diode.
Step 2) The circuit on the right side of Figure 6.6 shows the forward bias model replacing the diode. The node
where the anode was connected is connected to the + side of the battery. 0.7 V is used for the battery voltage
because the problem stated it is a silicone diode. Next, calculate the current, ID1. The mesh matrix method used
in the DC Circuits eBook will be used.

 Solving this matrix yields I2 = ID1 = 1.44 mA (This is verified in Multisim in the right circuit of Figure 6.6)
 Note: The actual diode voltage is shown in Multimeter XMM1 to be 664.703 mV. The 0.7 V diode drop

  assumption yielded a slightly different result than the actual values (shown in the left circuit in Figure 6.6).
Step 3) Verify the diode is forward biased by making sure that ID1 > 0 and flowing from anode to cathode. The
current is 1.44 mA and the direction is clockwise in the 2nd loop (which is from the anode to cathode).
Step 4) The forward bias condition assumed in Step 1) is verified in Step 3) so the problem is done.

75
Example 6.4) Follow the DC Diode Analysis process to solve the following circuit with a green LED.

Figure 6.7: Circuit for Example 6.4 with the wrong assumption made.
Step 1) The LED will be assumed to be forward biased. It is fairly obvious that this is the wrong assumption, but
it will be done anyway to show how to restart the problem in step 4 if the assumption is wrong.
Step 2) Solving for ID (which is the counterclockwise current in the 2nd loop)

 Solving this matrix yields I2 = 1.93 mA (clockwise). ID = - I2 = -1.93 mA (This is verified in Multisim in Figure 6.7)
 Note: The probe values in the left circuit of Figure 6.7 with the green LED are way different because the wrong

  assumption was made.
Step 3) ID is flowing from cathode to anode so the forward biased assumption cannot be verified.
Step 4) The forward bias condition assumed in Step 1) is WRONG in Step 3) so start over at step 1.

Figure 6.8: Circuit for Example 6.4 with the correct assumption made.
Redo Step 1) The LED will be assumed to be reverse biased. Since forward was wrong this must be correct.
Redo Step 2) Doing a KVL around the outer loop. - 12 + I11k - VD + I25k = 0, All current flows through the
first loop so I1 = 12/(4k) = 3 mA and I2 = 0 A  VD = -12 + 3mA1k + 05k = -9 V (Verified in Multisim)
Redo Step 3) VD = - 9V < 2.1 V so reverse bias is verified.
Redo Step 4) The reverse bias condition assumed in Step 1) is verified in Step 3) so the problem is done.
76
Example 6.5) Follow the DC Diode Analysis process to solve the following left circuit in Figure 6.9.

Figure 6.9: Circuit for Example 6.5 with the wrong assumptions made.
Step 1) Assume Both diodes are forward biased (1 of 4 possibilities). Model is shown in Figure 6.9 (Right).
Step 2) Solving for the loop currents. Assuming currents are clockwise  I_Bat85 = I2 and I_LED = -I3

                                                                            Assuming currents are clockwise, solving this matrix yields
                                                                             I1 = 457.4 mA, I2 = 13.8 mA, I3 = 144.5 mA. (These values
                                                                            are verified in Multisim in the right circuit of Figure 6.9)

                                                                              IBAT85 = I1 = 13.8 mA and ILED = -I3 = -144.5 mA

Step 3) IBAT85 is flowing from anode to cathode so the forward biased assumption is verified, but the ILED is
flowing from the cathode to anode so forward bias cannot be verified.
Step 4) If either diode is assumed wrong, one of the other 4 possibilities must be tried. There is a good chance
the BAT85 is forward biased, but you can't be sure until you verify both are correct. Go back to step 1.
Redo Step 1) The LED will be assumed to be reverse biased and the BAT85 assumed to be forward biased.

Figure 6.10: Circuit for Example 6.5 with the correct assumption made.
Redo Step 2) Loop 3 has an open circuit so this becomes a 2-loop circuit.

                                                                            Solving yields  I1 = 404.9 mA, I2 = IBAT85 = 7.36 mA
                                                                            KVL around outer loop -12 + I21k + 0.3 - VD = 0
                                                                            VD = -12 + 7.36 mA1k + 0.3 = -4.34V (verified in Multisim)

Redo Step 3) VD = - 4.34V < 2.1V (reverse verified), IBAT85 = 7.36 mA from anode to cathode (forward verified)
Redo Step 4) The assumptions in redo Step 1) is verified in Step 3) so the problem is done.
77
Section 6.2 - Diode Logic Circuits

There are many applications where the basic diode calculations shown in Section 6.1 can be used to give
circuitry more control. One way is by using diodes to create logic gates. The circuit in Figure 6.11 shows diodes
acting as an OR gate. To make this section easier to understand Multisim virtual parts are used that show actual
images of the part. When either of the two switches is flipped to the ON position (up) then the LED will turn on.
When the switch is in the down position there is an open circuit connected to the diode so a pull down resistor is
used to make sure the voltage at the diode is 0V when the switch is in the OFF position and 5V when the switch
is in the ON position. The left circuit has both switches OFF and the right circuit has Switch 2 ON. Switch 1 could
have been turned on instead of Switch 2 (or both could be turned on) and the same output would occur.

Figure 6.11: Diodes acting as an OR GATE.
The circuit in Figure 6.12 shows diodes acting as an AND gate. The output voltage (Vout) will only go to 5V when
both switches are flipped to the ON position (up) as shown in Figure 6.12. When either switch is turned off the
voltage will drop across the resistor that sets the voltage levels (200 k in Figure 6.12). The higher this resistor
value is the lower the current will be and the lower the voltage will be when both switches aren't pressed. In this
case with a 200 k resistor used when either switch is ON Vout drops below 2V which is the minimum voltage
required by the gate of the MOSFET to turn it on and cause current to flow from the 5V rail through the drain.

Figure 6.12: Diodes acting as an AND GATE.
78
Section 6.3 - Protection Diodes

One of the most important uses of diodes is to protect circuitry from voltage spikes that occur when inductive
elements such as motors start or stop. "Protection diodes" that serve this function are referred to by many
different names. Some of these names are: flyback, flywheel, freewheeling, snubber, and catch diodes. The
magnitude of the voltage across an inductor is  =    so when the inductive load is turned on or off the
current changes from 0 to non-zero producing a large slope and in return a large voltage spike. Because MOSFET
transistors (as shown in Figure 6.12) are activated with only voltage signals (Note: current is required to activate
BJT transistors) they are especially susceptible to damage when turning on or off an inductive load. A diode can
be positioned across the inductive load so that the voltage spike doesn't reach the circuitry as shown in Figure
6.13. The protection diode could also be placed across the MOSFET instead of the motor to provide protection
for the MOSFET. For this situation, the anode of the diode would connect to the source and the cathode would
connect to the drain. The protection diode needs to be a fast switching style diode like a 1N914.

Figure 6.13: Using a protection diode to prevent damaged circuitry due to  =   
Protection from  =   is such a problem for MOSFETs that some have internal protection as shown in the

                                        

following figure taken from the BS170 datasheet. Even if a diode has internal protection it is usually not enough
to keep the MOSFET from be damaged so adding an external protection diode as shown in Figure 6.13 is
recommended.

                                 Internal Protection from Ldi/dt

Figure 6.14: Internal protection in a BS170 MOSFET.
79
Section 6.4 - Rectifiers

One of the most important uses of diodes is to rectify an AC signal so it can be converted to a DC signal. When
the diode is connected in series between an AC signal and a resistor only one side of the AC waveform can pass
through. If the diode is oriented as shown in Figure 6.15 only the positive cycles are passed through, but if the
diode is flipped only the negative cycles pass through. The circuit in Figure 6.15 shows a half-wave rectifier
circuit. It is called half-wave because only half of the cycles pass through and the other half are rejected (or
zeroed out). For this circuit the input voltage is 2 Vrms or 2.8 Vpk. The peak input voltage to rectifier circuit is
typically called Vs because it is usually connected to the secondary of a transformer. The peak voltage across the
resistor is called Vo,pk and is one diode drop less than Vs for a half-wave rectifier with only one diode. The
reason the "with only one diode" disclaimer was used in the previous sentence is due to the fact that sometimes
multiple diodes will be included in series to get Vo,pk to the desired level. In the circuit in Figure 6.15 Vs is
measured by Multisim as 2.807 and Vo,pk was measured as 2.234 V which makes the diode drop around 0.6 V
instead of the 0.7 V that we will assume in all rectifier calculations that use silicone rectifier diodes. Keep this in
mind as one of the sources of error when Multisim doesn't match up as closely to rectifier hand calculations as
desired. If the peak output voltage (Vo,pk) needed to be lower than 2.234 V then another diode could be placed
in series with the 1N4007G diode to reduce it by another 0.6 or 0.7 volts.

Figure 6.15: Half-Wave Rectifier with one of the 1N4000 series silicone rectifier diodes.
Rectification is the first step in converting an AC signal to a DC signal. The next step would be to add a capacitor
in parallel with the load resistor where Vo,pk is measured so that the voltage will not be allowed to drop very
fast due to the time constant of the capacitor. Once the "smoothing capacitor" is added the rectifier is called a
"Peak Rectifier". An example of a half-wave peak rectifier is shown in Figure 6.16. The calculations and Multisim
measurements of a half-wave peak rectifier are shown below (See equation summary in Table 6.1).

     Vs = peak input voltage = 1202 = 169.7 V (169.634 V in Multisim - Figure 6.16).
     Vo,pk = peak output voltage = Vs - 0.7V = 169 V (169.026 V in Multisim - Figure 6.16).
     Vr = ripple voltage (Vo,pk - minimum Vout) = , = 169 = 56.3 V (~ 41.3V in Figure 6.16).

                                                                                            60501

     % Vr = percent ripple = the ripple voltage divided by Vo,pk = (56.3/169) = 33.3%
     VO,DC = the approximate DC voltage (centerline of the ripple). In Figure 6.16 VO,DC is equal 169 - 0.5  Vr =

         169 - 0.5  41.3 = 148.4 V. The DC voltage probe in Figure 6.16 measures the DC voltage as 149 V.
80
Figure 6.16: Half-Wave Peak Rectifier.
The other type of rectifier is called a full-wave rectifier. It allows the negative peaks to be flipped to positive
instead of zeroing them out. There are two common types of full-wave peak rectifiers:

     Full-Wave Peak Bridge Rectifier (See Figure 6.17)
     Full-Wave Peak Parallel Rectifier or Full-Wave Peak Center Tapped Rectifier (This type will not be

         discussed in this eBook, but the equations are in Table 6.1 and the circuit can be seen in the third figure
         from the top in this link).

Figure 6.17: Full-Wave Peak Bridge Rectifier.
     Vs = peak input voltage = 1202/10= 16.97 V (16.775 V in Figure 6.17).
     Vo,pk = peak output voltage = Vs - 2  0.7V = 15.57 V (15.49 V in Multisim - Figure 6.17).
     Vr = ripple voltage (Vo,pk - minimum Vout) = , = 15.57 = 1.3 V (~ 1V in Figure 6.17).

                                                                                          2 2601100

     % Vr = percent ripple = the ripple voltage divided by Vo,pk = (1.3/15.57) = 8.3%
     VO,DC = the approximate DC voltage of the output (centerline of the ripple). In Figure 6.17 VO,DC is equal to

         15.57 - 0.5  Vr = 14.92 V. The DC voltage probe in Figure 6.17 measures the DC voltage as 15 V.

81
The equations for half-wave and full-wave peak rectifiers that were shown in Figures 6.16 and 6.17 are
summarized in Table 6.1. Note: The Full Wave Center Tapped equations are shown, but this type of rectifier
circuit is not covered in detail in this eBook.

Table 6.1: Peak Rectifier Summary, Note: V = Vo,pk

Type    # PRV  Vo,pk  Vr                             Vo,DC      iD,avg            iD,max
                                                     V -  Vr  IL[1+(2V/Vr) ]  IL[1+2(2V/Vr) ]
 Wave  1 VS   VS - VD V/(fiRC)                     V -  Vr
                                                     V -  Vr  IL[1+(V/2Vr) ]  IL[1+2(V/2Vr)]
Full-Wave, Bridge 4 VS - VD VS - 2VD V /(2fiRC)                IL[1+(V/2Vr) ]  IL[1+2(V/2Vr)]

Full Wave, C.T. 2 2VS - VD VS - VD V /(2fiRC)

Nomenclature / Notes for Table 6.1

      Wave =  Wave Peak Rectifier (1 diode, 1 resistor, 1 capacitor)
     Full Wave, C.T. = Full Wave Center Tapped Peak Rectifier (2 diodes, 1 resistor, 1 capacitor)
     Full Wave, Bridge = Full Wave Bridge Peak Rectifier (4 diodes, 1 resistor, 1 capacitor)
     # = Number of Diodes in the circuit.
     VS = Peak input voltage (if there is a transformer, this is the secondary voltage) NEVER use Vrms for Vs.
     V = Vo,pk = Peak output voltage across the load resistor
     VD = Diode drop (Depends on the current, but we will assume 0.7 V for calculations (See Figure 6.2)
     Vr = Ripple Voltage. The difference between Vo,pk and the minimum of the rectified/filtered Vout signal.

               Note: Vr = V if it is NOT a peak rectifier (i.e. no capacitor).
     fi =The frequency of the input signal (usually 60 Hz in U.S.)
     R = Load Resistor
     C = Capacitor that is in parallel with the load resistor
     Vo,DC = The DC (or average) voltage across the load resistor. (This is typically what you design for). The

         approximate equation for VO,DC in Table 6.1 is more accurate the smaller the value of Vr.
     PRV = Peak Reverse Voltage for each of the diodes (also called PIV, Peak Inverse Voltage).

         For a sinusoid input this calculated value must be < the peak repetitive reverse voltage limit found on
             the spec. sheet. For the 4000 series rectifier diodes the PRV limit increases from 1N4001 to 4007.

         The continuous reverse voltage limit on the spec. sheet is referring to a situation where you have a
             large DC value being blocked by the diode.

     iD,avg = Average current of the diode. This value should be less than the average forward rectified current
         limit on the spec. sheet.

     iD,max = Peak current of the diode. This value should be less than the maximum forward rectified current
         limit on the spec. sheet.

     IL = Vo,DC / R = This is approximately the average current through the load resistor.

Example 6.6) Calculate the ripple voltage, %Vr, and approximate DC voltage for the Full Wave bridge peak
rectifier in Figure 6.18. Assume all diodes have voltage drops of 0.7 Volts.

The circuit in Figure 6.18 shows the Full Wave bridge peak rectifier drawn in two different ways. The left circuit
requires a diode bridge to be used (4 diodes in one package configured as a bridge). The right circuit is much
more convenient and useful because it allows for specific individual diodes (such as the 1N4007) to be used.

82
V1         T1     1 D1
         10:1
120Vrms        4  3
60Hz
0

                  2 1B4B42   C1   R1
                            10킚  2.5k

Figure 6.18: Full-Wave Peak Bridge Rectifier for Example 6.6.

     Vin,rms = Vp,rms = 120Vrms
     Vin,pk = Vp,pk = 120*sqrt(2) =169.7 V
     Vs,pk = 169.7/(Turns ratio) = 169.7/(Np/Ns) = 169.7/10 = 16.97 V
     Vo, pk = Vs,pk - 2*0.7V = 15.6 V
     Vr = Vo,pk/(2*fi*R*C) = 15.6/(2*60*2500*10e-6) = 5.2 V (Note: The 2 is used for a full wave rectifier)
     % Vr = Vr/Vo,pk = 5.2/15.6 = 33.3%
     VO,DC = Vo,pk -  (Vr) = 15.6 -  (5.2) = 13 V

Example 6.7) Determine the turns ratio of the transformer and the capacitor value needed if you wanted to use a
half-wave peak rectifier with a 1N4007 diode to produce a DC voltage of 24 V with 10% ripple from a standard
120 Vrms 60 Hz AC power outlet. You are required to use a load resistor of 100 .

     Given  %Vr =10% Equation 1) %Vr = 0.1 = Vr/Vo,pk
     Given  VO,DC = 24 Equation 2) VO,DC = 24 = Vo,pk -  (Vr)
     Solve equations 1 and 2 for Vo,pk and Vr  24 = Vo,pk - (0.1 Vo,pk) = 0.95 Vo,pk  Vo,pk = 25.3V
     Vr = 0.1Vo,pk  Vr = 2.53 V
     We need to select a transformer turns ratio that puts Vo,pk = 25.3.
     Vs = Vo,pk + 0.7  Vs = 26 V
     Turns Ratio = 169.7/26  Np/Ns = 6.527 (At this point it would be best to select a common transformer

         you can purchase like a 6:1 and recalculate the Vr needed, but we will leave it as 6.527 in this example.
     Vr = 2.53 V = Vo,pk/(fi*R*C)  2.53 V = 25.3 V/(60*100*C)  C = 1.667 mF

Figure 6.19: Full-Wave Peak Rectifier design for Example 6.7.
83
Module 7 -Operational Amplifiers (OpAmps)

Operational Amplifiers (OpAmps) are integrated circuits (ICs) with a minimum of 5 pins. Sometimes multiple
OpAmps are packaged together in a single IC. One example of this style of packaging is the LM324 Quad OpAmp.
The two types of LM324 IC packages available are the 14 pin Dual Inline Package (DIP) and the 14 pin Small
Outline Package (SOP). The pinout mapping and a photo of the DIP package are shown in Figure 7.1. The LM324
is an inexpensive general purpose (i.e. low power) OpAmp (see Figures 7.8 and 7.9 for more info). For details
about this OpAmp read the datasheet at this link: https://www.fairchildsemi.com/datasheets/LM/LM324.pdf

OUT 1 1                                  14 OUT 4
IN1 (-) 2                                13 IN4 (-)
IN1 (+) 3                                12 IN4 (+)
  Vcc 4                                  11 GND
IN2 (+) 5                                10 IN3 (+)
IN2 (-) 6                                9 IN3 (-)
OUT 2 7                                  8 OUT 3

Figure 7.1: LM324 Quad OpAmp IC Pinout (Left), LM324 14-DIP package photo (Right)

The 14-DIP (Dual Inline Package) is called a "through-hole" part. Its pins can be plugged into a breadboard or
into holes on a printed circuit board (PCB) or soldering proto board. The 14-SOP (Small Outline Package) is a
"surface mount" part. It is one of the most popular surface mount IC packages and its 14 pins can only be
connected by soldering them to pads on a PCB. The names for each of the 14 pins are shown in Figure 7.1. To
minimize the number of pins required all 4 of the OpAmps use the same power pins. Pin 4 (Vcc) is called the
positive rail and pin 11 (GND) can either be grounded for circuits only needing a single supply (where the output
can go from 0V to Vcc) or connected to a negative voltage for circuits requiring a dual supply (where the output
can go from - Vcc to + Vcc). The LM324 datasheet states that the limits for supplies for this OpAmp are: (min =
1.5V, max = 16V for a Dual Supply) or (min = 3V, max = 32V for single supply). Figure 7.2 shows the standard
method of connecting power to an OpAmp in both dual and single supply options (Note that the rails must be
reversed for Multisim simulations). OpAmps have 2 inputs (inverting or - input) and (non-inverting or + input)
and one output (Vout). Note: There some additonal OpAmp example problems at the end of the Appendix.

                                   Note: This Figure shows the standard way to draw power rails, but Multisim

                    Positive Rail requires the positive and negative rails to be reversed (See Figure 7.3).    Positive Rail
                                                                                                                12V
    Vcc             12V                               Positive Rail Vcc
                                                                                                                                Vout
                                                      12V                                                       OPAMP_5T_VIRTUAL

Vin_inv                            Vout  Vin_inv                          Vout  Vin_inv                        Grounded
Vin_non-inv         OPAMP_5T_VIRTUAL     Vin_non-inv       OPAMP_5T_VIRTUAL     Vin_non-inv                    Negative Rail
                    12V
             - Vcc

                    Negative Rail                     -12V

                                                      Negative Rail

Figure 7.2: Dual Supply (Left), Dual Supply Alternate Form (Middle), Single Supply (Right).

84
As noted in Figure 7.2 Multisim requires the positive and negative rails to be reversed from the standard way of
drawing them. If you connect power rails as they are shown in Figure 7.2 Multisim gives the following error
when running a simulation: "A simulation error has occurred. Would you like to run the Convergence Assistant to
attempt to resolve this problem automatically?" If Yes is selected it takes a long time to try to fix the problem,
but isn't able fix it. The way Multisim requires the power rails to be drawn is shown on the top right of Figure
7.3.

The OPAMP_5T_VIRTUAL in Multisim is a good part to use (and will be used for all circuits in this eBook)
because the default internal parameters allow it to closely match hand calculations with the Ideal OpAmp
Model (Explained in Section 7.2) and also allow easy adjustments of these parameters if needed. Double clicking
on the OpAmp in Multisim brings up the interface in Figure 7.3 that can be used to set the OpAmp internal
parameters. The 5 parameters that factor into whether or not an OpAmp can be assumed to be "ideal" are
shown in the bottom right section of Figure 7.3. The parameters (A, FU, CMRR, RI) that are labeled 1) through 4)
in Figure 7.3 are assumed to be infinity for the Ideal Model and the values for those parameters in the
OPAMP_5T_VIRTUAL are large enough to be approximated as infinity. The 5th parameter is R0 which is 10  for
the OPAMP_5T_VIRTUAL and assumed to be 0 for the Ideal Model. A 10  value is close enough to zero for the
Ideal Model to give accurate results as long as the output of the OpAmp is not connected to a load resistance
that is too small. If the load resistance is smaller than around 1 k then it is best to set the R0 value to a lower
value (or even to 0) to closely match the Ideal Model calculations with Multisim. The "output short circuit
current" parameter is the maximum allowable current that can be sourced or sinked by this OpAmp. In Figure
7.3 it is labeled with an * next to. Since it only has a 25 mA value it might need to be increased. If it is changed to
a very large value (like 1000 Amps) then you won't have to worry about the current being limited internally by
the OpAmp model in Multisim and the calculations will match the simulations more closely.

Learning about the details of the parameters in Figure 7.3 are important to gain a full understanding of OpAmps,

but it will be left out in this eBook. A Texas Instrument (TI) white paper SLOA011 titled "Understanding

Operational Amplifier Specifications" provides more information about the internal parameters of OpAmps. TI

has an abundance of high quality technical literature that will be frequently referenced in this module.

                 Negative Rail

                     -12V

                               Negative Rail must be placed on the

        Vin_inv            side of the - input terminal in Multisim

                                  Vout

        Vin_non_inv

                     OPAMP_5T_VIRTUAL

    1)               +12V

                     Positive Rail

    2)  Note: The Output Short Circuit Current is the maximum current the

        OpAmp can source or sink. *You might need to increase this value.

    3)  IDEAL OpAmp Assumptions (Opamp_5T_Virtual is assumed Ideal):

        1) Open loop gain (A or A0) =   200 kV/V in Multisim

    *   2) Unity-gain Bandwidth (FU or ft) =  100 MHz in Multisim

    4) 3) Common Mode Rejection Ratio (CMRR) =  100 dB in Multisim
        4) Input Resistance (RI) =   10 M in Multisim

    5)  5) Output Resistance (RO) = 0  10  in Multisim

Figure 7.3: 5-Terminal Virtual OpAmp Internal Parameters and method to connect power rails in Multisim.

The following link is a 94 page document that provides a good overview of OpAmps and includes many
applications and useful OpAmp-based circuits. This document titled "HANDBOOK OF OPERATIONAL AMPLIFIER
APPLICATIONS" had its latest revision in September 2016. http://www.ti.com/lit/an/sboa092b/sboa092b.pdf

85
One thing that is not addressed in that TI Handbook is active filtering. Module 4 described passive filtering with
RLC circuits, but for many applications active filtering with OpAmps is preferred. The following two links to TI
documents provide good information about active filtering.

     SLOA093: "Filter Design in 30 Seconds"     http://www.ti.com/lit/an/sloa093/sloa093.pdf

     SLOA096: "More Filter Design on a Budget" http://www.ti.com/lit/an/sloa096/sloa096.pdf

I would be remiss if I didn't also mention "The Art of Electronics" by Horowitz and Hill because many consider it
the ultimate source for anything involving analog electronics. Unfortunately, there is no eBook on this one, but
having this document on your shelf will make you feel like a real Electrical or Computer Engineer and give you a
nice reference to have on hand in case you need an additional resource.

Section 7.1 - OpAmps Used as Comparators

A comparator is a device that compares two input pins and sends the output to one of the rails depending on
which output is higher. Ideally, an IC specially designed to operate as a comparator (like the LM293) would be
used for this type of application, but people often will simply use an OpAmp in "open loop" mode (i.e. without
feedback). The following TI document explains the reasons for not using OpAmps as comparators and also
elaborates on the differences between them: SLOA067 - Op Amp and Comparators - Don't Confuse Them!

With that said, if an OpAmp is used as a comparator no feedback is included to limit the gain of the OpAmp (as
will be done when designing amplifiers in Section 7.2). Since the gain (Vout/Vin) is not limited it will be equal to
the "Open Loop Gain, A0" (or internal gain of the OpAmp), which is nearly infinite. Since the Vout is limited by
the rail voltages the output of a comparator is always equal to one of the rail voltages (+Vcc, -Vcc, or ground).
Figure 7.4 shows a dual supply comparator circuit (Left) and a single supply comparator circuit (Right) drawn
with the positive and negative supplies connected to the locations that will allow the circuit to be correctly
simulated in Multisim. These "reversed positive and negative rail connections" will be done in all circuits in the
remainder of this module, but remember that it is the opposite of how it will normally be shown in technical
documents.

          Current is positive if it flows in                                 This OpAmp is
          the direction of the triangle.                                     sourcing current.
          This OpAmp is sinking current.

Figure 7.4: Dual Supply Comparator (Left), Single Supply Comparator (Right)

     If Vin_non_inv > Vin_inv then Vout  +Vcc.  or  V(+) > V(-) then Vout  +Vcc

     If Vin_inv > Vin_non_inv then Vout  -Vcc for the dual supply circuit or 0V for the single supply circuit.

Vout is assumed to go all the way to the rail voltage in open loop configurations, but there is often a signal swing

limit that will prevent the OpAmp from going all the way to the rail. In Figure 7.4 Vout only goes to 11.943V

instead of 12V. Special OpAmps designed to go "rail to rail" are often needed if Vout needs to go to Vcc. Once

Vout is determined from the two bullets above the current through the load (RL) can be calculated as IRL =

Vout/RL.

86
     If Vout is > 0 then current is sourced OUT OF the OpAmp and down through the load.
     If Vout is < 0 then current is sinked INTO the OpAmp and up through the load.

Example 7.1) Determine Vout and the magnitude and direction of the current across the load resistor in the
following circuit before (Left circuit) and after the switch is closed (right circuit) if Vin = 5V. Does the OpAmp
source or sink current for each case? The simulated results are shown in the Figure below.

Figure 7.5: Circuit before (Left) and after (Right) Switch, S1 is closed if Vin = 5 V.

Before solving this problem some explanations are needed. When designing a comparator circuit (either with an
OpAmp or with a comparator IC) one of the input pins (either V(+) or V(-)) is often set to a fixed reference
voltage. Since almost no current flows into either of the input pins of an OpAmp or a comparator IC due to the
near-infinite input resistance a voltage divider can be used to set the reference voltage. In Figure 7.5, for both
the left and right circuits, the reference voltage (Vref) is set using the following voltage divider rule (VDR)
equation:

       Vref = 12  1k/(1k + 2k) = 4 V
Vref is tied to V(-) in this circuit, but it could just have easily been connected to V(+) if the situation called for it.
This is a very practical circuit that is used extensively when integrating sensors in circuitry. The "Vin" voltage in
Figure 7.5 could be the voltage from a sensor and the design calls for Vout to go to 12 V when Vin is greater than
Vref and to - 12 V when Vin is less than Vref (or if the switch isn't closed). With that said it is time to solve the
problem.

Before the Switch is closed
 The pulldown resistor is necessary so that before the switch is closed V(+) is tied to ground (0V). Without

    the pulldown resistor V(+) would be connected to an open circuit and would be "floating" at an unknown
    voltage. A large value is usually used for a pullup or pulldown resistor so there is not very much current
    wasted.
 As previously stated V(-) = Vref = 4 V from the VDR calculation.
 Since 4V > 0V V(-) > V(+)  Vout = -12 V
 The current flows up through the load  IRL = (0- -12)/1000 = 12 mA (Up)
 The OpAmp is sinking current since the current flows into it. The negative supply is supplying all of the
    power to this circuit before the switch is closed.
After the Switch is closed
 Vin (5V) is connected to the 100 k pulldown resistor making V(+) = 5V.
87
 As previously stated V(-) = Vref = 4 V from the VDR calculation.
 Since 5V > 4V V(+) < V(-)  Vout = +12 V
 The current flows down through the load  IRL = (12 - 0)/1000 = 12 mA (Down)
 The OpAmp is sourcing current since the current flows out of it. The positive supply is supplying all of the

    power to this circuit after the switch is closed.
If using an actual comparator IC (like the previously mentioned LM293) was used the first step to simulating it in
Multisim would be to search for the part. Figure 7.6 shows how to search for it. Select "All Groups: and type in
LM293 in the component field. In this case, 4 options including LM293 at the beginning of the name appear and
all are surface mount ICs, but they will have close to the same properties as the through-hole DIP version. The
LM293 is an 8-pin Dual comparator which means there are two comparators in the IC.

                                                                                        Two Comparators can be selected
                                                                                        (A, B). The pin numbers will be
                                                                                        different depending on which one
                                                                                        is selected. In Figure 7.7 both A
                                                                                        and B are selected and all pin
                                                                                        numbers are shown in Multisim.
                                                                                        Since the 2 comparators on the
                                                                                        Dual IC have a common ground
                                                                                        and Vcc only one has to be
                                                                                        connected to Vcc and ground and
                                                                                        the other two show a red x.

Figure 7.6: Searching for parts in Multisim - LM293, 8-pin Dual Comparator selected

Figure 7.7: Circuit using the LM293 showing that the output goes low and sinks current when IN- > IN+

88
The circuit in Figure 7.7 shows that the LM293 operates in an active low configuration, where it turns an LED on
by sinking current through it when IN- > IN+ (Note: IN- is labeled Vref on the schematic). The LM293 has a high
impedance (or Open Collector) output so a pullup resistor has to be used for it to work the way it is was
intended. In Figure 7.7 the pullup resistor is put in series with an LED so it will turn on an LED when the output
goes low. When IN+ > IN- it doesn't source current like a normal OpAmp operates (as shown in Figure 7.5).
Instead, it sends the output to Vcc so that no current flows between Vcc and the pullup resistor because there is
no voltage difference  Recall from the Davis DC Circuits book: IR = V/R = (Vcc - Vcc)/R = 0

Section 7.2 - OpAmps used as Amplifiers

For this section the OPAMP_5T_VIRTUAL part in Multisim will also be used for all circuits except the one in
Figure 7.9 and Figure 7.11. Those circuits are built using the LM324 that was described in Figure 7.1.

                                                                                                    Of the 25 LM324 options, a DIP version
                                                                                                    from Fairchild Semiconductor (referred
                                                                                                    to in Figure 7.1) will be selected
                                                                                                    (LM324AN). Note: An ON
                                                                                                    Semiconductor part is selected instead
                                                                                                    because they acquired Fairchild
                                                                                                    semiconductor in 2015. PDIP stands for
                                                                                                    "Plastic Dual Inline Package" and is one
                                                                                                    of the most popular IC types for
                                                                                                    through-hole applications. Note: DIP
                                                                                                    packages will have higher power
                                                                                                    ratings than surface mount parts. The
                                                                                                    LM224 is selected in the "Model
                                                                                                    manufacturer/ID", because this is in
                                                                                                    the same family as the LM324. Notice,
                                                                                                    there are 4 OpAmps (A, B, C, D) that
                                                                                                    can be selected. In Figure 7.9 an
                                                                                                    example is shown that uses all 4
                                                                                                    OpAmps in a circuit.

Figure 7.8: Searching for parts in Multisim - LM324 14-pin Quad DIP OpAmp selected

The circuits in Figures 7.9 to 7.12 include four OpAmps and is used to amplify a signal at four different gains and
turn on LEDs. Figure 7.9 shows has a DC input voltage and shows how all 14 of the LM324 quad OpAmp would
be implemented for this circuit and Figure 7.10 shows the results if the LM 324 is replaced with four virtual
OpAmps (OpAmp_5T_Virtual). The green LED has an adjustable current threshold. By double clicking on the LED
in Multisim the threshold can be changed. The 5 mA default is used in all of the figures in this eBook. For the
circuits in Figure 7.9 and Figure 7.10 with a DC input of 120 mV all OpAmps source enough current to turn on the
LEDs except the OpAmp connected to LED4. The 470  resistor is used to limit the current through the LEDs to
around 20 mA, which is a common current rating for many types of LEDs. When the input is a DC voltage the
results are nearly identical for the LM324 (Figure 7.9) and the virtual OpAmp (Figure 7.10). The only significant
difference can be seen in the output of the top left OpAmp that is connected to LED1. It has a gain large enough
to saturate the OpAmp. Saturating the OpAmp (also commonly referred to as clipping) occurs when your output
is limited by the rail voltage. The Virtual OpAmp allows Vout to go very close to the positive 12 V rail, but the
LM324 limits the voltage to 10.3 Volts in this example.

89
Figure 7.9: Non-Inverting Configuration Example that uses all 4 of the LM324 OpAmps with a DC input.

Figure 7.10: The circuit in Figure 7.9 with the OpAmps replaced with the Virtual 5 Terminal OpAmp.
For DC input signals, the closed loop gain (G = Vout/Vin) is usually very close to the Ideal OpAmp gain
(Equations 7.2 and 7.3 for the inverting and non-inverting OpAmp configurations respectively) for all types of
OpAmps because the open loop gain (A0) is always an extremely large value (e.g. 200,000 V/V for the Virtual
OpAmp in Figure 7.3), but in reality A0 and G are reduced as the frequency increases once the frequency reaches
the OpAmps internal 3dB frequency (which usually occurs at low frequencies). For example, the 3dB internal
frequency for the LM324 is approximately 30 Hz when Vcc = 15 V and ~ 80 Hz when Vcc = 30 V as shown in
Figure 5 of the LM324 datasheet. The ideal closed loop gain equations are modified for the situation where A0 is
NOT assumed to be infinity and are shown in Equation 7.4. When the signal is a high frequency sinusoid then the
Vout is greatly reduced in the LM324 (Figure 7.11), but not in the Virtual OpAmp (Figure 7.12) because the
Virtual OpAmp assumes A0 remains at 200,000 V/V for all frequencies.

90
Figure 7.11: Example circuit that uses all 4 of the LM324 OpAmps with an 10 kHz AC input.

Figure 7.12: The circuit in Figure 7.11 with the OpAmps replaced with the Virtual 5 Terminal OpAmp.
Important OpAmp terms that have been previously mentioned are described in more detail in the bullets below
along with the inverting and non-inverting gain equations. Sections 7.2.1 and 7.2.2 show example circuits.

     Closed loop voltage gain (G) is equal to Vout/Vin when a feedback resistor (Rfb) is connected from the
         output pin of the OpAmp to the inverting (-) terminal of the OpAmp as shown in the circuits in Figure 7.9
         to 7.12. If Rfb is replaced with a wire (or Rfb = 0 ) the gain is equal to 1 V/V for the non-inverting
         configuration and 0 V/V for the inverting configuration.

     Open loop voltage gain (A0) is the internal gain of the OpAmp. A0 is assumed to be equal to infinity at
         low frequencies and decrease by approximately 20 dB/dec as frequency increases. A0 would be the gain
         of the OpAmp if no feedback resistor is included and the OpAmp operates in the open loop mode as a

91
        comparator as shown in Figures 7.4 and 7.5. A0 will always be large enough to send the output to one of
        the rail voltages if no feedback (Rfb) is included in the OpAmp.
     Ideal Gain equations are simplified equations for closed loop gain and have the following assumptions:

             1) Open loop gain (A0) = 
             2) Unity-gain Bandwidth (FU or ft) = 
             3) Common Mode Rejection Ratio (CMRR) = 
             4) Input Resistance (RI) = 
             5) Output Resistance (RO) = 0
     As frequency increases the assumptions 1) and 2) of the ideal model are not valid and cause the open
        loop gain (A0) to become small enough that the ideal gain equations become increasingly inaccurate.
        This results in the need for a new set of gain equations where A0 is assumed to be finite. If the input
        frequency is beyond the internal 3 dB frequency of the OpAmp (f3db) a good approximation of A0 can be
        found from Equation 7.1, where fin is the input frequency and ft is the OpAmps Unity Gain Bandwidth.

    [7.1] 0       * This is a good approximation when fin > f3dB

     Inverting Configuration: If the input voltage is connected the in input resistance (Rin) that is connected
        to the inverting (-) terminal of the OpAmp it is called the "inverting configuration". An example with a
        DC input is shown in Figure 7.13 and an example with an AC signal is shown in Figure 7.14. The closed
        loop gain equations for an inverting OpAmp are shown in 7.2 and 7.3.

    [7.2]  =    - 

     Non-Inverting Configuration: If the input voltage is connected to the in non-inverting input terminal (+)
        of the OpAmp it is called the "non-inverting configuration". An example with a DC input is shown in
        Figure 7.15 and an example with an AC signal is shown in Figure 7.16.

    [7.3]  =    1 +  

     Finite A0 gain OpAmp equation: If A0 cannot be assumed to be infinity (usually because the input
        frequency it too high) then equations 7.2 and 7.3 can be corrected using Equation 7.4.

    [7.4]   =              * Note: When A0 is infinity then G = Gideal.

                         
                  1 + 1+
                  0

Section 7.2.1 - Inverting OpAmp Configuration
The inverting OpAmp configuration is shown in Figure 7.13 (DC input) and Figure 7.14 (AC input).

92
Figure 7.13: Inverting Configuration with a DC input.
In the circuit below the instantaneous voltage values (top numbers) are also shown so you can see that at that
moment in time the circuit behaves exactly like the DC circuit in Figure 7.13 (Vout = -.994V  (-3 V/V) = 2.98 V).

Figure 7.14: Inverting Configuration with an AC input.
Since the virtual OpAmp in Figure 7.14 has a fixed A0 of 200,000 V/V regardless of the input frequency the ideal
gain in Equation 7.2 matched closely with the Multisim measurements. If an actual OpAmp were used (like the
LM324) the gain would be reduced due to the increase in frequency that results in a finite A0. For this same
reason, Multisim also matches the Non-inverting OpAmp configuration circuit with an AC input in Figure 7.16.

93
Section 7.2.2 - Non-Inverting OpAmp Configuration
The non-inverting OpAmp configuration is shown in Figure 7.15 (DC input) and Figure 7.16 (AC input).

Figure 7.15: Non-Inverting Configuration with a DC input.
Figure 7.16: Non-Inverting Configuration with an AC input.
94
Section 7.3 - Superposition with OpAmps

With DC circuits the superposition principle was a good method for solving circuits with multiple inputs and can
also be applied to OpAmp circuits. Superposition is accomplished by breaking the overall problem with multiple
inputs up into sub-problems where the circuit was solved "Due to Only" one input at a time and then the values
are added together to get the result due to all inputs. The inputs not involved in the sub-problem are "zeroed
out" as follows.

      Independent Voltage Sources are replaced with short circuits.
      Independent Current Sources are replaced with open circuits.
Using the equations in section 7.2 and the superposition method more complicated OpAmp circuits can be
solved. The example in Figure 7.17 shows a "Differential Amplifier" configuration where Rin and Rfb from
section 7.2 is replaced with R1 and R2. Note: In OpAmp technical documents Rfb is commonly referred to as R2
and Rin is commonly referred to as R1. A voltage divider with R3 and R4 is used on the + OpAmp input such that
V(+) = Vin2R4/(R3+R4). Recall that this voltage divider is possible because we assume that NO Current flows
into either input terminal of the OpAmp due to the infinite input impedance assumption.

Figure 7.17: Differential OpAmp Configuration.
In Figure 7.18, a summing amplifier is simulated and solved using the superposition method. Two additional
OpAmp circuits are shown in the Appendix: 4th order Butterworth Low Pass Filter in Figure A.4 and an
instrumentation amplifier in Figure A.5.

Figure 7.18: Summing OpAmp Configuration.
95
References and Links

The following references and links provide supporting information for this module. All references in this module
are either cited within the module within brackets or URL links are either embedded in hyperlinks or fully listed.

References and Links not listed in other Modules

 [1] DC Circuits, Chad Davis: https://shareok.org/handle/11244/52245
 [2] http://www.allaboutcircuits.com/textbook/semiconductors/
 [3] Electronics Overview: http://www.allaboutcircuits.com/textbook/semiconductors/
 [4] Multisim: http://www.ni.com/multisim/

Module 1 - References and Links

 [5] AC and DC Background: http://www.allaboutcircuits.com/news/why-is-the-us-standard-60-hz/
 [6] Electrical Safety: http://www.allaboutcircuits.com/textbook/direct-current/chpt-3/ohms-law-again/
 [7] Frequencies of different musical notes: http://www.allaboutcircuits.com/textbook/alternating-

         current/chpt-1/ac-waveforms/
 [8] Sampling Information: http://www.dspguide.com/ch3/2.htm
 [9] Square wave information: http://www.allaboutcircuits.com/textbook/alternating-current/chpt-

         7/square-wave-signals/
[10] Square wave information: https://en.wikipedia.org/wiki/Square_wave
[11] Triangle wave information: https://en.wikipedia.org/wiki/Triangle_wave

Module 3 - References and Links

[12] RLC Calculations: http://hyperphysics.phy-astr.gsu.edu/hbase/electric/powerac.html
[13] Rigol Oscilloscope Information: http://www.prc68.com/I/RigolDS1052E.shtml
[14] Error simulating inductors in MultiSim: https://forums.ni.com/t5/Multisim-and-Ultiboard/Offset-

         problem-in-simulating-current-and-voltage-phase-relation/td-p/1194627
[15] Alternating Current eBook: http://www.allaboutcircuits.com/textbook/alternating-current/chpt-14/50-

         ohm-cable/
[16] Electrical effects of the physical size of the transmission lines:

         http://www.allaboutcircuits.com/technical-articles/introduction-to-the-transmission-line/
[17] The following link shows a figure with more information about the electrical grid and includes different

         sources of electrical generation such as: wind, solar, hydro-electric, nuclear, and coal:
         https://commons.wikimedia.org/wiki/File:Electricity_Grid_Schematic_English.svg

Module 4 - References and Links

[18] Filter Overview: http://www.allaboutcircuits.com/textbook/alternating-current/chpt-8/what-is-a-filter/

Module 5 - References and Links

[19] History of the transformer: https://en.wikipedia.org/wiki/War_of_Currents
[20] Transformer Basics: http://www.allaboutcircuits.com/textbook/alternating-current/chpt-9/mutual-

         inductance-and-basic-operation/
[21] Transformer Video Lectures; http://www.allaboutcircuits.com/textbook/alternating-current/chpt-

         9/mutual-inductance-and-basic-operation/
[22] Rectifiers: http://www.allaboutcircuits.com/textbook/semiconductors/chpt-3/rectifier-circuits/

96
[23] Faraday's Law: http://www.allaboutcircuits.com/textbook/alternating-current/chpt-9/mutual-
         inductance-and-basic-operation/

[24] Internal Diagram of a Transformer:
         https://en.wikipedia.org/wiki/Transformer#/media/File:Transformer3d_col3.svg

Module 6 - References and Links

[25] 1N914 switching diode datasheet: https://www.fairchildsemi.com/datasheets/1N/1N914.pdf
[26] 1N4000 series rectifier diode datasheet: https://www.fairchildsemi.com/datasheets/1N/1N4007.pdf
[27] Diodes Sparkfun tutorial: https://learn.sparkfun.com/tutorials/light-emitting-diodes-

         leds?_ga=1.259343308.774591033.1477860341
[28] Red LED ordering info: https://www.sparkfun.com/products/9590
[29] Green LED ordering info: https://www.sparkfun.com/products/9592
[30] Diode Overview: http://www.futureelectronics.com/en/diodes/diodes.aspx
[31] Diode Overview: http://www.allaboutcircuits.com/textbook/semiconductors/chpt-3/introduction-to-

         diodes-and-rectifiers/
[32] BS170 MOSFET datasheet: http://www.onsemi.com/pub_link/Collateral/BS170-D.PDF

Module 7 - References and Links

[33] LM324 OpAmp datasheet: https://www.fairchildsemi.com/datasheets/LM/LM324.pdf

[34] A Texas Instrument (TI) white paper SLOA011 titled Understanding Operational Amplifier Specifications:

    http://www.ti.com/lit/an/sloa011/sloa011.pdf

[35] Texas Instrument (TI) Handbook of Operational Amplifier Applications:

    http://www.ti.com/lit/an/sboa092b/sboa092b.pdf

[36] SLOA093: "Filter Design in 30 Seconds"  http://www.ti.com/lit/an/sloa093/sloa093.pdf

[37] SLOA096: "More Filter Design on a Budget" http://www.ti.com/lit/an/sloa096/sloa096.pdf

[38] Art of Electronics: https://www.amazon.com/Art-Electronics-Paul-

    Horowitz/dp/0521809266/ref=dp_ob_title_bk

[39] SLOA067 - Op Amp and Comparators - Don't Confuse Them!:

    http://forums.parallax.com/discussion/download/96248&d=1350228174

97
Appendix

Figure A.1 shows the step response and the Bode magnitude plots for a series RL LPF with the same topology as
shown in Figure 4.5 and a series RC HPF with the same topology as shown in Figure 4.6. The step response is the
output voltage across the resistor if the input voltage is a 1 V DC source that is suddenly applied with a switch.
The LPF (RL Circuit with black curves in Figure A.1) shows that the input voltage is passed to the output since
Vout at steady state is 1 V. When studying DC transients in the DC circuits eBook the equation for vC(t) and vR(t)
was found to be: (t) =   (1 - -) and (t) =   (-) Click Here to Go Back to Module 4.

The HPF (RC Circuit with red curves in Figure A.1) shows that the input voltage is blocked and doesn't pass to the

output since Vout at steady state is 1 V. When studying DC transients in the DC circuits eBook the equation for
vC(t) and vR(t) was found to be: (t) =   (1 - -) and (t) =   (-)

Figure A.1 - Step Response and Bode Plots for Series RC Circuit with   % Step response and Bode Magnitude Plot of a RC and
R = 100 , C = 0.01 킚 and Series RL Circuit with R = 100 , L = 10 mH.  RL series circuits
                                                                       C = 0.01e-6;
                                                                       L = 10e-3;
                                                                       R = 100;
                                                                       syms s
                                                                       Zt1 = R + 1/(C*s);
                                                                       Zt2 = R + L*s;
                                                                       Vin_s = 1; %Laplace Transform of delta function
                                                                       Vout1_s = Vin_s*R/Zt1; %VDR
                                                                       Vout2_s = Vin_s*R/Zt2; %VDR
                                                                       % Since Vin_s is equal to 1 Vout_s is actually equal to
                                                                       (Vout(s)/Vin(s))
                                                                       TF1_sym = Vout1_s;
                                                                       TF2_sym = Vout2_s;
                                                                       % Find the numerator & denominator of TF_sym
                                                                       [num_TF1_sym,den_TF1_sym]=numden(TF1_sym)
                                                                       [num_TF2_sym,den_TF2_sym]=numden(TF2_sym)
                                                                       % Convert num & den to polynomial form
                                                                       num_TF1 = sym2poly(num_TF1_sym);
                                                                       den_TF1 = sym2poly(den_TF1_sym);
                                                                       num_TF2 = sym2poly(num_TF2_sym);
                                                                       den_TF2 = sym2poly(den_TF2_sym);
                                                                       % Find the transfer function (Vo/Vin)
                                                                       sys_TF1 = tf(num_TF1,den_TF1);
                                                                       sys_TF2 = tf(num_TF2,den_TF2);
                                                                       figure(1)
                                                                       subplot(2,1,1),step(sys_TF1,'r')%This is the step
                                                                       response
                                                                       title ('Vout across R in a Series RC Circuit with 1 VDC
                                                                       input'), ylabel('V_R (Volts)')
                                                                       subplot(2,1,2),step(sys_TF2,'k')%This is the step
                                                                       response
                                                                       title ('Vout across R in a Series RL Circuit with 1 VDC
                                                                       input'), ylabel('V_R (Volts)')
                                                                       figure(2)
                                                                       subplot(2,1,1),h1 = bodeplot(sys_TF1,'r')
                                                                       setoptions(h1,'FreqUnits','Hz','PhaseVisible','off')
                                                                       title ('Bode Plot of Vout across R in a Series RC Circuit')
                                                                       subplot(2,1,2),h2 = bodeplot(sys_TF2,'k')
                                                                       setoptions(h2,'FreqUnits','Hz','PhaseVisible','off')
                                                                       title ('Bode Plot of Vout across R in a Series RL Circuit')

98
The following is an example of a 2nd order LPF that is solved for in Matlab in Figure A.2. The problem is solved
using the Laplace method in Matlab and the step response and Bode plot are shown below. The problem is also
solved for by hand to get vout(t) (Shown in bold - called vo_calc) and the step response of vout(t) is plotted
below the Matlab solution step response to show the same results are achieved. Click Here to Go Back to
Module 4.

                                                  Code

syms s t;

A = [0.1*s+1 -1;

-1               1+0.1*s+1];

B = [1;0];

Vout = inv(A)*B

[num_sym,den_sym] = numden(Vout(2))

hs = tf(sym2poly(num_sym),sym2poly(den_sym))

%The following was calculated using partial fractions expansion and taking

the inverse Laplace transform of Vout(s).

vo_calc = 1 - 1.171*exp(-3.819*t) + 0.170*exp(-26.180*t);

time = 0:0.05:3; %first 3 seconds

f2 = symfun(vo_calc,t);

vo_t_calc = double(f2(time'));

figure(1);

subplot(2,1,1);

step(hs);

axis([0 3 0 1])

subplot(2,1,2);

plot(time,vo_t_calc);

title('Calculated Step Response');

axis([0 3 0 1])

xlabel('Time(seconds)');

ylabel('Amplitude');

bode(hs)

                                                  Figures

      Figure A.2 - 2nd Order LPF Matlab Solution
99
The following is an example of a 2nd order HPF that is solved for in Matlab in Figure A.3. The problem is solved
using the Laplace method in Matlab and the step response and Bode plot are shown below. The problem is also
solved for by hand to get vout(t) (Shown in bold - called vo_calc) and the step response of vout(t) is plotted
below the Matlab solution step response to show the same results are achieved. Click Here to Go Back to
Module 4.

                                                  Code

syms s t;

A = [1*s+1/(0.1*s) -1/(0.1*s);

-1/(0.1*s)               1/(0.1*s)+1+1];

B = [1;0];

Vout = inv(A)*B

[num_sym,den_sym] = numden(Vout(2))

hs = tf(sym2poly(num_sym),sym2poly(den_sym))

%The following was calculated using partial fractions expansion and

taking the inverse Laplace transform of Vout(s).

vo_calc = 1/2-1/2*exp(-3*t)*cos(1.118*t)-1/1.118*exp(-3*t)*sin(1.118*t);

time = 0:0.05:3; %first 3 seconds

f2 = symfun(vo_calc,t);

vo_t_calc = double(f2(time'));

figure(1);

subplot(2,1,1);

step(hs);

subplot(2,1,2);

plot(time,vo_t_calc);

title('Calculated Step Response');

xlabel('Time(seconds)');

ylabel('Amplitude'); bode(hs);

                                                  Figures

      Figure A.3 - 2nd Order HPF Matlab Solution
100
Figure A.4 shows an example of an active filter. This filter is a 4th order Butterworth LPF filter with a 3db
frequency at approximately 1 kHz. The Bode magnitude plot is shown. Since it is a 4th order filter (4 capacitors
are present) the slope of the stop band increases from -20 dB/dec for a 1st order LPF (as described in Module 4)
to -80 dB/dec. This means that at 10 kHz (on decade beyond the - 3 dB point) the gain will drop to approximately
-83 dB. Each of the OpAmps is a 2nd order LPF and when two are cascaded in series it produces a 4th order filter.
A third OpAmp could be included after the 2nd OpAmp to add gain so that the pass band is not limited to 0 dB (or
1 V/V) like it is for passive RLC filters. Another important application for test and measurement equipment
where multiple OpAmps are used is the instrumentation amplifier shown in Figure A.5.

Figure A.4: 4th Butterworth LPF with a 3dB frequency at approximately 1 kHz.

Figure A.5: Instrumentation Amplifier - useful for test and measurement equipment.
101
Matlab Code for Figure 1.7

% Plotting a square wave and triangle wave from sinusoids
N = 10; % Number of sinusoidal terms
fo = 60; %Fundamental Frequency
T = 1/fo; %Period
A = 1; % Amplitude
Num_T = 3; %Number of periods to plot
Num_pts_per_period = 500; % # of points per period
tfinal = Num_T*T;
dt = T/Num_pts_per_period;
t = 0:dt:tfinal;
sq = 0*t;
tr=sq;
for j=1:N-1

       k = 2*j-1; %This is the harmonic for the square wave
       k_t = 2*(j-1)+1; %This is the harmonic for the triangle wave
       sq = sq+(A*4/pi)*sin(2*pi*fo*t*k)/k;
       tr = tr+(-1)^j*(A*8/pi^2)*sin(2*pi*fo*t*k_t)/(k_t^2);
end
% The plot is set up to manually change the last digit on the subplot...
% command to override the figure with a different number of terms.
subplot(2,2,1),
plot(t,sq,'k')
hold
plot(t,tr,'r')
hold off
grid on
title ('10 sinusoidal terms') % Change this to match N
axis([0,0.05,-1.2,1.2])

102
Diode Example Problems
    1) What is the current limit of the red and green LEDs that we use in the lab and the ones that are used in
         the example circuits in the Davis DC Circuits book? Put answer in mA. 20mA
    2) The assumed constant drop model forward bias voltage drops for different types of diodes are given in
         the diodes lab template. Which of the following is NOT CORRECT?
              a. 1N914 = 0.7V
              b. Red LED = 1.8V
              c. Green LED = 2.1V
              d. BAT85 = 0.7V
              e. 1N4007 = 0.7V
    3) If you use the assumed forward bias voltage drops for the constant drop model, what is the current
         flowing through a 1N914 switching diode if the anode is connected to a 9V battery and the cathode is
         connected to one leg of a 1 k resistor and the other leg of the resistor is connected to ground? Put
         answer in mA. (9-0.7)/1k = 8.3 mA
    4) If you put a square wave through a diode what type of current limit are you concerned with?
              a. Continuous
              b. DC
              c. Periodic
              d. Repetitive
    5) The following figure shows a sketch of what you might see on the scope if a square wave input (Vi) is
         connected to the anode of a diode and the output (Vo) is connected to the cathode of the diode. What
         is the section called that is labeled with a line with arrows on its tail and head? Hint: Your answer should
         include 3 words that are spelled correctly. Reverse Recovery Time

    6) How many diodes would you need if you were going to build an AND gate using diode logic? 2
    7) When using switches as inputs and the switch is open it is called floating. To avoid this you should

         always force the signal to either ground using a Pull-Down resistor or force the signal to the positive rail
         voltage using a Pull-Up resistor.

103
    8) This is a Zener regulator problem that is not covered in this book, but it is a very useful circuit. If Rd in
         the Zener regulator is 100 , what is the minimum value of RL where the circuit continues to regulate at
         approximately 9V? You can assume for this problem that the voltage across the Zener diode stays at 9V
         as long as current flows through it in the correct direction.

    If RL is infinity (or not present) you get the maximum possible
    current flowing through the Zener. Imax = (12 - 9)/100 = 30 mA.
    Notice the 100  resistor sets how much maximum current you
    have in the circuit. If the maximum current flowing in the circuit
    is 30 mA then the current through RL can't be greater than 30
    mA. The worst case (min. resistor) when IRL = 30 mA is when RL =
    9/30mA = 300 
    9) If the ripple voltage in the following circuit is 2V, what is the average (or DC) voltage? Assume the

         transformer is ideal. 14.57 V (see solution below)
    10) In the following circuit what resistance value would you need to get a ripple voltage of 2V? Assume the

         transformer is ideal. 648.8  (see solution below)

    Answers to problems 9 and 10
     Vs = peak input voltage = 1202/10= 16.97 V
     Vo,pk = peak output voltage = Vs - 2  0.7V = 15.57 V
     Vr = ripple voltage (Vo,pk - minimum Vout) = , = 15.57 = 2V  Given

                                                                                          2 260.100

     VO,DC = the approximate DC voltage of the output (centerline of the ripple). is equal to 15.57 - 0.5  Vr =
         14.57 V.

    11) If you connect a battery, resistor, and LED in series it is good idea to connect the anode of the LED to
         ground if you want it to light up. FALSE - It should be cathode (that is the negative side). Current flows
         through the diode from anode to cathode. Note: Zener diodes allow current to flow in both directions.

    12) The term "test impedance" in a zener diode datasheet can be used to help you figure out the slope in
         the zener region of the zener diode characteristic curve. True - See page 2 of the Zener diode notes.
         Test impedance = ZZ and the slope of the Zener region is = 1/ZZ We often treat the Zener region like
         we treat the forward bias region in the constant drop model and just assume the Zener voltage is
         equal to a constant voltage (For a Zener this is the test voltage, VT) and accept that it will be slightly
         wrong because the voltage changes slightly as the current changes (according to the slope, 1/ZZ).

104
     13) True or False: In a half wave rectifier circuit (like the one shown in the figure below) the negative peaks
         can be passed through instead of the positive peaks by simple reversing the diode direction. TRUE

     14) To measure the voltage across the resistor in a Full wave bridge rectifier with a oscilloscope that doesn't
         have differential probes you need to put two probes on the two sides of the resistor, connect the
         ground clips to ground, and us the Math Function A + B. FALSE - You should use the A-B function.

     15) DC Diode Biasing Problem. I am giving you some information to make this problem faster to solve. If it is
         known that the following circuit has a XMM3 reading of 190.9 mA and a XMM4 reading of 181.8 mA.
         Show the diode current and voltage for each of the diodes and verify forward or reverse bias.

     Assume D1 is reverse biased & D2 and D3 are forward biased.

     Use the Mesh matrix method to solve for I1 and I2 (see Module 2 of DC Circuits for help on this).

     | 1+2+3  - 3 | | I1 | = | - 0.7 |
     | -3     3 + 4 | | I2 | | + 0.7 |

     I1 = ID2 = 0.1909 A and I2 = 0.1818 A  ID3 = I1 - I2 = 0.0091A
     Both ID2 and ID3 have currents flowing from anode to cathode, so forward bias checks out.

     D1 - Check for Reverse Bias
     KVL around 1st loop: -2 + 1 * 0.1909 = - 1.81 V
     Since VD1 is less than 0.7V, reverse bias checks out.

105
    16) If you built a Full-Wave Bridge rectifier (without using a transformer) with a 1 k resistor and a 4.7 킚
         capacitor to convert an AC input voltage of 30 Volts peak to peak at 1kHz to a DC voltage what
         approximate DC voltage (using the DC voltage equation in the notes) would you get across the load
         resistor? Also, determine the Peak Revers Voltage (or Peak Inverse Voltage) across each of the 4 diodes
         in this circuit.
           RL = 1 k C = 4.7  10-6 F F = 1 kHz
           Vs,pk = 15 Vpk
           Vo,pk = 15 - 2  0.7 = 13.6 V
           Vr = Vo,pk/(2FRC) = 13.6/(2  1000  1000  4.7  10-6) = 1.45 V
           VO,DC = Vo,pk -   Vr = 13.6 - 1.45/2 = 12.88 V

106
OpAmp Example Problems

    1) Design an OpAmp circuit with an adjustable gain using only a 10k potentiometer, a 1 k fixed resistor,
         and one other fixed resistor. The input voltage is a 1V peak sinusoid (Vi(t) = 1sin(t)) and the output
         ranges from 5V peak to 15V peak (Vo(t) = 5sin(t) to 15sin(t)). Draw the circuit in the space below
         and list the value of the "one other fixed resistor".

     It must be a non-inverting configuration OpAmp circuit with the resistor equal to 4 k

         R3                         V: 5.00 V          R3                         V: 15.0 V
                                    V(p-p): 0 V                                   V(p-p): 1.57
         10k 0 %                    V(rms): 0 V        10k 100 %                  V(rms): 0 V
                                    V(dc): 5.00 V                                 V(dc): 15.0 V
         Key=A           R2         V(freq): --        Key=A                      V(freq): --

                                  V PR1                                R2       V PR1

                         4k                                            4k

                V3                                            V3
                16V                                           16V

     R1              U3                            R1              U3

     1k                                            1k

         Vin OPAMP_5T_VIRTUAL                          Vin OPAMP_5T_VIRTUAL
         1V V5                                         1V V5

                             16V                                           16V

     2) If you wanted to achieve a gain of 8 V/V gain and the OpAmp has a unity gain bandwidth of 1MHz and
         your input voltage to the OpAmp is Vi(t) = 2sin(210,000t) what resistor ratio R2/R1 would you use.
         You also want the output in phase with the input. R2/R1 = 7.7

         Find Ao first. Ao = Ft/Fop = 1M/10k = 100 V/V (If you get this you get 1 point.

         8 = [1 + R2/R1]/[(1+(1 + R2/R1)/Ao)]

         8(1+(1 + R2/R1)/100) = 1 + R2/R1  8 + .08 + .08(R2/R1) = 1 + R2/R1  7.08 = 0.92 R2/R1

         R2/R1 = 7.7

     3) If the unity gain bandwidth of the OpAmp in the following circuit is 1 MHz and Vi = 0.5sin(250,000 t),
         what is the peak to peak output voltage? Be careful on peak voltage versus peak to peak voltage! Since
         the input frequency is high you CANNOT assume it is ideal.

                                  Vi,pk = 0.5. Vi,p-p = 1V
                                  Ao = ft/fop = 1M/50k = 20 V/V
                                  Vo,p-p = Vi,p-p *|(-R2/R1)/[1+ (1 + R2/R1)/Ao]|
                                  Vo,p-p = 1 * |(-10)/[1+ (1 + 10)/20] | = 6.45 Vp-p
                                  Note: if the ideal assumption would have been made
                                  the output would have been way off  1*10 = 10Vp-p

107
    4) If the potentiometer in the circuit below is turned to ZERO % so that no potentiometer resistance is in
         the circuit, what will the voltage across RL be equal to?
                                                                            Non-inverting OpAmp
                                                                            Vo = 1*(1+R2/R1) = 1*(1+4) = 5V

    5) Assuming the following OpAmp can be treated as ideal, what size of potentiometer would be needed for
         the value of PR1 in the circuit below to read 5.5V. Note: 50% means that one half of the total
         potentiometer resistance is in the circuit.
                                                                            Non-inverting OpAmp
                                                                            Vo = 5.5 = 1*(1+R2/R1) = 1*1+(4k+0.5Rx)/1k
                                                                            Solving for Rx  Rx = 1k

    6) If a Butterworth low pass Active OpAmp filter had a passband gain of 200 V/V what is that gain in dB?
         20*log10(200) = 46 dB

108
